var ni=Object.defineProperty;var ii=(t,e,n)=>e in t?ni(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>(ii(t,typeof e!="symbol"?e+"":e,n),n),je=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var E=(t,e,n)=>(je(t,e,"read from private field"),n?n.call(t):e.get(t)),ht=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},wt=(t,e,n,i)=>(je(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var _e=(t,e,n,i)=>({set _(s){wt(t,e,s,n)},get _(){return E(t,e,i)}}),bt=(t,e,n)=>(je(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isDate=t=>toTypeString(t)==="[object Date]",isFunction$1=t=>typeof t=="function",isString$1=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$1(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},def=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=isString$1(i)?parseStringStyle(i):normalizeStyle(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(isString$1(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const i=n.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$1(t))e=t;else if(isArray(t))for(let n=0;n<t.length;n++){const i=normalizeClass(t[n]);i&&(e+=i+" ")}else if(isObject(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=looseEqual(t[i],e[i]);return n}function looseEqual(t,e){if(t===e)return!0;let n=isDate(t),i=isDate(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=isSymbol(t),i=isSymbol(e),n||i)return t===e;if(n=isArray(t),i=isArray(e),n||i)return n&&i?looseCompareArrays(t,e):!1;if(n=isObject(t),i=isObject(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const a in t){const h=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(h&&!c||!h&&c||!looseEqual(t[a],e[a]))return!1}}return String(t)===String(e)}function looseIndexOf(t,e){return t.findIndex(n=>looseEqual(n,e))}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString$1(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[stringifySymbol(i,r)+" =>"]=s,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var n;return isSymbol(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,n=t.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),removeSub(i),removeDep(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=n}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,n=activeSub,i=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const s=t.fn(t._value);(e.version===0||hasChanged(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{activeSub=n,shouldTrack=i,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:n,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)removeSub(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=i)}return n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)addSub(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,n){if(shouldTrack&&activeSub){let i=targetMap.get(t);i||targetMap.set(t,i=new Map);let s=i.get(n);s||(i.set(n,s=new Dep),s.map=i,s.key=n),s.track()}}function trigger(t,e,n,i,s,r){const a=targetMap.get(t);if(!a){globalVersion++;return}const h=c=>{c&&c.trigger()};if(startBatch(),e==="clear")a.forEach(h);else{const c=isArray(t),u=c&&isIntegerKey(n);if(c&&n==="length"){const l=Number(i);a.forEach((_,w)=>{(w==="length"||w===ARRAY_ITERATE_KEY||!isSymbol(w)&&w>=l)&&h(_)})}else switch((n!==void 0||a.has(void 0))&&h(a.get(n)),u&&h(a.get(ARRAY_ITERATE_KEY)),e){case"add":c?u&&h(a.get("length")):(h(a.get(ITERATE_KEY)),isMap(t)&&h(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":c||(h(a.get(ITERATE_KEY)),isMap(t)&&h(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&h(a.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toReactive(t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,n=>n.map(toReactive),arguments)},find(t,e){return apply(this,"find",t,e,toReactive,arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,toReactive,arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",toReactive)}};function iterator(t,e,n){const i=shallowReadArray(t),s=i[e]();return i!==t&&!isShallow(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const arrayProto=Array.prototype;function apply(t,e,n,i,s,r){const a=shallowReadArray(t),h=a!==t&&!isShallow(t),c=a[e];if(c!==arrayProto[e]){const _=c.apply(t,r);return h?toReactive(_):_}let u=n;a!==t&&(h?u=function(_,w){return n.call(this,toReactive(_),w,t)}:n.length>2&&(u=function(_,w){return n.call(this,_,w,t)}));const l=c.call(a,u,i);return h&&s?s(l):l}function reduce(t,e,n,i){const s=shallowReadArray(t);let r=n;return s!==t&&(isShallow(t)?n.length>3&&(r=function(a,h,c){return n.call(this,a,h,c,t)}):r=function(a,h,c){return n.call(this,a,toReactive(h),c,t)}),s[e](r,...i)}function searchProxy(t,e,n){const i=toRaw(t);track(i,"iterate",ARRAY_ITERATE_KEY);const s=i[e](...n);return(s===-1||s===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),i[e](...n)):s}function noTracking(t,e,n=[]){pauseTracking(),startBatch();const i=toRaw(t)[e].apply(t,n);return endBatch(),resetTracking(),i}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=isArray(e);if(!s){let c;if(a&&(c=arrayInstrumentations[n]))return c;if(n==="hasOwnProperty")return hasOwnProperty}const h=Reflect.get(e,n,isRef(e)?e:i);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(s||track(e,"get",n),r)?h:isRef(h)?a&&isIntegerKey(n)?h:h.value:isObject(h)?s?readonly(h):reactive(h):h}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const c=isReadonly(r);if(!isShallow(i)&&!isReadonly(i)&&(r=toRaw(r),i=toRaw(i)),!isArray(e)&&isRef(r)&&!isRef(i))return c?!1:(r.value=i,!0)}const a=isArray(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn(e,n),h=Reflect.set(e,n,i,isRef(e)?e:s);return e===toRaw(s)&&(a?hasChanged(i,r)&&trigger(e,"set",n,i):trigger(e,"add",n,i)),h}deleteProperty(e,n){const i=hasOwn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&trigger(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),i}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,n){return function(...i){const s=this.__v_raw,r=toRaw(s),a=isMap(r),h=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,u=s[t](...i),l=n?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:_,done:w}=u.next();return w?{value:_,done:w}:{value:h?[l(_[0]),l(_[1])]:l(_),done:w}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const n={get(s){const r=this.__v_raw,a=toRaw(r),h=toRaw(s);t||(hasChanged(s,h)&&track(a,"get",s),track(a,"get",h));const{has:c}=getProto(a),u=e?toShallow:t?toReadonly:toReactive;if(c.call(a,s))return u(r.get(s));if(c.call(a,h))return u(r.get(h));r!==a&&r.get(s)},get size(){const s=this.__v_raw;return!t&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,a=toRaw(r),h=toRaw(s);return t||(hasChanged(s,h)&&track(a,"has",s),track(a,"has",h)),s===h?r.has(s):r.has(s)||r.has(h)},forEach(s,r){const a=this,h=a.__v_raw,c=toRaw(h),u=e?toShallow:t?toReadonly:toReactive;return!t&&track(c,"iterate",ITERATE_KEY),h.forEach((l,_)=>s.call(r,u(l),u(_),a))}};return extend(n,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(s){!e&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const r=toRaw(this);return getProto(r).has.call(r,s)||(r.add(s),trigger(r,"add",s,s)),this},set(s,r){!e&&!isShallow(r)&&!isReadonly(r)&&(r=toRaw(r));const a=toRaw(this),{has:h,get:c}=getProto(a);let u=h.call(a,s);u||(s=toRaw(s),u=h.call(a,s));const l=c.call(a,s);return a.set(s,r),u?hasChanged(r,l)&&trigger(a,"set",s,r):trigger(a,"add",s,r),this},delete(s){const r=toRaw(this),{has:a,get:h}=getProto(r);let c=a.call(r,s);c||(s=toRaw(s),c=a.call(r,s)),h&&h.call(r,s);const u=r.delete(s);return c&&trigger(r,"delete",s,void 0),u},clear(){const s=toRaw(this),r=s.size!==0,a=s.clear();return r&&trigger(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,t,e)}),n}function createInstrumentationGetter(t,e){const n=createInstrumentations(t,e);return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(hasOwn(n,s)&&s in i?n:i,s,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,n,i,s){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=getTargetType(t);if(r===0)return t;const a=s.get(t);if(a)return a;const h=new Proxy(t,r===2?i:n);return s.set(t,h),h}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||isShallow(e)||isReadonly(e);e=i?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=i?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>e==="__v_raw"?t:unref(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,n=!1){let i,s;return isFunction$1(t)?i=t:(i=t.get,s=t.set),new ComputedRefImpl(i,s,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,n=activeWatcher){if(n){let i=cleanupMap.get(n);i||cleanupMap.set(n,i=[]),i.push(t)}}function watch$1(t,e,n=EMPTY_OBJ){const{immediate:i,deep:s,once:r,scheduler:a,augmentJob:h,call:c}=n,u=R=>s?R:isShallow(R)||s===!1||s===0?traverse(R,1):traverse(R);let l,_,w,d,S=!1,f=!1;if(isRef(t)?(_=()=>t.value,S=isShallow(t)):isReactive(t)?(_=()=>u(t),S=!0):isArray(t)?(f=!0,S=t.some(R=>isReactive(R)||isShallow(R)),_=()=>t.map(R=>{if(isRef(R))return R.value;if(isReactive(R))return u(R);if(isFunction$1(R))return c?c(R,2):R()})):isFunction$1(t)?e?_=c?()=>c(t,2):t:_=()=>{if(w){pauseTracking();try{w()}finally{resetTracking()}}const R=activeWatcher;activeWatcher=l;try{return c?c(t,3,[d]):t(d)}finally{activeWatcher=R}}:_=NOOP,e&&s){const R=_,A=s===!0?1/0:s;_=()=>traverse(R(),A)}const b=getCurrentScope(),m=()=>{l.stop(),b&&b.active&&remove(b.effects,l)};if(r&&e){const R=e;e=(...A)=>{R(...A),m()}}let k=f?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=R=>{if(!(!(l.flags&1)||!l.dirty&&!R))if(e){const A=l.run();if(s||S||(f?A.some((F,U)=>hasChanged(F,k[U])):hasChanged(A,k))){w&&w();const F=activeWatcher;activeWatcher=l;try{const U=[A,k===INITIAL_WATCHER_VALUE?void 0:f&&k[0]===INITIAL_WATCHER_VALUE?[]:k,d];k=A,c?c(e,3,U):e(...U)}finally{activeWatcher=F}}}else l.run()};return h&&h(P),l=new ReactiveEffect(_),l.scheduler=a?()=>a(P,!1):P,d=R=>onWatcherCleanup(R,!1,l),w=l.onStop=()=>{const R=cleanupMap.get(l);if(R){if(c)c(R,4);else for(const A of R)A();cleanupMap.delete(l)}},e?i?P(!0):k=l.run():a?a(P.bind(null,!0),!0):l.run(),m.pause=l.pause.bind(l),m.resume=l.resume.bind(l),m.stop=m,m}function traverse(t,e=1/0,n){if(e<=0||!isObject(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,isRef(t))traverse(t.value,e,n);else if(isArray(t))for(let i=0;i<t.length;i++)traverse(t[i],e,n);else if(isSet(t)||isMap(t))t.forEach(i=>{traverse(i,e,n)});else if(isPlainObject(t)){for(const i in t)traverse(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&traverse(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,i=n&&n.appContext.config.warnHandler,s=getComponentTrace();if(i)callWithErrorHandling(i,n,11,[t+e.map(r=>{var a,h;return(h=(a=r.toString)==null?void 0:a.call(r))!=null?h:JSON.stringify(r)}).join(""),n&&n.proxy,s.map(({vnode:r})=>`at <${formatComponentName(n,r.type)}>`).join(`
`),s]);else{const r=[`[Vue warn]: ${t}`,...e];s.length&&r.push(`
`,...formatTrace(s)),console.warn(...r)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const i=t.component&&t.component.parent;t=i&&i.vnode}return e}function formatTrace(t){const e=[];return t.forEach((n,i)=>{e.push(...i===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",i=t.component?t.component.parent==null:!1,s=` at <${formatComponentName(t.component,t.type,i)}`,r=">"+n;return t.props?[s,...formatProps(t.props),r]:[s+r]}function formatProps(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(i=>{e.push(...formatProp(i,t[i]))}),n.length>3&&e.push(" ..."),e}function formatProp(t,e,n){return isString$1(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):isFunction$1(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${t}=`,e])}function callWithErrorHandling(t,e,n,i){try{return i?t(...i):t()}catch(s){handleError(s,e,n)}}function callWithAsyncErrorHandling(t,e,n,i){if(isFunction$1(t)){const s=callWithErrorHandling(t,e,n,i);return s&&isPromise(s)&&s.catch(r=>{handleError(r,e,n)}),s}if(isArray(t)){const s=[];for(let r=0;r<t.length;r++)s.push(callWithAsyncErrorHandling(t[r],e,n,i));return s}}function handleError(t,e,n,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||EMPTY_OBJ;if(e){let h=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const l=h.ec;if(l){for(let _=0;_<l.length;_++)if(l[_](t,c,u)===!1)return}h=h.parent}if(r){pauseTracking(),callWithErrorHandling(r,null,10,[t,c,u]),resetTracking();return}}logError(t,n,s,i,a)}function logError(t,e,n,i=!0,s=!1){if(s)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const i=e+n>>>1,s=queue[i],r=getId(s);r<t||r===t&&s.flags&2?e=i+1:n=i}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),n=queue[queue.length-1];!n||!(t.flags&2)&&e>=getId(n)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,n=flushIndex+1){for(;n<queue.length;n++){const i=queue[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;queue.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,i)=>getId(n)-getId(i));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),callWithErrorHandling(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&(n.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let a;try{a=t(...s)}finally{setCurrentRenderingInstance(r),i._d&&setBlockTracking(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const n=getComponentPublicInstance(currentRenderingInstance),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,a,h,c=EMPTY_OBJ]=e[s];r&&(isFunction$1(r)&&(r={mounted:r,updated:r}),r.deep&&traverse(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:h,modifiers:c}))}return t}function invokeDirectiveHook(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let a=0;a<s.length;a++){const h=s[a];r&&(h.oldValue=r[a].value);let c=h.dir[i];c&&(pauseTracking(),callWithAsyncErrorHandling(c,n,8,[t.el,h,t,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport;function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,e){return isFunction$1(t)?(()=>extend({name:t.name},e,{setup:t}))():t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function setRef(t,e,n,i,s=!1){if(isArray(t)){t.forEach((S,f)=>setRef(S,e&&(isArray(e)?e[f]:e),n,i,s));return}if(isAsyncWrapper(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&setRef(t,e,n,i.component.subTree);return}const r=i.shapeFlag&4?getComponentPublicInstance(i.component):i.el,a=s?null:r,{i:h,r:c}=t,u=e&&e.r,l=h.refs===EMPTY_OBJ?h.refs={}:h.refs,_=h.setupState,w=toRaw(_),d=_===EMPTY_OBJ?()=>!1:S=>hasOwn(w,S);if(u!=null&&u!==c&&(isString$1(u)?(l[u]=null,d(u)&&(_[u]=null)):isRef(u)&&(u.value=null)),isFunction$1(c))callWithErrorHandling(c,h,12,[a,l]);else{const S=isString$1(c),f=isRef(c);if(S||f){const b=()=>{if(t.f){const m=S?d(c)?_[c]:l[c]:c.value;s?isArray(m)&&remove(m,r):isArray(m)?m.includes(r)||m.push(r):S?(l[c]=[r],d(c)&&(_[c]=l[c])):(c.value=[r],t.k&&(l[t.k]=c.value))}else S?(l[c]=a,d(c)&&(_[c]=a)):f&&(c.value=a,t.k&&(l[t.k]=a))};a?(b.id=-1,queuePostRenderEffect(b,n)):b()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(injectHook(e,i,n),n){let s=n.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(i,e,n,s),s=s.parent}}function injectToKeepAliveRoot(t,e,n,i){const s=injectHook(e,t,i,!0);onUnmounted(()=>{remove(i[e],s)},n)}function injectHook(t,e,n=currentInstance,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...a)=>{pauseTracking();const h=setCurrentInstance(n),c=callWithAsyncErrorHandling(e,n,t,a);return h(),resetTracking(),c});return i?s.unshift(r):s.push(r),r}}const createHook=t=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...i)=>e(...i),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,n,i){let s;const r=n&&n[i],a=isArray(t);if(a||isString$1(t)){const h=a&&isReactive(t);let c=!1,u=!1;h&&(c=!isShallow(t),u=isReadonly(t),t=shallowReadArray(t)),s=new Array(t.length);for(let l=0,_=t.length;l<_;l++)s[l]=e(c?u?toReadonly(toReactive(t[l])):toReactive(t[l]):t[l],l,void 0,r&&r[l])}else if(typeof t=="number"){s=new Array(t);for(let h=0;h<t;h++)s[h]=e(h+1,h,void 0,r&&r[h])}else if(isObject(t))if(t[Symbol.iterator])s=Array.from(t,(h,c)=>e(h,c,void 0,r&&r[c]));else{const h=Object.keys(t);s=new Array(h.length);for(let c=0,u=h.length;c<u;c++){const l=h[c];s[c]=e(t[l],l,c,r&&r[c])}}else s=[];return n&&(n[i]=s),s}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:a,type:h,appContext:c}=t;let u;if(e[0]!=="$"){const d=a[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(hasSetupBinding(i,e))return a[e]=1,i[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return a[e]=2,s[e];if((u=t.propsOptions[0])&&hasOwn(u,e))return a[e]=3,r[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];shouldCacheAccess&&(a[e]=0)}}const l=publicPropertiesMap[e];let _,w;if(l)return e==="$attrs"&&track(t.attrs,"get",""),l(t);if((_=h.__cssModules)&&(_=_[e]))return _;if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];if(w=c.config.globalProperties,hasOwn(w,e))return w[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return hasSetupBinding(s,e)?(s[e]=n,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},a){let h;return!!n[a]||t!==EMPTY_OBJ&&hasOwn(t,a)||hasSetupBinding(e,a)||(h=r[0])&&hasOwn(h,a)||hasOwn(i,a)||hasOwn(publicPropertiesMap,a)||hasOwn(s.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,i=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:a,watch:h,provide:c,inject:u,created:l,beforeMount:_,mounted:w,beforeUpdate:d,updated:S,activated:f,deactivated:b,beforeDestroy:m,beforeUnmount:k,destroyed:P,unmounted:R,render:A,renderTracked:F,renderTriggered:U,errorCaptured:M,serverPrefetch:x,expose:$,inheritAttrs:H,components:N,directives:X,filters:g}=e;if(u&&resolveInjections(u,i,null),a)for(const at in a){const st=a[at];isFunction$1(st)&&(i[at]=st.bind(n))}if(s){const at=s.call(n,n);isObject(at)&&(t.data=reactive(at))}if(shouldCacheAccess=!0,r)for(const at in r){const st=r[at],dt=isFunction$1(st)?st.bind(n,n):isFunction$1(st.get)?st.get.bind(n,n):NOOP,St=!isFunction$1(st)&&isFunction$1(st.set)?st.set.bind(n):NOOP,ut=computed({get:dt,set:St});Object.defineProperty(i,at,{enumerable:!0,configurable:!0,get:()=>ut.value,set:Y=>ut.value=Y})}if(h)for(const at in h)createWatcher(h[at],i,n,at);if(c){const at=isFunction$1(c)?c.call(n):c;Reflect.ownKeys(at).forEach(st=>{provide(st,at[st])})}l&&callHook(l,t,"c");function ft(at,st){isArray(st)?st.forEach(dt=>at(dt.bind(n))):st&&at(st.bind(n))}if(ft(onBeforeMount,_),ft(onMounted,w),ft(onBeforeUpdate,d),ft(onUpdated,S),ft(onActivated,f),ft(onDeactivated,b),ft(onErrorCaptured,M),ft(onRenderTracked,F),ft(onRenderTriggered,U),ft(onBeforeUnmount,k),ft(onUnmounted,R),ft(onServerPrefetch,x),isArray($))if($.length){const at=t.exposed||(t.exposed={});$.forEach(st=>{Object.defineProperty(at,st,{get:()=>n[st],set:dt=>n[st]=dt})})}else t.exposed||(t.exposed={});A&&t.render===NOOP&&(t.render=A),H!=null&&(t.inheritAttrs=H),N&&(t.components=N),X&&(t.directives=X),x&&markAsyncBoundary(t)}function resolveInjections(t,e,n=NOOP){isArray(t)&&(t=normalizeInject(t));for(const i in t){const s=t[i];let r;isObject(s)?"default"in s?r=inject(s.from||i,s.default,!0):r=inject(s.from||i):r=inject(s),isRef(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[i]=r}}function callHook(t,e,n){callWithAsyncErrorHandling(isArray(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,i){let s=i.includes(".")?createPathGetter(n,i):()=>n[i];if(isString$1(t)){const r=e[t];isFunction$1(r)&&watch(s,r)}else if(isFunction$1(t))watch(s,t.bind(n));else if(isObject(t))if(isArray(t))t.forEach(r=>createWatcher(r,e,n,i));else{const r=isFunction$1(t.handler)?t.handler.bind(n):e[t.handler];isFunction$1(r)&&watch(s,r,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,h=r.get(e);let c;return h?c=h:!s.length&&!n&&!i?c=e:(c={},s.length&&s.forEach(u=>mergeOptions(c,u,a,!0)),mergeOptions(c,e,a)),isObject(e)&&r.set(e,c),c}function mergeOptions(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&mergeOptions(t,r,n,!0),s&&s.forEach(a=>mergeOptions(t,a,n,!0));for(const a in e)if(!(i&&a==="expose")){const h=internalOptionMergeStrats[a]||n&&n[a];t[a]=h?h(t[a],e[a]):e[a]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend(Object.create(null),t);for(const i in e)n[i]=mergeAsArray(t[i],e[i]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(i,s=null){isFunction$1(i)||(i=extend({},i)),s!=null&&!isObject(s)&&(s=null);const r=createAppContext(),a=new WeakSet,h=[];let c=!1;const u=r.app={_uid:uid$1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(l){},use(l,..._){return a.has(l)||(l&&isFunction$1(l.install)?(a.add(l),l.install(u,..._)):isFunction$1(l)&&(a.add(l),l(u,..._))),u},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),u},component(l,_){return _?(r.components[l]=_,u):r.components[l]},directive(l,_){return _?(r.directives[l]=_,u):r.directives[l]},mount(l,_,w){if(!c){const d=u._ceVNode||createVNode(i,s);return d.appContext=r,w===!0?w="svg":w===!1&&(w=void 0),_&&e?e(d,l):t(d,l,w),c=!0,u._container=l,l.__vue_app__=u,getComponentPublicInstance(d.component)}},onUnmount(l){h.push(l)},unmount(){c&&(callWithAsyncErrorHandling(h,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,_){return r.provides[l]=_,u},runWithContext(l){const _=currentApp;currentApp=u;try{return l()}finally{currentApp=_}}};return u}}let currentApp=null;function provide(t,e){if(currentInstance){let n=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===n&&(n=currentInstance.provides=Object.create(i)),n[t]=e}}function inject(t,e,n=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){let s=currentApp?currentApp._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&isFunction$1(e)?e.call(i&&i.proxy):e}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,n,i=!1){const s={},r=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,s,r);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);n?t.props=i?s:shallowReactive(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function updateProps(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:a}}=t,h=toRaw(s),[c]=t.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const l=t.vnode.dynamicProps;for(let _=0;_<l.length;_++){let w=l[_];if(isEmitListener(t.emitsOptions,w))continue;const d=e[w];if(c)if(hasOwn(r,w))d!==r[w]&&(r[w]=d,u=!0);else{const S=camelize(w);s[S]=resolvePropValue(c,h,S,d,t,!1)}else d!==r[w]&&(r[w]=d,u=!0)}}}else{setFullProps(t,e,s,r)&&(u=!0);let l;for(const _ in h)(!e||!hasOwn(e,_)&&((l=hyphenate(_))===_||!hasOwn(e,l)))&&(c?n&&(n[_]!==void 0||n[l]!==void 0)&&(s[_]=resolvePropValue(c,h,_,void 0,t,!0)):delete s[_]);if(r!==h)for(const _ in r)(!e||!hasOwn(e,_))&&(delete r[_],u=!0)}u&&trigger(t.attrs,"set","")}function setFullProps(t,e,n,i){const[s,r]=t.propsOptions;let a=!1,h;if(e)for(let c in e){if(isReservedProp(c))continue;const u=e[c];let l;s&&hasOwn(s,l=camelize(c))?!r||!r.includes(l)?n[l]=u:(h||(h={}))[l]=u:isEmitListener(t.emitsOptions,c)||(!(c in i)||u!==i[c])&&(i[c]=u,a=!0)}if(r){const c=toRaw(n),u=h||EMPTY_OBJ;for(let l=0;l<r.length;l++){const _=r[l];n[_]=resolvePropValue(s,c,_,u[_],t,!hasOwn(u,_))}}return a}function resolvePropValue(t,e,n,i,s,r){const a=t[n];if(a!=null){const h=hasOwn(a,"default");if(h&&i===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction$1(c)){const{propsDefaults:u}=s;if(n in u)i=u[n];else{const l=setCurrentInstance(s);i=u[n]=c.call(null,e),l()}}else i=c;s.ce&&s.ce._setProp(n,i)}a[0]&&(r&&!h?i=!1:a[1]&&(i===""||i===hyphenate(n))&&(i=!0))}return i}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,n=!1){const i=n?mixinPropsCache:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,a={},h=[];let c=!1;if(!isFunction$1(t)){const l=_=>{c=!0;const[w,d]=normalizePropsOptions(_,e,!0);extend(a,w),d&&h.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!r&&!c)return isObject(t)&&i.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(r))for(let l=0;l<r.length;l++){const _=camelize(r[l]);validatePropName(_)&&(a[_]=EMPTY_OBJ)}else if(r)for(const l in r){const _=camelize(l);if(validatePropName(_)){const w=r[l],d=a[_]=isArray(w)||isFunction$1(w)?{type:w}:extend({},w),S=d.type;let f=!1,b=!0;if(isArray(S))for(let m=0;m<S.length;++m){const k=S[m],P=isFunction$1(k)&&k.name;if(P==="Boolean"){f=!0;break}else P==="String"&&(b=!1)}else f=isFunction$1(S)&&S.name==="Boolean";d[0]=f,d[1]=b,(f||hasOwn(d,"default"))&&h.push(_)}}const u=[a,h];return isObject(t)&&i.set(t,u),u}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,n)=>{if(e._n)return e;const i=withCtx((...s)=>normalizeSlotValue(e(...s)),n);return i._c=!1,i},normalizeObjectSlots=(t,e,n)=>{const i=t._ctx;for(const s in t){if(isInternalKey(s))continue;const r=t[s];if(isFunction$1(r))e[s]=normalizeSlot(s,r,i);else if(r!=null){const a=normalizeSlotValue(r);e[s]=()=>a}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},assignSlots=(t,e,n)=>{for(const i in e)(n||!isInternalKey(i))&&(t[i]=e[i])},initSlots=(t,e,n)=>{const i=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const s=e._;s?(assignSlots(i,e,n),n&&def(i,"_",s,!0)):normalizeObjectSlots(e,i)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,a=EMPTY_OBJ;if(i.shapeFlag&32){const h=e._;h?n&&h===1?r=!1:assignSlots(s,e,n):(r=!e.$stable,normalizeObjectSlots(e,s)),a=e}else e&&(normalizeVNodeSlots(t,e),a={default:1});if(r)for(const h in s)!isInternalKey(h)&&a[h]==null&&delete s[h]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:a,createText:h,createComment:c,setText:u,setElementText:l,parentNode:_,nextSibling:w,setScopeId:d=NOOP,insertStaticContent:S}=t,f=(j,o,z,G=null,O=null,L=null,K=void 0,nt=null,ct=!!o.dynamicChildren)=>{if(j===o)return;j&&!isSameVNodeType(j,o)&&(G=I(j),Y(j,O,L,!0),j=null),o.patchFlag===-2&&(ct=!1,o.dynamicChildren=null);const{type:V,ref:J,shapeFlag:Z}=o;switch(V){case Text:b(j,o,z,G);break;case Comment:m(j,o,z,G);break;case Static:j==null&&k(o,z,G,K);break;case Fragment:N(j,o,z,G,O,L,K,nt,ct);break;default:Z&1?A(j,o,z,G,O,L,K,nt,ct):Z&6?X(j,o,z,G,O,L,K,nt,ct):(Z&64||Z&128)&&V.process(j,o,z,G,O,L,K,nt,ct,Q)}J!=null&&O&&setRef(J,j&&j.ref,L,o||j,!o)},b=(j,o,z,G)=>{if(j==null)i(o.el=h(o.children),z,G);else{const O=o.el=j.el;o.children!==j.children&&u(O,o.children)}},m=(j,o,z,G)=>{j==null?i(o.el=c(o.children||""),z,G):o.el=j.el},k=(j,o,z,G)=>{[j.el,j.anchor]=S(j.children,o,z,G,j.el,j.anchor)},P=({el:j,anchor:o},z,G)=>{let O;for(;j&&j!==o;)O=w(j),i(j,z,G),j=O;i(o,z,G)},R=({el:j,anchor:o})=>{let z;for(;j&&j!==o;)z=w(j),s(j),j=z;s(o)},A=(j,o,z,G,O,L,K,nt,ct)=>{o.type==="svg"?K="svg":o.type==="math"&&(K="mathml"),j==null?F(o,z,G,O,L,K,nt,ct):x(j,o,O,L,K,nt,ct)},F=(j,o,z,G,O,L,K,nt)=>{let ct,V;const{props:J,shapeFlag:Z,transition:rt,dirs:vt}=j;if(ct=j.el=a(j.type,L,J&&J.is,J),Z&8?l(ct,j.children):Z&16&&M(j.children,ct,null,G,O,resolveChildrenNamespace(j,L),K,nt),vt&&invokeDirectiveHook(j,null,G,"created"),U(ct,j,j.scopeId,K,G),J){for(const Tt in J)Tt!=="value"&&!isReservedProp(Tt)&&r(ct,Tt,null,J[Tt],L,G);"value"in J&&r(ct,"value",null,J.value,L),(V=J.onVnodeBeforeMount)&&invokeVNodeHook(V,G,j)}vt&&invokeDirectiveHook(j,null,G,"beforeMount");const Ct=needTransition(O,rt);Ct&&rt.beforeEnter(ct),i(ct,o,z),((V=J&&J.onVnodeMounted)||Ct||vt)&&queuePostRenderEffect(()=>{V&&invokeVNodeHook(V,G,j),Ct&&rt.enter(ct),vt&&invokeDirectiveHook(j,null,G,"mounted")},O)},U=(j,o,z,G,O)=>{if(z&&d(j,z),G)for(let L=0;L<G.length;L++)d(j,G[L]);if(O){let L=O.subTree;if(o===L||isSuspense(L.type)&&(L.ssContent===o||L.ssFallback===o)){const K=O.vnode;U(j,K,K.scopeId,K.slotScopeIds,O.parent)}}},M=(j,o,z,G,O,L,K,nt,ct=0)=>{for(let V=ct;V<j.length;V++){const J=j[V]=nt?cloneIfMounted(j[V]):normalizeVNode(j[V]);f(null,J,o,z,G,O,L,K,nt)}},x=(j,o,z,G,O,L,K)=>{const nt=o.el=j.el;let{patchFlag:ct,dynamicChildren:V,dirs:J}=o;ct|=j.patchFlag&16;const Z=j.props||EMPTY_OBJ,rt=o.props||EMPTY_OBJ;let vt;if(z&&toggleRecurse(z,!1),(vt=rt.onVnodeBeforeUpdate)&&invokeVNodeHook(vt,z,o,j),J&&invokeDirectiveHook(o,j,z,"beforeUpdate"),z&&toggleRecurse(z,!0),(Z.innerHTML&&rt.innerHTML==null||Z.textContent&&rt.textContent==null)&&l(nt,""),V?$(j.dynamicChildren,V,nt,z,G,resolveChildrenNamespace(o,O),L):K||st(j,o,nt,null,z,G,resolveChildrenNamespace(o,O),L,!1),ct>0){if(ct&16)H(nt,Z,rt,z,O);else if(ct&2&&Z.class!==rt.class&&r(nt,"class",null,rt.class,O),ct&4&&r(nt,"style",Z.style,rt.style,O),ct&8){const Ct=o.dynamicProps;for(let Tt=0;Tt<Ct.length;Tt++){const It=Ct[Tt],zt=Z[It],Ut=rt[It];(Ut!==zt||It==="value")&&r(nt,It,zt,Ut,O,z)}}ct&1&&j.children!==o.children&&l(nt,o.children)}else!K&&V==null&&H(nt,Z,rt,z,O);((vt=rt.onVnodeUpdated)||J)&&queuePostRenderEffect(()=>{vt&&invokeVNodeHook(vt,z,o,j),J&&invokeDirectiveHook(o,j,z,"updated")},G)},$=(j,o,z,G,O,L,K)=>{for(let nt=0;nt<o.length;nt++){const ct=j[nt],V=o[nt],J=ct.el&&(ct.type===Fragment||!isSameVNodeType(ct,V)||ct.shapeFlag&198)?_(ct.el):z;f(ct,V,J,null,G,O,L,K,!0)}},H=(j,o,z,G,O)=>{if(o!==z){if(o!==EMPTY_OBJ)for(const L in o)!isReservedProp(L)&&!(L in z)&&r(j,L,o[L],null,O,G);for(const L in z){if(isReservedProp(L))continue;const K=z[L],nt=o[L];K!==nt&&L!=="value"&&r(j,L,nt,K,O,G)}"value"in z&&r(j,"value",o.value,z.value,O)}},N=(j,o,z,G,O,L,K,nt,ct)=>{const V=o.el=j?j.el:h(""),J=o.anchor=j?j.anchor:h("");let{patchFlag:Z,dynamicChildren:rt,slotScopeIds:vt}=o;vt&&(nt=nt?nt.concat(vt):vt),j==null?(i(V,z,G),i(J,z,G),M(o.children||[],z,J,O,L,K,nt,ct)):Z>0&&Z&64&&rt&&j.dynamicChildren?($(j.dynamicChildren,rt,z,O,L,K,nt),(o.key!=null||O&&o===O.subTree)&&traverseStaticChildren(j,o,!0)):st(j,o,z,J,O,L,K,nt,ct)},X=(j,o,z,G,O,L,K,nt,ct)=>{o.slotScopeIds=nt,j==null?o.shapeFlag&512?O.ctx.activate(o,z,G,K,ct):g(o,z,G,O,L,K,ct):et(j,o,ct)},g=(j,o,z,G,O,L,K)=>{const nt=j.component=createComponentInstance(j,G,O);if(isKeepAlive(j)&&(nt.ctx.renderer=Q),setupComponent(nt,!1,K),nt.asyncDep){if(O&&O.registerDep(nt,ft,K),!j.el){const ct=nt.subTree=createVNode(Comment);m(null,ct,o,z)}}else ft(nt,j,o,z,O,L,K)},et=(j,o,z)=>{const G=o.component=j.component;if(shouldUpdateComponent(j,o,z))if(G.asyncDep&&!G.asyncResolved){at(G,o,z);return}else G.next=o,G.update();else o.el=j.el,G.vnode=o},ft=(j,o,z,G,O,L,K)=>{const nt=()=>{if(j.isMounted){let{next:Z,bu:rt,u:vt,parent:Ct,vnode:Tt}=j;{const Nt=locateNonHydratedAsyncRoot(j);if(Nt){Z&&(Z.el=Tt.el,at(j,Z,K)),Nt.asyncDep.then(()=>{j.isUnmounted||nt()});return}}let It=Z,zt;toggleRecurse(j,!1),Z?(Z.el=Tt.el,at(j,Z,K)):Z=Tt,rt&&invokeArrayFns(rt),(zt=Z.props&&Z.props.onVnodeBeforeUpdate)&&invokeVNodeHook(zt,Ct,Z,Tt),toggleRecurse(j,!0);const Ut=renderComponentRoot(j),Vt=j.subTree;j.subTree=Ut,f(Vt,Ut,_(Vt.el),I(Vt),j,O,L),Z.el=Ut.el,It===null&&updateHOCHostEl(j,Ut.el),vt&&queuePostRenderEffect(vt,O),(zt=Z.props&&Z.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(zt,Ct,Z,Tt),O)}else{let Z;const{el:rt,props:vt}=o,{bm:Ct,m:Tt,parent:It,root:zt,type:Ut}=j,Vt=isAsyncWrapper(o);if(toggleRecurse(j,!1),Ct&&invokeArrayFns(Ct),!Vt&&(Z=vt&&vt.onVnodeBeforeMount)&&invokeVNodeHook(Z,It,o),toggleRecurse(j,!0),rt&&pt){const Nt=()=>{j.subTree=renderComponentRoot(j),pt(rt,j.subTree,j,O,null)};Vt&&Ut.__asyncHydrate?Ut.__asyncHydrate(rt,j,Nt):Nt()}else{zt.ce&&zt.ce._injectChildStyle(Ut);const Nt=j.subTree=renderComponentRoot(j);f(null,Nt,z,G,j,O,L),o.el=Nt.el}if(Tt&&queuePostRenderEffect(Tt,O),!Vt&&(Z=vt&&vt.onVnodeMounted)){const Nt=o;queuePostRenderEffect(()=>invokeVNodeHook(Z,It,Nt),O)}(o.shapeFlag&256||It&&isAsyncWrapper(It.vnode)&&It.vnode.shapeFlag&256)&&j.a&&queuePostRenderEffect(j.a,O),j.isMounted=!0,o=z=G=null}};j.scope.on();const ct=j.effect=new ReactiveEffect(nt);j.scope.off();const V=j.update=ct.run.bind(ct),J=j.job=ct.runIfDirty.bind(ct);J.i=j,J.id=j.uid,ct.scheduler=()=>queueJob(J),toggleRecurse(j,!0),V()},at=(j,o,z)=>{o.component=j;const G=j.vnode.props;j.vnode=o,j.next=null,updateProps(j,o.props,G,z),updateSlots(j,o.children,z),pauseTracking(),flushPreFlushCbs(j),resetTracking()},st=(j,o,z,G,O,L,K,nt,ct=!1)=>{const V=j&&j.children,J=j?j.shapeFlag:0,Z=o.children,{patchFlag:rt,shapeFlag:vt}=o;if(rt>0){if(rt&128){St(V,Z,z,G,O,L,K,nt,ct);return}else if(rt&256){dt(V,Z,z,G,O,L,K,nt,ct);return}}vt&8?(J&16&&C(V,O,L),Z!==V&&l(z,Z)):J&16?vt&16?St(V,Z,z,G,O,L,K,nt,ct):C(V,O,L,!0):(J&8&&l(z,""),vt&16&&M(Z,z,G,O,L,K,nt,ct))},dt=(j,o,z,G,O,L,K,nt,ct)=>{j=j||EMPTY_ARR,o=o||EMPTY_ARR;const V=j.length,J=o.length,Z=Math.min(V,J);let rt;for(rt=0;rt<Z;rt++){const vt=o[rt]=ct?cloneIfMounted(o[rt]):normalizeVNode(o[rt]);f(j[rt],vt,z,null,O,L,K,nt,ct)}V>J?C(j,O,L,!0,!1,Z):M(o,z,G,O,L,K,nt,ct,Z)},St=(j,o,z,G,O,L,K,nt,ct)=>{let V=0;const J=o.length;let Z=j.length-1,rt=J-1;for(;V<=Z&&V<=rt;){const vt=j[V],Ct=o[V]=ct?cloneIfMounted(o[V]):normalizeVNode(o[V]);if(isSameVNodeType(vt,Ct))f(vt,Ct,z,null,O,L,K,nt,ct);else break;V++}for(;V<=Z&&V<=rt;){const vt=j[Z],Ct=o[rt]=ct?cloneIfMounted(o[rt]):normalizeVNode(o[rt]);if(isSameVNodeType(vt,Ct))f(vt,Ct,z,null,O,L,K,nt,ct);else break;Z--,rt--}if(V>Z){if(V<=rt){const vt=rt+1,Ct=vt<J?o[vt].el:G;for(;V<=rt;)f(null,o[V]=ct?cloneIfMounted(o[V]):normalizeVNode(o[V]),z,Ct,O,L,K,nt,ct),V++}}else if(V>rt)for(;V<=Z;)Y(j[V],O,L,!0),V++;else{const vt=V,Ct=V,Tt=new Map;for(V=Ct;V<=rt;V++){const _t=o[V]=ct?cloneIfMounted(o[V]):normalizeVNode(o[V]);_t.key!=null&&Tt.set(_t.key,V)}let It,zt=0;const Ut=rt-Ct+1;let Vt=!1,Nt=0;const Xt=new Array(Ut);for(V=0;V<Ut;V++)Xt[V]=0;for(V=vt;V<=Z;V++){const _t=j[V];if(zt>=Ut){Y(_t,O,L,!0);continue}let gt;if(_t.key!=null)gt=Tt.get(_t.key);else for(It=Ct;It<=rt;It++)if(Xt[It-Ct]===0&&isSameVNodeType(_t,o[It])){gt=It;break}gt===void 0?Y(_t,O,L,!0):(Xt[gt-Ct]=V+1,gt>=Nt?Nt=gt:Vt=!0,f(_t,o[gt],z,null,O,L,K,nt,ct),zt++)}const xt=Vt?getSequence(Xt):EMPTY_ARR;for(It=xt.length-1,V=Ut-1;V>=0;V--){const _t=Ct+V,gt=o[_t],kt=_t+1<J?o[_t+1].el:G;Xt[V]===0?f(null,gt,z,kt,O,L,K,nt,ct):Vt&&(It<0||V!==xt[It]?ut(gt,z,kt,2):It--)}}},ut=(j,o,z,G,O=null)=>{const{el:L,type:K,transition:nt,children:ct,shapeFlag:V}=j;if(V&6){ut(j.component.subTree,o,z,G);return}if(V&128){j.suspense.move(o,z,G);return}if(V&64){K.move(j,o,z,Q);return}if(K===Fragment){i(L,o,z);for(let Z=0;Z<ct.length;Z++)ut(ct[Z],o,z,G);i(j.anchor,o,z);return}if(K===Static){P(j,o,z);return}if(G!==2&&V&1&&nt)if(G===0)nt.beforeEnter(L),i(L,o,z),queuePostRenderEffect(()=>nt.enter(L),O);else{const{leave:Z,delayLeave:rt,afterLeave:vt}=nt,Ct=()=>{j.ctx.isUnmounted?s(L):i(L,o,z)},Tt=()=>{Z(L,()=>{Ct(),vt&&vt()})};rt?rt(L,Ct,Tt):Tt()}else i(L,o,z)},Y=(j,o,z,G=!1,O=!1)=>{const{type:L,props:K,ref:nt,children:ct,dynamicChildren:V,shapeFlag:J,patchFlag:Z,dirs:rt,cacheIndex:vt}=j;if(Z===-2&&(O=!1),nt!=null&&(pauseTracking(),setRef(nt,null,z,j,!0),resetTracking()),vt!=null&&(o.renderCache[vt]=void 0),J&256){o.ctx.deactivate(j);return}const Ct=J&1&&rt,Tt=!isAsyncWrapper(j);let It;if(Tt&&(It=K&&K.onVnodeBeforeUnmount)&&invokeVNodeHook(It,o,j),J&6)v(j.component,z,G);else{if(J&128){j.suspense.unmount(z,G);return}Ct&&invokeDirectiveHook(j,null,o,"beforeUnmount"),J&64?j.type.remove(j,o,z,Q,G):V&&!V.hasOnce&&(L!==Fragment||Z>0&&Z&64)?C(V,o,z,!1,!0):(L===Fragment&&Z&384||!O&&J&16)&&C(ct,o,z),G&&B(j)}(Tt&&(It=K&&K.onVnodeUnmounted)||Ct)&&queuePostRenderEffect(()=>{It&&invokeVNodeHook(It,o,j),Ct&&invokeDirectiveHook(j,null,o,"unmounted")},z)},B=j=>{const{type:o,el:z,anchor:G,transition:O}=j;if(o===Fragment){y(z,G);return}if(o===Static){R(j);return}const L=()=>{s(z),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(j.shapeFlag&1&&O&&!O.persisted){const{leave:K,delayLeave:nt}=O,ct=()=>K(z,L);nt?nt(j.el,L,ct):ct()}else L()},y=(j,o)=>{let z;for(;j!==o;)z=w(j),s(j),j=z;s(o)},v=(j,o,z)=>{const{bum:G,scope:O,job:L,subTree:K,um:nt,m:ct,a:V,parent:J,slots:{__:Z}}=j;invalidateMount(ct),invalidateMount(V),G&&invokeArrayFns(G),J&&isArray(Z)&&Z.forEach(rt=>{J.renderCache[rt]=void 0}),O.stop(),L&&(L.flags|=8,Y(K,j,o,z)),nt&&queuePostRenderEffect(nt,o),queuePostRenderEffect(()=>{j.isUnmounted=!0},o),o&&o.pendingBranch&&!o.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===o.pendingId&&(o.deps--,o.deps===0&&o.resolve())},C=(j,o,z,G=!1,O=!1,L=0)=>{for(let K=L;K<j.length;K++)Y(j[K],o,z,G,O)},I=j=>{if(j.shapeFlag&6)return I(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const o=w(j.anchor||j.el),z=o&&o[TeleportEndKey];return z?w(z):o};let D=!1;const W=(j,o,z)=>{j==null?o._vnode&&Y(o._vnode,null,null,!0):f(o._vnode||null,j,o,null,null,null,z),o._vnode=j,D||(D=!0,flushPreFlushCbs(),flushPostFlushCbs(),D=!1)},Q={p:f,um:Y,m:ut,r:B,mt:g,mc:M,pc:st,pbc:$,n:I,o:t};let it,pt;return e&&([it,pt]=e(Q)),{render:W,hydrate:it,createApp:createAppAPI(W,it)}}function resolveChildrenNamespace({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,n=!1){const i=t.children,s=e.children;if(isArray(i)&&isArray(s))for(let r=0;r<i.length;r++){const a=i[r];let h=s[r];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[r]=cloneIfMounted(s[r]),h.el=a.el),!n&&h.patchFlag!==-2&&traverseStaticChildren(a,h)),h.type===Text&&(h.el=a.el),h.type===Comment&&!h.el&&(h.el=a.el)}}function getSequence(t){const e=t.slice(),n=[0];let i,s,r,a,h;const c=t.length;for(i=0;i<c;i++){const u=t[i];if(u!==0){if(s=n[n.length-1],t[s]<u){e[i]=s,n.push(i);continue}for(r=0,a=n.length-1;r<a;)h=r+a>>1,t[n[h]]<u?r=h+1:a=h;u<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=e[a];return n}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,e){return doWatch(t,null,e)}function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,n=EMPTY_OBJ){const{immediate:i,deep:s,flush:r,once:a}=n,h=extend({},n),c=e&&i||!e&&r!=="post";let u;if(isInSSRComponentSetup){if(r==="sync"){const d=useSSRContext();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!c){const d=()=>{};return d.stop=NOOP,d.resume=NOOP,d.pause=NOOP,d}}const l=currentInstance;h.call=(d,S,f)=>callWithAsyncErrorHandling(d,l,S,f);let _=!1;r==="post"?h.scheduler=d=>{queuePostRenderEffect(d,l&&l.suspense)}:r!=="sync"&&(_=!0,h.scheduler=(d,S)=>{S?d():queueJob(d)}),h.augmentJob=d=>{e&&(d.flags|=4),_&&(d.flags|=2,l&&(d.id=l.uid,d.i=l))};const w=watch$1(t,e,h);return isInSSRComponentSetup&&(u?u.push(w):c&&w()),w}function instanceWatch(t,e,n){const i=this.proxy,s=isString$1(t)?t.includes(".")?createPathGetter(i,t):()=>i[t]:t.bind(i,i);let r;isFunction$1(e)?r=e:(r=e.handler,n=e);const a=setCurrentInstance(this),h=doWatch(s,r.bind(i),n);return a(),h}function createPathGetter(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||EMPTY_OBJ;let s=n;const r=e.startsWith("update:"),a=r&&getModelModifiers(i,e.slice(7));a&&(a.trim&&(s=n.map(l=>isString$1(l)?l.trim():l)),a.number&&(s=n.map(looseToNumber)));let h,c=i[h=toHandlerKey(e)]||i[h=toHandlerKey(camelize(e))];!c&&r&&(c=i[h=toHandlerKey(hyphenate(e))]),c&&callWithAsyncErrorHandling(c,t,6,s);const u=i[h+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,callWithAsyncErrorHandling(u,t,6,s)}}function normalizeEmitsOptions(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let a={},h=!1;if(!isFunction$1(t)){const c=u=>{const l=normalizeEmitsOptions(u,e,!0);l&&(h=!0,extend(a,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!h?(isObject(t)&&i.set(t,null),null):(isArray(r)?r.forEach(c=>a[c]=null):extend(a,r),isObject(t)&&i.set(t,a),a)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:a,attrs:h,emit:c,render:u,renderCache:l,props:_,data:w,setupState:d,ctx:S,inheritAttrs:f}=t,b=setCurrentRenderingInstance(t);let m,k;try{if(n.shapeFlag&4){const R=s||i,A=R;m=normalizeVNode(u.call(A,R,l,_,d,w,S)),k=h}else{const R=e;m=normalizeVNode(R.length>1?R(_,{attrs:h,slots:a,emit:c}):R(_,null)),k=e.props?h:getFunctionalFallthrough(h)}}catch(R){blockStack.length=0,handleError(R,t,1),m=createVNode(Comment)}let P=m;if(k&&f!==!1){const R=Object.keys(k),{shapeFlag:A}=P;R.length&&A&7&&(r&&R.some(isModelListener)&&(k=filterModelListeners(k,r)),P=cloneVNode(P,k,!1,!0))}return n.dirs&&(P=cloneVNode(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(P,n.transition),m=P,setCurrentRenderingInstance(b),m}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const i in t)(!isModelListener(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function shouldUpdateComponent(t,e,n){const{props:i,children:s,component:r}=t,{props:a,children:h,patchFlag:c}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?hasPropsChanged(i,a,u):!!a;if(c&8){const l=e.dynamicProps;for(let _=0;_<l.length;_++){const w=l[_];if(a[w]!==i[w]&&!isEmitListener(u,w))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:i===a?!1:i?a?hasPropsChanged(i,a,u):!0:!!a;return!1}function hasPropsChanged(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!isEmitListener(n,r))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,i,s,r){return setupBlock(createBaseVNode(t,e,n,i,s,r,!0))}function createBlock(t,e,n,i,s){return setupBlock(createVNode(t,e,n,i,s,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?isString$1(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null);function createBaseVNode(t,e=null,n=null,i=0,s=null,r=t===Fragment?0:1,a=!1,h=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return h?(normalizeChildren(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=isString$1(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const h=cloneVNode(t,e,!0);return n&&normalizeChildren(h,n),isBlockTreeEnabled>0&&!r&&currentBlock&&(h.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=h:currentBlock.push(h)),h.patchFlag=-2,h}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:h,style:c}=e;h&&!isString$1(h)&&(e.class=normalizeClass(h)),isObject(c)&&(isProxy(c)&&!isArray(c)&&(c=extend({},c)),e.style=normalizeStyle(c))}const a=isString$1(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,n,i,s,a,r,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:a,children:h,transition:c}=t,u=e?mergeProps(s||{},e):s,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&normalizeKey(u),ref:e&&e.ref?n&&r?isArray(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&i&&setTransitionHooks(l,c.clone(l)),l}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(isArray(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!isInternalObject(e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),i&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(s==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(s)){const r=e[s],a=i[s];a&&r!==a&&!(isArray(r)&&r.includes(a))&&(e[s]=r?[].concat(r,a):a)}else s!==""&&(e[s]=i[s])}return e}function invokeVNodeHook(t,e,n,i=null){callWithAsyncErrorHandling(t,e,7,[n,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||emptyAppContext,r={uid:uid++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,s),emitsOptions:normalizeEmitsOptions(i,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),t.ce&&t.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(a=>a(r)):s[0](r)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,n=!1){e&&setInSSRSetupState(e);const{props:i,children:s}=t.vnode,r=isStatefulComponent(t);initProps(t,i,r,e),initSlots(t,s,n||e);const a=r?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),a}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:i}=n;if(i){pauseTracking();const s=t.setupContext=i.length>1?createSetupContext(t):null,r=setCurrentInstance(t),a=callWithErrorHandling(i,t,0,[t.props,s]),h=isPromise(a);if(resetTracking(),r(),(h||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),h){if(a.then(unsetCurrentInstance,unsetCurrentInstance),e)return a.then(c=>{handleSetupResult(t,c,e)}).catch(c=>{handleError(c,t,0)});t.asyncDep=a}else handleSetupResult(t,a,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const i=t.type;if(!t.render){if(!e&&compile&&!i.render){const s=i.template||resolveMergedOptions(t).template;if(s){const{isCustomElement:r,compilerOptions:a}=t.appContext.config,{delimiters:h,compilerOptions:c}=i,u=extend(extend({isCustomElement:r,delimiters:h},a),c);i.render=compile(s,u)}}t.render=i.render||NOOP}{const s=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,n=!1){let i=getComponentName(e);if(!i&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(i=s[1])}if(!i&&t&&t.parent){const s=r=>{for(const a in r)if(r[a]===e)return a};i=s(t.components||t.parent.type.components)||s(t.appContext.components)}return i?classify(i):n?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):n?doc.createElement(t,{is:n}):doc.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const a=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const h=templateContainer.content;if(i==="svg"||i==="mathml"){const c=h.firstChild;for(;c.firstChild;)h.appendChild(c.firstChild);h.removeChild(c)}e.insertBefore(h,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,n){const i=t[vtcKey];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(t,{value:e},{transition:n}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),setDisplay(t,!0),i.enter(t)):i.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,e,n){const i=t.style,s=isString$1(n);let r=!1;if(n&&!s){if(e)if(isString$1(e))for(const a of e.split(";")){const h=a.slice(0,a.indexOf(":")).trim();n[h]==null&&setStyle(i,h,"")}else for(const a in e)n[a]==null&&setStyle(i,a,"");for(const a in n)a==="display"&&(r=!0),setStyle(i,a,n[a])}else if(s){if(e!==n){const a=i[CSS_VAR_TEXT];a&&(n+=";"+a),i.cssText=n,r=displayRE.test(n)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=r?i.display:"",t[vShowHidden]&&(i.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray(n))n.forEach(i=>setStyle(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(i),n.replace(importantRE,""),"important"):t[i]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let i=camelize(e);if(i!=="filter"&&i in t)return prefixCache[e]=i;i=capitalize(i);for(let s=0;s<prefixes.length;s++){const r=prefixes[s]+i;if(r in t)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,i,s,r=isSpecialBooleanAttr(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n):n==null||r&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,r?"":isSymbol(n)?String(n):n)}function patchDOMProp(t,e,n,i,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const h=r==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(h!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=includeBooleanAttr(n):n==null&&h==="string"?(n="",a=!0):h==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(s||e)}function addEventListener(t,e,n,i){t.addEventListener(e,n,i)}function removeEventListener(t,e,n,i){t.removeEventListener(e,n,i)}const veiKey=Symbol("_vei");function patchEvent(t,e,n,i,s=null){const r=t[veiKey]||(t[veiKey]={}),a=r[e];if(i&&a)a.value=i;else{const[h,c]=parseName(e);if(i){const u=r[e]=createInvoker(i,s);addEventListener(t,h,u,c)}else a&&(removeEventListener(t,h,a,c),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let i;for(;i=t.match(optionsModifierRE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,n.value),e,5,[i])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,n,i,s,r)=>{const a=s==="svg";e==="class"?patchClass(t,i,a):e==="style"?patchStyle(t,n,i):isOn(e)?isModelListener(e)||patchEvent(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,i,a))?(patchDOMProp(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,i,a,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString$1(i))?patchDOMProp(t,camelize(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),patchAttr(t,e,i,a))};function shouldSetAsProp(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction$1(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(e)&&isString$1(n)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[assignKey]=getModelAssigner(s);const r=i||s.props&&s.props.type==="number";addEventListener(t,e?"change":"input",a=>{if(a.target.composing)return;let h=t.value;n&&(h=h.trim()),r&&(h=looseToNumber(h)),t[assignKey](h)}),n&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},a){if(t[assignKey]=getModelAssigner(a),t.composing)return;const h=(r||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,c=e??"";h!==c&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===c)||(t.value=c))}},vModelSelect={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const s=isSet(e);addEventListener(t,"change",()=>{const r=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?looseToNumber(getValue(a)):getValue(a));t[assignKey](t.multiple?s?new Set(r):r:r[0]),t._assigning=!0,nextTick(()=>{t._assigning=!1})}),t[assignKey]=getModelAssigner(i)},mounted(t,{value:e}){setSelected(t,e)},beforeUpdate(t,e,n){t[assignKey]=getModelAssigner(n)},updated(t,{value:e}){t._assigning||setSelected(t,e)}};function setSelected(t,e){const n=t.multiple,i=isArray(e);if(!(n&&!i&&!isSet(e))){for(let s=0,r=t.options.length;s<r;s++){const a=t.options[s],h=getValue(a);if(n)if(i){const c=typeof h;c==="string"||c==="number"?a.selected=e.some(u=>String(u)===String(h)):a.selected=looseIndexOf(e,h)>-1}else a.selected=e.has(h);else if(looseEqual(getValue(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function getValue(t){return"_value"in t?t._value:t.value}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=normalizeContainer(i);if(!s)return;const r=e._component;!isFunction$1(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$1(t)?document.querySelector(t):t}const scriptRel="modulepreload",assetsURL=function(t,e){return new URL(t,e).href},seen={},__vitePreload=function(e,n,i){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=assetsURL(r,i),r in seen)return;seen[r]=!0;const a=r.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!i)for(let l=s.length-1;l>=0;l--){const _=s[l];if(_.href===r&&(!a||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${h}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":scriptRel,a||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),a)return new Promise((l,_)=>{u.addEventListener("load",l),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,n){module.exports=e.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Xt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=dt,e.bytesToString=it,e.createValidAbsoluteUrl=ut,e.getModificationDate=Ct,e.getUuid=Vt,e.getVerbosityLevel=et,e.info=ft,e.isArrayBuffer=rt,e.isArrayEqual=vt,e.isNodeJS=void 0,e.normalizeUnicode=Ut,e.objectFromMap=z,e.objectSize=o,e.setVerbosityLevel=g,e.shadow=Y,e.string32=j,e.stringToBytes=pt,e.stringToPDFString=V,e.stringToUTF8String=J,e.unreachable=st,e.utf8StringToString=Z,e.warn=at;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n;const i=[1,0,0,1,0,0];e.IDENTITY_MATRIX=i;const s=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=s;const r=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=r;const a=1.35;e.LINE_FACTOR=a;const h=.35;e.LINE_DESCENT_FACTOR=h;const c=h/a;e.BASELINE_FACTOR=c;const u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=u;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;const _="pdfjs_internal_editor_";e.AnnotationEditorPrefix=_;const w={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=w;const d={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=d;const S={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=S;const f={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=f;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=b;const m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=m;const k={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=k;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=P;const R={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=R;const A={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=A;const F={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=F;const U={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=U;const M={O:"PageOpen",C:"PageClose"};e.PageActionEventType=M;const x={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=x;const $={NONE:0,BINARY:1};e.CMapCompressionType=$;const H={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=H;const N={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=N;let X=x.WARNINGS;function g(xt){Number.isInteger(xt)&&(X=xt)}function et(){return X}function ft(xt){X>=x.INFOS&&console.log(`Info: ${xt}`)}function at(xt){X>=x.WARNINGS&&console.log(`Warning: ${xt}`)}function st(xt){throw new Error(xt)}function dt(xt,_t){xt||st(_t)}function St(xt){switch(xt==null?void 0:xt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ut(xt,_t=null,gt=null){if(!xt)return null;try{if(gt&&typeof xt=="string"){if(gt.addDefaultProtocol&&xt.startsWith("www.")){const Rt=xt.match(/\./g);(Rt==null?void 0:Rt.length)>=2&&(xt=`http://${xt}`)}if(gt.tryConvertEncoding)try{xt=J(xt)}catch{}}const kt=_t?new URL(xt,_t):new URL(xt);if(St(kt))return kt}catch{}return null}function Y(xt,_t,gt,kt=!1){return Object.defineProperty(xt,_t,{value:gt,enumerable:!kt,configurable:!0,writable:!1}),gt}const B=function(){function _t(gt,kt){this.constructor===_t&&st("Cannot initialize BaseException."),this.message=gt,this.name=kt}return _t.prototype=new Error,_t.constructor=_t,_t}();e.BaseException=B;class y extends B{constructor(_t,gt){super(_t,"PasswordException"),this.code=gt}}e.PasswordException=y;class v extends B{constructor(_t,gt){super(_t,"UnknownErrorException"),this.details=gt}}e.UnknownErrorException=v;class C extends B{constructor(_t){super(_t,"InvalidPDFException")}}e.InvalidPDFException=C;class I extends B{constructor(_t){super(_t,"MissingPDFException")}}e.MissingPDFException=I;class D extends B{constructor(_t,gt){super(_t,"UnexpectedResponseException"),this.status=gt}}e.UnexpectedResponseException=D;class W extends B{constructor(_t){super(_t,"FormatError")}}e.FormatError=W;class Q extends B{constructor(_t){super(_t,"AbortException")}}e.AbortException=Q;function it(xt){(typeof xt!="object"||(xt==null?void 0:xt.length)===void 0)&&st("Invalid argument for bytesToString");const _t=xt.length,gt=8192;if(_t<gt)return String.fromCharCode.apply(null,xt);const kt=[];for(let Rt=0;Rt<_t;Rt+=gt){const ne=Math.min(Rt+gt,_t),te=xt.subarray(Rt,ne);kt.push(String.fromCharCode.apply(null,te))}return kt.join("")}function pt(xt){typeof xt!="string"&&st("Invalid argument for stringToBytes");const _t=xt.length,gt=new Uint8Array(_t);for(let kt=0;kt<_t;++kt)gt[kt]=xt.charCodeAt(kt)&255;return gt}function j(xt){return String.fromCharCode(xt>>24&255,xt>>16&255,xt>>8&255,xt&255)}function o(xt){return Object.keys(xt).length}function z(xt){const _t=Object.create(null);for(const[gt,kt]of xt)_t[gt]=kt;return _t}function G(){const xt=new Uint8Array(4);return xt[0]=1,new Uint32Array(xt.buffer,0,1)[0]===1}function O(){try{return new Function(""),!0}catch{return!1}}class L{static get isLittleEndian(){return Y(this,"isLittleEndian",G())}static get isEvalSupported(){return Y(this,"isEvalSupported",O())}static get isOffscreenCanvasSupported(){return Y(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Y(this,"platform",{isWin:!1,isMac:!1}):Y(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var _t,gt;return Y(this,"isCSSRoundSupported",(gt=(_t=globalThis.CSS)==null?void 0:_t.supports)==null?void 0:gt.call(_t,"width: round(1.5px, 1px)"))}}e.FeatureTest=L;const K=[...Array(256).keys()].map(xt=>xt.toString(16).padStart(2,"0"));class nt{static makeHexColor(_t,gt,kt){return`#${K[_t]}${K[gt]}${K[kt]}`}static scaleMinMax(_t,gt){let kt;_t[0]?(_t[0]<0&&(kt=gt[0],gt[0]=gt[1],gt[1]=kt),gt[0]*=_t[0],gt[1]*=_t[0],_t[3]<0&&(kt=gt[2],gt[2]=gt[3],gt[3]=kt),gt[2]*=_t[3],gt[3]*=_t[3]):(kt=gt[0],gt[0]=gt[2],gt[2]=kt,kt=gt[1],gt[1]=gt[3],gt[3]=kt,_t[1]<0&&(kt=gt[2],gt[2]=gt[3],gt[3]=kt),gt[2]*=_t[1],gt[3]*=_t[1],_t[2]<0&&(kt=gt[0],gt[0]=gt[1],gt[1]=kt),gt[0]*=_t[2],gt[1]*=_t[2]),gt[0]+=_t[4],gt[1]+=_t[4],gt[2]+=_t[5],gt[3]+=_t[5]}static transform(_t,gt){return[_t[0]*gt[0]+_t[2]*gt[1],_t[1]*gt[0]+_t[3]*gt[1],_t[0]*gt[2]+_t[2]*gt[3],_t[1]*gt[2]+_t[3]*gt[3],_t[0]*gt[4]+_t[2]*gt[5]+_t[4],_t[1]*gt[4]+_t[3]*gt[5]+_t[5]]}static applyTransform(_t,gt){const kt=_t[0]*gt[0]+_t[1]*gt[2]+gt[4],Rt=_t[0]*gt[1]+_t[1]*gt[3]+gt[5];return[kt,Rt]}static applyInverseTransform(_t,gt){const kt=gt[0]*gt[3]-gt[1]*gt[2],Rt=(_t[0]*gt[3]-_t[1]*gt[2]+gt[2]*gt[5]-gt[4]*gt[3])/kt,ne=(-_t[0]*gt[1]+_t[1]*gt[0]+gt[4]*gt[1]-gt[5]*gt[0])/kt;return[Rt,ne]}static getAxialAlignedBoundingBox(_t,gt){const kt=this.applyTransform(_t,gt),Rt=this.applyTransform(_t.slice(2,4),gt),ne=this.applyTransform([_t[0],_t[3]],gt),te=this.applyTransform([_t[2],_t[1]],gt);return[Math.min(kt[0],Rt[0],ne[0],te[0]),Math.min(kt[1],Rt[1],ne[1],te[1]),Math.max(kt[0],Rt[0],ne[0],te[0]),Math.max(kt[1],Rt[1],ne[1],te[1])]}static inverseTransform(_t){const gt=_t[0]*_t[3]-_t[1]*_t[2];return[_t[3]/gt,-_t[1]/gt,-_t[2]/gt,_t[0]/gt,(_t[2]*_t[5]-_t[4]*_t[3])/gt,(_t[4]*_t[1]-_t[5]*_t[0])/gt]}static singularValueDecompose2dScale(_t){const gt=[_t[0],_t[2],_t[1],_t[3]],kt=_t[0]*gt[0]+_t[1]*gt[2],Rt=_t[0]*gt[1]+_t[1]*gt[3],ne=_t[2]*gt[0]+_t[3]*gt[2],te=_t[2]*gt[1]+_t[3]*gt[3],At=(kt+te)/2,Ot=Math.sqrt((kt+te)**2-4*(kt*te-ne*Rt))/2,Ht=At+Ot||1,Mt=At-Ot||1;return[Math.sqrt(Ht),Math.sqrt(Mt)]}static normalizeRect(_t){const gt=_t.slice(0);return _t[0]>_t[2]&&(gt[0]=_t[2],gt[2]=_t[0]),_t[1]>_t[3]&&(gt[1]=_t[3],gt[3]=_t[1]),gt}static intersect(_t,gt){const kt=Math.max(Math.min(_t[0],_t[2]),Math.min(gt[0],gt[2])),Rt=Math.min(Math.max(_t[0],_t[2]),Math.max(gt[0],gt[2]));if(kt>Rt)return null;const ne=Math.max(Math.min(_t[1],_t[3]),Math.min(gt[1],gt[3])),te=Math.min(Math.max(_t[1],_t[3]),Math.max(gt[1],gt[3]));return ne>te?null:[kt,ne,Rt,te]}static bezierBoundingBox(_t,gt,kt,Rt,ne,te,At,Ot){const Ht=[],Mt=[[],[]];let Wt,Gt,Qt,Ft,Jt,$t,ot,T;for(let yt=0;yt<2;++yt){if(yt===0?(Gt=6*_t-12*kt+6*ne,Wt=-3*_t+9*kt-9*ne+3*At,Qt=3*kt-3*_t):(Gt=6*gt-12*Rt+6*te,Wt=-3*gt+9*Rt-9*te+3*Ot,Qt=3*Rt-3*gt),Math.abs(Wt)<1e-12){if(Math.abs(Gt)<1e-12)continue;Ft=-Qt/Gt,0<Ft&&Ft<1&&Ht.push(Ft);continue}ot=Gt*Gt-4*Qt*Wt,T=Math.sqrt(ot),!(ot<0)&&(Jt=(-Gt+T)/(2*Wt),0<Jt&&Jt<1&&Ht.push(Jt),$t=(-Gt-T)/(2*Wt),0<$t&&$t<1&&Ht.push($t))}let q=Ht.length,lt;const mt=q;for(;q--;)Ft=Ht[q],lt=1-Ft,Mt[0][q]=lt*lt*lt*_t+3*lt*lt*Ft*kt+3*lt*Ft*Ft*ne+Ft*Ft*Ft*At,Mt[1][q]=lt*lt*lt*gt+3*lt*lt*Ft*Rt+3*lt*Ft*Ft*te+Ft*Ft*Ft*Ot;return Mt[0][mt]=_t,Mt[1][mt]=gt,Mt[0][mt+1]=At,Mt[1][mt+1]=Ot,Mt[0].length=Mt[1].length=mt+2,[Math.min(...Mt[0]),Math.min(...Mt[1]),Math.max(...Mt[0]),Math.max(...Mt[1])]}}e.Util=nt;const ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function V(xt){if(xt[0]>="ï"){let gt;if(xt[0]==="þ"&&xt[1]==="ÿ"?gt="utf-16be":xt[0]==="ÿ"&&xt[1]==="þ"?gt="utf-16le":xt[0]==="ï"&&xt[1]==="»"&&xt[2]==="¿"&&(gt="utf-8"),gt)try{const kt=new TextDecoder(gt,{fatal:!0}),Rt=pt(xt);return kt.decode(Rt)}catch(kt){at(`stringToPDFString: "${kt}".`)}}const _t=[];for(let gt=0,kt=xt.length;gt<kt;gt++){const Rt=ct[xt.charCodeAt(gt)];_t.push(Rt?String.fromCharCode(Rt):xt.charAt(gt))}return _t.join("")}function J(xt){return decodeURIComponent(escape(xt))}function Z(xt){return unescape(encodeURIComponent(xt))}function rt(xt){return typeof xt=="object"&&(xt==null?void 0:xt.byteLength)!==void 0}function vt(xt,_t){if(xt.length!==_t.length)return!1;for(let gt=0,kt=xt.length;gt<kt;gt++)if(xt[gt]!==_t[gt])return!1;return!0}function Ct(xt=new Date){return[xt.getUTCFullYear().toString(),(xt.getUTCMonth()+1).toString().padStart(2,"0"),xt.getUTCDate().toString().padStart(2,"0"),xt.getUTCHours().toString().padStart(2,"0"),xt.getUTCMinutes().toString().padStart(2,"0"),xt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Tt{constructor(){ht(this,Xt,!1);this.promise=new Promise((_t,gt)=>{this.resolve=kt=>{wt(this,Xt,!0),_t(kt)},this.reject=kt=>{wt(this,Xt,!0),gt(kt)}})}get settled(){return E(this,Xt)}}Xt=new WeakMap,e.PromiseCapability=Tt;let It=null,zt=null;function Ut(xt){return It||(It=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zt=new Map([["ﬅ","ſt"]])),xt.replaceAll(It,(_t,gt,kt)=>gt?gt.normalize("NFKC"):zt.get(kt))}function Vt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const xt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(xt);else for(let _t=0;_t<32;_t++)xt[_t]=Math.floor(Math.random()*255);return it(xt)}const Nt="pdfjs_internal_id_";e.AnnotationPrefix=Nt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,n,i,s,de,a,Ce,c,u,l,_,w,d,S,f,b,xe,k,P,Ue,A,F;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(M){if(typeof M=="string"||M instanceof URL?M={url:M}:(0,_util.isArrayBuffer)(M)&&(M={data:M}),typeof M!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!M.url&&!M.data&&!M.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const x=new PDFDocumentLoadingTask,{docId:$}=x,H=M.url?getUrlProp(M.url):null,N=M.data?getDataProp(M.data):null,X=M.httpHeaders||null,g=M.withCredentials===!0,et=M.password??null,ft=M.range instanceof PDFDataRangeTransport?M.range:null,at=Number.isInteger(M.rangeChunkSize)&&M.rangeChunkSize>0?M.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let st=M.worker instanceof PDFWorker?M.worker:null;const dt=M.verbosity,St=typeof M.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(M.docBaseUrl)?M.docBaseUrl:null,ut=typeof M.cMapUrl=="string"?M.cMapUrl:null,Y=M.cMapPacked!==!1,B=M.CMapReaderFactory||DefaultCMapReaderFactory,y=typeof M.standardFontDataUrl=="string"?M.standardFontDataUrl:null,v=M.StandardFontDataFactory||DefaultStandardFontDataFactory,C=M.stopAtErrors!==!0,I=Number.isInteger(M.maxImageSize)&&M.maxImageSize>-1?M.maxImageSize:-1,D=M.isEvalSupported!==!1,W=typeof M.isOffscreenCanvasSupported=="boolean"?M.isOffscreenCanvasSupported:!_util.isNodeJS,Q=Number.isInteger(M.canvasMaxAreaInBytes)?M.canvasMaxAreaInBytes:-1,it=typeof M.disableFontFace=="boolean"?M.disableFontFace:_util.isNodeJS,pt=M.fontExtraProperties===!0,j=M.enableXfa===!0,o=M.ownerDocument||globalThis.document,z=M.disableRange===!0,G=M.disableStream===!0,O=M.disableAutoFetch===!0,L=M.pdfBug===!0,K=ft?ft.length:M.length??NaN,nt=typeof M.useSystemFonts=="boolean"?M.useSystemFonts:!_util.isNodeJS&&!it,ct=typeof M.useWorkerFetch=="boolean"?M.useWorkerFetch:B===_display_utils.DOMCMapReaderFactory&&v===_display_utils.DOMStandardFontDataFactory&&ut&&y&&(0,_display_utils.isValidFetchUrl)(ut,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(y,document.baseURI),V=M.canvasFactory||new DefaultCanvasFactory({ownerDocument:o}),J=M.filterFactory||new DefaultFilterFactory({docId:$,ownerDocument:o}),Z=null;(0,_util.setVerbosityLevel)(dt);const rt={canvasFactory:V,filterFactory:J};if(ct||(rt.cMapReaderFactory=new B({baseUrl:ut,isCompressed:Y}),rt.standardFontDataFactory=new v({baseUrl:y})),!st){const Tt={verbosity:dt,port:_worker_options.GlobalWorkerOptions.workerPort};st=Tt.port?PDFWorker.fromPort(Tt):new PDFWorker(Tt),x._worker=st}const vt={docId:$,apiVersion:"3.11.174",data:N,password:et,disableAutoFetch:O,rangeChunkSize:at,length:K,docBaseUrl:St,enableXfa:j,evaluatorOptions:{maxImageSize:I,disableFontFace:it,ignoreErrors:C,isEvalSupported:D,isOffscreenCanvasSupported:W,canvasMaxAreaInBytes:Q,fontExtraProperties:pt,useSystemFonts:nt,cMapUrl:ct?ut:null,standardFontDataUrl:ct?y:null}},Ct={ignoreErrors:C,isEvalSupported:D,disableFontFace:it,fontExtraProperties:pt,enableXfa:j,ownerDocument:o,disableAutoFetch:O,pdfBug:L,styleElement:Z};return st.promise.then(function(){if(x.destroyed)throw new Error("Loading aborted");const Tt=_fetchDocument(st,vt),It=new Promise(function(zt){let Ut;ft?Ut=new _transport_stream.PDFDataTransportStream({length:K,initialData:ft.initialData,progressiveDone:ft.progressiveDone,contentDispositionFilename:ft.contentDispositionFilename,disableRange:z,disableStream:G},ft):N||(Ut=(Nt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Nt):(0,_display_utils.isValidFetchUrl)(Nt.url)?new _displayFetch_stream.PDFFetchStream(Nt):new _displayNetwork.PDFNetworkStream(Nt))({url:H,length:K,httpHeaders:X,withCredentials:g,rangeChunkSize:at,disableRange:z,disableStream:G})),zt(Ut)});return Promise.all([Tt,It]).then(function([zt,Ut]){if(x.destroyed)throw new Error("Loading aborted");const Vt=new _message_handler.MessageHandler($,zt,st.port),Nt=new WorkerTransport(Vt,x,Ut,Ct,rt);x._transport=Nt,Vt.send("Ready",null)})}).catch(x._capability.reject),x}async function _fetchDocument(M,x){if(M.destroyed)throw new Error("Worker was destroyed");const $=await M.messageHandler.sendWithPromise("GetDocRequest",x,x.data?[x.data.buffer]:null);if(M.destroyed)throw new Error("Worker was destroyed");return $}function getUrlProp(M){if(M instanceof URL)return M.href;try{return new URL(M,window.location).href}catch{if(_util.isNodeJS&&typeof M=="string")return M}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(M){if(_util.isNodeJS&&typeof Buffer<"u"&&M instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(M instanceof Uint8Array&&M.byteLength===M.buffer.byteLength)return M;if(typeof M=="string")return(0,_util.stringToBytes)(M);if(typeof M=="object"&&!isNaN(M==null?void 0:M.length)||(0,_util.isArrayBuffer)(M))return new Uint8Array(M);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${_e(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var x,$,H;this.destroyed=!0;try{(x=this._worker)!=null&&x.port&&(this._worker._pendingDestroy=!0),await(($=this._transport)==null?void 0:$.destroy())}catch(N){throw(H=this._worker)!=null&&H.port&&delete this._worker._pendingDestroy,N}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,ht(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(x,$,H=!1,N=null){this.length=x,this.initialData=$,this.progressiveDone=H,this.contentDispositionFilename=N,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(x){this._rangeListeners.push(x)}addProgressListener(x){this._progressListeners.push(x)}addProgressiveReadListener(x){this._progressiveReadListeners.push(x)}addProgressiveDoneListener(x){this._progressiveDoneListeners.push(x)}onDataRange(x,$){for(const H of this._rangeListeners)H(x,$)}onDataProgress(x,$){this._readyCapability.promise.then(()=>{for(const H of this._progressListeners)H(x,$)})}onDataProgressiveRead(x){this._readyCapability.promise.then(()=>{for(const $ of this._progressiveReadListeners)$(x)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const x of this._progressiveDoneListeners)x()})}transportReady(){this._readyCapability.resolve()}requestDataRange(x,$){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(x,$){this._pdfInfo=x,this._transport=$,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(H=>{if(!H)return H;const N=[];for(const X in H)N.push(...H[X]);return N}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(x){return this._transport.getPage(x)}getPageIndex(x){return this._transport.getPageIndex(x)}getDestinations(){return this._transport.getDestinations()}getDestination(x){return this._transport.getDestination(x)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(x=!1){return this._transport.startCleanup(x||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(x,$,H,N=!1){ht(this,s);ht(this,a);ht(this,n,null);ht(this,i,!1);this._pageIndex=x,this._pageInfo=$,this._transport=H,this._stats=N?new _display_utils.StatTimer:null,this._pdfBug=N,this.commonObjs=H.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:x,rotation:$=this.rotate,offsetX:H=0,offsetY:N=0,dontFlip:X=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:x,rotation:$,offsetX:H,offsetY:N,dontFlip:X})}getAnnotations({intent:x="display"}={}){const $=this._transport.getRenderingIntent(x);return this._transport.getAnnotations(this._pageIndex,$.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var x;return((x=this._transport._htmlForXfa)==null?void 0:x.children[this._pageIndex])||null}render({canvasContext:x,viewport:$,intent:H="display",annotationMode:N=_util.AnnotationMode.ENABLE,transform:X=null,background:g=null,optionalContentConfigPromise:et=null,annotationCanvasMap:ft=null,pageColors:at=null,printAnnotationStorage:st=null}){var v,C;(v=this._stats)==null||v.time("Overall");const dt=this._transport.getRenderingIntent(H,N,st);wt(this,i,!1),bt(this,a,Ce).call(this),et||(et=this._transport.getOptionalContentConfig());let St=this._intentStates.get(dt.cacheKey);St||(St=Object.create(null),this._intentStates.set(dt.cacheKey,St)),St.streamReaderCancelTimeout&&(clearTimeout(St.streamReaderCancelTimeout),St.streamReaderCancelTimeout=null);const ut=!!(dt.renderingIntent&_util.RenderingIntentFlag.PRINT);St.displayReadyCapability||(St.displayReadyCapability=new _util.PromiseCapability,St.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(dt));const Y=I=>{var D,W;St.renderTasks.delete(B),(this._maybeCleanupAfterRender||ut)&&wt(this,i,!0),bt(this,s,de).call(this,!ut),I?(B.capability.reject(I),this._abortOperatorList({intentState:St,reason:I instanceof Error?I:new Error(I)})):B.capability.resolve(),(D=this._stats)==null||D.timeEnd("Rendering"),(W=this._stats)==null||W.timeEnd("Overall")},B=new InternalRenderTask({callback:Y,params:{canvasContext:x,viewport:$,transform:X,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ft,operatorList:St.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ut,pdfBug:this._pdfBug,pageColors:at});(St.renderTasks||(St.renderTasks=new Set)).add(B);const y=B.task;return Promise.all([St.displayReadyCapability.promise,et]).then(([I,D])=>{var W;if(this.destroyed){Y();return}(W=this._stats)==null||W.time("Rendering"),B.initializeGraphics({transparency:I,optionalContentConfig:D}),B.operatorListChanged()}).catch(Y),y}getOperatorList({intent:x="display",annotationMode:$=_util.AnnotationMode.ENABLE,printAnnotationStorage:H=null}={}){var ft;function N(){g.operatorList.lastChunk&&(g.opListReadCapability.resolve(g.operatorList),g.renderTasks.delete(et))}const X=this._transport.getRenderingIntent(x,$,H,!0);let g=this._intentStates.get(X.cacheKey);g||(g=Object.create(null),this._intentStates.set(X.cacheKey,g));let et;return g.opListReadCapability||(et=Object.create(null),et.operatorListChanged=N,g.opListReadCapability=new _util.PromiseCapability,(g.renderTasks||(g.renderTasks=new Set)).add(et),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ft=this._stats)==null||ft.time("Page Request"),this._pumpOperatorList(X)),g.opListReadCapability.promise}streamTextContent({includeMarkedContent:x=!1,disableNormalization:$=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:x===!0,disableNormalization:$===!0},{highWaterMark:100,size(N){return N.items.length}})}getTextContent(x={}){if(this._transport._htmlForXfa)return this.getXfa().then(H=>_xfa_text.XfaText.textContent(H));const $=this.streamTextContent(x);return new Promise(function(H,N){function X(){g.read().then(function({value:ft,done:at}){if(at){H(et);return}Object.assign(et.styles,ft.styles),et.items.push(...ft.items),X()},N)}const g=$.getReader(),et={items:[],styles:Object.create(null)};X()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const x=[];for(const $ of this._intentStates.values())if(this._abortOperatorList({intentState:$,reason:new Error("Page was destroyed."),force:!0}),!$.opListReadCapability)for(const H of $.renderTasks)x.push(H.completed),H.cancel();return this.objs.clear(),wt(this,i,!1),bt(this,a,Ce).call(this),Promise.all(x)}cleanup(x=!1){wt(this,i,!0);const $=bt(this,s,de).call(this,!1);return x&&$&&this._stats&&(this._stats=new _display_utils.StatTimer),$}_startRenderPage(x,$){var N,X;const H=this._intentStates.get($);H&&((N=this._stats)==null||N.timeEnd("Page Request"),(X=H.displayReadyCapability)==null||X.resolve(x))}_renderPageChunk(x,$){for(let H=0,N=x.length;H<N;H++)$.operatorList.fnArray.push(x.fnArray[H]),$.operatorList.argsArray.push(x.argsArray[H]);$.operatorList.lastChunk=x.lastChunk,$.operatorList.separateAnnots=x.separateAnnots;for(const H of $.renderTasks)H.operatorListChanged();x.lastChunk&&bt(this,s,de).call(this,!0)}_pumpOperatorList({renderingIntent:x,cacheKey:$,annotationStorageSerializable:H}){const{map:N,transfers:X}=H,et=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:x,cacheKey:$,annotationStorage:N},X).getReader(),ft=this._intentStates.get($);ft.streamReader=et;const at=()=>{et.read().then(({value:st,done:dt})=>{if(dt){ft.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(st,ft),at())},st=>{if(ft.streamReader=null,!this._transport.destroyed){if(ft.operatorList){ft.operatorList.lastChunk=!0;for(const dt of ft.renderTasks)dt.operatorListChanged();bt(this,s,de).call(this,!0)}if(ft.displayReadyCapability)ft.displayReadyCapability.reject(st);else if(ft.opListReadCapability)ft.opListReadCapability.reject(st);else throw st}})};at()}_abortOperatorList({intentState:x,reason:$,force:H=!1}){if(x.streamReader){if(x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null),!H){if(x.renderTasks.size>0)return;if($ instanceof _display_utils.RenderingCancelledException){let N=RENDERING_CANCELLED_TIMEOUT;$.extraDelay>0&&$.extraDelay<1e3&&(N+=$.extraDelay),x.streamReaderCancelTimeout=setTimeout(()=>{x.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:x,reason:$,force:!0})},N);return}}if(x.streamReader.cancel(new _util.AbortException($.message)).catch(()=>{}),x.streamReader=null,!this._transport.destroyed){for(const[N,X]of this._intentStates)if(X===x){this._intentStates.delete(N);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,i=new WeakMap,s=new WeakSet,de=function(x=!1){if(bt(this,a,Ce).call(this),!E(this,i)||this.destroyed)return!1;if(x)return wt(this,n,setTimeout(()=>{wt(this,n,null),bt(this,s,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:$,operatorList:H}of this._intentStates.values())if($.size>0||!H.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),wt(this,i,!1),!0},a=new WeakSet,Ce=function(){E(this,n)&&(clearTimeout(E(this,n)),wt(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ht(this,c,new Set);ht(this,u,Promise.resolve())}postMessage(x,$){const H={data:structuredClone(x,$?{transfer:$}:null)};E(this,u).then(()=>{for(const N of E(this,c))N.call(this,H)})}addEventListener(x,$){E(this,c).add($)}removeEventListener(x,$){E(this,c).delete($)}terminate(){E(this,c).clear()}}c=new WeakMap,u=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const M=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;M&&(PDFWorkerUtil.fallbackWorkerSrc=M.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(M,x){let $;try{if($=new URL(M),!$.origin||$.origin==="null")return!1}catch{return!1}const H=new URL(x,$);return $.origin===H.origin},PDFWorkerUtil.createCDNWrapper=function(M){const x=`importScripts("${M}");`;return URL.createObjectURL(new Blob([x]))}}const _PDFWorker=class _PDFWorker{constructor({name:M=null,port:x=null,verbosity:$=(0,_util.getVerbosityLevel)()}={}){var H;if(this.name=M,this.destroyed=!1,this.verbosity=$,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,x){if((H=E(_PDFWorker,_))!=null&&H.has(x))throw new Error("Cannot use more than one PDFWorker per port.");(E(_PDFWorker,_)||wt(_PDFWorker,_,new WeakMap)).set(x,this),this._initializeFromPort(x);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(M){this._port=M,this._messageHandler=new _message_handler.MessageHandler("main","worker",M),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:M}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,M)||(M=PDFWorkerUtil.createCDNWrapper(new URL(M,window.location).href));const x=new Worker(M),$=new _message_handler.MessageHandler("main","worker",x),H=()=>{x.removeEventListener("error",N),$.destroy(),x.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},N=()=>{this._webWorker||H()};x.addEventListener("error",N),$.on("test",g=>{if(x.removeEventListener("error",N),this.destroyed){H();return}g?(this._messageHandler=$,this._port=x,this._webWorker=x,this._readyCapability.resolve(),$.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),$.destroy(),x.terminate())}),$.on("ready",g=>{if(x.removeEventListener("error",N),this.destroyed){H();return}try{X()}catch{this._setupFakeWorker()}});const X=()=>{const g=new Uint8Array;$.send("test",g,[g.buffer])};X();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(M=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const x=new LoopbackPort;this._port=x;const $=`fake${PDFWorkerUtil.fakeWorkerId++}`,H=new _message_handler.MessageHandler($+"_worker",$,x);M.setup(H,x);const N=new _message_handler.MessageHandler($,$+"_worker",x);this._messageHandler=N,this._readyCapability.resolve(),N.send("configure",{verbosity:this.verbosity})}).catch(M=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${M.message}".`))})}destroy(){var M;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(M=E(_PDFWorker,_))==null||M.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(M){var $;if(!(M!=null&&M.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const x=($=E(this,_))==null?void 0:$.get(M.port);if(x){if(x._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return x}return new _PDFWorker(M)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var M;try{return((M=globalThis.pdfjsWorker)==null?void 0:M.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_=new WeakMap,ht(_PDFWorker,_,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(x,$,H,N,X){ht(this,b);ht(this,w,new Map);ht(this,d,new Map);ht(this,S,new Map);ht(this,f,null);this.messageHandler=x,this.loadingTask=$,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:N.ownerDocument,styleElement:N.styleElement}),this._params=N,this.canvasFactory=X.canvasFactory,this.filterFactory=X.filterFactory,this.cMapReaderFactory=X.cMapReaderFactory,this.standardFontDataFactory=X.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=H,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(x,$=_util.AnnotationMode.ENABLE,H=null,N=!1){let X=_util.RenderingIntentFlag.DISPLAY,g=_annotation_storage.SerializableEmpty;switch(x){case"any":X=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":X=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${x}`)}switch($){case _util.AnnotationMode.DISABLE:X+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:X+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:X+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,g=(X&_util.RenderingIntentFlag.PRINT&&H instanceof _annotation_storage.PrintAnnotationStorage?H:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${$}`)}return N&&(X+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:X,cacheKey:`${X}_${g.hash}`,annotationStorageSerializable:g}}destroy(){var H;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(H=E(this,f))==null||H.reject(new Error("Worker was destroyed during onPassword callback"));const x=[];for(const N of E(this,d).values())x.push(N._destroy());E(this,d).clear(),E(this,S).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const $=this.messageHandler.sendWithPromise("Terminate",null);return x.push($),Promise.all(x).then(()=>{var N;this.commonObjs.clear(),this.fontLoader.clear(),E(this,w).clear(),this.filterFactory.destroy(),(N=this._networkStream)==null||N.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:x,loadingTask:$}=this;x.on("GetReader",(H,N)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=X=>{this._lastProgress={loaded:X.loaded,total:X.total}},N.onPull=()=>{this._fullReader.read().then(function({value:X,done:g}){if(g){N.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),N.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{N.error(X)})},N.onCancel=X=>{this._fullReader.cancel(X),N.ready.catch(g=>{if(!this.destroyed)throw g})}}),x.on("ReaderHeadersReady",H=>{const N=new _util.PromiseCapability,X=this._fullReader;return X.headersReady.then(()=>{var g;(!X.isStreamingSupported||!X.isRangeSupported)&&(this._lastProgress&&((g=$.onProgress)==null||g.call($,this._lastProgress)),X.onProgress=et=>{var ft;(ft=$.onProgress)==null||ft.call($,{loaded:et.loaded,total:et.total})}),N.resolve({isStreamingSupported:X.isStreamingSupported,isRangeSupported:X.isRangeSupported,contentLength:X.contentLength})},N.reject),N.promise}),x.on("GetRangeReader",(H,N)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const X=this._networkStream.getRangeReader(H.begin,H.end);if(!X){N.close();return}N.onPull=()=>{X.read().then(function({value:g,done:et}){if(et){N.close();return}(0,_util.assert)(g instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),N.enqueue(new Uint8Array(g),1,[g])}).catch(g=>{N.error(g)})},N.onCancel=g=>{X.cancel(g),N.ready.catch(et=>{if(!this.destroyed)throw et})}}),x.on("GetDoc",({pdfInfo:H})=>{this._numPages=H.numPages,this._htmlForXfa=H.htmlForXfa,delete H.htmlForXfa,$._capability.resolve(new PDFDocumentProxy(H,this))}),x.on("DocException",function(H){let N;switch(H.name){case"PasswordException":N=new _util.PasswordException(H.message,H.code);break;case"InvalidPDFException":N=new _util.InvalidPDFException(H.message);break;case"MissingPDFException":N=new _util.MissingPDFException(H.message);break;case"UnexpectedResponseException":N=new _util.UnexpectedResponseException(H.message,H.status);break;case"UnknownErrorException":N=new _util.UnknownErrorException(H.message,H.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}$._capability.reject(N)}),x.on("PasswordRequest",H=>{if(wt(this,f,new _util.PromiseCapability),$.onPassword){const N=X=>{X instanceof Error?E(this,f).reject(X):E(this,f).resolve({password:X})};try{$.onPassword(N,H.code)}catch(X){E(this,f).reject(X)}}else E(this,f).reject(new _util.PasswordException(H.message,H.code));return E(this,f).promise}),x.on("DataLoaded",H=>{var N;(N=$.onProgress)==null||N.call($,{loaded:H.length,total:H.length}),this.downloadInfoCapability.resolve(H)}),x.on("StartRenderPage",H=>{if(this.destroyed)return;E(this,d).get(H.pageIndex)._startRenderPage(H.transparency,H.cacheKey)}),x.on("commonobj",([H,N,X])=>{var g;if(!this.destroyed&&!this.commonObjs.has(H))switch(N){case"Font":const et=this._params;if("error"in X){const st=X.error;(0,_util.warn)(`Error during font loading: ${st}`),this.commonObjs.resolve(H,st);break}const ft=et.pdfBug&&((g=globalThis.FontInspector)!=null&&g.enabled)?(st,dt)=>globalThis.FontInspector.fontAdded(st,dt):null,at=new _font_loader.FontFaceObject(X,{isEvalSupported:et.isEvalSupported,disableFontFace:et.disableFontFace,ignoreErrors:et.ignoreErrors,inspectFont:ft});this.fontLoader.bind(at).catch(st=>x.sendWithPromise("FontFallback",{id:H})).finally(()=>{!et.fontExtraProperties&&at.data&&(at.data=null),this.commonObjs.resolve(H,at)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(H,X);break;default:throw new Error(`Got unknown common object type ${N}`)}}),x.on("obj",([H,N,X,g])=>{var ft;if(this.destroyed)return;const et=E(this,d).get(N);if(!et.objs.has(H))switch(X){case"Image":if(et.objs.resolve(H,g),g){let at;if(g.bitmap){const{width:st,height:dt}=g;at=st*dt*4}else at=((ft=g.data)==null?void 0:ft.length)||0;at>_util.MAX_IMAGE_SIZE_TO_CACHE&&(et._maybeCleanupAfterRender=!0)}break;case"Pattern":et.objs.resolve(H,g);break;default:throw new Error(`Got unknown object type ${X}`)}}),x.on("DocProgress",H=>{var N;this.destroyed||(N=$.onProgress)==null||N.call($,{loaded:H.loaded,total:H.total})}),x.on("FetchBuiltInCMap",H=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(H):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),x.on("FetchStandardFontData",H=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(H):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var H;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:x,transfers:$}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:x,filename:((H=this._fullReader)==null?void 0:H.filename)??null},$).finally(()=>{this.annotationStorage.resetModified()})}getPage(x){if(!Number.isInteger(x)||x<=0||x>this._numPages)return Promise.reject(new Error("Invalid page request."));const $=x-1,H=E(this,S).get($);if(H)return H;const N=this.messageHandler.sendWithPromise("GetPage",{pageIndex:$}).then(X=>{if(this.destroyed)throw new Error("Transport destroyed");const g=new PDFPageProxy($,X,this,this._params.pdfBug);return E(this,d).set($,g),g});return E(this,S).set($,N),N}getPageIndex(x){return typeof x!="object"||x===null||!Number.isInteger(x.num)||x.num<0||!Number.isInteger(x.gen)||x.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:x.num,gen:x.gen})}getAnnotations(x,$){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:x,intent:$})}getFieldObjects(){return bt(this,b,xe).call(this,"GetFieldObjects")}hasJSActions(){return bt(this,b,xe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(x){return typeof x!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:x})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return bt(this,b,xe).call(this,"GetDocJSActions")}getPageJSActions(x){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:x})}getStructTree(x){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:x})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(x=>new _optional_content_config.OptionalContentConfig(x))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const x="GetMetadata",$=E(this,w).get(x);if($)return $;const H=this.messageHandler.sendWithPromise(x,null).then(N=>{var X,g;return{info:N[0],metadata:N[1]?new _metadata.Metadata(N[1]):null,contentDispositionFilename:((X=this._fullReader)==null?void 0:X.filename)??null,contentLength:((g=this._fullReader)==null?void 0:g.contentLength)??null}});return E(this,w).set(x,H),H}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(x=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const $ of E(this,d).values())if(!$.cleanup())throw new Error(`startCleanup: Page ${$.pageNumber} is currently rendering.`);this.commonObjs.clear(),x||this.fontLoader.clear(),E(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:x,enableXfa:$}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:x,enableXfa:$})}}w=new WeakMap,d=new WeakMap,S=new WeakMap,f=new WeakMap,b=new WeakSet,xe=function(x,$=null){const H=E(this,w).get(x);if(H)return H;const N=this.messageHandler.sendWithPromise(x,$);return E(this,w).set(x,N),N};class PDFObjects{constructor(){ht(this,P);ht(this,k,Object.create(null))}get(x,$=null){if($){const N=bt(this,P,Ue).call(this,x);return N.capability.promise.then(()=>$(N.data)),null}const H=E(this,k)[x];if(!(H!=null&&H.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${x}.`);return H.data}has(x){const $=E(this,k)[x];return($==null?void 0:$.capability.settled)||!1}resolve(x,$=null){const H=bt(this,P,Ue).call(this,x);H.data=$,H.capability.resolve()}clear(){var x;for(const $ in E(this,k)){const{data:H}=E(this,k)[$];(x=H==null?void 0:H.bitmap)==null||x.close()}wt(this,k,Object.create(null))}}k=new WeakMap,P=new WeakSet,Ue=function(x){var $;return($=E(this,k))[x]||($[x]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(x){ht(this,A,null);wt(this,A,x),this.onContinue=null}get promise(){return E(this,A).capability.promise}cancel(x=0){E(this,A).cancel(null,x)}get separateAnnots(){const{separateAnnots:x}=E(this,A).operatorList;if(!x)return!1;const{annotationCanvasMap:$}=E(this,A);return x.form||x.canvas&&($==null?void 0:$.size)>0}}A=new WeakMap,exports.RenderTask=RenderTask;const U=class U{constructor({callback:x,params:$,objs:H,commonObjs:N,annotationCanvasMap:X,operatorList:g,pageIndex:et,canvasFactory:ft,filterFactory:at,useRequestAnimationFrame:st=!1,pdfBug:dt=!1,pageColors:St=null}){this.callback=x,this.params=$,this.objs=H,this.commonObjs=N,this.annotationCanvasMap=X,this.operatorListIdx=null,this.operatorList=g,this._pageIndex=et,this.canvasFactory=ft,this.filterFactory=at,this._pdfBug=dt,this.pageColors=St,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=st===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=$.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:x=!1,optionalContentConfig:$}){var et,ft;if(this.cancelled)return;if(this._canvas){if(E(U,F).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");E(U,F).add(this._canvas)}this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:H,viewport:N,transform:X,background:g}=this.params;this.gfx=new _canvas.CanvasGraphics(H,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:$},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:X,viewport:N,transparency:x,background:g}),this.operatorListIdx=0,this.graphicsReady=!0,(ft=this.graphicsReadyCallback)==null||ft.call(this)}cancel(x=null,$=0){var H;this.running=!1,this.cancelled=!0,(H=this.gfx)==null||H.endDrawing(),E(U,F).delete(this._canvas),this.callback(x||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,$))}operatorListChanged(){var x;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(x=this.stepper)==null||x.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),E(U,F).delete(this._canvas),this.callback())))}};F=new WeakMap,ht(U,F,new WeakSet);let InternalRenderTask=U;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,n)=>{var u,l,_,wn,d;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=n(1),s=n(4),r=n(8);const a=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=a;class h{constructor(){ht(this,_);ht(this,u,!1);ht(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(f,b){const m=E(this,l).get(f);return m===void 0?b:Object.assign(b,m)}getRawValue(f){return E(this,l).get(f)}remove(f){if(E(this,l).delete(f),E(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of E(this,l).values())if(b instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(f,b){const m=E(this,l).get(f);let k=!1;if(m!==void 0)for(const[P,R]of Object.entries(b))m[P]!==R&&(k=!0,m[P]=R);else k=!0,E(this,l).set(f,b);k&&bt(this,_,wn).call(this),b instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(f){return E(this,l).has(f)}getAll(){return E(this,l).size>0?(0,i.objectFromMap)(E(this,l)):null}setAll(f){for(const[b,m]of Object.entries(f))this.setValue(b,m)}get size(){return E(this,l).size}resetModified(){E(this,u)&&(wt(this,u,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new c(this)}get serializable(){if(E(this,l).size===0)return a;const f=new Map,b=new r.MurmurHash3_64,m=[],k=Object.create(null);let P=!1;for(const[R,A]of E(this,l)){const F=A instanceof s.AnnotationEditor?A.serialize(!1,k):A;F&&(f.set(R,F),b.update(`${R}:${JSON.stringify(F)}`),P||(P=!!F.bitmap))}if(P)for(const R of f.values())R.bitmap&&m.push(R.bitmap);return f.size>0?{map:f,hash:b.hexdigest(),transfers:m}:a}}u=new WeakMap,l=new WeakMap,_=new WeakSet,wn=function(){E(this,u)||(wt(this,u,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=h;class c extends h{constructor(b){super();ht(this,d,void 0);const{map:m,hash:k,transfers:P}=b.serializable,R=structuredClone(m,P?{transfer:P}:null);wt(this,d,{map:R,hash:k,transfers:P})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return E(this,d)}}d=new WeakMap,e.PrintAnnotationStorage=c},(t,e,n)=>{var c,u,l,_,w,d,S,f,b,m,k,P,R,A,F,ze,M,$e,$,He,N,We,g,Sn,ft,En,st,Cn,St,Ve,Y,xn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=n(5),s=n(1),r=n(6);const y=class y{constructor(C){ht(this,F);ht(this,M);ht(this,N);ht(this,g);ht(this,ft);ht(this,st);ht(this,St);ht(this,Y);ht(this,c,"");ht(this,u,!1);ht(this,l,null);ht(this,_,null);ht(this,w,null);ht(this,d,!1);ht(this,S,null);ht(this,f,this.focusin.bind(this));ht(this,b,this.focusout.bind(this));ht(this,m,!1);ht(this,k,!1);ht(this,P,!1);ie(this,"_initialOptions",Object.create(null));ie(this,"_uiManager",null);ie(this,"_focusEventsAllowed",!0);ie(this,"_l10nPromise",null);ht(this,R,!1);ht(this,A,y._zIndex++);this.constructor===y&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=C.parent,this.id=C.id,this.width=this.height=null,this.pageIndex=C.parent.pageIndex,this.name=C.name,this.div=null,this._uiManager=C.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=C.isCentered,this._structTreeParentId=null;const{rotation:I,rawDims:{pageWidth:D,pageHeight:W,pageX:Q,pageY:it}}=this.parent.viewport;this.rotation=I,this.pageRotation=(360+I-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[D,W],this.pageTranslation=[Q,it];const[pt,j]=this.parentDimensions;this.x=C.x/pt,this.y=C.y/j,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(C){const I=new h({id:C.parent.getNextId(),parent:C.parent,uiManager:C._uiManager});I.annotationElementId=C.annotationElementId,I.deleted=!0,I._uiManager.addToAnnotationStorage(I)}static initialize(C,I=null){if(y._l10nPromise||(y._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(W=>[W,C.get(W)]))),I!=null&&I.strings)for(const W of I.strings)y._l10nPromise.set(W,C.get(W));if(y._borderLineWidth!==-1)return;const D=getComputedStyle(document.documentElement);y._borderLineWidth=parseFloat(D.getPropertyValue("--outline-width"))||0}static updateDefaultParams(C,I){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(C){return!1}static paste(C,I){(0,s.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return E(this,R)}set _isDraggable(C){var I;wt(this,R,C),(I=this.div)==null||I.classList.toggle("draggable",C)}center(){const[C,I]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*I/(C*2),this.y+=this.width*C/(I*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*I/(C*2),this.y-=this.width*C/(I*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(C){this._uiManager.addCommands(C)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=E(this,A)}setParent(C){C!==null&&(this.pageIndex=C.pageIndex,this.pageDimensions=C.pageDimensions),this.parent=C}focusin(C){this._focusEventsAllowed&&(E(this,m)?wt(this,m,!1):this.parent.setSelected(this))}focusout(C){var D;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const I=C.relatedTarget;I!=null&&I.closest(`#${this.id}`)||(C.preventDefault(),(D=this.parent)!=null&&D.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(C,I,D,W){const[Q,it]=this.parentDimensions;[D,W]=this.screenToPageTranslation(D,W),this.x=(C+D)/Q,this.y=(I+W)/it,this.fixAndSetPosition()}translate(C,I){bt(this,F,ze).call(this,this.parentDimensions,C,I)}translateInPage(C,I){bt(this,F,ze).call(this,this.pageDimensions,C,I),this.div.scrollIntoView({block:"nearest"})}drag(C,I){const[D,W]=this.parentDimensions;if(this.x+=C/D,this.y+=I/W,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:o,y:z}=this.div.getBoundingClientRect();this.parent.findNewParent(this,o,z)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Q,y:it}=this;const[pt,j]=bt(this,M,$e).call(this);Q+=pt,it+=j,this.div.style.left=`${(100*Q).toFixed(2)}%`,this.div.style.top=`${(100*it).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[C,I]=this.pageDimensions;let{x:D,y:W,width:Q,height:it}=this;switch(Q*=C,it*=I,D*=C,W*=I,this.rotation){case 0:D=Math.max(0,Math.min(C-Q,D)),W=Math.max(0,Math.min(I-it,W));break;case 90:D=Math.max(0,Math.min(C-it,D)),W=Math.min(I,Math.max(Q,W));break;case 180:D=Math.min(C,Math.max(Q,D)),W=Math.min(I,Math.max(it,W));break;case 270:D=Math.min(C,Math.max(it,D)),W=Math.max(0,Math.min(I-Q,W));break}this.x=D/=C,this.y=W/=I;const[pt,j]=bt(this,M,$e).call(this);D+=pt,W+=j;const{style:o}=this.div;o.left=`${(100*D).toFixed(2)}%`,o.top=`${(100*W).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(C,I){var D;return bt(D=y,$,He).call(D,C,I,this.parentRotation)}pageTranslationToScreen(C,I){var D;return bt(D=y,$,He).call(D,C,I,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:C,pageDimensions:[I,D]}=this,W=I*C,Q=D*C;return s.FeatureTest.isCSSRoundSupported?[Math.round(W),Math.round(Q)]:[W,Q]}setDims(C,I){var Q;const[D,W]=this.parentDimensions;this.div.style.width=`${(100*C/D).toFixed(2)}%`,E(this,d)||(this.div.style.height=`${(100*I/W).toFixed(2)}%`),(Q=E(this,l))==null||Q.classList.toggle("small",C<y.SMALL_EDITOR_SIZE||I<y.SMALL_EDITOR_SIZE)}fixDims(){const{style:C}=this.div,{height:I,width:D}=C,W=D.endsWith("%"),Q=!E(this,d)&&I.endsWith("%");if(W&&Q)return;const[it,pt]=this.parentDimensions;W||(C.width=`${(100*parseFloat(D)/it).toFixed(2)}%`),!E(this,d)&&!Q&&(C.height=`${(100*parseFloat(I)/pt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(E(this,l))return;const C=wt(this,l,document.createElement("button"));C.className="altText";const I=await y._l10nPromise.get("editor_alt_text_button_label");C.textContent=I,C.setAttribute("aria-label",I),C.tabIndex="0",C.addEventListener("contextmenu",r.noContextMenu),C.addEventListener("pointerdown",D=>D.stopPropagation()),C.addEventListener("click",D=>{D.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),C.addEventListener("keydown",D=>{D.target===C&&D.key==="Enter"&&(D.preventDefault(),this._uiManager.editAltText(this))}),bt(this,St,Ve).call(this),this.div.append(C),y.SMALL_EDITOR_SIZE||(y.SMALL_EDITOR_SIZE=Math.min(128,Math.round(C.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:E(this,c),decorative:E(this,u)}}set altTextData({altText:C,decorative:I}){E(this,c)===C&&E(this,u)===I||(wt(this,c,C),wt(this,u,I),bt(this,St,Ve).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",E(this,f)),this.div.addEventListener("focusout",E(this,b));const[C,I]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*I/C).toFixed(2)}%`,this.div.style.maxHeight=`${(100*C/I).toFixed(2)}%`);const[D,W]=this.getInitialTranslation();return this.translate(D,W),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(C){const{isMac:I}=s.FeatureTest.platform;if(C.button!==0||C.ctrlKey&&I){C.preventDefault();return}wt(this,m,!0),bt(this,Y,xn).call(this,C)}moveInDOM(){var C;(C=this.parent)==null||C.moveEditorInDOM(this)}_setParentAndPosition(C,I,D){C.changeParent(this),this.x=I,this.y=D,this.fixAndSetPosition()}getRect(C,I){const D=this.parentScale,[W,Q]=this.pageDimensions,[it,pt]=this.pageTranslation,j=C/D,o=I/D,z=this.x*W,G=this.y*Q,O=this.width*W,L=this.height*Q;switch(this.rotation){case 0:return[z+j+it,Q-G-o-L+pt,z+j+O+it,Q-G-o+pt];case 90:return[z+o+it,Q-G+j+pt,z+o+L+it,Q-G+j+O+pt];case 180:return[z-j-O+it,Q-G+o+pt,z-j+it,Q-G+o+L+pt];case 270:return[z-o-L+it,Q-G-j-O+pt,z-o+it,Q-G-j+pt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(C,I){const[D,W,Q,it]=C,pt=Q-D,j=it-W;switch(this.rotation){case 0:return[D,I-it,pt,j];case 90:return[D,I-W,j,pt];case 180:return[Q,I-W,pt,j];case 270:return[Q,I-it,j,pt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){wt(this,P,!0)}disableEditMode(){wt(this,P,!1)}isInEditMode(){return E(this,P)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var C,I;(C=this.div)==null||C.addEventListener("focusin",E(this,f)),(I=this.div)==null||I.addEventListener("focusout",E(this,b))}serialize(C=!1,I=null){(0,s.unreachable)("An editor must be serializable")}static deserialize(C,I,D){const W=new this.prototype.constructor({parent:I,id:I.getNextId(),uiManager:D});W.rotation=C.rotation;const[Q,it]=W.pageDimensions,[pt,j,o,z]=W.getRectInCurrentCoords(C.rect,it);return W.x=pt/Q,W.y=j/it,W.width=o/Q,W.height=z/it,W}remove(){var C;this.div.removeEventListener("focusin",E(this,f)),this.div.removeEventListener("focusout",E(this,b)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(C=E(this,l))==null||C.remove(),wt(this,l,null),wt(this,_,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(bt(this,g,Sn).call(this),E(this,S).classList.remove("hidden"))}select(){var C;this.makeResizable(),(C=this.div)==null||C.classList.add("selectedEditor")}unselect(){var C,I,D;(C=E(this,S))==null||C.classList.add("hidden"),(I=this.div)==null||I.classList.remove("selectedEditor"),(D=this.div)!=null&&D.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(C,I){}disableEditing(){E(this,l)&&(E(this,l).hidden=!0)}enableEditing(){E(this,l)&&(E(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return E(this,k)}set isEditing(C){wt(this,k,C),this.parent&&(C?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(C,I){wt(this,d,!0);const D=C/I,{style:W}=this.div;W.aspectRatio=D,W.height="auto"}static get MIN_SIZE(){return 16}};c=new WeakMap,u=new WeakMap,l=new WeakMap,_=new WeakMap,w=new WeakMap,d=new WeakMap,S=new WeakMap,f=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,P=new WeakMap,R=new WeakMap,A=new WeakMap,F=new WeakSet,ze=function([C,I],D,W){[D,W]=this.screenToPageTranslation(D,W),this.x+=D/C,this.y+=W/I,this.fixAndSetPosition()},M=new WeakSet,$e=function(){const[C,I]=this.parentDimensions,{_borderLineWidth:D}=y,W=D/C,Q=D/I;switch(this.rotation){case 90:return[-W,Q];case 180:return[W,Q];case 270:return[W,-Q];default:return[-W,-Q]}},$=new WeakSet,He=function(C,I,D){switch(D){case 90:return[I,-C];case 180:return[-C,-I];case 270:return[-I,C];default:return[C,I]}},N=new WeakSet,We=function(C){switch(C){case 90:{const[I,D]=this.pageDimensions;return[0,-I/D,D/I,0]}case 180:return[-1,0,0,-1];case 270:{const[I,D]=this.pageDimensions;return[0,I/D,-D/I,0]}default:return[1,0,0,1]}},g=new WeakSet,Sn=function(){if(E(this,S))return;wt(this,S,document.createElement("div")),E(this,S).classList.add("resizers");const C=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||C.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const I of C){const D=document.createElement("div");E(this,S).append(D),D.classList.add("resizer",I),D.addEventListener("pointerdown",bt(this,ft,En).bind(this,I)),D.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(E(this,S))},ft=new WeakSet,En=function(C,I){I.preventDefault();const{isMac:D}=s.FeatureTest.platform;if(I.button!==0||I.ctrlKey&&D)return;const W=bt(this,st,Cn).bind(this,C),Q=this._isDraggable;this._isDraggable=!1;const it={passive:!0,capture:!0};window.addEventListener("pointermove",W,it);const pt=this.x,j=this.y,o=this.width,z=this.height,G=this.parent.div.style.cursor,O=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(I.target).cursor;const L=()=>{this._isDraggable=Q,window.removeEventListener("pointerup",L),window.removeEventListener("blur",L),window.removeEventListener("pointermove",W,it),this.parent.div.style.cursor=G,this.div.style.cursor=O;const K=this.x,nt=this.y,ct=this.width,V=this.height;K===pt&&nt===j&&ct===o&&V===z||this.addCommands({cmd:()=>{this.width=ct,this.height=V,this.x=K,this.y=nt;const[J,Z]=this.parentDimensions;this.setDims(J*ct,Z*V),this.fixAndSetPosition()},undo:()=>{this.width=o,this.height=z,this.x=pt,this.y=j;const[J,Z]=this.parentDimensions;this.setDims(J*o,Z*z),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",L),window.addEventListener("blur",L)},st=new WeakSet,Cn=function(C,I){const[D,W]=this.parentDimensions,Q=this.x,it=this.y,pt=this.width,j=this.height,o=y.MIN_SIZE/D,z=y.MIN_SIZE/W,G=kt=>Math.round(kt*1e4)/1e4,O=bt(this,N,We).call(this,this.rotation),L=(kt,Rt)=>[O[0]*kt+O[2]*Rt,O[1]*kt+O[3]*Rt],K=bt(this,N,We).call(this,360-this.rotation),nt=(kt,Rt)=>[K[0]*kt+K[2]*Rt,K[1]*kt+K[3]*Rt];let ct,V,J=!1,Z=!1;switch(C){case"topLeft":J=!0,ct=(kt,Rt)=>[0,0],V=(kt,Rt)=>[kt,Rt];break;case"topMiddle":ct=(kt,Rt)=>[kt/2,0],V=(kt,Rt)=>[kt/2,Rt];break;case"topRight":J=!0,ct=(kt,Rt)=>[kt,0],V=(kt,Rt)=>[0,Rt];break;case"middleRight":Z=!0,ct=(kt,Rt)=>[kt,Rt/2],V=(kt,Rt)=>[0,Rt/2];break;case"bottomRight":J=!0,ct=(kt,Rt)=>[kt,Rt],V=(kt,Rt)=>[0,0];break;case"bottomMiddle":ct=(kt,Rt)=>[kt/2,Rt],V=(kt,Rt)=>[kt/2,0];break;case"bottomLeft":J=!0,ct=(kt,Rt)=>[0,Rt],V=(kt,Rt)=>[kt,0];break;case"middleLeft":Z=!0,ct=(kt,Rt)=>[0,Rt/2],V=(kt,Rt)=>[kt,Rt/2];break}const rt=ct(pt,j),vt=V(pt,j);let Ct=L(...vt);const Tt=G(Q+Ct[0]),It=G(it+Ct[1]);let zt=1,Ut=1,[Vt,Nt]=this.screenToPageTranslation(I.movementX,I.movementY);if([Vt,Nt]=nt(Vt/D,Nt/W),J){const kt=Math.hypot(pt,j);zt=Ut=Math.max(Math.min(Math.hypot(vt[0]-rt[0]-Vt,vt[1]-rt[1]-Nt)/kt,1/pt,1/j),o/pt,z/j)}else Z?zt=Math.max(o,Math.min(1,Math.abs(vt[0]-rt[0]-Vt)))/pt:Ut=Math.max(z,Math.min(1,Math.abs(vt[1]-rt[1]-Nt)))/j;const Xt=G(pt*zt),xt=G(j*Ut);Ct=L(...V(Xt,xt));const _t=Tt-Ct[0],gt=It-Ct[1];this.width=Xt,this.height=xt,this.x=_t,this.y=gt,this.setDims(D*Xt,W*xt),this.fixAndSetPosition()},St=new WeakSet,Ve=async function(){var D;const C=E(this,l);if(!C)return;if(!E(this,c)&&!E(this,u)){C.classList.remove("done"),(D=E(this,_))==null||D.remove();return}y._l10nPromise.get("editor_alt_text_edit_button_label").then(W=>{C.setAttribute("aria-label",W)});let I=E(this,_);if(!I){wt(this,_,I=document.createElement("span")),I.className="tooltip",I.setAttribute("role","tooltip");const W=I.id=`alt-text-tooltip-${this.id}`;C.setAttribute("aria-describedby",W);const Q=100;C.addEventListener("mouseenter",()=>{wt(this,w,setTimeout(()=>{wt(this,w,null),E(this,_).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Q))}),C.addEventListener("mouseleave",()=>{var it;clearTimeout(E(this,w)),wt(this,w,null),(it=E(this,_))==null||it.classList.remove("show")})}C.classList.add("done"),I.innerText=E(this,u)?await y._l10nPromise.get("editor_alt_text_decorative_tooltip"):E(this,c),I.parentNode||C.append(I)},Y=new WeakSet,xn=function(C){if(!this._isDraggable)return;const I=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let D,W;I&&(D={passive:!0,capture:!0},W=it=>{const[pt,j]=this.screenToPageTranslation(it.movementX,it.movementY);this._uiManager.dragSelectedEditors(pt,j)},window.addEventListener("pointermove",W,D));const Q=()=>{if(window.removeEventListener("pointerup",Q),window.removeEventListener("blur",Q),I&&window.removeEventListener("pointermove",W,D),wt(this,m,!1),!this._uiManager.endDragSession()){const{isMac:it}=s.FeatureTest.platform;C.ctrlKey&&!it||C.shiftKey||C.metaKey&&it?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Q),window.addEventListener("blur",Q)},ht(y,$),ie(y,"_borderLineWidth",-1),ie(y,"_colorManager",new i.ColorManager),ie(y,"_zIndex",1),ie(y,"SMALL_EDITOR_SIZE",0);let a=y;e.AnnotationEditor=a;class h extends a{constructor(C){super(C),this.annotationElementId=C.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{var d,S,f,b,m,Ge,R,A,F,U,M,kn,H,N,X,g,et,ft,at,st,dt,St,ut,Y,B,y,v,C,I,D,W,Q,it,pt,j,o,z,G,O,L,K,nt,ct,V,J,Z,rt,Tn,Ct,qe,It,Xe,Ut,ke,Nt,Ye,xt,Ke,gt,oe,Rt,be,te,Pn,Ot,Rn,Mt,Je,Gt,ye,Ft,Ze;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=r,e.opacityToHex=a;var i=n(1),s=n(6);function r(ot,T,q){for(const lt of q)T.addEventListener(lt,ot[lt].bind(ot))}function a(ot){return Math.round(Math.min(255,Math.max(1,255*ot))).toString(16).padStart(2,"0")}class h{constructor(){ht(this,d,0)}getId(){return`${i.AnnotationEditorPrefix}${_e(this,d)._++}`}}d=new WeakMap;const P=class P{constructor(){ht(this,m);ht(this,S,(0,i.getUuid)());ht(this,f,0);ht(this,b,null)}static get _isSVGFittingCanvas(){const T='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',lt=new OffscreenCanvas(1,3).getContext("2d"),mt=new Image;mt.src=T;const yt=mt.decode().then(()=>(lt.drawImage(mt,0,0,1,1,0,0,1,3),new Uint32Array(lt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",yt)}async getFromFile(T){const{lastModified:q,name:lt,size:mt,type:yt}=T;return bt(this,m,Ge).call(this,`${q}_${lt}_${mt}_${yt}`,T)}async getFromUrl(T){return bt(this,m,Ge).call(this,T,T)}async getFromId(T){E(this,b)||wt(this,b,new Map);const q=E(this,b).get(T);return q?q.bitmap?(q.refCounter+=1,q):q.file?this.getFromFile(q.file):this.getFromUrl(q.url):null}getSvgUrl(T){const q=E(this,b).get(T);return q!=null&&q.isSvg?q.svgUrl:null}deleteId(T){E(this,b)||wt(this,b,new Map);const q=E(this,b).get(T);q&&(q.refCounter-=1,q.refCounter===0&&(q.bitmap=null))}isValidId(T){return T.startsWith(`image_${E(this,S)}_`)}};S=new WeakMap,f=new WeakMap,b=new WeakMap,m=new WeakSet,Ge=async function(T,q){E(this,b)||wt(this,b,new Map);let lt=E(this,b).get(T);if(lt===null)return null;if(lt!=null&&lt.bitmap)return lt.refCounter+=1,lt;try{lt||(lt={bitmap:null,id:`image_${E(this,S)}_${_e(this,f)._++}`,refCounter:0,isSvg:!1});let mt;if(typeof q=="string"){lt.url=q;const yt=await fetch(q);if(!yt.ok)throw new Error(yt.statusText);mt=await yt.blob()}else mt=lt.file=q;if(mt.type==="image/svg+xml"){const yt=P._isSVGFittingCanvas,Et=new FileReader,Pt=new Image,Lt=new Promise((Dt,Yt)=>{Pt.onload=()=>{lt.bitmap=Pt,lt.isSvg=!0,Dt()},Et.onload=async()=>{const Bt=lt.svgUrl=Et.result;Pt.src=await yt?`${Bt}#svgView(preserveAspectRatio(none))`:Bt},Pt.onerror=Et.onerror=Yt});Et.readAsDataURL(mt),await Lt}else lt.bitmap=await createImageBitmap(mt);lt.refCounter=1}catch(mt){console.error(mt),lt=null}return E(this,b).set(T,lt),lt&&E(this,b).set(lt.id,lt),lt};let c=P;class u{constructor(T=128){ht(this,R,[]);ht(this,A,!1);ht(this,F,void 0);ht(this,U,-1);wt(this,F,T)}add({cmd:T,undo:q,mustExec:lt,type:mt=NaN,overwriteIfSameType:yt=!1,keepUndo:Et=!1}){if(lt&&T(),E(this,A))return;const Pt={cmd:T,undo:q,type:mt};if(E(this,U)===-1){E(this,R).length>0&&(E(this,R).length=0),wt(this,U,0),E(this,R).push(Pt);return}if(yt&&E(this,R)[E(this,U)].type===mt){Et&&(Pt.undo=E(this,R)[E(this,U)].undo),E(this,R)[E(this,U)]=Pt;return}const Lt=E(this,U)+1;Lt===E(this,F)?E(this,R).splice(0,1):(wt(this,U,Lt),Lt<E(this,R).length&&E(this,R).splice(Lt)),E(this,R).push(Pt)}undo(){E(this,U)!==-1&&(wt(this,A,!0),E(this,R)[E(this,U)].undo(),wt(this,A,!1),wt(this,U,E(this,U)-1))}redo(){E(this,U)<E(this,R).length-1&&(wt(this,U,E(this,U)+1),wt(this,A,!0),E(this,R)[E(this,U)].cmd(),wt(this,A,!1))}hasSomethingToUndo(){return E(this,U)!==-1}hasSomethingToRedo(){return E(this,U)<E(this,R).length-1}destroy(){wt(this,R,null)}}R=new WeakMap,A=new WeakMap,F=new WeakMap,U=new WeakMap,e.CommandManager=u;class l{constructor(T){ht(this,M);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:q}=i.FeatureTest.platform;for(const[lt,mt,yt={}]of T)for(const Et of lt){const Pt=Et.startsWith("mac+");q&&Pt?(this.callbacks.set(Et.slice(4),{callback:mt,options:yt}),this.allKeys.add(Et.split("+").at(-1))):!q&&!Pt&&(this.callbacks.set(Et,{callback:mt,options:yt}),this.allKeys.add(Et.split("+").at(-1)))}}exec(T,q){if(!this.allKeys.has(q.key))return;const lt=this.callbacks.get(bt(this,M,kn).call(this,q));if(!lt)return;const{callback:mt,options:{bubbles:yt=!1,args:Et=[],checker:Pt=null}}=lt;Pt&&!Pt(T,q)||(mt.bind(T,...Et)(),yt||(q.stopPropagation(),q.preventDefault()))}}M=new WeakSet,kn=function(T){T.altKey&&this.buffer.push("alt"),T.ctrlKey&&this.buffer.push("ctrl"),T.metaKey&&this.buffer.push("meta"),T.shiftKey&&this.buffer.push("shift"),this.buffer.push(T.key);const q=this.buffer.join("+");return this.buffer.length=0,q},e.KeyboardManager=l;const $=class ${get _colors(){const T=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(T),(0,i.shadow)(this,"_colors",T)}convert(T){const q=(0,s.getRGB)(T);if(!window.matchMedia("(forced-colors: active)").matches)return q;for(const[lt,mt]of this._colors)if(mt.every((yt,Et)=>yt===q[Et]))return $._colorsMapping.get(lt);return q}getHexCode(T){const q=this._colors.get(T);return q?i.Util.makeHexColor(...q):T}};ie($,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _=$;e.ColorManager=_;const $t=class $t{constructor(T,q,lt,mt,yt,Et){ht(this,rt);ht(this,Ct);ht(this,It);ht(this,Ut);ht(this,Nt);ht(this,xt);ht(this,gt);ht(this,Rt);ht(this,te);ht(this,Ot);ht(this,Mt);ht(this,Gt);ht(this,Ft);ht(this,H,null);ht(this,N,new Map);ht(this,X,new Map);ht(this,g,null);ht(this,et,null);ht(this,ft,new u);ht(this,at,0);ht(this,st,new Set);ht(this,dt,null);ht(this,St,null);ht(this,ut,new Set);ht(this,Y,null);ht(this,B,new h);ht(this,y,!1);ht(this,v,!1);ht(this,C,null);ht(this,I,i.AnnotationEditorType.NONE);ht(this,D,new Set);ht(this,W,null);ht(this,Q,this.blur.bind(this));ht(this,it,this.focus.bind(this));ht(this,pt,this.copy.bind(this));ht(this,j,this.cut.bind(this));ht(this,o,this.paste.bind(this));ht(this,z,this.keydown.bind(this));ht(this,G,this.onEditingAction.bind(this));ht(this,O,this.onPageChanging.bind(this));ht(this,L,this.onScaleChanging.bind(this));ht(this,K,this.onRotationChanging.bind(this));ht(this,nt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ht(this,ct,[0,0]);ht(this,V,null);ht(this,J,null);ht(this,Z,null);wt(this,J,T),wt(this,Z,q),wt(this,g,lt),this._eventBus=mt,this._eventBus._on("editingaction",E(this,G)),this._eventBus._on("pagechanging",E(this,O)),this._eventBus._on("scalechanging",E(this,L)),this._eventBus._on("rotationchanging",E(this,K)),wt(this,et,yt.annotationStorage),wt(this,Y,yt.filterFactory),wt(this,W,Et),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const T=$t.prototype,q=yt=>{const{activeElement:Et}=document;return Et&&E(yt,J).contains(Et)&&yt.hasSomethingToControl()},lt=this.TRANSLATE_SMALL,mt=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],T.selectAll],[["ctrl+z","mac+meta+z"],T.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],T.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],T.delete],[["Escape","mac+Escape"],T.unselectAll],[["ArrowLeft","mac+ArrowLeft"],T.translateSelectedEditors,{args:[-lt,0],checker:q}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],T.translateSelectedEditors,{args:[-mt,0],checker:q}],[["ArrowRight","mac+ArrowRight"],T.translateSelectedEditors,{args:[lt,0],checker:q}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],T.translateSelectedEditors,{args:[mt,0],checker:q}],[["ArrowUp","mac+ArrowUp"],T.translateSelectedEditors,{args:[0,-lt],checker:q}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],T.translateSelectedEditors,{args:[0,-mt],checker:q}],[["ArrowDown","mac+ArrowDown"],T.translateSelectedEditors,{args:[0,lt],checker:q}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],T.translateSelectedEditors,{args:[0,mt],checker:q}]]))}destroy(){bt(this,Ut,ke).call(this),bt(this,Ct,qe).call(this),this._eventBus._off("editingaction",E(this,G)),this._eventBus._off("pagechanging",E(this,O)),this._eventBus._off("scalechanging",E(this,L)),this._eventBus._off("rotationchanging",E(this,K));for(const T of E(this,X).values())T.destroy();E(this,X).clear(),E(this,N).clear(),E(this,ut).clear(),wt(this,H,null),E(this,D).clear(),E(this,ft).destroy(),E(this,g).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",E(this,W)?E(this,Y).addHCMFilter(E(this,W).foreground,E(this,W).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(E(this,J)).direction)}editAltText(T){var q;(q=E(this,g))==null||q.editAltText(this,T)}onPageChanging({pageNumber:T}){wt(this,at,T-1)}focusMainContainer(){E(this,J).focus()}findParent(T,q){for(const lt of E(this,X).values()){const{x:mt,y:yt,width:Et,height:Pt}=lt.div.getBoundingClientRect();if(T>=mt&&T<=mt+Et&&q>=yt&&q<=yt+Pt)return lt}return null}disableUserSelect(T=!1){E(this,Z).classList.toggle("noUserSelect",T)}addShouldRescale(T){E(this,ut).add(T)}removeShouldRescale(T){E(this,ut).delete(T)}onScaleChanging({scale:T}){this.commitOrRemove(),this.viewParameters.realScale=T*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const q of E(this,ut))q.onScaleChanging()}onRotationChanging({pagesRotation:T}){this.commitOrRemove(),this.viewParameters.rotation=T}addToAnnotationStorage(T){!T.isEmpty()&&E(this,et)&&!E(this,et).has(T.id)&&E(this,et).setValue(T.id,T)}blur(){if(!this.hasSelection)return;const{activeElement:T}=document;for(const q of E(this,D))if(q.div.contains(T)){wt(this,C,[q,T]),q._focusEventsAllowed=!1;break}}focus(){if(!E(this,C))return;const[T,q]=E(this,C);wt(this,C,null),q.addEventListener("focusin",()=>{T._focusEventsAllowed=!0},{once:!0}),q.focus()}addEditListeners(){bt(this,It,Xe).call(this),bt(this,Nt,Ye).call(this)}removeEditListeners(){bt(this,Ut,ke).call(this),bt(this,xt,Ke).call(this)}copy(T){var lt;if(T.preventDefault(),(lt=E(this,H))==null||lt.commitOrRemove(),!this.hasSelection)return;const q=[];for(const mt of E(this,D)){const yt=mt.serialize(!0);yt&&q.push(yt)}q.length!==0&&T.clipboardData.setData("application/pdfjs",JSON.stringify(q))}cut(T){this.copy(T),this.delete()}paste(T){T.preventDefault();const{clipboardData:q}=T;for(const yt of q.items)for(const Et of E(this,St))if(Et.isHandlingMimeForPasting(yt.type)){Et.paste(yt,this.currentLayer);return}let lt=q.getData("application/pdfjs");if(!lt)return;try{lt=JSON.parse(lt)}catch(yt){(0,i.warn)(`paste: "${yt.message}".`);return}if(!Array.isArray(lt))return;this.unselectAll();const mt=this.currentLayer;try{const yt=[];for(const Lt of lt){const Dt=mt.deserialize(Lt);if(!Dt)return;yt.push(Dt)}const Et=()=>{for(const Lt of yt)bt(this,Mt,Je).call(this,Lt);bt(this,Ft,Ze).call(this,yt)},Pt=()=>{for(const Lt of yt)Lt.remove()};this.addCommands({cmd:Et,undo:Pt,mustExec:!0})}catch(yt){(0,i.warn)(`paste: "${yt.message}".`)}}keydown(T){var q;(q=this.getActive())!=null&&q.shouldGetKeyboardEvents()||$t._keyboardManager.exec(this,T)}onEditingAction(T){["undo","redo","delete","selectAll"].includes(T.name)&&this[T.name]()}setEditingState(T){T?(bt(this,rt,Tn).call(this),bt(this,It,Xe).call(this),bt(this,Nt,Ye).call(this),bt(this,gt,oe).call(this,{isEditing:E(this,I)!==i.AnnotationEditorType.NONE,isEmpty:bt(this,Gt,ye).call(this),hasSomethingToUndo:E(this,ft).hasSomethingToUndo(),hasSomethingToRedo:E(this,ft).hasSomethingToRedo(),hasSelectedEditor:!1})):(bt(this,Ct,qe).call(this),bt(this,Ut,ke).call(this),bt(this,xt,Ke).call(this),bt(this,gt,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(T){if(!E(this,St)){wt(this,St,T);for(const q of E(this,St))bt(this,Rt,be).call(this,q.defaultPropertiesToUpdate)}}getId(){return E(this,B).getId()}get currentLayer(){return E(this,X).get(E(this,at))}getLayer(T){return E(this,X).get(T)}get currentPageIndex(){return E(this,at)}addLayer(T){E(this,X).set(T.pageIndex,T),E(this,y)?T.enable():T.disable()}removeLayer(T){E(this,X).delete(T.pageIndex)}updateMode(T,q=null){if(E(this,I)!==T){if(wt(this,I,T),T===i.AnnotationEditorType.NONE){this.setEditingState(!1),bt(this,Ot,Rn).call(this);return}this.setEditingState(!0),bt(this,te,Pn).call(this),this.unselectAll();for(const lt of E(this,X).values())lt.updateMode(T);if(q){for(const lt of E(this,N).values())if(lt.annotationElementId===q){this.setSelected(lt),lt.enterInEditMode();break}}}}updateToolbar(T){T!==E(this,I)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:T})}updateParams(T,q){if(E(this,St)){if(T===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(T);return}for(const lt of E(this,D))lt.updateParams(T,q);for(const lt of E(this,St))lt.updateDefaultParams(T,q)}}enableWaiting(T=!1){if(E(this,v)!==T){wt(this,v,T);for(const q of E(this,X).values())T?q.disableClick():q.enableClick(),q.div.classList.toggle("waiting",T)}}getEditors(T){const q=[];for(const lt of E(this,N).values())lt.pageIndex===T&&q.push(lt);return q}getEditor(T){return E(this,N).get(T)}addEditor(T){E(this,N).set(T.id,T)}removeEditor(T){var q;E(this,N).delete(T.id),this.unselect(T),(!T.annotationElementId||!E(this,st).has(T.annotationElementId))&&((q=E(this,et))==null||q.remove(T.id))}addDeletedAnnotationElement(T){E(this,st).add(T.annotationElementId),T.deleted=!0}isDeletedAnnotationElement(T){return E(this,st).has(T)}removeDeletedAnnotationElement(T){E(this,st).delete(T.annotationElementId),T.deleted=!1}setActiveEditor(T){E(this,H)!==T&&(wt(this,H,T),T&&bt(this,Rt,be).call(this,T.propertiesToUpdate))}toggleSelected(T){if(E(this,D).has(T)){E(this,D).delete(T),T.unselect(),bt(this,gt,oe).call(this,{hasSelectedEditor:this.hasSelection});return}E(this,D).add(T),T.select(),bt(this,Rt,be).call(this,T.propertiesToUpdate),bt(this,gt,oe).call(this,{hasSelectedEditor:!0})}setSelected(T){for(const q of E(this,D))q!==T&&q.unselect();E(this,D).clear(),E(this,D).add(T),T.select(),bt(this,Rt,be).call(this,T.propertiesToUpdate),bt(this,gt,oe).call(this,{hasSelectedEditor:!0})}isSelected(T){return E(this,D).has(T)}unselect(T){T.unselect(),E(this,D).delete(T),bt(this,gt,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return E(this,D).size!==0}undo(){E(this,ft).undo(),bt(this,gt,oe).call(this,{hasSomethingToUndo:E(this,ft).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:bt(this,Gt,ye).call(this)})}redo(){E(this,ft).redo(),bt(this,gt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:E(this,ft).hasSomethingToRedo(),isEmpty:bt(this,Gt,ye).call(this)})}addCommands(T){E(this,ft).add(T),bt(this,gt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:bt(this,Gt,ye).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const T=[...E(this,D)],q=()=>{for(const mt of T)mt.remove()},lt=()=>{for(const mt of T)bt(this,Mt,Je).call(this,mt)};this.addCommands({cmd:q,undo:lt,mustExec:!0})}commitOrRemove(){var T;(T=E(this,H))==null||T.commitOrRemove()}hasSomethingToControl(){return E(this,H)||this.hasSelection}selectAll(){for(const T of E(this,D))T.commit();bt(this,Ft,Ze).call(this,E(this,N).values())}unselectAll(){if(E(this,H)){E(this,H).commitOrRemove();return}if(this.hasSelection){for(const T of E(this,D))T.unselect();E(this,D).clear(),bt(this,gt,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(T,q,lt=!1){if(lt||this.commitOrRemove(),!this.hasSelection)return;E(this,ct)[0]+=T,E(this,ct)[1]+=q;const[mt,yt]=E(this,ct),Et=[...E(this,D)],Pt=1e3;E(this,V)&&clearTimeout(E(this,V)),wt(this,V,setTimeout(()=>{wt(this,V,null),E(this,ct)[0]=E(this,ct)[1]=0,this.addCommands({cmd:()=>{for(const Lt of Et)E(this,N).has(Lt.id)&&Lt.translateInPage(mt,yt)},undo:()=>{for(const Lt of Et)E(this,N).has(Lt.id)&&Lt.translateInPage(-mt,-yt)},mustExec:!1})},Pt));for(const Lt of Et)Lt.translateInPage(T,q)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),wt(this,dt,new Map);for(const T of E(this,D))E(this,dt).set(T,{savedX:T.x,savedY:T.y,savedPageIndex:T.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!E(this,dt))return!1;this.disableUserSelect(!1);const T=E(this,dt);wt(this,dt,null);let q=!1;for(const[{x:mt,y:yt,pageIndex:Et},Pt]of T)Pt.newX=mt,Pt.newY=yt,Pt.newPageIndex=Et,q||(q=mt!==Pt.savedX||yt!==Pt.savedY||Et!==Pt.savedPageIndex);if(!q)return!1;const lt=(mt,yt,Et,Pt)=>{if(E(this,N).has(mt.id)){const Lt=E(this,X).get(Pt);Lt?mt._setParentAndPosition(Lt,yt,Et):(mt.pageIndex=Pt,mt.x=yt,mt.y=Et)}};return this.addCommands({cmd:()=>{for(const[mt,{newX:yt,newY:Et,newPageIndex:Pt}]of T)lt(mt,yt,Et,Pt)},undo:()=>{for(const[mt,{savedX:yt,savedY:Et,savedPageIndex:Pt}]of T)lt(mt,yt,Et,Pt)},mustExec:!0}),!0}dragSelectedEditors(T,q){if(E(this,dt))for(const lt of E(this,dt).keys())lt.drag(T,q)}rebuild(T){if(T.parent===null){const q=this.getLayer(T.pageIndex);q?(q.changeParent(T),q.addOrRebuild(T)):(this.addEditor(T),this.addToAnnotationStorage(T),T.rebuild())}else T.parent.addOrRebuild(T)}isActive(T){return E(this,H)===T}getActive(){return E(this,H)}getMode(){return E(this,I)}get imageManager(){return(0,i.shadow)(this,"imageManager",new c)}};H=new WeakMap,N=new WeakMap,X=new WeakMap,g=new WeakMap,et=new WeakMap,ft=new WeakMap,at=new WeakMap,st=new WeakMap,dt=new WeakMap,St=new WeakMap,ut=new WeakMap,Y=new WeakMap,B=new WeakMap,y=new WeakMap,v=new WeakMap,C=new WeakMap,I=new WeakMap,D=new WeakMap,W=new WeakMap,Q=new WeakMap,it=new WeakMap,pt=new WeakMap,j=new WeakMap,o=new WeakMap,z=new WeakMap,G=new WeakMap,O=new WeakMap,L=new WeakMap,K=new WeakMap,nt=new WeakMap,ct=new WeakMap,V=new WeakMap,J=new WeakMap,Z=new WeakMap,rt=new WeakSet,Tn=function(){window.addEventListener("focus",E(this,it)),window.addEventListener("blur",E(this,Q))},Ct=new WeakSet,qe=function(){window.removeEventListener("focus",E(this,it)),window.removeEventListener("blur",E(this,Q))},It=new WeakSet,Xe=function(){window.addEventListener("keydown",E(this,z),{capture:!0})},Ut=new WeakSet,ke=function(){window.removeEventListener("keydown",E(this,z),{capture:!0})},Nt=new WeakSet,Ye=function(){document.addEventListener("copy",E(this,pt)),document.addEventListener("cut",E(this,j)),document.addEventListener("paste",E(this,o))},xt=new WeakSet,Ke=function(){document.removeEventListener("copy",E(this,pt)),document.removeEventListener("cut",E(this,j)),document.removeEventListener("paste",E(this,o))},gt=new WeakSet,oe=function(T){Object.entries(T).some(([lt,mt])=>E(this,nt)[lt]!==mt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(E(this,nt),T)})},Rt=new WeakSet,be=function(T){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:T})},te=new WeakSet,Pn=function(){if(!E(this,y)){wt(this,y,!0);for(const T of E(this,X).values())T.enable()}},Ot=new WeakSet,Rn=function(){if(this.unselectAll(),E(this,y)){wt(this,y,!1);for(const T of E(this,X).values())T.disable()}},Mt=new WeakSet,Je=function(T){const q=E(this,X).get(T.pageIndex);q?q.addOrRebuild(T):this.addEditor(T)},Gt=new WeakSet,ye=function(){if(E(this,N).size===0)return!0;if(E(this,N).size===1)for(const T of E(this,N).values())return T.isEmpty();return!1},Ft=new WeakSet,Ze=function(T){E(this,D).clear();for(const q of T)q.isEmpty()||(E(this,D).add(q),q.select());bt(this,gt,oe).call(this,{hasSelectedEditor:!0})},ie($t,"TRANSLATE_SMALL",1),ie($t,"TRANSLATE_BIG",10);let w=$t;e.AnnotationEditorUIManager=w},(t,e,n)=>{var at,st,dt,St,ut,Y,B,y,v,C,I,D,fe,Q,pe,pt,Qe,o,Te,G,Pe,L,ve,nt,Ae;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=U,e.getColorValues=N,e.getCurrentTransform=X,e.getCurrentTransformInverse=g,e.getFilenameFromUrl=m,e.getPdfFilenameFromUrl=k,e.getRGB=H,e.getXfaPageViewport=$,e.isDataScheme=f,e.isPdfFile=b,e.isValidFetchUrl=R,e.loadScript=F,e.noContextMenu=A,e.setLayerDimensions=et;var i=n(7),s=n(1);const r="http://www.w3.org/2000/svg",ft=class ft{};ie(ft,"CSS",96),ie(ft,"PDF",72),ie(ft,"PDF_TO_CSS_UNITS",ft.CSS/ft.PDF);let a=ft;e.PixelsPerInch=a;class h extends i.BaseFilterFactory{constructor({docId:Z,ownerDocument:rt=globalThis.document}={}){super();ht(this,D);ht(this,Q);ht(this,pt);ht(this,o);ht(this,G);ht(this,L);ht(this,nt);ht(this,at,void 0);ht(this,st,void 0);ht(this,dt,void 0);ht(this,St,void 0);ht(this,ut,void 0);ht(this,Y,void 0);ht(this,B,void 0);ht(this,y,void 0);ht(this,v,void 0);ht(this,C,void 0);ht(this,I,0);wt(this,dt,Z),wt(this,St,rt)}addFilter(Z){if(!Z)return"none";let rt=E(this,D,fe).get(Z);if(rt)return rt;let vt,Ct,Tt,It;if(Z.length===1){const Nt=Z[0],Xt=new Array(256);for(let xt=0;xt<256;xt++)Xt[xt]=Nt[xt]/255;It=vt=Ct=Tt=Xt.join(",")}else{const[Nt,Xt,xt]=Z,_t=new Array(256),gt=new Array(256),kt=new Array(256);for(let Rt=0;Rt<256;Rt++)_t[Rt]=Nt[Rt]/255,gt[Rt]=Xt[Rt]/255,kt[Rt]=xt[Rt]/255;vt=_t.join(","),Ct=gt.join(","),Tt=kt.join(","),It=`${vt}${Ct}${Tt}`}if(rt=E(this,D,fe).get(It),rt)return E(this,D,fe).set(Z,rt),rt;const zt=`g_${E(this,dt)}_transfer_map_${_e(this,I)._++}`,Ut=`url(#${zt})`;E(this,D,fe).set(Z,Ut),E(this,D,fe).set(It,Ut);const Vt=bt(this,o,Te).call(this,zt);return bt(this,L,ve).call(this,vt,Ct,Tt,Vt),Ut}addHCMFilter(Z,rt){var Xt;const vt=`${Z}-${rt}`;if(E(this,Y)===vt)return E(this,B);if(wt(this,Y,vt),wt(this,B,"none"),(Xt=E(this,ut))==null||Xt.remove(),!Z||!rt)return E(this,B);const Ct=bt(this,nt,Ae).call(this,Z);Z=s.Util.makeHexColor(...Ct);const Tt=bt(this,nt,Ae).call(this,rt);if(rt=s.Util.makeHexColor(...Tt),E(this,Q,pe).style.color="",Z==="#000000"&&rt==="#ffffff"||Z===rt)return E(this,B);const It=new Array(256);for(let xt=0;xt<=255;xt++){const _t=xt/255;It[xt]=_t<=.03928?_t/12.92:((_t+.055)/1.055)**2.4}const zt=It.join(","),Ut=`g_${E(this,dt)}_hcm_filter`,Vt=wt(this,y,bt(this,o,Te).call(this,Ut));bt(this,L,ve).call(this,zt,zt,zt,Vt),bt(this,pt,Qe).call(this,Vt);const Nt=(xt,_t)=>{const gt=Ct[xt]/255,kt=Tt[xt]/255,Rt=new Array(_t+1);for(let ne=0;ne<=_t;ne++)Rt[ne]=gt+ne/_t*(kt-gt);return Rt.join(",")};return bt(this,L,ve).call(this,Nt(0,5),Nt(1,5),Nt(2,5),Vt),wt(this,B,`url(#${Ut})`),E(this,B)}addHighlightHCMFilter(Z,rt,vt,Ct){var kt;const Tt=`${Z}-${rt}-${vt}-${Ct}`;if(E(this,v)===Tt)return E(this,C);if(wt(this,v,Tt),wt(this,C,"none"),(kt=E(this,y))==null||kt.remove(),!Z||!rt)return E(this,C);const[It,zt]=[Z,rt].map(bt(this,nt,Ae).bind(this));let Ut=Math.round(.2126*It[0]+.7152*It[1]+.0722*It[2]),Vt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),[Nt,Xt]=[vt,Ct].map(bt(this,nt,Ae).bind(this));Vt<Ut&&([Ut,Vt,Nt,Xt]=[Vt,Ut,Xt,Nt]),E(this,Q,pe).style.color="";const xt=(Rt,ne,te)=>{const At=new Array(256),Ot=(Vt-Ut)/te,Ht=Rt/255,Mt=(ne-Rt)/(255*te);let Wt=0;for(let Gt=0;Gt<=te;Gt++){const Qt=Math.round(Ut+Gt*Ot),Ft=Ht+Gt*Mt;for(let Jt=Wt;Jt<=Qt;Jt++)At[Jt]=Ft;Wt=Qt+1}for(let Gt=Wt;Gt<256;Gt++)At[Gt]=At[Wt-1];return At.join(",")},_t=`g_${E(this,dt)}_hcm_highlight_filter`,gt=wt(this,y,bt(this,o,Te).call(this,_t));return bt(this,pt,Qe).call(this,gt),bt(this,L,ve).call(this,xt(Nt[0],Xt[0],5),xt(Nt[1],Xt[1],5),xt(Nt[2],Xt[2],5),gt),wt(this,C,`url(#${_t})`),E(this,C)}destroy(Z=!1){Z&&(E(this,B)||E(this,C))||(E(this,st)&&(E(this,st).parentNode.parentNode.remove(),wt(this,st,null)),E(this,at)&&(E(this,at).clear(),wt(this,at,null)),wt(this,I,0))}}at=new WeakMap,st=new WeakMap,dt=new WeakMap,St=new WeakMap,ut=new WeakMap,Y=new WeakMap,B=new WeakMap,y=new WeakMap,v=new WeakMap,C=new WeakMap,I=new WeakMap,D=new WeakSet,fe=function(){return E(this,at)||wt(this,at,new Map)},Q=new WeakSet,pe=function(){if(!E(this,st)){const Z=E(this,St).createElement("div"),{style:rt}=Z;rt.visibility="hidden",rt.contain="strict",rt.width=rt.height=0,rt.position="absolute",rt.top=rt.left=0,rt.zIndex=-1;const vt=E(this,St).createElementNS(r,"svg");vt.setAttribute("width",0),vt.setAttribute("height",0),wt(this,st,E(this,St).createElementNS(r,"defs")),Z.append(vt),vt.append(E(this,st)),E(this,St).body.append(Z)}return E(this,st)},pt=new WeakSet,Qe=function(Z){const rt=E(this,St).createElementNS(r,"feColorMatrix");rt.setAttribute("type","matrix"),rt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Z.append(rt)},o=new WeakSet,Te=function(Z){const rt=E(this,St).createElementNS(r,"filter");return rt.setAttribute("color-interpolation-filters","sRGB"),rt.setAttribute("id",Z),E(this,Q,pe).append(rt),rt},G=new WeakSet,Pe=function(Z,rt,vt){const Ct=E(this,St).createElementNS(r,rt);Ct.setAttribute("type","discrete"),Ct.setAttribute("tableValues",vt),Z.append(Ct)},L=new WeakSet,ve=function(Z,rt,vt,Ct){const Tt=E(this,St).createElementNS(r,"feComponentTransfer");Ct.append(Tt),bt(this,G,Pe).call(this,Tt,"feFuncR",Z),bt(this,G,Pe).call(this,Tt,"feFuncG",rt),bt(this,G,Pe).call(this,Tt,"feFuncB",vt)},nt=new WeakSet,Ae=function(Z){return E(this,Q,pe).style.color=Z,H(getComputedStyle(E(this,Q,pe)).getPropertyValue("color"))},e.DOMFilterFactory=h;class c extends i.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,Z){const rt=this._document.createElement("canvas");return rt.width=J,rt.height=Z,rt}}e.DOMCanvasFactory=c;async function u(V,J=!1){if(R(V,document.baseURI)){const Z=await fetch(V);if(!Z.ok)throw new Error(Z.statusText);return J?new Uint8Array(await Z.arrayBuffer()):(0,s.stringToBytes)(await Z.text())}return new Promise((Z,rt)=>{const vt=new XMLHttpRequest;vt.open("GET",V,!0),J&&(vt.responseType="arraybuffer"),vt.onreadystatechange=()=>{if(vt.readyState===XMLHttpRequest.DONE){if(vt.status===200||vt.status===0){let Ct;if(J&&vt.response?Ct=new Uint8Array(vt.response):!J&&vt.responseText&&(Ct=(0,s.stringToBytes)(vt.responseText)),Ct){Z(Ct);return}}rt(new Error(vt.statusText))}},vt.send(null)})}class l extends i.BaseCMapReaderFactory{_fetchData(J,Z){return u(J,this.isCompressed).then(rt=>({cMapData:rt,compressionType:Z}))}}e.DOMCMapReaderFactory=l;class _ extends i.BaseStandardFontDataFactory{_fetchData(J){return u(J,!0)}}e.DOMStandardFontDataFactory=_;class w extends i.BaseSVGFactory{_createSVG(J){return document.createElementNS(r,J)}}e.DOMSVGFactory=w;class d{constructor({viewBox:J,scale:Z,rotation:rt,offsetX:vt=0,offsetY:Ct=0,dontFlip:Tt=!1}){this.viewBox=J,this.scale=Z,this.rotation=rt,this.offsetX=vt,this.offsetY=Ct;const It=(J[2]+J[0])/2,zt=(J[3]+J[1])/2;let Ut,Vt,Nt,Xt;switch(rt%=360,rt<0&&(rt+=360),rt){case 180:Ut=-1,Vt=0,Nt=0,Xt=1;break;case 90:Ut=0,Vt=1,Nt=1,Xt=0;break;case 270:Ut=0,Vt=-1,Nt=-1,Xt=0;break;case 0:Ut=1,Vt=0,Nt=0,Xt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Tt&&(Nt=-Nt,Xt=-Xt);let xt,_t,gt,kt;Ut===0?(xt=Math.abs(zt-J[1])*Z+vt,_t=Math.abs(It-J[0])*Z+Ct,gt=(J[3]-J[1])*Z,kt=(J[2]-J[0])*Z):(xt=Math.abs(It-J[0])*Z+vt,_t=Math.abs(zt-J[1])*Z+Ct,gt=(J[2]-J[0])*Z,kt=(J[3]-J[1])*Z),this.transform=[Ut*Z,Vt*Z,Nt*Z,Xt*Z,xt-Ut*Z*It-Nt*Z*zt,_t-Vt*Z*It-Xt*Z*zt],this.width=gt,this.height=kt}get rawDims(){const{viewBox:J}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:Z=this.rotation,offsetX:rt=this.offsetX,offsetY:vt=this.offsetY,dontFlip:Ct=!1}={}){return new d({viewBox:this.viewBox.slice(),scale:J,rotation:Z,offsetX:rt,offsetY:vt,dontFlip:Ct})}convertToViewportPoint(J,Z){return s.Util.applyTransform([J,Z],this.transform)}convertToViewportRectangle(J){const Z=s.Util.applyTransform([J[0],J[1]],this.transform),rt=s.Util.applyTransform([J[2],J[3]],this.transform);return[Z[0],Z[1],rt[0],rt[1]]}convertToPdfPoint(J,Z){return s.Util.applyInverseTransform([J,Z],this.transform)}}e.PageViewport=d;class S extends s.BaseException{constructor(J,Z=0){super(J,"RenderingCancelledException"),this.extraDelay=Z}}e.RenderingCancelledException=S;function f(V){const J=V.length;let Z=0;for(;Z<J&&V[Z].trim()==="";)Z++;return V.substring(Z,Z+5).toLowerCase()==="data:"}function b(V){return typeof V=="string"&&/\.pdf$/i.test(V)}function m(V,J=!1){return J||([V]=V.split(/[#?]/,1)),V.substring(V.lastIndexOf("/")+1)}function k(V,J="document.pdf"){if(typeof V!="string")return J;if(f(V))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const Z=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,rt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,vt=Z.exec(V);let Ct=rt.exec(vt[1])||rt.exec(vt[2])||rt.exec(vt[3]);if(Ct&&(Ct=Ct[0],Ct.includes("%")))try{Ct=rt.exec(decodeURIComponent(Ct))[0]}catch{}return Ct||J}class P{constructor(){ie(this,"started",Object.create(null));ie(this,"times",[])}time(J){J in this.started&&(0,s.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,s.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let Z=0;for(const{name:rt}of this.times)Z=Math.max(rt.length,Z);for(const{name:rt,start:vt,end:Ct}of this.times)J.push(`${rt.padEnd(Z)} ${Ct-vt}ms
`);return J.join("")}}e.StatTimer=P;function R(V,J){try{const{protocol:Z}=J?new URL(V,J):new URL(V);return Z==="http:"||Z==="https:"}catch{return!1}}function A(V){V.preventDefault()}function F(V,J=!1){return new Promise((Z,rt)=>{const vt=document.createElement("script");vt.src=V,vt.onload=function(Ct){J&&vt.remove(),Z(Ct)},vt.onerror=function(){rt(new Error(`Cannot load script at: ${vt.src}`))},(document.head||document.documentElement).append(vt)})}function U(V){console.log("Deprecated API usage: "+V)}let M;class x{static toDateObject(J){if(!J||typeof J!="string")return null;M||(M=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Z=M.exec(J);if(!Z)return null;const rt=parseInt(Z[1],10);let vt=parseInt(Z[2],10);vt=vt>=1&&vt<=12?vt-1:0;let Ct=parseInt(Z[3],10);Ct=Ct>=1&&Ct<=31?Ct:1;let Tt=parseInt(Z[4],10);Tt=Tt>=0&&Tt<=23?Tt:0;let It=parseInt(Z[5],10);It=It>=0&&It<=59?It:0;let zt=parseInt(Z[6],10);zt=zt>=0&&zt<=59?zt:0;const Ut=Z[7]||"Z";let Vt=parseInt(Z[8],10);Vt=Vt>=0&&Vt<=23?Vt:0;let Nt=parseInt(Z[9],10)||0;return Nt=Nt>=0&&Nt<=59?Nt:0,Ut==="-"?(Tt+=Vt,It+=Nt):Ut==="+"&&(Tt-=Vt,It-=Nt),new Date(Date.UTC(rt,vt,Ct,Tt,It,zt))}}e.PDFDateString=x;function $(V,{scale:J=1,rotation:Z=0}){const{width:rt,height:vt}=V.attributes.style,Ct=[0,0,parseInt(rt),parseInt(vt)];return new d({viewBox:Ct,scale:J,rotation:Z})}function H(V){if(V.startsWith("#")){const J=parseInt(V.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return V.startsWith("rgb(")?V.slice(4,-1).split(",").map(J=>parseInt(J)):V.startsWith("rgba(")?V.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,s.warn)(`Not a valid color format: "${V}"`),[0,0,0])}function N(V){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const Z of V.keys()){J.style.color=Z;const rt=window.getComputedStyle(J).color;V.set(Z,H(rt))}J.remove()}function X(V){const{a:J,b:Z,c:rt,d:vt,e:Ct,f:Tt}=V.getTransform();return[J,Z,rt,vt,Ct,Tt]}function g(V){const{a:J,b:Z,c:rt,d:vt,e:Ct,f:Tt}=V.getTransform().invertSelf();return[J,Z,rt,vt,Ct,Tt]}function et(V,J,Z=!1,rt=!0){if(J instanceof d){const{pageWidth:vt,pageHeight:Ct}=J.rawDims,{style:Tt}=V,It=s.FeatureTest.isCSSRoundSupported,zt=`var(--scale-factor) * ${vt}px`,Ut=`var(--scale-factor) * ${Ct}px`,Vt=It?`round(${zt}, 1px)`:`calc(${zt})`,Nt=It?`round(${Ut}, 1px)`:`calc(${Ut})`;!Z||J.rotation%180===0?(Tt.width=Vt,Tt.height=Nt):(Tt.width=Nt,Tt.height=Vt)}rt&&V.setAttribute("data-main-rotation",J.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=n(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,_){return"none"}addHighlightHCMFilter(l,_,w,d){return"none"}destroy(l=!1){}}e.BaseFilterFactory=s;class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,_){if(l<=0||_<=0)throw new Error("Invalid canvas size");const w=this._createCanvas(l,_);return{canvas:w,context:w.getContext("2d")}}reset(l,_,w){if(!l.canvas)throw new Error("Canvas is not specified");if(_<=0||w<=0)throw new Error("Invalid canvas size");l.canvas.width=_,l.canvas.height=w}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,_){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=r;class a{constructor({baseUrl:l=null,isCompressed:_=!0}){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=_}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const _=this.baseUrl+l+(this.isCompressed?".bcmap":""),w=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(_,w).catch(d=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_}`)})}_fetchData(l,_){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=a;class h{constructor({baseUrl:l=null}){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const _=`${this.baseUrl}${l}`;return this._fetchData(_).catch(w=>{throw new Error(`Unable to load font data at: ${_}`)})}_fetchData(l){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=h;class c{constructor(){this.constructor===c&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,_,w=!1){if(l<=0||_<=0)throw new Error("Invalid SVG dimensions");const d=this._createSVG("svg:svg");return d.setAttribute("version","1.1"),w||(d.setAttribute("width",`${l}px`),d.setAttribute("height",`${_}px`)),d.setAttribute("preserveAspectRatio","none"),d.setAttribute("viewBox",`0 0 ${l} ${_}`),d}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=c},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=n(1);const s=3285377520,r=4294901760,a=65535;class h{constructor(u){this.h1=u?u&4294967295:s,this.h2=u?u&4294967295:s}update(u){let l,_;if(typeof u=="string"){l=new Uint8Array(u.length*2),_=0;for(let U=0,M=u.length;U<M;U++){const x=u.charCodeAt(U);x<=255?l[_++]=x:(l[_++]=x>>>8,l[_++]=x&255)}}else if((0,i.isArrayBuffer)(u))l=u.slice(),_=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const w=_>>2,d=_-w*4,S=new Uint32Array(l.buffer,0,w);let f=0,b=0,m=this.h1,k=this.h2;const P=3432918353,R=461845907,A=P&a,F=R&a;for(let U=0;U<w;U++)U&1?(f=S[U],f=f*P&r|f*A&a,f=f<<15|f>>>17,f=f*R&r|f*F&a,m^=f,m=m<<13|m>>>19,m=m*5+3864292196):(b=S[U],b=b*P&r|b*A&a,b=b<<15|b>>>17,b=b*R&r|b*F&a,k^=b,k=k<<13|k>>>19,k=k*5+3864292196);switch(f=0,d){case 3:f^=l[w*4+2]<<16;case 2:f^=l[w*4+1]<<8;case 1:f^=l[w*4],f=f*P&r|f*A&a,f=f<<15|f>>>17,f=f*R&r|f*F&a,w&1?m^=f:k^=f}this.h1=m,this.h2=k}hexdigest(){let u=this.h1,l=this.h2;return u^=l>>>1,u=u*3981806797&r|u*36045&a,l=l*4283543511&r|((l<<16|u>>>16)*2950163797&r)>>>16,u^=l>>>1,u=u*444984403&r|u*60499&a,l=l*3301882366&r|((l<<16|u>>>16)*3120437893&r)>>>16,u^=l>>>1,(u>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=h},(t,e,n)=>{var a;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=n(1);class s{constructor({ownerDocument:c=globalThis.document,styleElement:u=null}){ht(this,a,new Set);this._document=c,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(c){this.nativeFontFaces.add(c),this._document.fonts.add(c)}removeNativeFontFace(c){this.nativeFontFaces.delete(c),this._document.fonts.delete(c)}insertRule(c){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const u=this.styleElement.sheet;u.insertRule(c,u.cssRules.length)}clear(){for(const c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.clear(),E(this,a).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(c){if(!(!c||E(this,a).has(c.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:u,src:l,style:_}=c,w=new FontFace(u,l,_);this.addNativeFontFace(w);try{await w.load(),E(this,a).add(u)}catch{(0,i.warn)(`Cannot load system font: ${c.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(w)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(c){if(c.attached||c.missingFile&&!c.systemFontInfo)return;if(c.attached=!0,c.systemFontInfo){await this.loadSystemFont(c.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=c.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(_){throw(0,i.warn)(`Failed to load font '${l.family}': '${_}'.`),c.disableFontFace=!0,_}}return}const u=c.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const _=this._queueLoadingCallback(l);this._prepareFontLoadEvent(c,_)})}}get isFontLoadingAPISupported(){var u;const c=!!((u=this._document)!=null&&u.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){let c=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(c=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function u(){for((0,i.assert)(!_.done,"completeRequest() cannot be called twice."),_.done=!0;l.length>0&&l[0].done;){const w=l.shift();setTimeout(w.callback,0)}}const{loadingRequests:l}=this,_={done:!1,complete:u,callback:c};return l.push(_),_}get _loadTestFont(){const c=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",c)}_prepareFontLoadEvent(c,u){function l(H,N){return H.charCodeAt(N)<<24|H.charCodeAt(N+1)<<16|H.charCodeAt(N+2)<<8|H.charCodeAt(N+3)&255}function _(H,N,X,g){const et=H.substring(0,N),ft=H.substring(N+X);return et+g+ft}let w,d;const S=this._document.createElement("canvas");S.width=1,S.height=1;const f=S.getContext("2d");let b=0;function m(H,N){if(++b>30){(0,i.warn)("Load test font never loaded."),N();return}if(f.font="30px "+H,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,H,N))}const k=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=_(P,976,k.length,k);const A=16,F=1482184792;let U=l(P,A);for(w=0,d=k.length-3;w<d;w+=4)U=U-F+l(k,w)|0;w<k.length&&(U=U-F+l(k+"XXX",w)|0),P=_(P,A,4,(0,i.string32)(U));const M=`url(data:font/opentype;base64,${btoa(P)});`,x=`@font-face {font-family:"${k}";src:${M}}`;this.insertRule(x);const $=this._document.createElement("div");$.style.visibility="hidden",$.style.width=$.style.height="10px",$.style.position="absolute",$.style.top=$.style.left="0px";for(const H of[c.loadedName,k]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=H,$.append(N)}this._document.body.append($),m(k,()=>{$.remove(),u.complete()})}}a=new WeakMap,e.FontLoader=s;class r{constructor(c,{isEvalSupported:u=!0,disableFontFace:l=!1,ignoreErrors:_=!1,inspectFont:w=null}){this.compiledGlyphs=Object.create(null);for(const d in c)this[d]=c[d];this.isEvalSupported=u!==!1,this.disableFontFace=l===!0,this.ignoreErrors=_===!0,this._inspectFont=w}createNativeFontFace(){var u;if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(u=this._inspectFont)==null||u.call(this,this),c}createFontFaceRule(){var _;if(!this.data||this.disableFontFace)return null;const c=(0,i.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(c)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let w=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(w+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${w}src:${u}}`}return(_=this._inspectFont)==null||_.call(this,this,u),l}getPathGenerator(c,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let l;try{l=c.get(this.loadedName+"_path_"+u)}catch(_){if(!this.ignoreErrors)throw _;return(0,i.warn)(`getPathGenerator - ignoring character: "${_}".`),this.compiledGlyphs[u]=function(w,d){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const _=[];for(const w of l){const d=w.args!==void 0?w.args.join(","):"";_.push("c.",w.cmd,"(",d,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",_.join(""))}return this.compiledGlyphs[u]=function(_,w){for(const d of l)d.cmd==="scale"&&(d.args=[w,-w]),_[d.cmd].apply(_,d.args)}}}e.FontFaceObject=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=n(7);n(1);const s=function(u){return new Promise((l,_)=>{require$$5.readFile(u,(d,S)=>{if(d||!S){_(new Error(d));return}l(new Uint8Array(S))})})};class r extends i.BaseFilterFactory{}e.NodeFilterFactory=r;class a extends i.BaseCanvasFactory{_createCanvas(l,_){return require$$5.createCanvas(l,_)}}e.NodeCanvasFactory=a;class h extends i.BaseCMapReaderFactory{_fetchData(l,_){return s(l).then(w=>({cMapData:w,compressionType:_}))}}e.NodeCMapReaderFactory=h;class c extends i.BaseStandardFontDataFactory{_fetchData(l){return s(l)}}e.NodeStandardFontDataFactory=c},(t,e,n)=>{var st,tn,St,en;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=n(1),s=n(6),r=n(12),a=n(13);const h=16,c=100,u=4096,l=15,_=10,w=1e3,d=16;function S(B,y){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){y.save(),this.__originalSave()},B.restore=function(){y.restore(),this.__originalRestore()},B.translate=function(C,I){y.translate(C,I),this.__originalTranslate(C,I)},B.scale=function(C,I){y.scale(C,I),this.__originalScale(C,I)},B.transform=function(C,I,D,W,Q,it){y.transform(C,I,D,W,Q,it),this.__originalTransform(C,I,D,W,Q,it)},B.setTransform=function(C,I,D,W,Q,it){y.setTransform(C,I,D,W,Q,it),this.__originalSetTransform(C,I,D,W,Q,it)},B.resetTransform=function(){y.resetTransform(),this.__originalResetTransform()},B.rotate=function(C){y.rotate(C),this.__originalRotate(C)},B.clip=function(C){y.clip(C),this.__originalClip(C)},B.moveTo=function(v,C){y.moveTo(v,C),this.__originalMoveTo(v,C)},B.lineTo=function(v,C){y.lineTo(v,C),this.__originalLineTo(v,C)},B.bezierCurveTo=function(v,C,I,D,W,Q){y.bezierCurveTo(v,C,I,D,W,Q),this.__originalBezierCurveTo(v,C,I,D,W,Q)},B.rect=function(v,C,I,D){y.rect(v,C,I,D),this.__originalRect(v,C,I,D)},B.closePath=function(){y.closePath(),this.__originalClosePath()},B.beginPath=function(){y.beginPath(),this.__originalBeginPath()}}class f{constructor(y){this.canvasFactory=y,this.cache=Object.create(null)}getCanvas(y,v,C){let I;return this.cache[y]!==void 0?(I=this.cache[y],this.canvasFactory.reset(I,v,C)):(I=this.canvasFactory.create(v,C),this.cache[y]=I),I}delete(y){delete this.cache[y]}clear(){for(const y in this.cache){const v=this.cache[y];this.canvasFactory.destroy(v),delete this.cache[y]}}}function b(B,y,v,C,I,D,W,Q,it,pt){const[j,o,z,G,O,L]=(0,s.getCurrentTransform)(B);if(o===0&&z===0){const ct=W*j+O,V=Math.round(ct),J=Q*G+L,Z=Math.round(J),rt=(W+it)*j+O,vt=Math.abs(Math.round(rt)-V)||1,Ct=(Q+pt)*G+L,Tt=Math.abs(Math.round(Ct)-Z)||1;return B.setTransform(Math.sign(j),0,0,Math.sign(G),V,Z),B.drawImage(y,v,C,I,D,0,0,vt,Tt),B.setTransform(j,o,z,G,O,L),[vt,Tt]}if(j===0&&G===0){const ct=Q*z+O,V=Math.round(ct),J=W*o+L,Z=Math.round(J),rt=(Q+pt)*z+O,vt=Math.abs(Math.round(rt)-V)||1,Ct=(W+it)*o+L,Tt=Math.abs(Math.round(Ct)-Z)||1;return B.setTransform(0,Math.sign(o),Math.sign(z),0,V,Z),B.drawImage(y,v,C,I,D,0,0,Tt,vt),B.setTransform(j,o,z,G,O,L),[Tt,vt]}B.drawImage(y,v,C,I,D,W,Q,it,pt);const K=Math.hypot(j,o),nt=Math.hypot(z,G);return[K*it,nt*pt]}function m(B){const{width:y,height:v}=B;if(y>w||v>w)return null;const C=1e3,I=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),D=y+1;let W=new Uint8Array(D*(v+1)),Q,it,pt;const j=y+7&-8;let o=new Uint8Array(j*v),z=0;for(const nt of B.data){let ct=128;for(;ct>0;)o[z++]=nt&ct?0:255,ct>>=1}let G=0;for(z=0,o[z]!==0&&(W[0]=1,++G),it=1;it<y;it++)o[z]!==o[z+1]&&(W[it]=o[z]?2:1,++G),z++;for(o[z]!==0&&(W[it]=2,++G),Q=1;Q<v;Q++){z=Q*j,pt=Q*D,o[z-j]!==o[z]&&(W[pt]=o[z]?1:8,++G);let nt=(o[z]?4:0)+(o[z-j]?8:0);for(it=1;it<y;it++)nt=(nt>>2)+(o[z+1]?4:0)+(o[z-j+1]?8:0),I[nt]&&(W[pt+it]=I[nt],++G),z++;if(o[z-j]!==o[z]&&(W[pt+it]=o[z]?2:4,++G),G>C)return null}for(z=j*(v-1),pt=Q*D,o[z]!==0&&(W[pt]=8,++G),it=1;it<y;it++)o[z]!==o[z+1]&&(W[pt+it]=o[z]?4:8,++G),z++;if(o[z]!==0&&(W[pt+it]=4,++G),G>C)return null;const O=new Int32Array([0,D,-1,0,-D,0,0,0,1]),L=new Path2D;for(Q=0;G&&Q<=v;Q++){let nt=Q*D;const ct=nt+y;for(;nt<ct&&!W[nt];)nt++;if(nt===ct)continue;L.moveTo(nt%D,Q);const V=nt;let J=W[nt];do{const Z=O[J];do nt+=Z;while(!W[nt]);const rt=W[nt];rt!==5&&rt!==10?(J=rt,W[nt]=0):(J=rt&51*J>>4,W[nt]&=J>>2|J<<2),L.lineTo(nt%D,nt/D|0),W[nt]||--G}while(V!==nt);--Q}return o=null,W=null,function(nt){nt.save(),nt.scale(1/y,-1/v),nt.translate(0,-v),nt.fill(L),nt.beginPath(),nt.restore()}}class k{constructor(y,v){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,y,v])}clone(){const y=Object.create(this);return y.clipBox=this.clipBox.slice(),y}setCurrentPoint(y,v){this.x=y,this.y=v}updatePathMinMax(y,v,C){[v,C]=i.Util.applyTransform([v,C],y),this.minX=Math.min(this.minX,v),this.minY=Math.min(this.minY,C),this.maxX=Math.max(this.maxX,v),this.maxY=Math.max(this.maxY,C)}updateRectMinMax(y,v){const C=i.Util.applyTransform(v,y),I=i.Util.applyTransform(v.slice(2),y);this.minX=Math.min(this.minX,C[0],I[0]),this.minY=Math.min(this.minY,C[1],I[1]),this.maxX=Math.max(this.maxX,C[0],I[0]),this.maxY=Math.max(this.maxY,C[1],I[1])}updateScalingPathMinMax(y,v){i.Util.scaleMinMax(y,v),this.minX=Math.min(this.minX,v[0]),this.maxX=Math.max(this.maxX,v[1]),this.minY=Math.min(this.minY,v[2]),this.maxY=Math.max(this.maxY,v[3])}updateCurvePathMinMax(y,v,C,I,D,W,Q,it,pt,j){const o=i.Util.bezierBoundingBox(v,C,I,D,W,Q,it,pt);if(j){j[0]=Math.min(j[0],o[0],o[2]),j[1]=Math.max(j[1],o[0],o[2]),j[2]=Math.min(j[2],o[1],o[3]),j[3]=Math.max(j[3],o[1],o[3]);return}this.updateRectMinMax(y,o)}getPathBoundingBox(y=r.PathType.FILL,v=null){const C=[this.minX,this.minY,this.maxX,this.maxY];if(y===r.PathType.STROKE){v||(0,i.unreachable)("Stroke bounding box must include transform.");const I=i.Util.singularValueDecompose2dScale(v),D=I[0]*this.lineWidth/2,W=I[1]*this.lineWidth/2;C[0]-=D,C[1]-=W,C[2]+=D,C[3]+=W}return C}updateClipFromPath(){const y=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(y||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(y){this.clipBox=y,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(y=r.PathType.FILL,v=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(y,v))}}function P(B,y){if(typeof ImageData<"u"&&y instanceof ImageData){B.putImageData(y,0,0);return}const v=y.height,C=y.width,I=v%d,D=(v-I)/d,W=I===0?D:D+1,Q=B.createImageData(C,d);let it=0,pt;const j=y.data,o=Q.data;let z,G,O,L;if(y.kind===i.ImageKind.GRAYSCALE_1BPP){const K=j.byteLength,nt=new Uint32Array(o.buffer,0,o.byteLength>>2),ct=nt.length,V=C+7>>3,J=4294967295,Z=i.FeatureTest.isLittleEndian?4278190080:255;for(z=0;z<W;z++){for(O=z<D?d:I,pt=0,G=0;G<O;G++){const rt=K-it;let vt=0;const Ct=rt>V?C:rt*8-7,Tt=Ct&-8;let It=0,zt=0;for(;vt<Tt;vt+=8)zt=j[it++],nt[pt++]=zt&128?J:Z,nt[pt++]=zt&64?J:Z,nt[pt++]=zt&32?J:Z,nt[pt++]=zt&16?J:Z,nt[pt++]=zt&8?J:Z,nt[pt++]=zt&4?J:Z,nt[pt++]=zt&2?J:Z,nt[pt++]=zt&1?J:Z;for(;vt<Ct;vt++)It===0&&(zt=j[it++],It=128),nt[pt++]=zt&It?J:Z,It>>=1}for(;pt<ct;)nt[pt++]=0;B.putImageData(Q,0,z*d)}}else if(y.kind===i.ImageKind.RGBA_32BPP){for(G=0,L=C*d*4,z=0;z<D;z++)o.set(j.subarray(it,it+L)),it+=L,B.putImageData(Q,0,G),G+=d;z<W&&(L=C*I*4,o.set(j.subarray(it,it+L)),B.putImageData(Q,0,G))}else if(y.kind===i.ImageKind.RGB_24BPP)for(O=d,L=C*O,z=0;z<W;z++){for(z>=D&&(O=I,L=C*O),pt=0,G=L;G--;)o[pt++]=j[it++],o[pt++]=j[it++],o[pt++]=j[it++],o[pt++]=255;B.putImageData(Q,0,z*d)}else throw new Error(`bad image kind: ${y.kind}`)}function R(B,y){if(y.bitmap){B.drawImage(y.bitmap,0,0);return}const v=y.height,C=y.width,I=v%d,D=(v-I)/d,W=I===0?D:D+1,Q=B.createImageData(C,d);let it=0;const pt=y.data,j=Q.data;for(let o=0;o<W;o++){const z=o<D?d:I;({srcPos:it}=(0,a.convertBlackAndWhiteToRGBA)({src:pt,srcPos:it,dest:j,width:C,height:z,nonBlackColor:0})),B.putImageData(Q,0,o*d)}}function A(B,y){const v=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const C of v)B[C]!==void 0&&(y[C]=B[C]);B.setLineDash!==void 0&&(y.setLineDash(B.getLineDash()),y.lineDashOffset=B.lineDashOffset)}function F(B){if(B.strokeStyle=B.fillStyle="#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",B.setLineDash!==void 0&&(B.setLineDash([]),B.lineDashOffset=0),!i.isNodeJS){const{filter:y}=B;y!=="none"&&y!==""&&(B.filter="none")}}function U(B,y,v,C){const I=B.length;for(let D=3;D<I;D+=4){const W=B[D];if(W===0)B[D-3]=y,B[D-2]=v,B[D-1]=C;else if(W<255){const Q=255-W;B[D-3]=B[D-3]*W+y*Q>>8,B[D-2]=B[D-2]*W+v*Q>>8,B[D-1]=B[D-1]*W+C*Q>>8}}}function M(B,y,v){const C=B.length,I=1/255;for(let D=3;D<C;D+=4){const W=v?v[B[D]]:B[D];y[D]=y[D]*W*I|0}}function x(B,y,v){const C=B.length;for(let I=3;I<C;I+=4){const D=B[I-3]*77+B[I-2]*152+B[I-1]*28;y[I]=v?y[I]*v[D>>8]>>8:y[I]*D>>16}}function $(B,y,v,C,I,D,W,Q,it,pt,j){const o=!!D,z=o?D[0]:0,G=o?D[1]:0,O=o?D[2]:0,L=I==="Luminosity"?x:M,nt=Math.min(C,Math.ceil(1048576/v));for(let ct=0;ct<C;ct+=nt){const V=Math.min(nt,C-ct),J=B.getImageData(Q-pt,ct+(it-j),v,V),Z=y.getImageData(Q,ct+it,v,V);o&&U(J.data,z,G,O),L(J.data,Z.data,W),y.putImageData(Z,Q,ct+it)}}function H(B,y,v,C){const I=C[0],D=C[1],W=C[2]-I,Q=C[3]-D;W===0||Q===0||($(y.context,v,W,Q,y.subtype,y.backdrop,y.transferMap,I,D,y.offsetX,y.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(v.canvas,0,0),B.restore())}function N(B,y){const v=i.Util.singularValueDecompose2dScale(B);v[0]=Math.fround(v[0]),v[1]=Math.fround(v[1]);const C=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return y!==void 0?y:v[0]<=C||v[1]<=C}const X=["butt","round","square"],g=["miter","round","bevel"],et={},ft={},Y=class Y{constructor(y,v,C,I,D,{optionalContentConfig:W,markedContentStack:Q=null},it,pt){ht(this,st);ht(this,St);this.ctx=y,this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=v,this.objs=C,this.canvasFactory=I,this.filterFactory=D,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Q||[],this.optionalContentConfig=W,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=it,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=pt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(y,v=null){return typeof y=="string"?y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y):v}beginDrawing({transform:y,viewport:v,transparency:C=!1,background:I=null}){const D=this.ctx.canvas.width,W=this.ctx.canvas.height,Q=this.ctx.fillStyle;if(this.ctx.fillStyle=I||"#ffffff",this.ctx.fillRect(0,0,D,W),this.ctx.fillStyle=Q,C){const it=this.cachedCanvases.getCanvas("transparent",D,W);this.compositeCtx=this.ctx,this.transparentCanvas=it.canvas,this.ctx=it.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),F(this.ctx),y&&(this.ctx.transform(...y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform(...v.transform),this.viewportScale=v.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(y,v,C,I){const D=y.argsArray,W=y.fnArray;let Q=v||0;const it=D.length;if(it===Q)return Q;const pt=it-Q>_&&typeof C=="function",j=pt?Date.now()+l:0;let o=0;const z=this.commonObjs,G=this.objs;let O;for(;;){if(I!==void 0&&Q===I.nextBreakPoint)return I.breakIt(Q,C),Q;if(O=W[Q],O!==i.OPS.dependency)this[O].apply(this,D[Q]);else for(const L of D[Q]){const K=L.startsWith("g_")?z:G;if(!K.has(L))return K.get(L,C),Q}if(Q++,Q===it)return Q;if(pt&&++o>_){if(Date.now()>j)return C(),Q;o=0}}}endDrawing(){bt(this,st,tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const y of this._cachedBitmapsMap.values()){for(const v of y.values())typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement&&(v.width=v.height=0);y.clear()}this._cachedBitmapsMap.clear(),bt(this,St,en).call(this)}_scaleImage(y,v){const C=y.width,I=y.height;let D=Math.max(Math.hypot(v[0],v[1]),1),W=Math.max(Math.hypot(v[2],v[3]),1),Q=C,it=I,pt="prescale1",j,o;for(;D>2&&Q>1||W>2&&it>1;){let z=Q,G=it;D>2&&Q>1&&(z=Q>=16384?Math.floor(Q/2)-1||1:Math.ceil(Q/2),D/=Q/z),W>2&&it>1&&(G=it>=16384?Math.floor(it/2)-1||1:Math.ceil(it)/2,W/=it/G),j=this.cachedCanvases.getCanvas(pt,z,G),o=j.context,o.clearRect(0,0,z,G),o.drawImage(y,0,0,Q,it,0,0,z,G),y=j.canvas,Q=z,it=G,pt=pt==="prescale1"?"prescale2":"prescale1"}return{img:y,paintWidth:Q,paintHeight:it}}_createMaskCanvas(y){const v=this.ctx,{width:C,height:I}=y,D=this.current.fillColor,W=this.current.patternFill,Q=(0,s.getCurrentTransform)(v);let it,pt,j,o;if((y.bitmap||y.data)&&y.count>1){const vt=y.bitmap||y.data.buffer;pt=JSON.stringify(W?Q:[Q.slice(0,4),D]),it=this._cachedBitmapsMap.get(vt),it||(it=new Map,this._cachedBitmapsMap.set(vt,it));const Ct=it.get(pt);if(Ct&&!W){const Tt=Math.round(Math.min(Q[0],Q[2])+Q[4]),It=Math.round(Math.min(Q[1],Q[3])+Q[5]);return{canvas:Ct,offsetX:Tt,offsetY:It}}j=Ct}j||(o=this.cachedCanvases.getCanvas("maskCanvas",C,I),R(o.context,y));let z=i.Util.transform(Q,[1/C,0,0,-1/I,0,0]);z=i.Util.transform(z,[1,0,0,1,0,-I]);const G=i.Util.applyTransform([0,0],z),O=i.Util.applyTransform([C,I],z),L=i.Util.normalizeRect([G[0],G[1],O[0],O[1]]),K=Math.round(L[2]-L[0])||1,nt=Math.round(L[3]-L[1])||1,ct=this.cachedCanvases.getCanvas("fillCanvas",K,nt),V=ct.context,J=Math.min(G[0],O[0]),Z=Math.min(G[1],O[1]);V.translate(-J,-Z),V.transform(...z),j||(j=this._scaleImage(o.canvas,(0,s.getCurrentTransformInverse)(V)),j=j.img,it&&W&&it.set(pt,j)),V.imageSmoothingEnabled=N((0,s.getCurrentTransform)(V),y.interpolate),b(V,j,0,0,j.width,j.height,0,0,C,I),V.globalCompositeOperation="source-in";const rt=i.Util.transform((0,s.getCurrentTransformInverse)(V),[1,0,0,1,-J,-Z]);return V.fillStyle=W?D.getPattern(v,this,rt,r.PathType.FILL):D,V.fillRect(0,0,C,I),it&&!W&&(this.cachedCanvases.delete("fillCanvas"),it.set(pt,ct.canvas)),{canvas:ct.canvas,offsetX:Math.round(J),offsetY:Math.round(Z)}}setLineWidth(y){y!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=y,this.ctx.lineWidth=y}setLineCap(y){this.ctx.lineCap=X[y]}setLineJoin(y){this.ctx.lineJoin=g[y]}setMiterLimit(y){this.ctx.miterLimit=y}setDash(y,v){const C=this.ctx;C.setLineDash!==void 0&&(C.setLineDash(y),C.lineDashOffset=v)}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[v,C]of y)switch(v){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C[0],C[1]);break;case"CA":this.current.strokeAlpha=C;break;case"ca":this.current.fillAlpha=C,this.ctx.globalAlpha=C;break;case"BM":this.ctx.globalCompositeOperation=C;break;case"SMask":this.current.activeSMask=C?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(C);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const y=this.inSMaskMode;this.current.activeSMask&&!y?this.beginSMaskMode():!this.current.activeSMask&&y&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const y=this.ctx.canvas.width,v=this.ctx.canvas.height,C="smaskGroupAt"+this.groupLevel,I=this.cachedCanvases.getCanvas(C,y,v);this.suspendedCtx=this.ctx,this.ctx=I.context;const D=this.ctx;D.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),A(this.suspendedCtx,D),S(D,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),A(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(y){if(!this.current.activeSMask)return;y?(y[0]=Math.floor(y[0]),y[1]=Math.floor(y[1]),y[2]=Math.ceil(y[2]),y[3]=Math.ceil(y[3])):y=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const v=this.current.activeSMask,C=this.suspendedCtx;H(C,v,this.ctx,y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(A(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const y=this.current;this.stateStack.push(y),this.current=y.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),A(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(y,v,C,I,D,W){this.ctx.transform(y,v,C,I,D,W),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(y,v,C){const I=this.ctx,D=this.current;let W=D.x,Q=D.y,it,pt;const j=(0,s.getCurrentTransform)(I),o=j[0]===0&&j[3]===0||j[1]===0&&j[2]===0,z=o?C.slice(0):null;for(let G=0,O=0,L=y.length;G<L;G++)switch(y[G]|0){case i.OPS.rectangle:W=v[O++],Q=v[O++];const K=v[O++],nt=v[O++],ct=W+K,V=Q+nt;I.moveTo(W,Q),K===0||nt===0?I.lineTo(ct,V):(I.lineTo(ct,Q),I.lineTo(ct,V),I.lineTo(W,V)),o||D.updateRectMinMax(j,[W,Q,ct,V]),I.closePath();break;case i.OPS.moveTo:W=v[O++],Q=v[O++],I.moveTo(W,Q),o||D.updatePathMinMax(j,W,Q);break;case i.OPS.lineTo:W=v[O++],Q=v[O++],I.lineTo(W,Q),o||D.updatePathMinMax(j,W,Q);break;case i.OPS.curveTo:it=W,pt=Q,W=v[O+4],Q=v[O+5],I.bezierCurveTo(v[O],v[O+1],v[O+2],v[O+3],W,Q),D.updateCurvePathMinMax(j,it,pt,v[O],v[O+1],v[O+2],v[O+3],W,Q,z),O+=6;break;case i.OPS.curveTo2:it=W,pt=Q,I.bezierCurveTo(W,Q,v[O],v[O+1],v[O+2],v[O+3]),D.updateCurvePathMinMax(j,it,pt,W,Q,v[O],v[O+1],v[O+2],v[O+3],z),W=v[O+2],Q=v[O+3],O+=4;break;case i.OPS.curveTo3:it=W,pt=Q,W=v[O+2],Q=v[O+3],I.bezierCurveTo(v[O],v[O+1],W,Q,W,Q),D.updateCurvePathMinMax(j,it,pt,v[O],v[O+1],W,Q,W,Q,z),O+=4;break;case i.OPS.closePath:I.closePath();break}o&&D.updateScalingPathMinMax(j,z),D.setCurrentPoint(W,Q)}closePath(){this.ctx.closePath()}stroke(y=!0){const v=this.ctx,C=this.current.strokeColor;v.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof C=="object"&&(C!=null&&C.getPattern)?(v.save(),v.strokeStyle=C.getPattern(v,this,(0,s.getCurrentTransformInverse)(v),r.PathType.STROKE),this.rescaleAndStroke(!1),v.restore()):this.rescaleAndStroke(!0)),y&&this.consumePath(this.current.getClippedPathBoundingBox()),v.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(y=!0){const v=this.ctx,C=this.current.fillColor,I=this.current.patternFill;let D=!1;I&&(v.save(),v.fillStyle=C.getPattern(v,this,(0,s.getCurrentTransformInverse)(v),r.PathType.FILL),D=!0);const W=this.current.getClippedPathBoundingBox();this.contentVisible&&W!==null&&(this.pendingEOFill?(v.fill("evenodd"),this.pendingEOFill=!1):v.fill()),D&&v.restore(),y&&this.consumePath(W)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=et}eoClip(){this.pendingClip=ft}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const y=this.pendingTextPaths,v=this.ctx;if(y===void 0){v.beginPath();return}v.save(),v.beginPath();for(const C of y)v.setTransform(...C.transform),v.translate(C.x,C.y),C.addToPath(v,C.fontSize);v.restore(),v.clip(),v.beginPath(),delete this.pendingTextPaths}setCharSpacing(y){this.current.charSpacing=y}setWordSpacing(y){this.current.wordSpacing=y}setHScale(y){this.current.textHScale=y/100}setLeading(y){this.current.leading=-y}setFont(y,v){var j;const C=this.commonObjs.get(y),I=this.current;if(!C)throw new Error(`Can't find font for ${y}`);if(I.fontMatrix=C.fontMatrix||i.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+y),v<0?(v=-v,I.fontDirection=-1):I.fontDirection=1,this.current.font=C,this.current.fontSize=v,C.isType3Font)return;const D=C.loadedName||"sans-serif",W=((j=C.systemFontInfo)==null?void 0:j.css)||`"${D}", ${C.fallbackName}`;let Q="normal";C.black?Q="900":C.bold&&(Q="bold");const it=C.italic?"italic":"normal";let pt=v;v<h?pt=h:v>c&&(pt=c),this.current.fontSizeScale=v/pt,this.ctx.font=`${it} ${Q} ${pt}px ${W}`}setTextRenderingMode(y){this.current.textRenderingMode=y}setTextRise(y){this.current.textRise=y}moveText(y,v){this.current.x=this.current.lineX+=y,this.current.y=this.current.lineY+=v}setLeadingMoveText(y,v){this.setLeading(-v),this.moveText(y,v)}setTextMatrix(y,v,C,I,D,W){this.current.textMatrix=[y,v,C,I,D,W],this.current.textMatrixScale=Math.hypot(y,v),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(y,v,C,I){const D=this.ctx,W=this.current,Q=W.font,it=W.textRenderingMode,pt=W.fontSize/W.fontSizeScale,j=it&i.TextRenderingMode.FILL_STROKE_MASK,o=!!(it&i.TextRenderingMode.ADD_TO_PATH_FLAG),z=W.patternFill&&!Q.missingFile;let G;(Q.disableFontFace||o||z)&&(G=Q.getPathGenerator(this.commonObjs,y)),Q.disableFontFace||z?(D.save(),D.translate(v,C),D.beginPath(),G(D,pt),I&&D.setTransform(...I),(j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&D.fill(),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&D.stroke(),D.restore()):((j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&D.fillText(y,v,C),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&D.strokeText(y,v,C)),o&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(D),x:v,y:C,fontSize:pt,addToPath:G})}get isFontSubpixelAAEnabled(){const{context:y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);y.scale(1.5,1),y.fillText("I",0,10);const v=y.getImageData(0,0,10,10).data;let C=!1;for(let I=3;I<v.length;I+=4)if(v[I]>0&&v[I]<255){C=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",C)}showText(y){const v=this.current,C=v.font;if(C.isType3Font)return this.showType3Text(y);const I=v.fontSize;if(I===0)return;const D=this.ctx,W=v.fontSizeScale,Q=v.charSpacing,it=v.wordSpacing,pt=v.fontDirection,j=v.textHScale*pt,o=y.length,z=C.vertical,G=z?1:-1,O=C.defaultVMetrics,L=I*v.fontMatrix[0],K=v.textRenderingMode===i.TextRenderingMode.FILL&&!C.disableFontFace&&!v.patternFill;D.save(),D.transform(...v.textMatrix),D.translate(v.x,v.y+v.textRise),pt>0?D.scale(j,-1):D.scale(j,1);let nt;if(v.patternFill){D.save();const rt=v.fillColor.getPattern(D,this,(0,s.getCurrentTransformInverse)(D),r.PathType.FILL);nt=(0,s.getCurrentTransform)(D),D.restore(),D.fillStyle=rt}let ct=v.lineWidth;const V=v.textMatrixScale;if(V===0||ct===0){const rt=v.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(rt===i.TextRenderingMode.STROKE||rt===i.TextRenderingMode.FILL_STROKE)&&(ct=this.getSinglePixelWidth())}else ct/=V;if(W!==1&&(D.scale(W,W),ct/=W),D.lineWidth=ct,C.isInvalidPDFjsFont){const rt=[];let vt=0;for(const Ct of y)rt.push(Ct.unicode),vt+=Ct.width;D.fillText(rt.join(""),0,0),v.x+=vt*L*j,D.restore(),this.compose();return}let J=0,Z;for(Z=0;Z<o;++Z){const rt=y[Z];if(typeof rt=="number"){J+=G*rt*I/1e3;continue}let vt=!1;const Ct=(rt.isSpace?it:0)+Q,Tt=rt.fontChar,It=rt.accent;let zt,Ut,Vt=rt.width;if(z){const Xt=rt.vmetric||O,xt=-(rt.vmetric?Xt[1]:Vt*.5)*L,_t=Xt[2]*L;Vt=Xt?-Xt[0]:Vt,zt=xt/W,Ut=(J+_t)/W}else zt=J/W,Ut=0;if(C.remeasure&&Vt>0){const Xt=D.measureText(Tt).width*1e3/I*W;if(Vt<Xt&&this.isFontSubpixelAAEnabled){const xt=Vt/Xt;vt=!0,D.save(),D.scale(xt,1),zt/=xt}else Vt!==Xt&&(zt+=(Vt-Xt)/2e3*I/W)}if(this.contentVisible&&(rt.isInFont||C.missingFile)){if(K&&!It)D.fillText(Tt,zt,Ut);else if(this.paintChar(Tt,zt,Ut,nt),It){const Xt=zt+I*It.offset.x/W,xt=Ut-I*It.offset.y/W;this.paintChar(It.fontChar,Xt,xt,nt)}}const Nt=z?Vt*L-Ct*pt:Vt*L+Ct*pt;J+=Nt,vt&&D.restore()}z?v.y-=J:v.x+=J*j,D.restore(),this.compose()}showType3Text(y){const v=this.ctx,C=this.current,I=C.font,D=C.fontSize,W=C.fontDirection,Q=I.vertical?1:-1,it=C.charSpacing,pt=C.wordSpacing,j=C.textHScale*W,o=C.fontMatrix||i.FONT_IDENTITY_MATRIX,z=y.length,G=C.textRenderingMode===i.TextRenderingMode.INVISIBLE;let O,L,K,nt;if(!(G||D===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,v.save(),v.transform(...C.textMatrix),v.translate(C.x,C.y),v.scale(j,W),O=0;O<z;++O){if(L=y[O],typeof L=="number"){nt=Q*L*D/1e3,this.ctx.translate(nt,0),C.x+=nt*j;continue}const ct=(L.isSpace?pt:0)+it,V=I.charProcOperatorList[L.operatorListId];if(!V){(0,i.warn)(`Type3 character "${L.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=L,this.save(),v.scale(D,D),v.transform(...o),this.executeOperatorList(V),this.restore()),K=i.Util.applyTransform([L.width,0],o)[0]*D+ct,v.translate(K,0),C.x+=K*j}v.restore(),this.processingType3=null}}setCharWidth(y,v){}setCharWidthAndBounds(y,v,C,I,D,W){this.ctx.rect(C,I,D-C,W-I),this.ctx.clip(),this.endPath()}getColorN_Pattern(y){let v;if(y[0]==="TilingPattern"){const C=y[1],I=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),D={createCanvasGraphics:W=>new Y(W,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};v=new r.TilingPattern(y,C,this.ctx,D,I)}else v=this._getPattern(y[1],y[2]);return v}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(y,v,C){const I=i.Util.makeHexColor(y,v,C);this.ctx.strokeStyle=I,this.current.strokeColor=I}setFillRGBColor(y,v,C){const I=i.Util.makeHexColor(y,v,C);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1}_getPattern(y,v=null){let C;return this.cachedPatterns.has(y)?C=this.cachedPatterns.get(y):(C=(0,r.getShadingPattern)(this.getObject(y)),this.cachedPatterns.set(y,C)),v&&(C.matrix=v),C}shadingFill(y){if(!this.contentVisible)return;const v=this.ctx;this.save();const C=this._getPattern(y);v.fillStyle=C.getPattern(v,this,(0,s.getCurrentTransformInverse)(v),r.PathType.SHADING);const I=(0,s.getCurrentTransformInverse)(v);if(I){const{width:D,height:W}=v.canvas,[Q,it,pt,j]=i.Util.getAxialAlignedBoundingBox([0,0,D,W],I);this.ctx.fillRect(Q,it,pt-Q,j-it)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(y,v){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(y)&&y.length===6&&this.transform(...y),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),v)){const C=v[2]-v[0],I=v[3]-v[1];this.ctx.rect(v[0],v[1],C,I),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),v),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(y){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const v=this.ctx;y.isolated||(0,i.info)("TODO: Support non-isolated groups."),y.knockout&&(0,i.warn)("Knockout groups not supported.");const C=(0,s.getCurrentTransform)(v);if(y.matrix&&v.transform(...y.matrix),!y.bbox)throw new Error("Bounding box is required.");let I=i.Util.getAxialAlignedBoundingBox(y.bbox,(0,s.getCurrentTransform)(v));const D=[0,0,v.canvas.width,v.canvas.height];I=i.Util.intersect(I,D)||[0,0,0,0];const W=Math.floor(I[0]),Q=Math.floor(I[1]);let it=Math.max(Math.ceil(I[2])-W,1),pt=Math.max(Math.ceil(I[3])-Q,1),j=1,o=1;it>u&&(j=it/u,it=u),pt>u&&(o=pt/u,pt=u),this.current.startNewPathAndClipBox([0,0,it,pt]);let z="groupAt"+this.groupLevel;y.smask&&(z+="_smask_"+this.smaskCounter++%2);const G=this.cachedCanvases.getCanvas(z,it,pt),O=G.context;O.scale(1/j,1/o),O.translate(-W,-Q),O.transform(...C),y.smask?this.smaskStack.push({canvas:G.canvas,context:O,offsetX:W,offsetY:Q,scaleX:j,scaleY:o,subtype:y.smask.subtype,backdrop:y.smask.backdrop,transferMap:y.smask.transferMap||null,startTransformInverse:null}):(v.setTransform(1,0,0,1,0,0),v.translate(W,Q),v.scale(j,o),v.save()),A(v,O),this.ctx=O,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(v),this.groupLevel++}endGroup(y){if(!this.contentVisible)return;this.groupLevel--;const v=this.ctx,C=this.groupStack.pop();if(this.ctx=C,this.ctx.imageSmoothingEnabled=!1,y.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const I=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...I);const D=i.Util.getAxialAlignedBoundingBox([0,0,v.canvas.width,v.canvas.height],I);this.ctx.drawImage(v.canvas,0,0),this.ctx.restore(),this.compose(D)}}beginAnnotation(y,v,C,I,D){if(bt(this,st,tn).call(this),F(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(v)&&v.length===4){const W=v[2]-v[0],Q=v[3]-v[1];if(D&&this.annotationCanvasMap){C=C.slice(),C[4]-=v[0],C[5]-=v[1],v=v.slice(),v[0]=v[1]=0,v[2]=W,v[3]=Q;const[it,pt]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:j}=this,o=Math.ceil(W*this.outputScaleX*j),z=Math.ceil(Q*this.outputScaleY*j);this.annotationCanvas=this.canvasFactory.create(o,z);const{canvas:G,context:O}=this.annotationCanvas;this.annotationCanvasMap.set(y,G),this.annotationCanvas.savedCtx=this.ctx,this.ctx=O,this.ctx.save(),this.ctx.setTransform(it,0,0,-pt,0,Q*pt),F(this.ctx)}else F(this.ctx),this.ctx.rect(v[0],v[1],W,Q),this.ctx.clip(),this.endPath()}this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...C),this.transform(...I)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),bt(this,St,en).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(y){if(!this.contentVisible)return;const v=y.count;y=this.getObject(y.data,y),y.count=v;const C=this.ctx,I=this.processingType3;if(I&&(I.compiled===void 0&&(I.compiled=m(y)),I.compiled)){I.compiled(C);return}const D=this._createMaskCanvas(y),W=D.canvas;C.save(),C.setTransform(1,0,0,1,0,0),C.drawImage(W,D.offsetX,D.offsetY),C.restore(),this.compose()}paintImageMaskXObjectRepeat(y,v,C=0,I=0,D,W){if(!this.contentVisible)return;y=this.getObject(y.data,y);const Q=this.ctx;Q.save();const it=(0,s.getCurrentTransform)(Q);Q.transform(v,C,I,D,0,0);const pt=this._createMaskCanvas(y);Q.setTransform(1,0,0,1,pt.offsetX-it[4],pt.offsetY-it[5]);for(let j=0,o=W.length;j<o;j+=2){const z=i.Util.transform(it,[v,C,I,D,W[j],W[j+1]]),[G,O]=i.Util.applyTransform([0,0],z);Q.drawImage(pt.canvas,G,O)}Q.restore(),this.compose()}paintImageMaskXObjectGroup(y){if(!this.contentVisible)return;const v=this.ctx,C=this.current.fillColor,I=this.current.patternFill;for(const D of y){const{data:W,width:Q,height:it,transform:pt}=D,j=this.cachedCanvases.getCanvas("maskCanvas",Q,it),o=j.context;o.save();const z=this.getObject(W,D);R(o,z),o.globalCompositeOperation="source-in",o.fillStyle=I?C.getPattern(o,this,(0,s.getCurrentTransformInverse)(v),r.PathType.FILL):C,o.fillRect(0,0,Q,it),o.restore(),v.save(),v.transform(...pt),v.scale(1,-1),b(v,j.canvas,0,0,Q,it,0,-1,1,1),v.restore()}this.compose()}paintImageXObject(y){if(!this.contentVisible)return;const v=this.getObject(y);if(!v){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(v)}paintImageXObjectRepeat(y,v,C,I){if(!this.contentVisible)return;const D=this.getObject(y);if(!D){(0,i.warn)("Dependent image isn't ready yet");return}const W=D.width,Q=D.height,it=[];for(let pt=0,j=I.length;pt<j;pt+=2)it.push({transform:[v,0,0,C,I[pt],I[pt+1]],x:0,y:0,w:W,h:Q});this.paintInlineImageXObjectGroup(D,it)}applyTransferMapsToCanvas(y){return this.current.transferMaps!=="none"&&(y.filter=this.current.transferMaps,y.drawImage(y.canvas,0,0),y.filter="none"),y.canvas}applyTransferMapsToBitmap(y){if(this.current.transferMaps==="none")return y.bitmap;const{bitmap:v,width:C,height:I}=y,D=this.cachedCanvases.getCanvas("inlineImage",C,I),W=D.context;return W.filter=this.current.transferMaps,W.drawImage(v,0,0),W.filter="none",D.canvas}paintInlineImageXObject(y){if(!this.contentVisible)return;const v=y.width,C=y.height,I=this.ctx;if(this.save(),!i.isNodeJS){const{filter:Q}=I;Q!=="none"&&Q!==""&&(I.filter="none")}I.scale(1/v,-1/C);let D;if(y.bitmap)D=this.applyTransferMapsToBitmap(y);else if(typeof HTMLElement=="function"&&y instanceof HTMLElement||!y.data)D=y;else{const it=this.cachedCanvases.getCanvas("inlineImage",v,C).context;P(it,y),D=this.applyTransferMapsToCanvas(it)}const W=this._scaleImage(D,(0,s.getCurrentTransformInverse)(I));I.imageSmoothingEnabled=N((0,s.getCurrentTransform)(I),y.interpolate),b(I,W.img,0,0,W.paintWidth,W.paintHeight,0,-C,v,C),this.compose(),this.restore()}paintInlineImageXObjectGroup(y,v){if(!this.contentVisible)return;const C=this.ctx;let I;if(y.bitmap)I=y.bitmap;else{const D=y.width,W=y.height,it=this.cachedCanvases.getCanvas("inlineImage",D,W).context;P(it,y),I=this.applyTransferMapsToCanvas(it)}for(const D of v)C.save(),C.transform(...D.transform),C.scale(1,-1),b(C,I,D.x,D.y,D.w,D.h,0,-1,1,1),C.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(y){}markPointProps(y,v){}beginMarkedContent(y){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(y,v){y==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(v)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(y){const v=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(y);const C=this.ctx;this.pendingClip&&(v||(this.pendingClip===ft?C.clip("evenodd"):C.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),C.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const y=(0,s.getCurrentTransform)(this.ctx);if(y[1]===0&&y[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(y[0]),Math.abs(y[3]));else{const v=Math.abs(y[0]*y[3]-y[2]*y[1]),C=Math.hypot(y[0],y[2]),I=Math.hypot(y[1],y[3]);this._cachedGetSinglePixelWidth=Math.max(C,I)/v}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:y}=this.current,{a:v,b:C,c:I,d:D}=this.ctx.getTransform();let W,Q;if(C===0&&I===0){const it=Math.abs(v),pt=Math.abs(D);if(it===pt)if(y===0)W=Q=1/it;else{const j=it*y;W=Q=j<1?1/j:1}else if(y===0)W=1/it,Q=1/pt;else{const j=it*y,o=pt*y;W=j<1?1/j:1,Q=o<1?1/o:1}}else{const it=Math.abs(v*D-C*I),pt=Math.hypot(v,C),j=Math.hypot(I,D);if(y===0)W=j/it,Q=pt/it;else{const o=y*it;W=j>o?j/o:1,Q=pt>o?pt/o:1}}this._cachedScaleForStroking[0]=W,this._cachedScaleForStroking[1]=Q}return this._cachedScaleForStroking}rescaleAndStroke(y){const{ctx:v}=this,{lineWidth:C}=this.current,[I,D]=this.getScaleForStroking();if(v.lineWidth=C||1,I===1&&D===1){v.stroke();return}const W=v.getLineDash();if(y&&v.save(),v.scale(I,D),W.length>0){const Q=Math.max(I,D);v.setLineDash(W.map(it=>it/Q)),v.lineDashOffset/=Q}v.stroke(),y&&v.restore()}isContentVisible(){for(let y=this.markedContentStack.length-1;y>=0;y--)if(!this.markedContentStack[y].visible)return!1;return!0}};st=new WeakSet,tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},St=new WeakSet,en=function(){if(this.pageColors){const y=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(y!=="none"){const v=this.ctx.filter;this.ctx.filter=y,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=v}}};let at=Y;e.CanvasGraphics=at;for(const B in i.OPS)at.prototype[B]!==void 0&&(at.prototype[i.OPS[B]]=at.prototype[B])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=d;var i=n(1),s=n(6);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=r;function a(m,k){if(!k)return;const P=k[2]-k[0],R=k[3]-k[1],A=new Path2D;A.rect(k[0],k[1],P,R),m.clip(A)}class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class c extends h{constructor(k){super(),this._type=k[1],this._bbox=k[2],this._colorStops=k[3],this._p0=k[4],this._p1=k[5],this._r0=k[6],this._r1=k[7],this.matrix=null}_createGradient(k){let P;this._type==="axial"?P=k.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=k.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const R of this._colorStops)P.addColorStop(R[0],R[1]);return P}getPattern(k,P,R,A){let F;if(A===r.STROKE||A===r.FILL){const U=P.current.getClippedPathBoundingBox(A,(0,s.getCurrentTransform)(k))||[0,0,0,0],M=Math.ceil(U[2]-U[0])||1,x=Math.ceil(U[3]-U[1])||1,$=P.cachedCanvases.getCanvas("pattern",M,x,!0),H=$.context;H.clearRect(0,0,H.canvas.width,H.canvas.height),H.beginPath(),H.rect(0,0,H.canvas.width,H.canvas.height),H.translate(-U[0],-U[1]),R=i.Util.transform(R,[1,0,0,1,U[0],U[1]]),H.transform(...P.baseTransform),this.matrix&&H.transform(...this.matrix),a(H,this._bbox),H.fillStyle=this._createGradient(H),H.fill(),F=k.createPattern($.canvas,"no-repeat");const N=new DOMMatrix(R);F.setTransform(N)}else a(k,this._bbox),F=this._createGradient(k);return F}}function u(m,k,P,R,A,F,U,M){const x=k.coords,$=k.colors,H=m.data,N=m.width*4;let X;x[P+1]>x[R+1]&&(X=P,P=R,R=X,X=F,F=U,U=X),x[R+1]>x[A+1]&&(X=R,R=A,A=X,X=U,U=M,M=X),x[P+1]>x[R+1]&&(X=P,P=R,R=X,X=F,F=U,U=X);const g=(x[P]+k.offsetX)*k.scaleX,et=(x[P+1]+k.offsetY)*k.scaleY,ft=(x[R]+k.offsetX)*k.scaleX,at=(x[R+1]+k.offsetY)*k.scaleY,st=(x[A]+k.offsetX)*k.scaleX,dt=(x[A+1]+k.offsetY)*k.scaleY;if(et>=dt)return;const St=$[F],ut=$[F+1],Y=$[F+2],B=$[U],y=$[U+1],v=$[U+2],C=$[M],I=$[M+1],D=$[M+2],W=Math.round(et),Q=Math.round(dt);let it,pt,j,o,z,G,O,L;for(let K=W;K<=Q;K++){if(K<at){const Z=K<et?0:(et-K)/(et-at);it=g-(g-ft)*Z,pt=St-(St-B)*Z,j=ut-(ut-y)*Z,o=Y-(Y-v)*Z}else{let Z;K>dt?Z=1:at===dt?Z=0:Z=(at-K)/(at-dt),it=ft-(ft-st)*Z,pt=B-(B-C)*Z,j=y-(y-I)*Z,o=v-(v-D)*Z}let nt;K<et?nt=0:K>dt?nt=1:nt=(et-K)/(et-dt),z=g-(g-st)*nt,G=St-(St-C)*nt,O=ut-(ut-I)*nt,L=Y-(Y-D)*nt;const ct=Math.round(Math.min(it,z)),V=Math.round(Math.max(it,z));let J=N*K+ct*4;for(let Z=ct;Z<=V;Z++)nt=(it-Z)/(it-z),nt<0?nt=0:nt>1&&(nt=1),H[J++]=pt-(pt-G)*nt|0,H[J++]=j-(j-O)*nt|0,H[J++]=o-(o-L)*nt|0,H[J++]=255}}function l(m,k,P){const R=k.coords,A=k.colors;let F,U;switch(k.type){case"lattice":const M=k.verticesPerRow,x=Math.floor(R.length/M)-1,$=M-1;for(F=0;F<x;F++){let H=F*M;for(let N=0;N<$;N++,H++)u(m,P,R[H],R[H+1],R[H+M],A[H],A[H+1],A[H+M]),u(m,P,R[H+M+1],R[H+1],R[H+M],A[H+M+1],A[H+1],A[H+M])}break;case"triangles":for(F=0,U=R.length;F<U;F+=3)u(m,P,R[F],R[F+1],R[F+2],A[F],A[F+1],A[F+2]);break;default:throw new Error("illegal figure")}}class _ extends h{constructor(k){super(),this._coords=k[2],this._colors=k[3],this._figures=k[4],this._bounds=k[5],this._bbox=k[7],this._background=k[8],this.matrix=null}_createMeshCanvas(k,P,R){const M=Math.floor(this._bounds[0]),x=Math.floor(this._bounds[1]),$=Math.ceil(this._bounds[2])-M,H=Math.ceil(this._bounds[3])-x,N=Math.min(Math.ceil(Math.abs($*k[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(H*k[1]*1.1)),3e3),g=$/N,et=H/X,ft={coords:this._coords,colors:this._colors,offsetX:-M,offsetY:-x,scaleX:1/g,scaleY:1/et},at=N+2*2,st=X+2*2,dt=R.getCanvas("mesh",at,st,!1),St=dt.context,ut=St.createImageData(N,X);if(P){const B=ut.data;for(let y=0,v=B.length;y<v;y+=4)B[y]=P[0],B[y+1]=P[1],B[y+2]=P[2],B[y+3]=255}for(const B of this._figures)l(ut,B,ft);return St.putImageData(ut,2,2),{canvas:dt.canvas,offsetX:M-2*g,offsetY:x-2*et,scaleX:g,scaleY:et}}getPattern(k,P,R,A){a(k,this._bbox);let F;if(A===r.SHADING)F=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(k));else if(F=i.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const M=i.Util.singularValueDecompose2dScale(this.matrix);F=[F[0]*M[0],F[1]*M[1]]}const U=this._createMeshCanvas(F,A===r.SHADING?null:this._background,P.cachedCanvases);return A!==r.SHADING&&(k.setTransform(...P.baseTransform),this.matrix&&k.transform(...this.matrix)),k.translate(U.offsetX,U.offsetY),k.scale(U.scaleX,U.scaleY),k.createPattern(U.canvas,"no-repeat")}}class w extends h{getPattern(){return"hotpink"}}function d(m){switch(m[0]){case"RadialAxial":return new c(m);case"Mesh":return new _(m);case"Dummy":return new w}throw new Error(`Unknown IR type: ${m[0]}`)}const S={COLORED:1,UNCOLORED:2},b=class b{constructor(k,P,R,A,F){this.operatorList=k[2],this.matrix=k[3]||[1,0,0,1,0,0],this.bbox=k[4],this.xstep=k[5],this.ystep=k[6],this.paintType=k[7],this.tilingType=k[8],this.color=P,this.ctx=R,this.canvasGraphicsFactory=A,this.baseTransform=F}createPatternCanvas(k){const P=this.operatorList,R=this.bbox,A=this.xstep,F=this.ystep,U=this.paintType,M=this.tilingType,x=this.color,$=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+M);const H=R[0],N=R[1],X=R[2],g=R[3],et=i.Util.singularValueDecompose2dScale(this.matrix),ft=i.Util.singularValueDecompose2dScale(this.baseTransform),at=[et[0]*ft[0],et[1]*ft[1]],st=this.getSizeAndScale(A,this.ctx.canvas.width,at[0]),dt=this.getSizeAndScale(F,this.ctx.canvas.height,at[1]),St=k.cachedCanvases.getCanvas("pattern",st.size,dt.size,!0),ut=St.context,Y=$.createCanvasGraphics(ut);Y.groupLevel=k.groupLevel,this.setFillAndStrokeStyleToContext(Y,U,x);let B=H,y=N,v=X,C=g;return H<0&&(B=0,v+=Math.abs(H)),N<0&&(y=0,C+=Math.abs(N)),ut.translate(-(st.scale*B),-(dt.scale*y)),Y.transform(st.scale,0,0,dt.scale,0,0),ut.save(),this.clipBbox(Y,B,y,v,C),Y.baseTransform=(0,s.getCurrentTransform)(Y.ctx),Y.executeOperatorList(P),Y.endDrawing(),{canvas:St.canvas,scaleX:st.scale,scaleY:dt.scale,offsetX:B,offsetY:y}}getSizeAndScale(k,P,R){k=Math.abs(k);const A=Math.max(b.MAX_PATTERN_SIZE,P);let F=Math.ceil(k*R);return F>=A?F=A:R=F/k,{scale:R,size:F}}clipBbox(k,P,R,A,F){const U=A-P,M=F-R;k.ctx.rect(P,R,U,M),k.current.updateRectMinMax((0,s.getCurrentTransform)(k.ctx),[P,R,A,F]),k.clip(),k.endPath()}setFillAndStrokeStyleToContext(k,P,R){const A=k.ctx,F=k.current;switch(P){case S.COLORED:const U=this.ctx;A.fillStyle=U.fillStyle,A.strokeStyle=U.strokeStyle,F.fillColor=U.fillStyle,F.strokeColor=U.strokeStyle;break;case S.UNCOLORED:const M=i.Util.makeHexColor(R[0],R[1],R[2]);A.fillStyle=M,A.strokeStyle=M,F.fillColor=M,F.strokeColor=M;break;default:throw new i.FormatError(`Unsupported paint type: ${P}`)}}getPattern(k,P,R,A){let F=R;A!==r.SHADING&&(F=i.Util.transform(F,P.baseTransform),this.matrix&&(F=i.Util.transform(F,this.matrix)));const U=this.createPatternCanvas(P);let M=new DOMMatrix(F);M=M.translate(U.offsetX,U.offsetY),M=M.scale(1/U.scaleX,1/U.scaleY);const x=k.createPattern(U.canvas,"repeat");return x.setTransform(M),x}};ie(b,"MAX_PATTERN_SIZE",3e3);let f=b;e.TilingPattern=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=r,e.convertToRGBA=s,e.grayToRGBA=h;var i=n(1);function s(c){switch(c.kind){case i.ImageKind.GRAYSCALE_1BPP:return r(c);case i.ImageKind.RGB_24BPP:return a(c)}return null}function r({src:c,srcPos:u=0,dest:l,width:_,height:w,nonBlackColor:d=4294967295,inverseDecode:S=!1}){const f=i.FeatureTest.isLittleEndian?4278190080:255,[b,m]=S?[d,f]:[f,d],k=_>>3,P=_&7,R=c.length;l=new Uint32Array(l.buffer);let A=0;for(let F=0;F<w;F++){for(const M=u+k;u<M;u++){const x=u<R?c[u]:255;l[A++]=x&128?m:b,l[A++]=x&64?m:b,l[A++]=x&32?m:b,l[A++]=x&16?m:b,l[A++]=x&8?m:b,l[A++]=x&4?m:b,l[A++]=x&2?m:b,l[A++]=x&1?m:b}if(P===0)continue;const U=u<R?c[u++]:255;for(let M=0;M<P;M++)l[A++]=U&1<<7-M?m:b}return{srcPos:u,destPos:A}}function a({src:c,srcPos:u=0,dest:l,destPos:_=0,width:w,height:d}){let S=0;const f=c.length>>2,b=new Uint32Array(c.buffer,u,f);if(i.FeatureTest.isLittleEndian){for(;S<f-2;S+=3,_+=4){const m=b[S],k=b[S+1],P=b[S+2];l[_]=m|4278190080,l[_+1]=m>>>24|k<<8|4278190080,l[_+2]=k>>>16|P<<16|4278190080,l[_+3]=P>>>8|4278190080}for(let m=S*4,k=c.length;m<k;m+=3)l[_++]=c[m]|c[m+1]<<8|c[m+2]<<16|4278190080}else{for(;S<f-2;S+=3,_+=4){const m=b[S],k=b[S+1],P=b[S+2];l[_]=m|255,l[_+1]=m<<24|k>>>8|255,l[_+2]=k<<16|P>>>16|255,l[_+3]=P<<8|255}for(let m=S*4,k=c.length;m<k;m+=3)l[_++]=c[m]<<24|c[m+1]<<16|c[m+2]<<8|255}return{srcPos:u,destPos:_}}function h(c,u){if(i.FeatureTest.isLittleEndian)for(let l=0,_=c.length;l<_;l++)u[l]=c[l]*65793|4278190080;else for(let l=0,_=c.length;l<_;l++)u[l]=c[l]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{var c,Fn,l,On,w,Re;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=n(1);const s={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(S){switch(S instanceof Error||typeof S=="object"&&S!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new i.AbortException(S.message);case"MissingPDFException":return new i.MissingPDFException(S.message);case"PasswordException":return new i.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new i.UnknownErrorException(S.message,S.details);default:return new i.UnknownErrorException(S.message,S.toString())}}class h{constructor(f,b,m){ht(this,c);ht(this,l);ht(this,w);this.sourceName=f,this.targetName=b,this.comObj=m,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=k=>{const P=k.data;if(P.targetName!==this.sourceName)return;if(P.stream){bt(this,l,On).call(this,P);return}if(P.callback){const A=P.callbackId,F=this.callbackCapabilities[A];if(!F)throw new Error(`Cannot resolve callback ${A}`);if(delete this.callbackCapabilities[A],P.callback===s.DATA)F.resolve(P.data);else if(P.callback===s.ERROR)F.reject(a(P.reason));else throw new Error("Unexpected callback case");return}const R=this.actionHandler[P.action];if(!R)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const A=this.sourceName,F=P.sourceName;new Promise(function(U){U(R(P.data))}).then(function(U){m.postMessage({sourceName:A,targetName:F,callback:s.DATA,callbackId:P.callbackId,data:U})},function(U){m.postMessage({sourceName:A,targetName:F,callback:s.ERROR,callbackId:P.callbackId,reason:a(U)})});return}if(P.streamId){bt(this,c,Fn).call(this,P);return}R(P.data)},m.addEventListener("message",this._onComObjOnMessage)}on(f,b){const m=this.actionHandler;if(m[f])throw new Error(`There is already an actionName called "${f}"`);m[f]=b}send(f,b,m){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:b},m)}sendWithPromise(f,b,m){const k=this.callbackId++,P=new i.PromiseCapability;this.callbackCapabilities[k]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:k,data:b},m)}catch(R){P.reject(R)}return P.promise}sendWithStream(f,b,m,k){const P=this.streamId++,R=this.sourceName,A=this.targetName,F=this.comObj;return new ReadableStream({start:U=>{const M=new i.PromiseCapability;return this.streamControllers[P]={controller:U,startCall:M,pullCall:null,cancelCall:null,isClosed:!1},F.postMessage({sourceName:R,targetName:A,action:f,streamId:P,data:b,desiredSize:U.desiredSize},k),M.promise},pull:U=>{const M=new i.PromiseCapability;return this.streamControllers[P].pullCall=M,F.postMessage({sourceName:R,targetName:A,stream:r.PULL,streamId:P,desiredSize:U.desiredSize}),M.promise},cancel:U=>{(0,i.assert)(U instanceof Error,"cancel must have a valid reason");const M=new i.PromiseCapability;return this.streamControllers[P].cancelCall=M,this.streamControllers[P].isClosed=!0,F.postMessage({sourceName:R,targetName:A,stream:r.CANCEL,streamId:P,reason:a(U)}),M.promise}},m)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}c=new WeakSet,Fn=function(f){const b=f.streamId,m=this.sourceName,k=f.sourceName,P=this.comObj,R=this,A=this.actionHandler[f.action],F={enqueue(U,M=1,x){if(this.isCancelled)return;const $=this.desiredSize;this.desiredSize-=M,$>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),P.postMessage({sourceName:m,targetName:k,stream:r.ENQUEUE,streamId:b,chunk:U},x)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:m,targetName:k,stream:r.CLOSE,streamId:b}),delete R.streamSinks[b])},error(U){(0,i.assert)(U instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:m,targetName:k,stream:r.ERROR,streamId:b,reason:a(U)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};F.sinkCapability.resolve(),F.ready=F.sinkCapability.promise,this.streamSinks[b]=F,new Promise(function(U){U(A(f.data,F))}).then(function(){P.postMessage({sourceName:m,targetName:k,stream:r.START_COMPLETE,streamId:b,success:!0})},function(U){P.postMessage({sourceName:m,targetName:k,stream:r.START_COMPLETE,streamId:b,reason:a(U)})})},l=new WeakSet,On=function(f){const b=f.streamId,m=this.sourceName,k=f.sourceName,P=this.comObj,R=this.streamControllers[b],A=this.streamSinks[b];switch(f.stream){case r.START_COMPLETE:f.success?R.startCall.resolve():R.startCall.reject(a(f.reason));break;case r.PULL_COMPLETE:f.success?R.pullCall.resolve():R.pullCall.reject(a(f.reason));break;case r.PULL:if(!A){P.postMessage({sourceName:m,targetName:k,stream:r.PULL_COMPLETE,streamId:b,success:!0});break}A.desiredSize<=0&&f.desiredSize>0&&A.sinkCapability.resolve(),A.desiredSize=f.desiredSize,new Promise(function(F){var U;F((U=A.onPull)==null?void 0:U.call(A))}).then(function(){P.postMessage({sourceName:m,targetName:k,stream:r.PULL_COMPLETE,streamId:b,success:!0})},function(F){P.postMessage({sourceName:m,targetName:k,stream:r.PULL_COMPLETE,streamId:b,reason:a(F)})});break;case r.ENQUEUE:if((0,i.assert)(R,"enqueue should have stream controller"),R.isClosed)break;R.controller.enqueue(f.chunk);break;case r.CLOSE:if((0,i.assert)(R,"close should have stream controller"),R.isClosed)break;R.isClosed=!0,R.controller.close(),bt(this,w,Re).call(this,R,b);break;case r.ERROR:(0,i.assert)(R,"error should have stream controller"),R.controller.error(a(f.reason)),bt(this,w,Re).call(this,R,b);break;case r.CANCEL_COMPLETE:f.success?R.cancelCall.resolve():R.cancelCall.reject(a(f.reason)),bt(this,w,Re).call(this,R,b);break;case r.CANCEL:if(!A)break;new Promise(function(F){var U;F((U=A.onCancel)==null?void 0:U.call(A,a(f.reason)))}).then(function(){P.postMessage({sourceName:m,targetName:k,stream:r.CANCEL_COMPLETE,streamId:b,success:!0})},function(F){P.postMessage({sourceName:m,targetName:k,stream:r.CANCEL_COMPLETE,streamId:b,reason:a(F)})}),A.sinkCapability.reject(a(f.reason)),A.isCancelled=!0,delete this.streamSinks[b];break;default:throw new Error("Unexpected stream case")}},w=new WeakSet,Re=async function(f,b){var m,k,P;await Promise.allSettled([(m=f.startCall)==null?void 0:m.promise,(k=f.pullCall)==null?void 0:k.promise,(P=f.cancelCall)==null?void 0:P.promise]),delete this.streamControllers[b]},e.MessageHandler=h},(t,e,n)=>{var r,a;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(1);class s{constructor({parsedData:c,rawData:u}){ht(this,r,void 0);ht(this,a,void 0);wt(this,r,c),wt(this,a,u)}getRaw(){return E(this,a)}get(c){return E(this,r).get(c)??null}getAll(){return(0,i.objectFromMap)(E(this,r))}has(c){return E(this,r).has(c)}}r=new WeakMap,a=new WeakMap,e.Metadata=s},(t,e,n)=>{var c,u,l,_,w,d,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=n(1),s=n(8);const r=Symbol("INTERNAL");class a{constructor(b,m){ht(this,c,!0);this.name=b,this.intent=m}get visible(){return E(this,c)}_setVisible(b,m){b!==r&&(0,i.unreachable)("Internal method `_setVisible` called."),wt(this,c,m)}}c=new WeakMap;class h{constructor(b){ht(this,d);ht(this,u,null);ht(this,l,new Map);ht(this,_,null);ht(this,w,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,wt(this,w,b.order);for(const m of b.groups)E(this,l).set(m.id,new a(m.name,m.intent));if(b.baseState==="OFF")for(const m of E(this,l).values())m._setVisible(r,!1);for(const m of b.on)E(this,l).get(m)._setVisible(r,!0);for(const m of b.off)E(this,l).get(m)._setVisible(r,!1);wt(this,_,this.getHash())}}isVisible(b){if(E(this,l).size===0)return!0;if(!b)return(0,i.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return E(this,l).has(b.id)?E(this,l).get(b.id).visible:((0,i.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return bt(this,d,nn).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const m of b.ids){if(!E(this,l).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(E(this,l).get(m).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const m of b.ids){if(!E(this,l).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(!E(this,l).get(m).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const m of b.ids){if(!E(this,l).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(!E(this,l).get(m).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const m of b.ids){if(!E(this,l).has(m))return(0,i.warn)(`Optional content group not found: ${m}`),!0;if(E(this,l).get(m).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,i.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,m=!0){if(!E(this,l).has(b)){(0,i.warn)(`Optional content group not found: ${b}`);return}E(this,l).get(b)._setVisible(r,!!m),wt(this,u,null)}get hasInitialVisibility(){return E(this,_)===null||this.getHash()===E(this,_)}getOrder(){return E(this,l).size?E(this,w)?E(this,w).slice():[...E(this,l).keys()]:null}getGroups(){return E(this,l).size>0?(0,i.objectFromMap)(E(this,l)):null}getGroup(b){return E(this,l).get(b)||null}getHash(){if(E(this,u)!==null)return E(this,u);const b=new s.MurmurHash3_64;for(const[m,k]of E(this,l))b.update(`${m}:${k.visible}`);return wt(this,u,b.hexdigest())}}u=new WeakMap,l=new WeakMap,_=new WeakMap,w=new WeakMap,d=new WeakSet,nn=function(b){const m=b.length;if(m<2)return!0;const k=b[0];for(let P=1;P<m;P++){const R=b[P];let A;if(Array.isArray(R))A=bt(this,d,nn).call(this,R);else if(E(this,l).has(R))A=E(this,l).get(R).visible;else return(0,i.warn)(`Optional content group not found: ${R}`),!0;switch(k){case"And":if(!A)return!1;break;case"Or":if(A)return!0;break;case"Not":return!A;default:return!0}}return k==="And"},e.OptionalContentConfig=h},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=n(1),s=n(6);class r{constructor({length:u,initialData:l,progressiveDone:_=!1,contentDispositionFilename:w=null,disableRange:d=!1,disableStream:S=!1},f){if((0,i.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_,this._contentDispositionFilename=w,(l==null?void 0:l.length)>0){const b=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!S,this._isRangeSupported=!d,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,m)=>{this._onReceiveData({begin:b,chunk:m})}),this._pdfDataRangeTransport.addProgressListener((b,m)=>{this._onProgress({loaded:b,total:m})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:l}){const _=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const w=this._rangeReaders.some(function(d){return d._begin!==u?!1:(d._enqueue(_),!0)});(0,i.assert)(w,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u;return((u=this._fullRequestReader)==null?void 0:u._loaded)??0}_onProgress(u){var l,_,w,d;u.total===void 0?(_=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||_.call(l,{loaded:u.loaded}):(d=(w=this._fullRequestReader)==null?void 0:w.onProgress)==null||d.call(w,{loaded:u.loaded,total:u.total})}_onProgressiveDone(){var u;(u=this._fullRequestReader)==null||u.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const l=this._rangeReaders.indexOf(u);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new a(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,l){if(l<=this._progressiveDataLength)return null;const _=new h(this,u,l);return this._pdfDataRangeTransport.requestDataRange(u,l),this._rangeReaders.push(_),_}cancelAllRequests(u){var l;(l=this._fullRequestReader)==null||l.cancel(u);for(const _ of this._rangeReaders.slice(0))_.cancel(u);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=r;class a{constructor(u,l,_=!1,w=null){this._stream=u,this._done=_||!1,this._filename=(0,s.isPdfFile)(w)?w:null,this._queuedChunks=l||[],this._loaded=0;for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new i.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class h{constructor(u,l,_){this._stream=u,this._begin=l,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new i.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=n(1),s=n(20);function r(_,w,d){return{method:"GET",headers:_,signal:d.signal,mode:"cors",credentials:w?"include":"same-origin",redirect:"follow"}}function a(_){const w=new Headers;for(const d in _){const S=_[d];S!==void 0&&w.append(d,S)}return w}function h(_){return _ instanceof Uint8Array?_.buffer:_ instanceof ArrayBuffer?_:((0,i.warn)(`getArrayBuffer - unexpected data format: ${_}`),new Uint8Array(_).buffer)}class c{constructor(w){this.source=w,this.isHttp=/^https?:/i.test(w.url),this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(w,d){if(d<=this._progressiveDataLength)return null;const S=new l(this,w,d);return this._rangeRequestReaders.push(S),S}cancelAllRequests(w){var d;(d=this._fullRequestReader)==null||d.cancel(w);for(const S of this._rangeRequestReaders.slice(0))S.cancel(w)}}e.PDFFetchStream=c;class u{constructor(w){this._stream=w,this._reader=null,this._loaded=0,this._filename=null;const d=w.source;this._withCredentials=d.withCredentials||!1,this._contentLength=d.length,this._headersCapability=new i.PromiseCapability,this._disableRange=d.disableRange||!1,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._headers=a(this._stream.httpHeaders);const S=d.url;fetch(S,r(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,s.validateResponseStatus)(f.status))throw(0,s.createResponseStatusError)(f.status,S);this._reader=f.body.getReader(),this._headersCapability.resolve();const b=P=>f.headers.get(P),{allowRangeRequests:m,suggestedLength:k}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=k||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._headersCapability.promise;const{value:w,done:d}=await this._reader.read();return d?{value:w,done:d}:(this._loaded+=w.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h(w),done:!1})}cancel(w){var d;(d=this._reader)==null||d.cancel(w),this._abortController.abort()}}class l{constructor(w,d,S){this._stream=w,this._reader=null,this._loaded=0;const f=w.source;this._withCredentials=f.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${d}-${S-1}`);const b=f.url;fetch(b,r(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,s.validateResponseStatus)(m.status))throw(0,s.createResponseStatusError)(m.status,b);this._readCapability.resolve(),this._reader=m.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._readCapability.promise;const{value:w,done:d}=await this._reader.read();return d?{value:w,done:d}:(this._loaded+=w.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded}),{value:h(w),done:!1})}cancel(w){var d;(d=this._reader)==null||d.cancel(w),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=c,e.extractFilenameFromHeader=h,e.validateRangeRequestCapabilities=a,e.validateResponseStatus=u;var i=n(1),s=n(21),r=n(6);function a({getResponseHeader:l,isHttp:_,rangeChunkSize:w,disableRange:d}){const S={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(l("Content-Length"),10);return!Number.isInteger(f)||(S.suggestedLength=f,f<=2*w)||d||!_||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(S.allowRangeRequests=!0),S}function h(l){const _=l("Content-Disposition");if(_){let w=(0,s.getFilenameFromContentDispositionHeader)(_);if(w.includes("%"))try{w=decodeURIComponent(w)}catch{}if((0,r.isPdfFile)(w))return w}return null}function c(l,_){return l===404||l===0&&_.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+_+'".'):new i.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${_}".`,l)}function u(l){return l===200||l===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=s;var i=n(1);function s(r){let a=!0,h=c("filename\\*","i").exec(r);if(h){h=h[1];let f=w(h);return f=unescape(f),f=d(f),f=S(f),l(f)}if(h=_(r),h){const f=S(h);return l(f)}if(h=c("filename","i").exec(r),h){h=h[1];let f=w(h);return f=S(f),l(f)}function c(f,b){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function u(f,b){if(f){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const m=new TextDecoder(f,{fatal:!0}),k=(0,i.stringToBytes)(b);b=m.decode(k),a=!1}catch{}}return b}function l(f){return a&&/[\x80-\xff]/.test(f)&&(f=u("utf-8",f),a&&(f=u("iso-8859-1",f))),f}function _(f){const b=[];let m;const k=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=k.exec(f))!==null;){let[,R,A,F]=m;if(R=parseInt(R,10),R in b){if(R===0)break;continue}b[R]=[A,F]}const P=[];for(let R=0;R<b.length&&R in b;++R){let[A,F]=b[R];F=w(F),A&&(F=unescape(F),R===0&&(F=d(F))),P.push(F)}return P.join("")}function w(f){if(f.startsWith('"')){const b=f.slice(1).split('\\"');for(let m=0;m<b.length;++m){const k=b[m].indexOf('"');k!==-1&&(b[m]=b[m].slice(0,k),b.length=m+1),b[m]=b[m].replaceAll(/\\(.)/g,"$1")}f=b.join('"')}return f}function d(f){const b=f.indexOf("'");if(b===-1)return f;const m=f.slice(0,b),P=f.slice(b+1).replace(/^[^']*'/,"");return u(m,P)}function S(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,m,k,P){if(k==="q"||k==="Q")return P=P.replaceAll("_"," "),P=P.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,A){return String.fromCharCode(parseInt(A,16))}),u(m,P);try{P=atob(P)}catch{}return u(m,P)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=n(1),s=n(20);const r=200,a=206;function h(w){const d=w.response;return typeof d!="string"?d:(0,i.stringToBytes)(d).buffer}class c{constructor(d,S={}){this.url=d,this.isHttp=/^https?:/i.test(d),this.httpHeaders=this.isHttp&&S.httpHeaders||Object.create(null),this.withCredentials=S.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(d,S,f){const b={begin:d,end:S};for(const m in f)b[m]=f[m];return this.request(b)}requestFull(d){return this.request(d)}request(d){const S=new XMLHttpRequest,f=this.currXhrId++,b=this.pendingRequests[f]={xhr:S};S.open("GET",this.url),S.withCredentials=this.withCredentials;for(const m in this.httpHeaders){const k=this.httpHeaders[m];k!==void 0&&S.setRequestHeader(m,k)}return this.isHttp&&"begin"in d&&"end"in d?(S.setRequestHeader("Range",`bytes=${d.begin}-${d.end-1}`),b.expectedStatus=a):b.expectedStatus=r,S.responseType="arraybuffer",d.onError&&(S.onerror=function(m){d.onError(S.status)}),S.onreadystatechange=this.onStateChange.bind(this,f),S.onprogress=this.onProgress.bind(this,f),b.onHeadersReceived=d.onHeadersReceived,b.onDone=d.onDone,b.onError=d.onError,b.onProgress=d.onProgress,S.send(null),f}onProgress(d,S){var b;const f=this.pendingRequests[d];f&&((b=f.onProgress)==null||b.call(f,S))}onStateChange(d,S){var R,A,F;const f=this.pendingRequests[d];if(!f)return;const b=f.xhr;if(b.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),b.readyState!==4||!(d in this.pendingRequests))return;if(delete this.pendingRequests[d],b.status===0&&this.isHttp){(R=f.onError)==null||R.call(f,b.status);return}const m=b.status||r;if(!(m===r&&f.expectedStatus===a)&&m!==f.expectedStatus){(A=f.onError)==null||A.call(f,b.status);return}const P=h(b);if(m===a){const U=b.getResponseHeader("Content-Range"),M=/bytes (\d+)-(\d+)\/(\d+)/.exec(U);f.onDone({begin:parseInt(M[1],10),chunk:P})}else P?f.onDone({begin:0,chunk:P}):(F=f.onError)==null||F.call(f,b.status)}getRequestXhr(d){return this.pendingRequests[d].xhr}isPendingRequest(d){return d in this.pendingRequests}abortRequest(d){const S=this.pendingRequests[d].xhr;delete this.pendingRequests[d],S.abort()}}class u{constructor(d){this._source=d,this._manager=new c(d.url,{httpHeaders:d.httpHeaders,withCredentials:d.withCredentials}),this._rangeChunkSize=d.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(d){const S=this._rangeRequestReaders.indexOf(d);S>=0&&this._rangeRequestReaders.splice(S,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(d,S){const f=new _(this._manager,d,S);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(d){var S;(S=this._fullRequestReader)==null||S.cancel(d);for(const f of this._rangeRequestReaders.slice(0))f.cancel(d)}}e.PDFNetworkStream=u;class l{constructor(d,S){this._manager=d;const f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._fullRequestId=d.requestFull(f),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=S.disableRange||!1,this._contentLength=S.length,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const d=this._fullRequestId,S=this._manager.getRequestXhr(d),f=k=>S.getResponseHeader(k),{allowRangeRequests:b,suggestedLength:m}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=m||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(d),this._headersReceivedCapability.resolve()}_onDone(d){if(d&&(this._requests.length>0?this._requests.shift().resolve({value:d.chunk,done:!1}):this._cachedChunks.push(d.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(d){this._storedError=(0,s.createResponseStatusError)(d,this._url),this._headersReceivedCapability.reject(this._storedError);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(d){var S;(S=this.onProgress)==null||S.call(this,{loaded:d.loaded,total:d.lengthComputable?d.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new i.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0,this._headersReceivedCapability.reject(d);for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(d,S,f){this._manager=d;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._requestId=d.requestRange(S,f,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var d;(d=this.onClosed)==null||d.call(this,this)}_onDone(d){const S=d.chunk;this._requests.length>0?this._requests.shift().resolve({value:S,done:!1}):this._queuedChunk=S,this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(d){this._storedError=(0,s.createResponseStatusError)(d,this._url);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(d){var S;this.isStreamingSupported||(S=this.onProgress)==null||S.call(this,{loaded:d.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const S=this._queuedChunk;return this._queuedChunk=null,{value:S,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new i.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=n(1),s=n(20);const r=/^file:\/\/\/[a-zA-Z]:\//;function a(f){const b=require$$5,m=b.parse(f);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(f)?b.parse(`file:///${f}`):(m.host||(m.protocol="file:"),m)}class h{constructor(b){this.source=b,this.url=a(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new d(this):new _(this),this._fullRequestReader}getRangeReader(b,m){if(m<=this._progressiveDataLength)return null;const k=this.isFsUrl?new S(this,b,m):new w(this,b,m);return this._rangeRequestReaders.push(k),k}cancelAllRequests(b){var m;(m=this._fullRequestReader)==null||m.cancel(b);for(const k of this._rangeRequestReaders.slice(0))k.cancel(b)}}e.PDFNodeStream=h;class c{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const m=b.source;this._contentLength=m.length,this._loaded=0,this._filename=null,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=b.length,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",m=>{this._error(m)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const m=b.source;this._isStreamingSupported=!m.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=b.length,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",m=>{this._error(m)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(f,b){return{protocol:f.protocol,auth:f.auth,host:f.hostname,port:f.port,path:f.path,method:"GET",headers:b}}class _ extends c{constructor(b){super(b);const m=k=>{if(k.statusCode===404){const F=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=F,this._headersCapability.reject(F);return}this._headersCapability.resolve(),this._setReadableStream(k);const P=F=>this._readableStream.headers[F.toLowerCase()],{allowRangeRequests:R,suggestedLength:A}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=A||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(P)};if(this._request=null,this._url.protocol==="http:"){const k=require$$5;this._request=k.request(l(this._url,b.httpHeaders),m)}else{const k=require$$5;this._request=k.request(l(this._url,b.httpHeaders),m)}this._request.on("error",k=>{this._storedError=k,this._headersCapability.reject(k)}),this._request.end()}}class w extends u{constructor(b,m,k){super(b),this._httpHeaders={};for(const R in b.httpHeaders){const A=b.httpHeaders[R];A!==void 0&&(this._httpHeaders[R]=A)}this._httpHeaders.Range=`bytes=${m}-${k-1}`;const P=R=>{if(R.statusCode===404){const A=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A;return}this._setReadableStream(R)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(l(this._url,this._httpHeaders),P)}else{const R=require$$5;this._request=R.request(l(this._url,this._httpHeaders),P)}this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class d extends c{constructor(b){super(b);let m=decodeURIComponent(this._url.path);r.test(this._url.href)&&(m=m.replace(/^\//,""));const k=require$$5;k.lstat(m,(P,R)=>{if(P){P.code==="ENOENT"&&(P=new i.MissingPDFException(`Missing PDF "${m}".`)),this._storedError=P,this._headersCapability.reject(P);return}this._contentLength=R.size,this._setReadableStream(k.createReadStream(m)),this._headersCapability.resolve()})}}class S extends u{constructor(b,m,k){super(b);let P=decodeURIComponent(this._url.path);r.test(this._url.href)&&(P=P.replace(/^\//,""));const R=require$$5;this._setReadableStream(R.createReadStream(P,{start:m,end:k-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=n(6),s=n(1);const r={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},a="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",c=["butt","round","square"],u=["miter","round","bevel"],l=function(R,A="",F=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!F)return URL.createObjectURL(new Blob([R],{type:A}));const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let M=`data:${A};base64,`;for(let x=0,$=R.length;x<$;x+=3){const H=R[x]&255,N=R[x+1]&255,X=R[x+2]&255,g=H>>2,et=(H&3)<<4|N>>4,ft=x+1<$?(N&15)<<2|X>>6:64,at=x+2<$?X&63:64;M+=U[g]+U[et]+U[ft]+U[at]}return M},_=function(){const R=new Uint8Array([137,80,78,71,13,10,26,10]),A=12,F=new Int32Array(256);for(let X=0;X<256;X++){let g=X;for(let et=0;et<8;et++)g=g&1?3988292384^g>>1&2147483647:g>>1&2147483647;F[X]=g}function U(X,g,et){let ft=-1;for(let at=g;at<et;at++){const st=(ft^X[at])&255,dt=F[st];ft=ft>>>8^dt}return ft^-1}function M(X,g,et,ft){let at=ft;const st=g.length;et[at]=st>>24&255,et[at+1]=st>>16&255,et[at+2]=st>>8&255,et[at+3]=st&255,at+=4,et[at]=X.charCodeAt(0)&255,et[at+1]=X.charCodeAt(1)&255,et[at+2]=X.charCodeAt(2)&255,et[at+3]=X.charCodeAt(3)&255,at+=4,et.set(g,at),at+=g.length;const dt=U(et,ft+4,at);et[at]=dt>>24&255,et[at+1]=dt>>16&255,et[at+2]=dt>>8&255,et[at+3]=dt&255}function x(X,g,et){let ft=1,at=0;for(let st=g;st<et;++st)ft=(ft+(X[st]&255))%65521,at=(at+ft)%65521;return at<<16|ft}function $(X){if(!s.isNodeJS)return H(X);try{const g=parseInt(process.versions.node)>=8?X:Buffer.from(X),et=require$$5.deflateSync(g,{level:9});return et instanceof Uint8Array?et:new Uint8Array(et)}catch(g){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+g)}return H(X)}function H(X){let g=X.length;const et=65535,ft=Math.ceil(g/et),at=new Uint8Array(2+g+ft*5+4);let st=0;at[st++]=120,at[st++]=156;let dt=0;for(;g>et;)at[st++]=0,at[st++]=255,at[st++]=255,at[st++]=0,at[st++]=0,at.set(X.subarray(dt,dt+et),st),st+=et,dt+=et,g-=et;at[st++]=1,at[st++]=g&255,at[st++]=g>>8&255,at[st++]=~g&65535&255,at[st++]=(~g&65535)>>8&255,at.set(X.subarray(dt),st),st+=X.length-dt;const St=x(X,0,X.length);return at[st++]=St>>24&255,at[st++]=St>>16&255,at[st++]=St>>8&255,at[st++]=St&255,at}function N(X,g,et,ft){const at=X.width,st=X.height;let dt,St,ut;const Y=X.data;switch(g){case s.ImageKind.GRAYSCALE_1BPP:St=0,dt=1,ut=at+7>>3;break;case s.ImageKind.RGB_24BPP:St=2,dt=8,ut=at*3;break;case s.ImageKind.RGBA_32BPP:St=6,dt=8,ut=at*4;break;default:throw new Error("invalid format")}const B=new Uint8Array((1+ut)*st);let y=0,v=0;for(let it=0;it<st;++it)B[y++]=0,B.set(Y.subarray(v,v+ut),y),v+=ut,y+=ut;if(g===s.ImageKind.GRAYSCALE_1BPP&&ft){y=0;for(let it=0;it<st;it++){y++;for(let pt=0;pt<ut;pt++)B[y++]^=255}}const C=new Uint8Array([at>>24&255,at>>16&255,at>>8&255,at&255,st>>24&255,st>>16&255,st>>8&255,st&255,dt,St,0,0,0]),I=$(B),D=R.length+A*3+C.length+I.length,W=new Uint8Array(D);let Q=0;return W.set(R,Q),Q+=R.length,M("IHDR",C,W,Q),Q+=A+C.length,M("IDATA",I,W,Q),Q+=A+I.length,M("IEND",new Uint8Array(0),W,Q),l(W,"image/png",et)}return function(g,et,ft){const at=g.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:g.kind;return N(g,at,et,ft)}}();class w{constructor(){this.fontSizeScale=1,this.fontWeight=r.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=r.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,F){this.x=A,this.y=F}}function d(R){let A=[];const F=[];for(const U of R){if(U.fn==="save"){A.push({fnId:92,fn:"group",items:[]}),F.push(A),A=A.at(-1).items;continue}U.fn==="restore"?A=F.pop():A.push(U)}return A}function S(R){if(Number.isInteger(R))return R.toString();const A=R.toFixed(10);let F=A.length-1;if(A[F]!=="0")return A;do F--;while(A[F]==="0");return A.substring(0,A[F]==="."?F:F+1)}function f(R){if(R[4]===0&&R[5]===0){if(R[1]===0&&R[2]===0)return R[0]===1&&R[3]===1?"":`scale(${S(R[0])} ${S(R[3])})`;if(R[0]===R[3]&&R[1]===-R[2]){const A=Math.acos(R[0])*180/Math.PI;return`rotate(${S(A)})`}}else if(R[0]===1&&R[1]===0&&R[2]===0&&R[3]===1)return`translate(${S(R[4])} ${S(R[5])})`;return`matrix(${S(R[0])} ${S(R[1])} ${S(R[2])} ${S(R[3])} ${S(R[4])} ${S(R[5])})`}let b=0,m=0,k=0;class P{constructor(A,F,U=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new w,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=A,this.objs=F,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!U,this._operatorIdMapping=[];for(const M in s.OPS)this._operatorIdMapping[s.OPS[M]]=M}getObject(A,F=null){return typeof A=="string"?A.startsWith("g_")?this.commonObjs.get(A):this.objs.get(A):F}save(){this.transformStack.push(this.transformMatrix);const A=this.current;this.extraStack.push(A),this.current=A.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(A){this.save(),this.executeOpTree(A),this.restore()}loadDependencies(A){const F=A.fnArray,U=A.argsArray;for(let M=0,x=F.length;M<x;M++)if(F[M]===s.OPS.dependency)for(const $ of U[M]){const H=$.startsWith("g_")?this.commonObjs:this.objs,N=new Promise(X=>{H.get($,X)});this.current.dependencies.push(N)}return Promise.all(this.current.dependencies)}transform(A,F,U,M,x,$){const H=[A,F,U,M,x,$];this.transformMatrix=s.Util.transform(this.transformMatrix,H),this.tgrp=null}getSVG(A,F){this.viewport=F;const U=this._initialize(F);return this.loadDependencies(A).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(A)),U))}convertOpList(A){const F=this._operatorIdMapping,U=A.argsArray,M=A.fnArray,x=[];for(let $=0,H=M.length;$<H;$++){const N=M[$];x.push({fnId:N,fn:F[N],args:U[$]})}return d(x)}executeOpTree(A){for(const F of A){const U=F.fn,M=F.fnId,x=F.args;switch(M|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(x);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(x[0],x[1]);break;case s.OPS.setFont:this.setFont(x);break;case s.OPS.showText:this.showText(x[0]);break;case s.OPS.showSpacedText:this.showText(x[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(x[0],x[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(x[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(x[0]);break;case s.OPS.setHScale:this.setHScale(x[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(x[0],x[1],x[2],x[3],x[4],x[5]);break;case s.OPS.setTextRise:this.setTextRise(x[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(x[0]);break;case s.OPS.setLineWidth:this.setLineWidth(x[0]);break;case s.OPS.setLineJoin:this.setLineJoin(x[0]);break;case s.OPS.setLineCap:this.setLineCap(x[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(x[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(x[0],x[1],x[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(x[0],x[1],x[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(x);break;case s.OPS.setFillColorN:this.setFillColorN(x);break;case s.OPS.shadingFill:this.shadingFill(x[0]);break;case s.OPS.setDash:this.setDash(x[0],x[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(x[0]);break;case s.OPS.setFlatness:this.setFlatness(x[0]);break;case s.OPS.setGState:this.setGState(x[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(x[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(x[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(x[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(x[0],x[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(x[0],x[1],x[2],x[3],x[4],x[5]);break;case s.OPS.constructPath:this.constructPath(x[0],x[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(F.items);break;default:(0,s.warn)(`Unimplemented operator ${U}`);break}}}setWordSpacing(A){this.current.wordSpacing=A}setCharSpacing(A){this.current.charSpacing=A}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(A,F,U,M,x,$){const H=this.current;H.textMatrix=H.lineMatrix=[A,F,U,M,x,$],H.textMatrixScale=Math.hypot(A,F),H.x=H.lineX=0,H.y=H.lineY=0,H.xcoords=[],H.ycoords=[],H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${S(H.fontSize)}px`),H.tspan.setAttributeNS(null,"y",S(-H.y)),H.txtElement=this.svgFactory.createElement("svg:text"),H.txtElement.append(H.tspan)}beginText(){const A=this.current;A.x=A.lineX=0,A.y=A.lineY=0,A.textMatrix=s.IDENTITY_MATRIX,A.lineMatrix=s.IDENTITY_MATRIX,A.textMatrixScale=1,A.tspan=this.svgFactory.createElement("svg:tspan"),A.txtElement=this.svgFactory.createElement("svg:text"),A.txtgrp=this.svgFactory.createElement("svg:g"),A.xcoords=[],A.ycoords=[]}moveText(A,F){const U=this.current;U.x=U.lineX+=A,U.y=U.lineY+=F,U.xcoords=[],U.ycoords=[],U.tspan=this.svgFactory.createElement("svg:tspan"),U.tspan.setAttributeNS(null,"font-family",U.fontFamily),U.tspan.setAttributeNS(null,"font-size",`${S(U.fontSize)}px`),U.tspan.setAttributeNS(null,"y",S(-U.y))}showText(A){const F=this.current,U=F.font,M=F.fontSize;if(M===0)return;const x=F.fontSizeScale,$=F.charSpacing,H=F.wordSpacing,N=F.fontDirection,X=F.textHScale*N,g=U.vertical,et=g?1:-1,ft=U.defaultVMetrics,at=M*F.fontMatrix[0];let st=0;for(const ut of A){if(ut===null){st+=N*H;continue}else if(typeof ut=="number"){st+=et*ut*M/1e3;continue}const Y=(ut.isSpace?H:0)+$,B=ut.fontChar;let y,v,C=ut.width;if(g){let D;const W=ut.vmetric||ft;D=ut.vmetric?W[1]:C*.5,D=-D*at;const Q=W[2]*at;C=W?-W[0]:C,y=D/x,v=(st+Q)/x}else y=st/x,v=0;(ut.isInFont||U.missingFile)&&(F.xcoords.push(F.x+y),g&&F.ycoords.push(-F.y+v),F.tspan.textContent+=B);const I=g?C*at-Y*N:C*at+Y*N;st+=I}F.tspan.setAttributeNS(null,"x",F.xcoords.map(S).join(" ")),g?F.tspan.setAttributeNS(null,"y",F.ycoords.map(S).join(" ")):F.tspan.setAttributeNS(null,"y",S(-F.y)),g?F.y-=st:F.x+=st*X,F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${S(F.fontSize)}px`),F.fontStyle!==r.fontStyle&&F.tspan.setAttributeNS(null,"font-style",F.fontStyle),F.fontWeight!==r.fontWeight&&F.tspan.setAttributeNS(null,"font-weight",F.fontWeight);const dt=F.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(dt===s.TextRenderingMode.FILL||dt===s.TextRenderingMode.FILL_STROKE?(F.fillColor!==r.fillColor&&F.tspan.setAttributeNS(null,"fill",F.fillColor),F.fillAlpha<1&&F.tspan.setAttributeNS(null,"fill-opacity",F.fillAlpha)):F.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?F.tspan.setAttributeNS(null,"fill","transparent"):F.tspan.setAttributeNS(null,"fill","none"),dt===s.TextRenderingMode.STROKE||dt===s.TextRenderingMode.FILL_STROKE){const ut=1/(F.textMatrixScale||1);this._setStrokeAttributes(F.tspan,ut)}let St=F.textMatrix;F.textRise!==0&&(St=St.slice(),St[5]+=F.textRise),F.txtElement.setAttributeNS(null,"transform",`${f(St)} scale(${S(X)}, -1)`),F.txtElement.setAttributeNS(a,"xml:space","preserve"),F.txtElement.append(F.tspan),F.txtgrp.append(F.txtElement),this._ensureTransformGroup().append(F.txtElement)}setLeadingMoveText(A,F){this.setLeading(-F),this.moveText(A,F)}addFontStyle(A){if(!A.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const F=l(A.data,A.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${A.loadedName}"; src: url(${F}); }
`}setFont(A){const F=this.current,U=this.commonObjs.get(A[0]);let M=A[1];F.font=U,this.embedFonts&&!U.missingFile&&!this.embeddedFonts[U.loadedName]&&(this.addFontStyle(U),this.embeddedFonts[U.loadedName]=U),F.fontMatrix=U.fontMatrix||s.FONT_IDENTITY_MATRIX;let x="normal";U.black?x="900":U.bold&&(x="bold");const $=U.italic?"italic":"normal";M<0?(M=-M,F.fontDirection=-1):F.fontDirection=1,F.fontSize=M,F.fontFamily=U.loadedName,F.fontWeight=x,F.fontStyle=$,F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"y",S(-F.y)),F.xcoords=[],F.ycoords=[]}endText(){var F;const A=this.current;A.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((F=A.txtElement)!=null&&F.hasChildNodes())&&(A.element=A.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(A){A>0&&(this.current.lineWidth=A)}setLineCap(A){this.current.lineCap=c[A]}setLineJoin(A){this.current.lineJoin=u[A]}setMiterLimit(A){this.current.miterLimit=A}setStrokeAlpha(A){this.current.strokeAlpha=A}setStrokeRGBColor(A,F,U){this.current.strokeColor=s.Util.makeHexColor(A,F,U)}setFillAlpha(A){this.current.fillAlpha=A}setFillRGBColor(A,F,U){this.current.fillColor=s.Util.makeHexColor(A,F,U),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(A){this.current.strokeColor=this._makeColorN_Pattern(A)}setFillColorN(A){this.current.fillColor=this._makeColorN_Pattern(A)}shadingFill(A){const{width:F,height:U}=this.viewport,M=s.Util.inverseTransform(this.transformMatrix),[x,$,H,N]=s.Util.getAxialAlignedBoundingBox([0,0,F,U],M),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",x),X.setAttributeNS(null,"y",$),X.setAttributeNS(null,"width",H-x),X.setAttributeNS(null,"height",N-$),X.setAttributeNS(null,"fill",this._makeShadingPattern(A)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(X)}_makeColorN_Pattern(A){return A[0]==="TilingPattern"?this._makeTilingPattern(A):this._makeShadingPattern(A)}_makeTilingPattern(A){const F=A[1],U=A[2],M=A[3]||s.IDENTITY_MATRIX,[x,$,H,N]=A[4],X=A[5],g=A[6],et=A[7],ft=`shading${k++}`,[at,st,dt,St]=s.Util.normalizeRect([...s.Util.applyTransform([x,$],M),...s.Util.applyTransform([H,N],M)]),[ut,Y]=s.Util.singularValueDecompose2dScale(M),B=X*ut,y=g*Y,v=this.svgFactory.createElement("svg:pattern");v.setAttributeNS(null,"id",ft),v.setAttributeNS(null,"patternUnits","userSpaceOnUse"),v.setAttributeNS(null,"width",B),v.setAttributeNS(null,"height",y),v.setAttributeNS(null,"x",`${at}`),v.setAttributeNS(null,"y",`${st}`);const C=this.svg,I=this.transformMatrix,D=this.current.fillColor,W=this.current.strokeColor,Q=this.svgFactory.create(dt-at,St-st);if(this.svg=Q,this.transformMatrix=M,et===2){const it=s.Util.makeHexColor(...F);this.current.fillColor=it,this.current.strokeColor=it}return this.executeOpTree(this.convertOpList(U)),this.svg=C,this.transformMatrix=I,this.current.fillColor=D,this.current.strokeColor=W,v.append(Q.childNodes[0]),this.defs.append(v),`url(#${ft})`}_makeShadingPattern(A){switch(typeof A=="string"&&(A=this.objs.get(A)),A[0]){case"RadialAxial":const F=`shading${k++}`,U=A[3];let M;switch(A[1]){case"axial":const x=A[4],$=A[5];M=this.svgFactory.createElement("svg:linearGradient"),M.setAttributeNS(null,"id",F),M.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),M.setAttributeNS(null,"x1",x[0]),M.setAttributeNS(null,"y1",x[1]),M.setAttributeNS(null,"x2",$[0]),M.setAttributeNS(null,"y2",$[1]);break;case"radial":const H=A[4],N=A[5],X=A[6],g=A[7];M=this.svgFactory.createElement("svg:radialGradient"),M.setAttributeNS(null,"id",F),M.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),M.setAttributeNS(null,"cx",N[0]),M.setAttributeNS(null,"cy",N[1]),M.setAttributeNS(null,"r",g),M.setAttributeNS(null,"fx",H[0]),M.setAttributeNS(null,"fy",H[1]),M.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${A[1]}`)}for(const x of U){const $=this.svgFactory.createElement("svg:stop");$.setAttributeNS(null,"offset",x[0]),$.setAttributeNS(null,"stop-color",x[1]),M.append($)}return this.defs.append(M),`url(#${F})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${A[0]}`)}}setDash(A,F){this.current.dashArray=A,this.current.dashPhase=F}constructPath(A,F){const U=this.current;let M=U.x,x=U.y,$=[],H=0;for(const N of A)switch(N|0){case s.OPS.rectangle:M=F[H++],x=F[H++];const X=F[H++],g=F[H++],et=M+X,ft=x+g;$.push("M",S(M),S(x),"L",S(et),S(x),"L",S(et),S(ft),"L",S(M),S(ft),"Z");break;case s.OPS.moveTo:M=F[H++],x=F[H++],$.push("M",S(M),S(x));break;case s.OPS.lineTo:M=F[H++],x=F[H++],$.push("L",S(M),S(x));break;case s.OPS.curveTo:M=F[H+4],x=F[H+5],$.push("C",S(F[H]),S(F[H+1]),S(F[H+2]),S(F[H+3]),S(M),S(x)),H+=6;break;case s.OPS.curveTo2:$.push("C",S(M),S(x),S(F[H]),S(F[H+1]),S(F[H+2]),S(F[H+3])),M=F[H+2],x=F[H+3],H+=4;break;case s.OPS.curveTo3:M=F[H+2],x=F[H+3],$.push("C",S(F[H]),S(F[H+1]),S(M),S(x),S(M),S(x)),H+=4;break;case s.OPS.closePath:$.push("Z");break}$=$.join(" "),U.path&&A.length>0&&A[0]!==s.OPS.rectangle&&A[0]!==s.OPS.moveTo?$=U.path.getAttributeNS(null,"d")+$:(U.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(U.path)),U.path.setAttributeNS(null,"d",$),U.path.setAttributeNS(null,"fill","none"),U.element=U.path,U.setCurrentPoint(M,x)}endPath(){const A=this.current;if(A.path=null,!this.pendingClip)return;if(!A.element){this.pendingClip=null;return}const F=`clippath${b++}`,U=this.svgFactory.createElement("svg:clipPath");U.setAttributeNS(null,"id",F),U.setAttributeNS(null,"transform",f(this.transformMatrix));const M=A.element.cloneNode(!0);if(this.pendingClip==="evenodd"?M.setAttributeNS(null,"clip-rule","evenodd"):M.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,U.append(M),this.defs.append(U),A.activeClipUrl){A.clipGroup=null;for(const x of this.extraStack)x.clipGroup=null;U.setAttributeNS(null,"clip-path",A.activeClipUrl)}A.activeClipUrl=`url(#${F})`,this.tgrp=null}clip(A){this.pendingClip=A}closePath(){const A=this.current;if(A.path){const F=`${A.path.getAttributeNS(null,"d")}Z`;A.path.setAttributeNS(null,"d",F)}}setLeading(A){this.current.leading=-A}setTextRise(A){this.current.textRise=A}setTextRenderingMode(A){this.current.textRenderingMode=A}setHScale(A){this.current.textHScale=A/100}setRenderingIntent(A){}setFlatness(A){}setGState(A){for(const[F,U]of A)switch(F){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U);break;case"CA":this.setStrokeAlpha(U);break;case"ca":this.setFillAlpha(U);break;default:(0,s.warn)(`Unimplemented graphic state operator ${F}`);break}}fill(){const A=this.current;A.element&&(A.element.setAttributeNS(null,"fill",A.fillColor),A.element.setAttributeNS(null,"fill-opacity",A.fillAlpha),this.endPath())}stroke(){const A=this.current;A.element&&(this._setStrokeAttributes(A.element),A.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(A,F=1){const U=this.current;let M=U.dashArray;F!==1&&M.length>0&&(M=M.map(function(x){return F*x})),A.setAttributeNS(null,"stroke",U.strokeColor),A.setAttributeNS(null,"stroke-opacity",U.strokeAlpha),A.setAttributeNS(null,"stroke-miterlimit",S(U.miterLimit)),A.setAttributeNS(null,"stroke-linecap",U.lineCap),A.setAttributeNS(null,"stroke-linejoin",U.lineJoin),A.setAttributeNS(null,"stroke-width",S(F*U.lineWidth)+"px"),A.setAttributeNS(null,"stroke-dasharray",M.map(S).join(" ")),A.setAttributeNS(null,"stroke-dashoffset",S(F*U.dashPhase)+"px")}eoFill(){var A;(A=this.current.element)==null||A.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var A;(A=this.current.element)==null||A.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y","0"),A.setAttributeNS(null,"width","1px"),A.setAttributeNS(null,"height","1px"),A.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(A)}paintImageXObject(A){const F=this.getObject(A);if(!F){(0,s.warn)(`Dependent image with object ID ${A} is not ready yet`);return}this.paintInlineImageXObject(F)}paintInlineImageXObject(A,F){const U=A.width,M=A.height,x=_(A,this.forceDataSchema,!!F),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",S(U)),$.setAttributeNS(null,"height",S(M)),this.current.element=$,this.clip("nonzero");const H=this.svgFactory.createElement("svg:image");H.setAttributeNS(h,"xlink:href",x),H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y",S(-M)),H.setAttributeNS(null,"width",S(U)+"px"),H.setAttributeNS(null,"height",S(M)+"px"),H.setAttributeNS(null,"transform",`scale(${S(1/U)} ${S(-1/M)})`),F?F.append(H):this._ensureTransformGroup().append(H)}paintImageMaskXObject(A){const F=this.getObject(A.data,A);if(F.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const U=this.current,M=F.width,x=F.height,$=U.fillColor;U.maskId=`mask${m++}`;const H=this.svgFactory.createElement("svg:mask");H.setAttributeNS(null,"id",U.maskId);const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",S(M)),N.setAttributeNS(null,"height",S(x)),N.setAttributeNS(null,"fill",$),N.setAttributeNS(null,"mask",`url(#${U.maskId})`),this.defs.append(H),this._ensureTransformGroup().append(N),this.paintInlineImageXObject(F,H)}paintFormXObjectBegin(A,F){if(Array.isArray(A)&&A.length===6&&this.transform(A[0],A[1],A[2],A[3],A[4],A[5]),F){const U=F[2]-F[0],M=F[3]-F[1],x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x",F[0]),x.setAttributeNS(null,"y",F[1]),x.setAttributeNS(null,"width",S(U)),x.setAttributeNS(null,"height",S(M)),this.current.element=x,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(A){const F=this.svgFactory.create(A.width,A.height),U=this.svgFactory.createElement("svg:defs");F.append(U),this.defs=U;const M=this.svgFactory.createElement("svg:g");return M.setAttributeNS(null,"transform",f(A.transform)),F.append(M),this.svg=M,F}_ensureClipGroup(){if(!this.current.clipGroup){const A=this.svgFactory.createElement("svg:g");A.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(A),this.current.clipGroup=A}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=P},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(s){const r=[],a={items:r,styles:Object.create(null)};function h(c){var _;if(!c)return;let u=null;const l=c.name;if(l==="#text")u=c.value;else if(n.shouldBuildText(l))(_=c==null?void 0:c.attributes)!=null&&_.textContent?u=c.attributes.textContent:c.value&&(u=c.value);else return;if(u!==null&&r.push({str:u}),!!c.children)for(const w of c.children)h(w)}return h(s),a}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=f,e.updateTextLayer=b;var i=n(1),s=n(6);const r=1e5,a=30,h=.8,c=new Map;function u(m,k){let P;if(k&&i.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(m,m).getContext("2d",{alpha:!1});else{const R=document.createElement("canvas");R.width=R.height=m,P=R.getContext("2d",{alpha:!1})}return P}function l(m,k){const P=c.get(m);if(P)return P;const R=u(a,k);R.font=`${a}px ${m}`;const A=R.measureText("");let F=A.fontBoundingBoxAscent,U=Math.abs(A.fontBoundingBoxDescent);if(F){const x=F/(F+U);return c.set(m,x),R.canvas.width=R.canvas.height=0,x}R.strokeStyle="red",R.clearRect(0,0,a,a),R.strokeText("g",0,0);let M=R.getImageData(0,0,a,a).data;U=0;for(let x=M.length-1-3;x>=0;x-=4)if(M[x]>0){U=Math.ceil(x/4/a);break}R.clearRect(0,0,a,a),R.strokeText("A",0,a),M=R.getImageData(0,0,a,a).data,F=0;for(let x=0,$=M.length;x<$;x+=4)if(M[x]>0){F=a-Math.floor(x/4/a);break}if(R.canvas.width=R.canvas.height=0,F){const x=F/(F+U);return c.set(m,x),x}return c.set(m,h),h}function _(m,k,P){const R=document.createElement("span"),A={angle:0,canvasWidth:0,hasText:k.str!=="",hasEOL:k.hasEOL,fontSize:0};m._textDivs.push(R);const F=i.Util.transform(m._transform,k.transform);let U=Math.atan2(F[1],F[0]);const M=P[k.fontName];M.vertical&&(U+=Math.PI/2);const x=Math.hypot(F[2],F[3]),$=x*l(M.fontFamily,m._isOffscreenCanvasSupported);let H,N;U===0?(H=F[4],N=F[5]-$):(H=F[4]+$*Math.sin(U),N=F[5]-$*Math.cos(U));const X="calc(var(--scale-factor)*",g=R.style;m._container===m._rootContainer?(g.left=`${(100*H/m._pageWidth).toFixed(2)}%`,g.top=`${(100*N/m._pageHeight).toFixed(2)}%`):(g.left=`${X}${H.toFixed(2)}px)`,g.top=`${X}${N.toFixed(2)}px)`),g.fontSize=`${X}${x.toFixed(2)}px)`,g.fontFamily=M.fontFamily,A.fontSize=x,R.setAttribute("role","presentation"),R.textContent=k.str,R.dir=k.dir,m._fontInspectorEnabled&&(R.dataset.fontName=k.fontName),U!==0&&(A.angle=U*(180/Math.PI));let et=!1;if(k.str.length>1)et=!0;else if(k.str!==" "&&k.transform[0]!==k.transform[3]){const ft=Math.abs(k.transform[0]),at=Math.abs(k.transform[3]);ft!==at&&Math.max(ft,at)/Math.min(ft,at)>1.5&&(et=!0)}et&&(A.canvasWidth=M.vertical?k.height:k.width),m._textDivProperties.set(R,A),m._isReadableStream&&m._layoutText(R)}function w(m){const{div:k,scale:P,properties:R,ctx:A,prevFontSize:F,prevFontFamily:U}=m,{style:M}=k;let x="";if(R.canvasWidth!==0&&R.hasText){const{fontFamily:$}=M,{canvasWidth:H,fontSize:N}=R;(F!==N||U!==$)&&(A.font=`${N*P}px ${$}`,m.prevFontSize=N,m.prevFontFamily=$);const{width:X}=A.measureText(k.textContent);X>0&&(x=`scaleX(${H*P/X})`)}R.angle!==0&&(x=`rotate(${R.angle}deg) ${x}`),x.length>0&&(M.transform=x)}function d(m){if(m._canceled)return;const k=m._textDivs,P=m._capability;if(k.length>r){P.resolve();return}if(!m._isReadableStream)for(const A of k)m._layoutText(A);P.resolve()}class S{constructor({textContentSource:k,container:P,viewport:R,textDivs:A,textDivProperties:F,textContentItemsStr:U,isOffscreenCanvasSupported:M}){var X;this._textContentSource=k,this._isReadableStream=k instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=A||[],this._textContentItemsStr=U||[],this._isOffscreenCanvasSupported=M,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=F||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,M)};const{pageWidth:x,pageHeight:$,pageX:H,pageY:N}=R.rawDims;this._transform=[1,0,0,-1,-H,N+$],this._pageWidth=x,this._pageHeight=$,(0,s.setLayerDimensions)(P,R),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(k,P){for(const R of k){if(R.str===void 0){if(R.type==="beginMarkedContentProps"||R.type==="beginMarkedContent"){const A=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R.id!==null&&this._container.setAttribute("id",`${R.id}`),A.append(this._container)}else R.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R.str),_(this,R,P)}}_layoutText(k){const P=this._layoutTextParams.properties=this._textDivProperties.get(k);if(this._layoutTextParams.div=k,w(this._layoutTextParams),P.hasText&&this._container.append(k),P.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),this._container.append(R)}}_render(){const k=new i.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const R=()=>{this._reader.read().then(({value:A,done:F})=>{if(F){k.resolve();return}Object.assign(P,A.styles),this._processItems(A.items,P),R()},k.reject)};this._reader=this._textContentSource.getReader(),R()}else if(this._textContentSource){const{items:R,styles:A}=this._textContentSource;this._processItems(R,A),k.resolve()}else throw new Error('No "textContentSource" parameter specified.');k.promise.then(()=>{P=null,d(this)},this._capability.reject)}}e.TextLayerRenderTask=S;function f(m){!m.textContentSource&&(m.textContent||m.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),m.textContentSource=m.textContent||m.textContentStream);const{container:k,viewport:P}=m,R=getComputedStyle(k),A=R.getPropertyValue("visibility"),F=parseFloat(R.getPropertyValue("--scale-factor"));A==="visible"&&(!F||Math.abs(F-P.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const U=new S(m);return U._render(),U}function b({container:m,viewport:k,textDivs:P,textDivProperties:R,isOffscreenCanvasSupported:A,mustRotate:F=!0,mustRescale:U=!0}){if(F&&(0,s.setLayerDimensions)(m,{rotation:k.rotation}),U){const M=u(0,A),$={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:M};for(const H of P)$.properties=R.get(H),$.div=H,w($)}}},(t,e,n)=>{var l,_,w,d,S,f,b,m,k,P,R,sn,F,Fe,M,rn,$,an;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=n(1),s=n(4),r=n(28),a=n(33),h=n(6),c=n(34);const N=class N{constructor({uiManager:g,pageIndex:et,div:ft,accessibilityManager:at,annotationLayer:st,viewport:dt,l10n:St}){ht(this,R);ht(this,F);ht(this,M);ht(this,$);ht(this,l,void 0);ht(this,_,!1);ht(this,w,null);ht(this,d,this.pointerup.bind(this));ht(this,S,this.pointerdown.bind(this));ht(this,f,new Map);ht(this,b,!1);ht(this,m,!1);ht(this,k,!1);ht(this,P,void 0);const ut=[r.FreeTextEditor,a.InkEditor,c.StampEditor];if(!N._initialized){N._initialized=!0;for(const Y of ut)Y.initialize(St)}g.registerEditorTypes(ut),wt(this,P,g),this.pageIndex=et,this.div=ft,wt(this,l,at),wt(this,w,st),this.viewport=dt,E(this,P).addLayer(this)}get isEmpty(){return E(this,f).size===0}updateToolbar(g){E(this,P).updateToolbar(g)}updateMode(g=E(this,P).getMode()){bt(this,$,an).call(this),g===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),g!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",g===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",g===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",g===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(g){if(!g&&E(this,P).getMode()!==i.AnnotationEditorType.INK)return;if(!g){for(const ft of E(this,f).values())if(ft.isEmpty()){ft.setInBackground();return}}bt(this,F,Fe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(g){E(this,P).setEditingState(g)}addCommands(g){E(this,P).addCommands(g)}enable(){this.div.style.pointerEvents="auto";const g=new Set;for(const ft of E(this,f).values())ft.enableEditing(),ft.annotationElementId&&g.add(ft.annotationElementId);if(!E(this,w))return;const et=E(this,w).getEditableAnnotations();for(const ft of et){if(ft.hide(),E(this,P).isDeletedAnnotationElement(ft.data.id)||g.has(ft.data.id))continue;const at=this.deserialize(ft);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var et;wt(this,k,!0),this.div.style.pointerEvents="none";const g=new Set;for(const ft of E(this,f).values()){if(ft.disableEditing(),!ft.annotationElementId||ft.serialize()!==null){g.add(ft.annotationElementId);continue}(et=this.getEditableAnnotation(ft.annotationElementId))==null||et.show(),ft.remove()}if(E(this,w)){const ft=E(this,w).getEditableAnnotations();for(const at of ft){const{id:st}=at.data;g.has(st)||E(this,P).isDeletedAnnotationElement(st)||at.show()}}bt(this,$,an).call(this),this.isEmpty&&(this.div.hidden=!0),wt(this,k,!1)}getEditableAnnotation(g){var et;return((et=E(this,w))==null?void 0:et.getEditableAnnotation(g))||null}setActiveEditor(g){E(this,P).getActive()!==g&&E(this,P).setActiveEditor(g)}enableClick(){this.div.addEventListener("pointerdown",E(this,S)),this.div.addEventListener("pointerup",E(this,d))}disableClick(){this.div.removeEventListener("pointerdown",E(this,S)),this.div.removeEventListener("pointerup",E(this,d))}attach(g){E(this,f).set(g.id,g);const{annotationElementId:et}=g;et&&E(this,P).isDeletedAnnotationElement(et)&&E(this,P).removeDeletedAnnotationElement(g)}detach(g){var et;E(this,f).delete(g.id),(et=E(this,l))==null||et.removePointerInTextLayer(g.contentDiv),!E(this,k)&&g.annotationElementId&&E(this,P).addDeletedAnnotationElement(g)}remove(g){this.detach(g),E(this,P).removeEditor(g),g.div.contains(document.activeElement)&&setTimeout(()=>{E(this,P).focusMainContainer()},0),g.div.remove(),g.isAttachedToDOM=!1,E(this,m)||this.addInkEditorIfNeeded(!1)}changeParent(g){var et;g.parent!==this&&(g.annotationElementId&&(E(this,P).addDeletedAnnotationElement(g.annotationElementId),s.AnnotationEditor.deleteAnnotationElement(g),g.annotationElementId=null),this.attach(g),(et=g.parent)==null||et.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))}add(g){if(this.changeParent(g),E(this,P).addEditor(g),this.attach(g),!g.isAttachedToDOM){const et=g.render();this.div.append(et),g.isAttachedToDOM=!0}g.fixAndSetPosition(),g.onceAdded(),E(this,P).addToAnnotationStorage(g)}moveEditorInDOM(g){var ft;if(!g.isAttachedToDOM)return;const{activeElement:et}=document;g.div.contains(et)&&(g._focusEventsAllowed=!1,setTimeout(()=>{g.div.contains(document.activeElement)?g._focusEventsAllowed=!0:(g.div.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0}),et.focus())},0)),g._structTreeParentId=(ft=E(this,l))==null?void 0:ft.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?g.rebuild():this.add(g)}addUndoableEditor(g){const et=()=>g._uiManager.rebuild(g),ft=()=>{g.remove()};this.addCommands({cmd:et,undo:ft,mustExec:!1})}getNextId(){return E(this,P).getId()}pasteEditor(g,et){E(this,P).updateToolbar(g),E(this,P).updateMode(g);const{offsetX:ft,offsetY:at}=bt(this,M,rn).call(this),st=this.getNextId(),dt=bt(this,R,sn).call(this,{parent:this,id:st,x:ft,y:at,uiManager:E(this,P),isCentered:!0,...et});dt&&this.add(dt)}deserialize(g){switch(g.annotationType??g.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize(g,this,E(this,P));case i.AnnotationEditorType.INK:return a.InkEditor.deserialize(g,this,E(this,P));case i.AnnotationEditorType.STAMP:return c.StampEditor.deserialize(g,this,E(this,P))}return null}addNewEditor(){bt(this,F,Fe).call(this,bt(this,M,rn).call(this),!0)}setSelected(g){E(this,P).setSelected(g)}toggleSelected(g){E(this,P).toggleSelected(g)}isSelected(g){return E(this,P).isSelected(g)}unselect(g){E(this,P).unselect(g)}pointerup(g){const{isMac:et}=i.FeatureTest.platform;if(!(g.button!==0||g.ctrlKey&&et)&&g.target===this.div&&E(this,b)){if(wt(this,b,!1),!E(this,_)){wt(this,_,!0);return}if(E(this,P).getMode()===i.AnnotationEditorType.STAMP){E(this,P).unselectAll();return}bt(this,F,Fe).call(this,g,!1)}}pointerdown(g){if(E(this,b)){wt(this,b,!1);return}const{isMac:et}=i.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div)return;wt(this,b,!0);const ft=E(this,P).getActive();wt(this,_,!ft||ft.isEmpty())}findNewParent(g,et,ft){const at=E(this,P).findParent(et,ft);return at===null||at===this?!1:(at.changeParent(g),!0)}destroy(){var g,et;((g=E(this,P).getActive())==null?void 0:g.parent)===this&&(E(this,P).commitOrRemove(),E(this,P).setActiveEditor(null));for(const ft of E(this,f).values())(et=E(this,l))==null||et.removePointerInTextLayer(ft.contentDiv),ft.setParent(null),ft.isAttachedToDOM=!1,ft.div.remove();this.div=null,E(this,f).clear(),E(this,P).removeLayer(this)}render({viewport:g}){this.viewport=g,(0,h.setLayerDimensions)(this.div,g);for(const et of E(this,P).getEditors(this.pageIndex))this.add(et);this.updateMode()}update({viewport:g}){E(this,P).commitOrRemove(),this.viewport=g,(0,h.setLayerDimensions)(this.div,{rotation:g.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:g,pageHeight:et}=this.viewport.rawDims;return[g,et]}};l=new WeakMap,_=new WeakMap,w=new WeakMap,d=new WeakMap,S=new WeakMap,f=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,P=new WeakMap,R=new WeakSet,sn=function(g){switch(E(this,P).getMode()){case i.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor(g);case i.AnnotationEditorType.INK:return new a.InkEditor(g);case i.AnnotationEditorType.STAMP:return new c.StampEditor(g)}return null},F=new WeakSet,Fe=function(g,et){const ft=this.getNextId(),at=bt(this,R,sn).call(this,{parent:this,id:ft,x:g.offsetX,y:g.offsetY,uiManager:E(this,P),isCentered:et});return at&&this.add(at),at},M=new WeakSet,rn=function(){const{x:g,y:et,width:ft,height:at}=this.div.getBoundingClientRect(),st=Math.max(0,g),dt=Math.max(0,et),St=Math.min(window.innerWidth,g+ft),ut=Math.min(window.innerHeight,et+at),Y=(st+St)/2-g,B=(dt+ut)/2-et,[y,v]=this.viewport.rotation%180===0?[Y,B]:[B,Y];return{offsetX:y,offsetY:v}},$=new WeakSet,an=function(){wt(this,m,!0);for(const g of E(this,f).values())g.isEmpty()&&g.remove();wt(this,m,!1)},ie(N,"_initialized",!1);let u=N;e.AnnotationEditorLayer=u},(t,e,n)=>{var c,u,l,_,w,d,S,f,b,m,In,P,Mn,A,Dn,U,we,x,on,H,Ln,X,ln;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=n(1),s=n(5),r=n(4),a=n(29);const et=class et extends r.AnnotationEditor{constructor(st){super({...st,name:"freeTextEditor"});ht(this,m);ht(this,P);ht(this,A);ht(this,U);ht(this,x);ht(this,H);ht(this,X);ht(this,c,this.editorDivBlur.bind(this));ht(this,u,this.editorDivFocus.bind(this));ht(this,l,this.editorDivInput.bind(this));ht(this,_,this.editorDivKeydown.bind(this));ht(this,w,void 0);ht(this,d,"");ht(this,S,`${this.id}-editor`);ht(this,f,void 0);ht(this,b,null);wt(this,w,st.color||et._defaultColor||r.AnnotationEditor._defaultLineColor),wt(this,f,st.fontSize||et._defaultFontSize)}static get _keyboardManager(){const st=et.prototype,dt=Y=>Y.isEmpty(),St=s.AnnotationEditorUIManager.TRANSLATE_SMALL,ut=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],st.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],st.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],st._translateEmpty,{args:[-St,0],checker:dt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],st._translateEmpty,{args:[-ut,0],checker:dt}],[["ArrowRight","mac+ArrowRight"],st._translateEmpty,{args:[St,0],checker:dt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],st._translateEmpty,{args:[ut,0],checker:dt}],[["ArrowUp","mac+ArrowUp"],st._translateEmpty,{args:[0,-St],checker:dt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],st._translateEmpty,{args:[0,-ut],checker:dt}],[["ArrowDown","mac+ArrowDown"],st._translateEmpty,{args:[0,St],checker:dt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],st._translateEmpty,{args:[0,ut],checker:dt}]]))}static initialize(st){r.AnnotationEditor.initialize(st,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const dt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(dt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(st,dt){switch(st){case i.AnnotationEditorParamsType.FREETEXT_SIZE:et._defaultFontSize=dt;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:et._defaultColor=dt;break}}updateParams(st,dt){switch(st){case i.AnnotationEditorParamsType.FREETEXT_SIZE:bt(this,m,In).call(this,dt);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:bt(this,P,Mn).call(this,dt);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,et._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,et._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,E(this,f)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,E(this,w)]]}_translateEmpty(st,dt){this._uiManager.translateSelectedEditors(st,dt,!0)}getInitialTranslation(){const st=this.parentScale;return[-et._internalPadding*st,-(et._internalPadding+E(this,f))*st]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",E(this,_)),this.editorDiv.addEventListener("focus",E(this,u)),this.editorDiv.addEventListener("blur",E(this,c)),this.editorDiv.addEventListener("input",E(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",E(this,S)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",E(this,_)),this.editorDiv.removeEventListener("focus",E(this,u)),this.editorDiv.removeEventListener("blur",E(this,c)),this.editorDiv.removeEventListener("input",E(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(st){this._focusEventsAllowed&&(super.focusin(st),st.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var st;if(this.width){bt(this,X,ln).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(st=this._initialOptions)!=null&&st.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const st=E(this,d),dt=wt(this,d,bt(this,A,Dn).call(this).trimEnd());if(st===dt)return;const St=ut=>{if(wt(this,d,ut),!ut){this.remove();return}bt(this,x,on).call(this),this._uiManager.rebuild(this),bt(this,U,we).call(this)};this.addCommands({cmd:()=>{St(dt)},undo:()=>{St(st)},mustExec:!1}),bt(this,U,we).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(st){this.enterInEditMode()}keydown(st){st.target===this.div&&st.key==="Enter"&&(this.enterInEditMode(),st.preventDefault())}editorDivKeydown(st){et._keyboardManager.exec(this,st)}editorDivFocus(st){this.isEditing=!0}editorDivBlur(st){this.isEditing=!1}editorDivInput(st){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let st,dt;this.width&&(st=this.x,dt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",E(this,S)),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ut=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("aria-label",ut)}),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ut=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("default-content",ut)}),this.editorDiv.contentEditable=!0;const{style:St}=this.editorDiv;if(St.fontSize=`calc(${E(this,f)}px * var(--scale-factor))`,St.color=E(this,w),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ut,Y]=this.parentDimensions;if(this.annotationElementId){const{position:B}=E(this,b);let[y,v]=this.getInitialTranslation();[y,v]=this.pageTranslationToScreen(y,v);const[C,I]=this.pageDimensions,[D,W]=this.pageTranslation;let Q,it;switch(this.rotation){case 0:Q=st+(B[0]-D)/C,it=dt+this.height-(B[1]-W)/I;break;case 90:Q=st+(B[0]-D)/C,it=dt-(B[1]-W)/I,[y,v]=[v,-y];break;case 180:Q=st-this.width+(B[0]-D)/C,it=dt-(B[1]-W)/I,[y,v]=[-y,-v];break;case 270:Q=st+(B[0]-D-this.height*I)/C,it=dt+(B[1]-W-this.width*C)/I,[y,v]=[-v,y];break}this.setAt(Q*ut,it*Y,y,v)}else this.setAt(st*ut,dt*Y,this.width*ut,this.height*Y);bt(this,x,on).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(st,dt,St){let ut=null;if(st instanceof a.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:B,fontColor:y},rect:v,rotation:C,id:I},textContent:D,textPosition:W,parent:{page:{pageNumber:Q}}}=st;if(!D||D.length===0)return null;ut=st={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(y),fontSize:B,value:D.join(`
`),position:W,pageIndex:Q-1,rect:v,rotation:C,id:I,deleted:!1}}const Y=super.deserialize(st,dt,St);return wt(Y,f,st.fontSize),wt(Y,w,i.Util.makeHexColor(...st.color)),wt(Y,d,st.value),Y.annotationElementId=st.id||null,wt(Y,b,ut),Y}serialize(st=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const dt=et._internalPadding*this.parentScale,St=this.getRect(dt,dt),ut=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:E(this,w)),Y={annotationType:i.AnnotationEditorType.FREETEXT,color:ut,fontSize:E(this,f),value:E(this,d),pageIndex:this.pageIndex,rect:St,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return st?Y:this.annotationElementId&&!bt(this,H,Ln).call(this,Y)?null:(Y.id=this.annotationElementId,Y)}};c=new WeakMap,u=new WeakMap,l=new WeakMap,_=new WeakMap,w=new WeakMap,d=new WeakMap,S=new WeakMap,f=new WeakMap,b=new WeakMap,m=new WeakSet,In=function(st){const dt=ut=>{this.editorDiv.style.fontSize=`calc(${ut}px * var(--scale-factor))`,this.translate(0,-(ut-E(this,f))*this.parentScale),wt(this,f,ut),bt(this,U,we).call(this)},St=E(this,f);this.addCommands({cmd:()=>{dt(st)},undo:()=>{dt(St)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Mn=function(st){const dt=E(this,w);this.addCommands({cmd:()=>{wt(this,w,this.editorDiv.style.color=st)},undo:()=>{wt(this,w,this.editorDiv.style.color=dt)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A=new WeakSet,Dn=function(){const st=this.editorDiv.getElementsByTagName("div");if(st.length===0)return this.editorDiv.innerText;const dt=[];for(const St of st)dt.push(St.innerText.replace(/\r\n?|\n/,""));return dt.join(`
`)},U=new WeakSet,we=function(){const[st,dt]=this.parentDimensions;let St;if(this.isAttachedToDOM)St=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:Y}=this,B=Y.style.display;Y.style.display="hidden",ut.div.append(this.div),St=Y.getBoundingClientRect(),Y.remove(),Y.style.display=B}this.rotation%180===this.parentRotation%180?(this.width=St.width/st,this.height=St.height/dt):(this.width=St.height/st,this.height=St.width/dt),this.fixAndSetPosition()},x=new WeakSet,on=function(){if(this.editorDiv.replaceChildren(),!!E(this,d))for(const st of E(this,d).split(`
`)){const dt=document.createElement("div");dt.append(st?document.createTextNode(st):document.createElement("br")),this.editorDiv.append(dt)}},H=new WeakSet,Ln=function(st){const{value:dt,fontSize:St,color:ut,rect:Y,pageIndex:B}=E(this,b);return st.value!==dt||st.fontSize!==St||st.rect.some((y,v)=>Math.abs(y-Y[v])>=1)||st.color.some((y,v)=>y!==ut[v])||st.pageIndex!==B},X=new WeakSet,ln=function(st=!1){if(!this.annotationElementId)return;if(bt(this,U,we).call(this),!st&&(this.width===0||this.height===0)){setTimeout(()=>bt(this,X,ln).call(this,!0),0);return}const dt=et._internalPadding*this.parentScale;E(this,b).rect=this.getRect(dt,dt)},ie(et,"_freeTextDefaultContent",""),ie(et,"_internalPadding",0),ie(et,"_defaultColor",null),ie(et,"_defaultFontSize",10),ie(et,"_type","freetext");let h=et;e.FreeTextEditor=h},(t,e,n)=>{var v,I,ue,W,Nn,it,pt,j,o,z,G,O,L,K,nt,ct,V,J,Z,rt,vt,Ct,Tt,Bn,zt,Oe,Vt,cn,Xt,hn,_t,gt,kt,Rt,ne,te,At,un,Ht,Mt,Wt,Gt,jn,Ft,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var i=n(1),s=n(6),r=n(3),a=n(30),h=n(31),c=n(32);const u=1e3,l=9,_=new WeakSet;function w($t){return{width:$t[2]-$t[0],height:$t[3]-$t[1]}}class d{static create(ot){switch(ot.data.annotationType){case i.AnnotationType.LINK:return new f(ot);case i.AnnotationType.TEXT:return new b(ot);case i.AnnotationType.WIDGET:switch(ot.data.fieldType){case"Tx":return new k(ot);case"Btn":return ot.data.radioButton?new A(ot):ot.data.checkBox?new R(ot):new F(ot);case"Ch":return new U(ot);case"Sig":return new P(ot)}return new m(ot);case i.AnnotationType.POPUP:return new M(ot);case i.AnnotationType.FREETEXT:return new $(ot);case i.AnnotationType.LINE:return new H(ot);case i.AnnotationType.SQUARE:return new N(ot);case i.AnnotationType.CIRCLE:return new X(ot);case i.AnnotationType.POLYLINE:return new g(ot);case i.AnnotationType.CARET:return new ft(ot);case i.AnnotationType.INK:return new at(ot);case i.AnnotationType.POLYGON:return new et(ot);case i.AnnotationType.HIGHLIGHT:return new st(ot);case i.AnnotationType.UNDERLINE:return new dt(ot);case i.AnnotationType.SQUIGGLY:return new St(ot);case i.AnnotationType.STRIKEOUT:return new ut(ot);case i.AnnotationType.STAMP:return new Y(ot);case i.AnnotationType.FILEATTACHMENT:return new B(ot);default:return new S(ot)}}}const C=class C{constructor(ot,{isRenderable:T=!1,ignoreBorder:q=!1,createQuadrilaterals:lt=!1}={}){ht(this,v,!1);this.isRenderable=T,this.data=ot.data,this.layer=ot.layer,this.linkService=ot.linkService,this.downloadManager=ot.downloadManager,this.imageResourcesPath=ot.imageResourcesPath,this.renderForms=ot.renderForms,this.svgFactory=ot.svgFactory,this.annotationStorage=ot.annotationStorage,this.enableScripting=ot.enableScripting,this.hasJSActions=ot.hasJSActions,this._fieldObjects=ot.fieldObjects,this.parent=ot.parent,T&&(this.container=this._createContainer(q)),lt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:ot,contentsObj:T,richText:q}){return!!(ot!=null&&ot.str||T!=null&&T.str||q!=null&&q.str)}get hasPopupData(){return C._hasPopupData(this.data)}_createContainer(ot){const{data:T,parent:{page:q,viewport:lt}}=this,mt=document.createElement("section");mt.setAttribute("data-annotation-id",T.id),this instanceof m||(mt.tabIndex=u),mt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&mt.setAttribute("aria-haspopup","dialog"),T.noRotate&&mt.classList.add("norotate");const{pageWidth:yt,pageHeight:Et,pageX:Pt,pageY:Lt}=lt.rawDims;if(!T.rect||this instanceof M){const{rotation:qt}=T;return!T.hasOwnCanvas&&qt!==0&&this.setRotation(qt,mt),mt}const{width:Dt,height:Yt}=w(T.rect),Bt=i.Util.normalizeRect([T.rect[0],q.view[3]-T.rect[1]+q.view[1],T.rect[2],q.view[3]-T.rect[3]+q.view[1]]);if(!ot&&T.borderStyle.width>0){mt.style.borderWidth=`${T.borderStyle.width}px`;const qt=T.borderStyle.horizontalCornerRadius,Kt=T.borderStyle.verticalCornerRadius;if(qt>0||Kt>0){const ee=`calc(${qt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;mt.style.borderRadius=ee}else if(this instanceof A){const ee=`calc(${Dt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;mt.style.borderRadius=ee}switch(T.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:mt.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:mt.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:mt.style.borderBottomStyle="solid";break}const Zt=T.borderColor||null;Zt?(wt(this,v,!0),mt.style.borderColor=i.Util.makeHexColor(Zt[0]|0,Zt[1]|0,Zt[2]|0)):mt.style.borderWidth=0}mt.style.left=`${100*(Bt[0]-Pt)/yt}%`,mt.style.top=`${100*(Bt[1]-Lt)/Et}%`;const{rotation:jt}=T;return T.hasOwnCanvas||jt===0?(mt.style.width=`${100*Dt/yt}%`,mt.style.height=`${100*Yt/Et}%`):this.setRotation(jt,mt),mt}setRotation(ot,T=this.container){if(!this.data.rect)return;const{pageWidth:q,pageHeight:lt}=this.parent.viewport.rawDims,{width:mt,height:yt}=w(this.data.rect);let Et,Pt;ot%180===0?(Et=100*mt/q,Pt=100*yt/lt):(Et=100*yt/q,Pt=100*mt/lt),T.style.width=`${Et}%`,T.style.height=`${Pt}%`,T.setAttribute("data-main-rotation",(360-ot)%360)}get _commonActions(){const ot=(T,q,lt)=>{const mt=lt.detail[T],yt=mt[0],Et=mt.slice(1);lt.target.style[q]=a.ColorConverters[`${yt}_HTML`](Et),this.annotationStorage.setValue(this.data.id,{[q]:a.ColorConverters[`${yt}_rgb`](Et)})};return(0,i.shadow)(this,"_commonActions",{display:T=>{const{display:q}=T.detail,lt=q%2===1;this.container.style.visibility=lt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:lt,noPrint:q===1||q===2})},print:T=>{this.annotationStorage.setValue(this.data.id,{noPrint:!T.detail.print})},hidden:T=>{const{hidden:q}=T.detail;this.container.style.visibility=q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:q,noView:q})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.target.disabled=T.detail.readonly},required:T=>{this._setRequired(T.target,T.detail.required)},bgColor:T=>{ot("bgColor","backgroundColor",T)},fillColor:T=>{ot("fillColor","backgroundColor",T)},fgColor:T=>{ot("fgColor","color",T)},textColor:T=>{ot("textColor","color",T)},borderColor:T=>{ot("borderColor","borderColor",T)},strokeColor:T=>{ot("strokeColor","borderColor",T)},rotation:T=>{const q=T.detail.rotation;this.setRotation(q),this.annotationStorage.setValue(this.data.id,{rotation:q})}})}_dispatchEventFromSandbox(ot,T){const q=this._commonActions;for(const lt of Object.keys(T.detail)){const mt=ot[lt]||q[lt];mt==null||mt(T)}}_setDefaultPropertiesFromJS(ot){if(!this.enableScripting)return;const T=this.annotationStorage.getRawValue(this.data.id);if(!T)return;const q=this._commonActions;for(const[lt,mt]of Object.entries(T)){const yt=q[lt];if(yt){const Et={detail:{[lt]:mt},target:ot};yt(Et),delete T[lt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:ot}=this.data;if(!ot)return;const[T,q,lt,mt]=this.data.rect;if(ot.length===1){const[,{x:Kt,y:Zt},{x:ee,y:re}]=ot[0];if(lt===Kt&&mt===Zt&&T===ee&&q===re)return}const{style:yt}=this.container;let Et;if(E(this,v)){const{borderColor:Kt,borderWidth:Zt}=yt;yt.borderWidth=0,Et=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Zt}">`],this.container.classList.add("hasBorder")}const Pt=lt-T,Lt=mt-q,{svgFactory:Dt}=this,Yt=Dt.createElement("svg");Yt.classList.add("quadrilateralsContainer"),Yt.setAttribute("width",0),Yt.setAttribute("height",0);const Bt=Dt.createElement("defs");Yt.append(Bt);const jt=Dt.createElement("clipPath"),qt=`clippath_${this.data.id}`;jt.setAttribute("id",qt),jt.setAttribute("clipPathUnits","objectBoundingBox"),Bt.append(jt);for(const[,{x:Kt,y:Zt},{x:ee,y:re}]of ot){const se=Dt.createElement("rect"),ae=(ee-T)/Pt,ce=(mt-Zt)/Lt,he=(Kt-ee)/Pt,An=(Zt-re)/Lt;se.setAttribute("x",ae),se.setAttribute("y",ce),se.setAttribute("width",he),se.setAttribute("height",An),jt.append(se),Et==null||Et.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${An}"/>`)}E(this,v)&&(Et.push("</g></svg>')"),yt.backgroundImage=Et.join("")),this.container.append(Yt),this.container.style.clipPath=`url(#${qt})`}_createPopup(){const{container:ot,data:T}=this;ot.setAttribute("aria-haspopup","dialog");const q=new M({data:{color:T.color,titleObj:T.titleObj,modificationDate:T.modificationDate,contentsObj:T.contentsObj,richText:T.richText,parentRect:T.rect,borderStyle:0,id:`popup_${T.id}`,rotation:T.rotation},parent:this.parent,elements:[this]});this.parent.div.append(q.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(ot,T=null){const q=[];if(this._fieldObjects){const lt=this._fieldObjects[ot];if(lt)for(const{page:mt,id:yt,exportValues:Et}of lt){if(mt===-1||yt===T)continue;const Pt=typeof Et=="string"?Et:null,Lt=document.querySelector(`[data-element-id="${yt}"]`);if(Lt&&!_.has(Lt)){(0,i.warn)(`_getElementsByName - element not allowed: ${yt}`);continue}q.push({id:yt,exportValue:Pt,domElement:Lt})}return q}for(const lt of document.getElementsByName(ot)){const{exportValue:mt}=lt,yt=lt.getAttribute("data-element-id");yt!==T&&_.has(lt)&&q.push({id:yt,exportValue:mt,domElement:lt})}return q}show(){var ot;this.container&&(this.container.hidden=!1),(ot=this.popup)==null||ot.maybeShow()}hide(){var ot;this.container&&(this.container.hidden=!0),(ot=this.popup)==null||ot.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const ot=this.getElementsToTriggerPopup();if(Array.isArray(ot))for(const T of ot)T.classList.add("highlightArea");else ot.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:ot,data:{id:T}}=this;this.container.addEventListener("dblclick",()=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("switchannotationeditormode",{source:this,mode:ot,editId:T})})}};v=new WeakMap;let S=C;class f extends S{constructor(T,q=null){super(T,{isRenderable:!0,ignoreBorder:!!(q!=null&&q.ignoreBorder),createQuadrilaterals:!0});ht(this,I);ht(this,W);this.isTooltipOnly=T.data.isTooltipOnly}render(){const{data:T,linkService:q}=this,lt=document.createElement("a");lt.setAttribute("data-element-id",T.id);let mt=!1;return T.url?(q.addLinkAttributes(lt,T.url,T.newWindow),mt=!0):T.action?(this._bindNamedAction(lt,T.action),mt=!0):T.attachment?(this._bindAttachment(lt,T.attachment),mt=!0):T.setOCGState?(bt(this,W,Nn).call(this,lt,T.setOCGState),mt=!0):T.dest?(this._bindLink(lt,T.dest),mt=!0):(T.actions&&(T.actions.Action||T.actions["Mouse Up"]||T.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(lt,T),mt=!0),T.resetForm?(this._bindResetFormAction(lt,T.resetForm),mt=!0):this.isTooltipOnly&&!mt&&(this._bindLink(lt,""),mt=!0)),this.container.classList.add("linkAnnotation"),mt&&this.container.append(lt),this.container}_bindLink(T,q){T.href=this.linkService.getDestinationHash(q),T.onclick=()=>(q&&this.linkService.goToDestination(q),!1),(q||q==="")&&bt(this,I,ue).call(this)}_bindNamedAction(T,q){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeNamedAction(q),!1),bt(this,I,ue).call(this)}_bindAttachment(T,q){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>{var lt;return(lt=this.downloadManager)==null||lt.openOrDownloadData(this.container,q.content,q.filename),!1},bt(this,I,ue).call(this)}_bindJSAction(T,q){T.href=this.linkService.getAnchorUrl("");const lt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const mt of Object.keys(q.actions)){const yt=lt.get(mt);yt&&(T[yt]=()=>{var Et;return(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:q.id,name:mt}}),!1})}T.onclick||(T.onclick=()=>!1),bt(this,I,ue).call(this)}_bindResetFormAction(T,q){const lt=T.onclick;if(lt||(T.href=this.linkService.getAnchorUrl("")),bt(this,I,ue).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),lt||(T.onclick=()=>!1);return}T.onclick=()=>{var Yt;lt==null||lt();const{fields:mt,refs:yt,include:Et}=q,Pt=[];if(mt.length!==0||yt.length!==0){const Bt=new Set(yt);for(const jt of mt){const qt=this._fieldObjects[jt]||[];for(const{id:Kt}of qt)Bt.add(Kt)}for(const jt of Object.values(this._fieldObjects))for(const qt of jt)Bt.has(qt.id)===Et&&Pt.push(qt)}else for(const Bt of Object.values(this._fieldObjects))Pt.push(...Bt);const Lt=this.annotationStorage,Dt=[];for(const Bt of Pt){const{id:jt}=Bt;switch(Dt.push(jt),Bt.type){case"text":{const Kt=Bt.defaultValue||"";Lt.setValue(jt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Bt.defaultValue===Bt.exportValues;Lt.setValue(jt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Bt.defaultValue||"";Lt.setValue(jt,{value:Kt});break}default:continue}const qt=document.querySelector(`[data-element-id="${jt}"]`);if(qt){if(!_.has(qt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Dt,name:"ResetForm"}})),!1}}}I=new WeakSet,ue=function(){this.container.setAttribute("data-internal-link","")},W=new WeakSet,Nn=function(T,q){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeSetOCGState(q),!1),bt(this,I,ue).call(this)};class b extends S{constructor(ot){super(ot,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const ot=document.createElement("img");return ot.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ot.alt="[{{type}} Annotation]",ot.dataset.l10nId="text_annotation_type",ot.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(ot),this.container}}class m extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(ot){var T;this.data.hasOwnCanvas&&(((T=ot.previousSibling)==null?void 0:T.nodeName)==="CANVAS"&&(ot.previousSibling.hidden=!0),ot.hidden=!1)}_getKeyModifier(ot){const{isWin:T,isMac:q}=i.FeatureTest.platform;return T&&ot.ctrlKey||q&&ot.metaKey}_setEventListener(ot,T,q,lt,mt){q.includes("mouse")?ot.addEventListener(q,yt=>{var Et;(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:lt,value:mt(yt),shift:yt.shiftKey,modifier:this._getKeyModifier(yt)}})}):ot.addEventListener(q,yt=>{var Et;if(q==="blur"){if(!T.focused||!yt.relatedTarget)return;T.focused=!1}else if(q==="focus"){if(T.focused)return;T.focused=!0}mt&&((Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:lt,value:mt(yt)}}))})}_setEventListeners(ot,T,q,lt){var mt,yt,Et;for(const[Pt,Lt]of q)(Lt==="Action"||(mt=this.data.actions)!=null&&mt[Lt])&&((Lt==="Focus"||Lt==="Blur")&&(T||(T={focused:!1})),this._setEventListener(ot,T,Pt,Lt,lt),Lt==="Focus"&&!((yt=this.data.actions)!=null&&yt.Blur)?this._setEventListener(ot,T,"blur","Blur",null):Lt==="Blur"&&!((Et=this.data.actions)!=null&&Et.Focus)&&this._setEventListener(ot,T,"focus","Focus",null))}_setBackgroundColor(ot){const T=this.data.backgroundColor||null;ot.style.backgroundColor=T===null?"transparent":i.Util.makeHexColor(T[0],T[1],T[2])}_setTextStyle(ot){const T=["left","center","right"],{fontColor:q}=this.data.defaultAppearanceData,lt=this.data.defaultAppearanceData.fontSize||l,mt=ot.style;let yt;const Et=2,Pt=Lt=>Math.round(10*Lt)/10;if(this.data.multiLine){const Lt=Math.abs(this.data.rect[3]-this.data.rect[1]-Et),Dt=Math.round(Lt/(i.LINE_FACTOR*lt))||1,Yt=Lt/Dt;yt=Math.min(lt,Pt(Yt/i.LINE_FACTOR))}else{const Lt=Math.abs(this.data.rect[3]-this.data.rect[1]-Et);yt=Math.min(lt,Pt(Lt/i.LINE_FACTOR))}mt.fontSize=`calc(${yt}px * var(--scale-factor))`,mt.color=i.Util.makeHexColor(q[0],q[1],q[2]),this.data.textAlignment!==null&&(mt.textAlign=T[this.data.textAlignment])}_setRequired(ot,T){T?ot.setAttribute("required",!0):ot.removeAttribute("required"),ot.setAttribute("aria-required",T)}}class k extends m{constructor(ot){const T=ot.renderForms||!ot.data.hasAppearance&&!!ot.data.fieldValue;super(ot,{isRenderable:T})}setPropertyOnSiblings(ot,T,q,lt){const mt=this.annotationStorage;for(const yt of this._getElementsByName(ot.name,ot.id))yt.domElement&&(yt.domElement[T]=q),mt.setValue(yt.id,{[lt]:q})}render(){var lt,mt;const ot=this.annotationStorage,T=this.data.id;this.container.classList.add("textWidgetAnnotation");let q=null;if(this.renderForms){const yt=ot.getValue(T,{value:this.data.fieldValue});let Et=yt.value||"";const Pt=ot.getValue(T,{charLimit:this.data.maxLen}).charLimit;Pt&&Et.length>Pt&&(Et=Et.slice(0,Pt));let Lt=yt.formattedValue||((lt=this.data.textContent)==null?void 0:lt.join(`
`))||null;Lt&&this.data.comb&&(Lt=Lt.replaceAll(/\s+/g,""));const Dt={userValue:Et,formattedValue:Lt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(q=document.createElement("textarea"),q.textContent=Lt??Et,this.data.doNotScroll&&(q.style.overflowY="hidden")):(q=document.createElement("input"),q.type="text",q.setAttribute("value",Lt??Et),this.data.doNotScroll&&(q.style.overflowX="hidden")),this.data.hasOwnCanvas&&(q.hidden=!0),_.add(q),q.setAttribute("data-element-id",T),q.disabled=this.data.readOnly,q.name=this.data.fieldName,q.tabIndex=u,this._setRequired(q,this.data.required),Pt&&(q.maxLength=Pt),q.addEventListener("input",Bt=>{ot.setValue(T,{value:Bt.target.value}),this.setPropertyOnSiblings(q,"value",Bt.target.value,"value"),Dt.formattedValue=null}),q.addEventListener("resetform",Bt=>{const jt=this.data.defaultFieldValue??"";q.value=Dt.userValue=jt,Dt.formattedValue=null});let Yt=Bt=>{const{formattedValue:jt}=Dt;jt!=null&&(Bt.target.value=jt),Bt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){q.addEventListener("focus",jt=>{if(Dt.focused)return;const{target:qt}=jt;Dt.userValue&&(qt.value=Dt.userValue),Dt.lastCommittedValue=qt.value,Dt.commitKey=1,Dt.focused=!0}),q.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const qt={value(Kt){Dt.userValue=Kt.detail.value??"",ot.setValue(T,{value:Dt.userValue.toString()}),Kt.target.value=Dt.userValue},formattedValue(Kt){const{formattedValue:Zt}=Kt.detail;Dt.formattedValue=Zt,Zt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Zt),ot.setValue(T,{formattedValue:Zt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var se;const{charLimit:Zt}=Kt.detail,{target:ee}=Kt;if(Zt===0){ee.removeAttribute("maxLength");return}ee.setAttribute("maxLength",Zt);let re=Dt.userValue;!re||re.length<=Zt||(re=re.slice(0,Zt),ee.value=Dt.userValue=re,ot.setValue(T,{value:re}),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:ee.selectionStart,selEnd:ee.selectionEnd}}))}};this._dispatchEventFromSandbox(qt,jt)}),q.addEventListener("keydown",jt=>{var Zt;Dt.commitKey=1;let qt=-1;if(jt.key==="Escape"?qt=0:jt.key==="Enter"&&!this.data.multiLine?qt=2:jt.key==="Tab"&&(Dt.commitKey=3),qt===-1)return;const{value:Kt}=jt.target;Dt.lastCommittedValue!==Kt&&(Dt.lastCommittedValue=Kt,Dt.userValue=Kt,(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Kt,willCommit:!0,commitKey:qt,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const Bt=Yt;Yt=null,q.addEventListener("blur",jt=>{var Kt;if(!Dt.focused||!jt.relatedTarget)return;Dt.focused=!1;const{value:qt}=jt.target;Dt.userValue=qt,Dt.lastCommittedValue!==qt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:qt,willCommit:!0,commitKey:Dt.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}})),Bt(jt)}),(mt=this.data.actions)!=null&&mt.Keystroke&&q.addEventListener("beforeinput",jt=>{var ce;Dt.lastCommittedValue=null;const{data:qt,target:Kt}=jt,{value:Zt,selectionStart:ee,selectionEnd:re}=Kt;let se=ee,ae=re;switch(jt.inputType){case"deleteWordBackward":{const he=Zt.substring(0,ee).match(/\w*[^\w]*$/);he&&(se-=he[0].length);break}case"deleteWordForward":{const he=Zt.substring(ee).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":ee===re&&(se-=1);break;case"deleteContentForward":ee===re&&(ae+=1);break}jt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Zt,change:qt||"",willCommit:!1,selStart:se,selEnd:ae}})}),this._setEventListeners(q,Dt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(Yt&&q.addEventListener("blur",Yt),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/Pt;q.classList.add("comb"),q.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else q=document.createElement("div"),q.textContent=this.data.fieldValue,q.style.verticalAlign="middle",q.style.display="table-cell";return this._setTextStyle(q),this._setBackgroundColor(q),this._setDefaultPropertiesFromJS(q),this.container.append(q),this.container}}class P extends m{constructor(ot){super(ot,{isRenderable:!!ot.data.hasOwnCanvas})}}class R extends m{constructor(ot){super(ot,{isRenderable:ot.renderForms})}render(){const ot=this.annotationStorage,T=this.data,q=T.id;let lt=ot.getValue(q,{value:T.exportValue===T.fieldValue}).value;typeof lt=="string"&&(lt=lt!=="Off",ot.setValue(q,{value:lt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const mt=document.createElement("input");return _.add(mt),mt.setAttribute("data-element-id",q),mt.disabled=T.readOnly,this._setRequired(mt,this.data.required),mt.type="checkbox",mt.name=T.fieldName,lt&&mt.setAttribute("checked",!0),mt.setAttribute("exportValue",T.exportValue),mt.tabIndex=u,mt.addEventListener("change",yt=>{const{name:Et,checked:Pt}=yt.target;for(const Lt of this._getElementsByName(Et,q)){const Dt=Pt&&Lt.exportValue===T.exportValue;Lt.domElement&&(Lt.domElement.checked=Dt),ot.setValue(Lt.id,{value:Dt})}ot.setValue(q,{value:Pt})}),mt.addEventListener("resetform",yt=>{const Et=T.defaultFieldValue||"Off";yt.target.checked=Et===T.exportValue}),this.enableScripting&&this.hasJSActions&&(mt.addEventListener("updatefromsandbox",yt=>{const Et={value(Pt){Pt.target.checked=Pt.detail.value!=="Off",ot.setValue(q,{value:Pt.target.checked})}};this._dispatchEventFromSandbox(Et,yt)}),this._setEventListeners(mt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yt=>yt.target.checked)),this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class A extends m{constructor(ot){super(ot,{isRenderable:ot.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const ot=this.annotationStorage,T=this.data,q=T.id;let lt=ot.getValue(q,{value:T.fieldValue===T.buttonValue}).value;typeof lt=="string"&&(lt=lt!==T.buttonValue,ot.setValue(q,{value:lt}));const mt=document.createElement("input");if(_.add(mt),mt.setAttribute("data-element-id",q),mt.disabled=T.readOnly,this._setRequired(mt,this.data.required),mt.type="radio",mt.name=T.fieldName,lt&&mt.setAttribute("checked",!0),mt.tabIndex=u,mt.addEventListener("change",yt=>{const{name:Et,checked:Pt}=yt.target;for(const Lt of this._getElementsByName(Et,q))ot.setValue(Lt.id,{value:!1});ot.setValue(q,{value:Pt})}),mt.addEventListener("resetform",yt=>{const Et=T.defaultFieldValue;yt.target.checked=Et!=null&&Et===T.buttonValue}),this.enableScripting&&this.hasJSActions){const yt=T.buttonValue;mt.addEventListener("updatefromsandbox",Et=>{const Pt={value:Lt=>{const Dt=yt===Lt.detail.value;for(const Yt of this._getElementsByName(Lt.target.name)){const Bt=Dt&&Yt.id===q;Yt.domElement&&(Yt.domElement.checked=Bt),ot.setValue(Yt.id,{value:Bt})}}};this._dispatchEventFromSandbox(Pt,Et)}),this._setEventListeners(mt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)}return this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class F extends f{constructor(ot){super(ot,{ignoreBorder:ot.data.hasAppearance})}render(){const ot=super.render();ot.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(ot.title=this.data.alternativeText);const T=ot.lastChild;return this.enableScripting&&this.hasJSActions&&T&&(this._setDefaultPropertiesFromJS(T),T.addEventListener("updatefromsandbox",q=>{this._dispatchEventFromSandbox({},q)})),ot}}class U extends m{constructor(ot){super(ot,{isRenderable:ot.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const ot=this.annotationStorage,T=this.data.id,q=ot.getValue(T,{value:this.data.fieldValue}),lt=document.createElement("select");_.add(lt),lt.setAttribute("data-element-id",T),lt.disabled=this.data.readOnly,this._setRequired(lt,this.data.required),lt.name=this.data.fieldName,lt.tabIndex=u;let mt=this.data.combo&&this.data.options.length>0;this.data.combo||(lt.size=this.data.options.length,this.data.multiSelect&&(lt.multiple=!0)),lt.addEventListener("resetform",Dt=>{const Yt=this.data.defaultFieldValue;for(const Bt of lt.options)Bt.selected=Bt.value===Yt});for(const Dt of this.data.options){const Yt=document.createElement("option");Yt.textContent=Dt.displayValue,Yt.value=Dt.exportValue,q.value.includes(Dt.exportValue)&&(Yt.setAttribute("selected",!0),mt=!1),lt.append(Yt)}let yt=null;if(mt){const Dt=document.createElement("option");Dt.value=" ",Dt.setAttribute("hidden",!0),Dt.setAttribute("selected",!0),lt.prepend(Dt),yt=()=>{Dt.remove(),lt.removeEventListener("input",yt),yt=null},lt.addEventListener("input",yt)}const Et=Dt=>{const Yt=Dt?"value":"textContent",{options:Bt,multiple:jt}=lt;return jt?Array.prototype.filter.call(Bt,qt=>qt.selected).map(qt=>qt[Yt]):Bt.selectedIndex===-1?null:Bt[Bt.selectedIndex][Yt]};let Pt=Et(!1);const Lt=Dt=>{const Yt=Dt.target.options;return Array.prototype.map.call(Yt,Bt=>({displayValue:Bt.textContent,exportValue:Bt.value}))};return this.enableScripting&&this.hasJSActions?(lt.addEventListener("updatefromsandbox",Dt=>{const Yt={value(Bt){yt==null||yt();const jt=Bt.detail.value,qt=new Set(Array.isArray(jt)?jt:[jt]);for(const Kt of lt.options)Kt.selected=qt.has(Kt.value);ot.setValue(T,{value:Et(!0)}),Pt=Et(!1)},multipleSelection(Bt){lt.multiple=!0},remove(Bt){const jt=lt.options,qt=Bt.detail.remove;jt[qt].selected=!1,lt.remove(qt),jt.length>0&&Array.prototype.findIndex.call(jt,Zt=>Zt.selected)===-1&&(jt[0].selected=!0),ot.setValue(T,{value:Et(!0),items:Lt(Bt)}),Pt=Et(!1)},clear(Bt){for(;lt.length!==0;)lt.remove(0);ot.setValue(T,{value:null,items:[]}),Pt=Et(!1)},insert(Bt){const{index:jt,displayValue:qt,exportValue:Kt}=Bt.detail.insert,Zt=lt.children[jt],ee=document.createElement("option");ee.textContent=qt,ee.value=Kt,Zt?Zt.before(ee):lt.append(ee),ot.setValue(T,{value:Et(!0),items:Lt(Bt)}),Pt=Et(!1)},items(Bt){const{items:jt}=Bt.detail;for(;lt.length!==0;)lt.remove(0);for(const qt of jt){const{displayValue:Kt,exportValue:Zt}=qt,ee=document.createElement("option");ee.textContent=Kt,ee.value=Zt,lt.append(ee)}lt.options.length>0&&(lt.options[0].selected=!0),ot.setValue(T,{value:Et(!0),items:Lt(Bt)}),Pt=Et(!1)},indices(Bt){const jt=new Set(Bt.detail.indices);for(const qt of Bt.target.options)qt.selected=jt.has(qt.index);ot.setValue(T,{value:Et(!0)}),Pt=Et(!1)},editable(Bt){Bt.target.disabled=!Bt.detail.editable}};this._dispatchEventFromSandbox(Yt,Dt)}),lt.addEventListener("input",Dt=>{var Bt;const Yt=Et(!0);ot.setValue(T,{value:Yt}),Dt.preventDefault(),(Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Pt,changeEx:Yt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(lt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Dt=>Dt.target.value)):lt.addEventListener("input",function(Dt){ot.setValue(T,{value:Et(!0)})}),this.data.combo&&this._setTextStyle(lt),this._setBackgroundColor(lt),this._setDefaultPropertiesFromJS(lt),this.container.append(lt),this.container}}class M extends S{constructor(ot){const{data:T,elements:q}=ot;super(ot,{isRenderable:S._hasPopupData(T)}),this.elements=q}render(){this.container.classList.add("popupAnnotation");const ot=new x({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),T=[];for(const q of this.elements)q.popup=ot,T.push(q.data.id),q.addHighlightArea();return this.container.setAttribute("aria-controls",T.map(q=>`${i.AnnotationPrefix}${q}`).join(",")),this.container}}class x{constructor({container:ot,color:T,elements:q,titleObj:lt,modificationDate:mt,contentsObj:yt,richText:Et,parent:Pt,rect:Lt,parentRect:Dt,open:Yt}){ht(this,Tt);ht(this,zt);ht(this,Vt);ht(this,Xt);ht(this,it,null);ht(this,pt,bt(this,Tt,Bn).bind(this));ht(this,j,bt(this,Xt,hn).bind(this));ht(this,o,bt(this,Vt,cn).bind(this));ht(this,z,bt(this,zt,Oe).bind(this));ht(this,G,null);ht(this,O,null);ht(this,L,null);ht(this,K,null);ht(this,nt,null);ht(this,ct,null);ht(this,V,!1);ht(this,J,null);ht(this,Z,null);ht(this,rt,null);ht(this,vt,null);ht(this,Ct,!1);var jt;wt(this,O,ot),wt(this,vt,lt),wt(this,L,yt),wt(this,rt,Et),wt(this,nt,Pt),wt(this,G,T),wt(this,Z,Lt),wt(this,ct,Dt),wt(this,K,q);const Bt=s.PDFDateString.toDateObject(mt);Bt&&wt(this,it,Pt.l10n.get("annotation_date_string",{date:Bt.toLocaleDateString(),time:Bt.toLocaleTimeString()})),this.trigger=q.flatMap(qt=>qt.getElementsToTriggerPopup());for(const qt of this.trigger)qt.addEventListener("click",E(this,z)),qt.addEventListener("mouseenter",E(this,o)),qt.addEventListener("mouseleave",E(this,j)),qt.classList.add("popupTriggerArea");for(const qt of q)(jt=qt.container)==null||jt.addEventListener("keydown",E(this,pt));E(this,O).hidden=!0,Yt&&bt(this,zt,Oe).call(this)}render(){if(E(this,J))return;const{page:{view:ot},viewport:{rawDims:{pageWidth:T,pageHeight:q,pageX:lt,pageY:mt}}}=E(this,nt),yt=wt(this,J,document.createElement("div"));if(yt.className="popup",E(this,G)){const se=yt.style.outlineColor=i.Util.makeHexColor(...E(this,G));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?yt.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:yt.style.backgroundColor=i.Util.makeHexColor(...E(this,G).map(ce=>Math.floor(.7*(255-ce)+ce)))}const Et=document.createElement("span");Et.className="header";const Pt=document.createElement("h1");if(Et.append(Pt),{dir:Pt.dir,str:Pt.textContent}=E(this,vt),yt.append(Et),E(this,it)){const se=document.createElement("span");se.classList.add("popupDate"),E(this,it).then(ae=>{se.textContent=ae}),Et.append(se)}const Lt=E(this,L),Dt=E(this,rt);if(Dt!=null&&Dt.str&&(!(Lt!=null&&Lt.str)||Lt.str===Dt.str))c.XfaLayer.render({xfaHtml:Dt.html,intent:"richText",div:yt}),yt.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(Lt);yt.append(se)}let Yt=!!E(this,ct),Bt=Yt?E(this,ct):E(this,Z);for(const se of E(this,K))if(!Bt||i.Util.intersect(se.data.rect,Bt)!==null){Bt=se.data.rect,Yt=!0;break}const jt=i.Util.normalizeRect([Bt[0],ot[3]-Bt[1]+ot[1],Bt[2],ot[3]-Bt[3]+ot[1]]),qt=5,Kt=Yt?Bt[2]-Bt[0]+qt:0,Zt=jt[0]+Kt,ee=jt[1],{style:re}=E(this,O);re.left=`${100*(Zt-lt)/T}%`,re.top=`${100*(ee-mt)/q}%`,E(this,O).append(yt)}_formatContents({str:ot,dir:T}){const q=document.createElement("p");q.classList.add("popupContent"),q.dir=T;const lt=ot.split(/(?:\r\n?|\n)/);for(let mt=0,yt=lt.length;mt<yt;++mt){const Et=lt[mt];q.append(document.createTextNode(Et)),mt<yt-1&&q.append(document.createElement("br"))}return q}forceHide(){wt(this,Ct,this.isVisible),E(this,Ct)&&(E(this,O).hidden=!0)}maybeShow(){E(this,Ct)&&(wt(this,Ct,!1),E(this,O).hidden=!1)}get isVisible(){return E(this,O).hidden===!1}}it=new WeakMap,pt=new WeakMap,j=new WeakMap,o=new WeakMap,z=new WeakMap,G=new WeakMap,O=new WeakMap,L=new WeakMap,K=new WeakMap,nt=new WeakMap,ct=new WeakMap,V=new WeakMap,J=new WeakMap,Z=new WeakMap,rt=new WeakMap,vt=new WeakMap,Ct=new WeakMap,Tt=new WeakSet,Bn=function(ot){ot.altKey||ot.shiftKey||ot.ctrlKey||ot.metaKey||(ot.key==="Enter"||ot.key==="Escape"&&E(this,V))&&bt(this,zt,Oe).call(this)},zt=new WeakSet,Oe=function(){wt(this,V,!E(this,V)),E(this,V)?(bt(this,Vt,cn).call(this),E(this,O).addEventListener("click",E(this,z)),E(this,O).addEventListener("keydown",E(this,pt))):(bt(this,Xt,hn).call(this),E(this,O).removeEventListener("click",E(this,z)),E(this,O).removeEventListener("keydown",E(this,pt)))},Vt=new WeakSet,cn=function(){E(this,J)||this.render(),this.isVisible?E(this,V)&&E(this,O).classList.add("focused"):(E(this,O).hidden=!1,E(this,O).style.zIndex=parseInt(E(this,O).style.zIndex)+1e3)},Xt=new WeakSet,hn=function(){E(this,O).classList.remove("focused"),!(E(this,V)||!this.isVisible)&&(E(this,O).hidden=!0,E(this,O).style.zIndex=parseInt(E(this,O).style.zIndex)-1e3)};class $ extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0}),this.textContent=ot.data.textContent,this.textPosition=ot.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const ot=document.createElement("div");ot.classList.add("annotationTextContent"),ot.setAttribute("role","comment");for(const T of this.textContent){const q=document.createElement("span");q.textContent=T,ot.append(q)}this.container.append(ot)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=$;class H extends S{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});ht(this,_t,null)}render(){this.container.classList.add("lineAnnotation");const T=this.data,{width:q,height:lt}=w(T.rect),mt=this.svgFactory.create(q,lt,!0),yt=wt(this,_t,this.svgFactory.createElement("svg:line"));return yt.setAttribute("x1",T.rect[2]-T.lineCoordinates[0]),yt.setAttribute("y1",T.rect[3]-T.lineCoordinates[1]),yt.setAttribute("x2",T.rect[2]-T.lineCoordinates[2]),yt.setAttribute("y2",T.rect[3]-T.lineCoordinates[3]),yt.setAttribute("stroke-width",T.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),mt.append(yt),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return E(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap;class N extends S{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});ht(this,gt,null)}render(){this.container.classList.add("squareAnnotation");const T=this.data,{width:q,height:lt}=w(T.rect),mt=this.svgFactory.create(q,lt,!0),yt=T.borderStyle.width,Et=wt(this,gt,this.svgFactory.createElement("svg:rect"));return Et.setAttribute("x",yt/2),Et.setAttribute("y",yt/2),Et.setAttribute("width",q-yt),Et.setAttribute("height",lt-yt),Et.setAttribute("stroke-width",yt||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return E(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class X extends S{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});ht(this,kt,null)}render(){this.container.classList.add("circleAnnotation");const T=this.data,{width:q,height:lt}=w(T.rect),mt=this.svgFactory.create(q,lt,!0),yt=T.borderStyle.width,Et=wt(this,kt,this.svgFactory.createElement("svg:ellipse"));return Et.setAttribute("cx",q/2),Et.setAttribute("cy",lt/2),Et.setAttribute("rx",q/2-yt/2),Et.setAttribute("ry",lt/2-yt/2),Et.setAttribute("stroke-width",yt||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return E(this,kt)}addHighlightArea(){this.container.classList.add("highlightArea")}}kt=new WeakMap;class g extends S{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});ht(this,Rt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:q,height:lt}=w(T.rect),mt=this.svgFactory.create(q,lt,!0);let yt=[];for(const Pt of T.vertices){const Lt=Pt.x-T.rect[0],Dt=T.rect[3]-Pt.y;yt.push(Lt+","+Dt)}yt=yt.join(" ");const Et=wt(this,Rt,this.svgFactory.createElement(this.svgElementName));return Et.setAttribute("points",yt),Et.setAttribute("stroke-width",T.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return E(this,Rt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rt=new WeakMap;class et extends g{constructor(ot){super(ot),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ft extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends S{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});ht(this,ne,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:q,height:lt}=w(T.rect),mt=this.svgFactory.create(q,lt,!0);for(const yt of T.inkLists){let Et=[];for(const Lt of yt){const Dt=Lt.x-T.rect[0],Yt=T.rect[3]-Lt.y;Et.push(`${Dt},${Yt}`)}Et=Et.join(" ");const Pt=this.svgFactory.createElement(this.svgElementName);E(this,ne).push(Pt),Pt.setAttribute("points",Et),Pt.setAttribute("stroke-width",T.borderStyle.width||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),!T.popupRef&&this.hasPopupData&&this._createPopup(),mt.append(Pt)}return this.container.append(mt),this.container}getElementsToTriggerPopup(){return E(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,e.InkAnnotationElement=at;class st extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class dt extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class St extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ut extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Y extends S{constructor(ot){super(ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Y;class B extends S{constructor(T){var mt;super(T,{isRenderable:!0});ht(this,At);ht(this,te,null);const{filename:q,content:lt}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(q,!0),this.content=lt,(mt=this.linkService.eventBus)==null||mt.dispatch("fileattachmentannotation",{source:this,filename:q,content:lt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:T,data:q}=this;let lt;q.hasAppearance||q.fillAlpha===0?lt=document.createElement("div"):(lt=document.createElement("img"),lt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(q.name)?"paperclip":"pushpin"}.svg`,q.fillAlpha&&q.fillAlpha<1&&(lt.style=`filter: opacity(${Math.round(q.fillAlpha*100)}%);`)),lt.addEventListener("dblclick",bt(this,At,un).bind(this)),wt(this,te,lt);const{isMac:mt}=i.FeatureTest.platform;return T.addEventListener("keydown",yt=>{yt.key==="Enter"&&(mt?yt.metaKey:yt.ctrlKey)&&bt(this,At,un).call(this)}),!q.popupRef&&this.hasPopupData?this._createPopup():lt.classList.add("popupTriggerArea"),T.append(lt),T}getElementsToTriggerPopup(){return E(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,At=new WeakSet,un=function(){var T;(T=this.downloadManager)==null||T.openOrDownloadData(this.container,this.content,this.filename)};class y{constructor({div:ot,accessibilityManager:T,annotationCanvasMap:q,l10n:lt,page:mt,viewport:yt}){ht(this,Gt);ht(this,Ft);ht(this,Ht,null);ht(this,Mt,null);ht(this,Wt,new Map);this.div=ot,wt(this,Ht,T),wt(this,Mt,q),this.l10n=lt,this.page=mt,this.viewport=yt,this.zIndex=0,this.l10n||(this.l10n=h.NullL10n)}async render(ot){const{annotations:T}=ot,q=this.div;(0,s.setLayerDimensions)(q,this.viewport);const lt=new Map,mt={data:null,layer:q,linkService:ot.linkService,downloadManager:ot.downloadManager,imageResourcesPath:ot.imageResourcesPath||"",renderForms:ot.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:ot.annotationStorage||new r.AnnotationStorage,enableScripting:ot.enableScripting===!0,hasJSActions:ot.hasJSActions,fieldObjects:ot.fieldObjects,parent:this,elements:null};for(const yt of T){if(yt.noHTML)continue;const Et=yt.annotationType===i.AnnotationType.POPUP;if(Et){const Dt=lt.get(yt.id);if(!Dt)continue;mt.elements=Dt}else{const{width:Dt,height:Yt}=w(yt.rect);if(Dt<=0||Yt<=0)continue}mt.data=yt;const Pt=d.create(mt);if(!Pt.isRenderable)continue;if(!Et&&yt.popupRef){const Dt=lt.get(yt.popupRef);Dt?Dt.push(Pt):lt.set(yt.popupRef,[Pt])}Pt.annotationEditorType>0&&E(this,Wt).set(Pt.data.id,Pt);const Lt=Pt.render();yt.hidden&&(Lt.style.visibility="hidden"),bt(this,Gt,jn).call(this,Lt,yt.id)}bt(this,Ft,dn).call(this),await this.l10n.translate(q)}update({viewport:ot}){const T=this.div;this.viewport=ot,(0,s.setLayerDimensions)(T,{rotation:ot.rotation}),bt(this,Ft,dn).call(this),T.hidden=!1}getEditableAnnotations(){return Array.from(E(this,Wt).values())}getEditableAnnotation(ot){return E(this,Wt).get(ot)}}Ht=new WeakMap,Mt=new WeakMap,Wt=new WeakMap,Gt=new WeakSet,jn=function(ot,T){var lt;const q=ot.firstChild||ot;q.id=`${i.AnnotationPrefix}${T}`,this.div.append(ot),(lt=E(this,Ht))==null||lt.moveElementInDOM(this.div,ot,q,!1)},Ft=new WeakSet,dn=function(){if(!E(this,Mt))return;const ot=this.div;for(const[T,q]of E(this,Mt)){const lt=ot.querySelector(`[data-annotation-id="${T}"]`);if(!lt)continue;const{firstChild:mt}=lt;mt?mt.nodeName==="CANVAS"?mt.replaceWith(q):mt.before(q):lt.append(q)}E(this,Mt).clear()},e.AnnotationLayer=y},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function i(r){return Math.max(0,Math.min(255,255*r))}class s{static CMYK_G([a,h,c,u]){return["G",1-Math.min(1,.3*a+.59*c+.11*h+u)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_rgb([a]){return a=i(a),[a,a,a]}static G_HTML([a]){const h=n(a);return`#${h}${h}${h}`}static RGB_G([a,h,c]){return["G",.3*a+.59*h+.11*c]}static RGB_rgb(a){return a.map(i)}static RGB_HTML(a){return`#${a.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([a,h,c,u]){return["RGB",1-Math.min(1,a+u),1-Math.min(1,c+u),1-Math.min(1,h+u)]}static CMYK_rgb([a,h,c,u]){return[i(1-Math.min(1,a+u)),i(1-Math.min(1,c+u)),i(1-Math.min(1,h+u))]}static CMYK_HTML(a){const h=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(h)}static RGB_CMYK([a,h,c]){const u=1-a,l=1-h,_=1-c,w=Math.min(u,l,_);return["CMYK",u,l,_,w]}}e.ColorConverters=s},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=i;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function i(a,h){switch(a){case"find_match_count":a=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":a=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return n[a]||""}function s(a,h){return h?a.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(c,u)=>u in h?h[u]:"{{"+u+"}}"):a}const r={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(a,h=null,c=i(a,h)){return s(c,h)},async translate(a){}};e.NullL10n=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=n(25);class s{static setupStorage(a,h,c,u,l){const _=u.getValue(h,{value:null});switch(c.name){case"textarea":if(_.value!==null&&(a.textContent=_.value),l==="print")break;a.addEventListener("input",w=>{u.setValue(h,{value:w.target.value})});break;case"input":if(c.attributes.type==="radio"||c.attributes.type==="checkbox"){if(_.value===c.attributes.xfaOn?a.setAttribute("checked",!0):_.value===c.attributes.xfaOff&&a.removeAttribute("checked"),l==="print")break;a.addEventListener("change",w=>{u.setValue(h,{value:w.target.checked?w.target.getAttribute("xfaOn"):w.target.getAttribute("xfaOff")})})}else{if(_.value!==null&&a.setAttribute("value",_.value),l==="print")break;a.addEventListener("input",w=>{u.setValue(h,{value:w.target.value})})}break;case"select":if(_.value!==null){a.setAttribute("value",_.value);for(const w of c.children)w.attributes.value===_.value?w.attributes.selected=!0:w.attributes.hasOwnProperty("selected")&&delete w.attributes.selected}a.addEventListener("input",w=>{const d=w.target.options,S=d.selectedIndex===-1?"":d[d.selectedIndex].value;u.setValue(h,{value:S})});break}}static setAttributes({html:a,element:h,storage:c=null,intent:u,linkService:l}){const{attributes:_}=h,w=a instanceof HTMLAnchorElement;_.type==="radio"&&(_.name=`${_.name}-${u}`);for(const[d,S]of Object.entries(_))if(S!=null)switch(d){case"class":S.length&&a.setAttribute(d,S.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",S);break;case"style":Object.assign(a.style,S);break;case"textContent":a.textContent=S;break;default:(!w||d!=="href"&&d!=="newWindow")&&a.setAttribute(d,S)}w&&l.addLinkAttributes(a,_.href,_.newWindow),c&&_.dataId&&this.setupStorage(a,_.dataId,h,c)}static render(a){var f;const h=a.annotationStorage,c=a.linkService,u=a.xfaHtml,l=a.intent||"display",_=document.createElement(u.name);u.attributes&&this.setAttributes({html:_,element:u,intent:l,linkService:c});const w=[[u,-1,_]],d=a.div;if(d.append(_),a.viewport){const b=`matrix(${a.viewport.transform.join(",")})`;d.style.transform=b}l!=="richText"&&d.setAttribute("class","xfaLayer xfaFont");const S=[];for(;w.length>0;){const[b,m,k]=w.at(-1);if(m+1===b.children.length){w.pop();continue}const P=b.children[++w.at(-1)[1]];if(P===null)continue;const{name:R}=P;if(R==="#text"){const F=document.createTextNode(P.value);S.push(F),k.append(F);continue}const A=(f=P==null?void 0:P.attributes)!=null&&f.xmlns?document.createElementNS(P.attributes.xmlns,R):document.createElement(R);if(k.append(A),P.attributes&&this.setAttributes({html:A,element:P,storage:h,intent:l,linkService:c}),P.children&&P.children.length>0)w.push([P,-1,A]);else if(P.value){const F=document.createTextNode(P.value);i.XfaText.shouldBuildText(R)&&S.push(F),A.append(F)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:S}}static update(a){const h=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=h,a.div.hidden=!1}}e.XfaLayer=s},(t,e,n)=>{var u,l,_,w,d,S,f,b,m,k,P,R,A,F,U,Un,x,zn,H,$n,X,Hn,et,fn,at,Wn,dt,pn,ut,Vn,B,Gn,v,qn,I,Xn,W,Yn,it,le,j,gn,z,Ie,O,Me,K,ge,ct,mn,J,De,rt,Kn,Ct,_n,It,Jn,Ut,Zn,Nt,bn,xt,Le,gt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var i=n(1),s=n(4),r=n(29),a=n(6),h=n(5);const Rt=class Rt extends s.AnnotationEditor{constructor(At){super({...At,name:"inkEditor"});ht(this,U);ht(this,x);ht(this,H);ht(this,X);ht(this,et);ht(this,at);ht(this,dt);ht(this,ut);ht(this,B);ht(this,v);ht(this,I);ht(this,W);ht(this,it);ht(this,j);ht(this,z);ht(this,O);ht(this,K);ht(this,ct);ht(this,J);ht(this,Ut);ht(this,Nt);ht(this,xt);ht(this,gt);ht(this,u,0);ht(this,l,0);ht(this,_,this.canvasPointermove.bind(this));ht(this,w,this.canvasPointerleave.bind(this));ht(this,d,this.canvasPointerup.bind(this));ht(this,S,this.canvasPointerdown.bind(this));ht(this,f,new Path2D);ht(this,b,!1);ht(this,m,!1);ht(this,k,!1);ht(this,P,null);ht(this,R,0);ht(this,A,0);ht(this,F,null);this.color=At.color||null,this.thickness=At.thickness||null,this.opacity=At.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(At){s.AnnotationEditor.initialize(At,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(At,Ot){switch(At){case i.AnnotationEditorParamsType.INK_THICKNESS:Rt._defaultThickness=Ot;break;case i.AnnotationEditorParamsType.INK_COLOR:Rt._defaultColor=Ot;break;case i.AnnotationEditorParamsType.INK_OPACITY:Rt._defaultOpacity=Ot/100;break}}updateParams(At,Ot){switch(At){case i.AnnotationEditorParamsType.INK_THICKNESS:bt(this,U,Un).call(this,Ot);break;case i.AnnotationEditorParamsType.INK_COLOR:bt(this,x,zn).call(this,Ot);break;case i.AnnotationEditorParamsType.INK_OPACITY:bt(this,H,$n).call(this,Ot);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Rt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Rt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Rt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Rt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Rt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Rt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(bt(this,z,Ie).call(this),bt(this,O,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),bt(this,K,ge).call(this)),bt(this,gt,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,E(this,P).disconnect(),wt(this,P,null),super.remove())}setParent(At){!this.parent&&At?this._uiManager.removeShouldRescale(this):this.parent&&At===null&&this._uiManager.addShouldRescale(this),super.setParent(At)}onScaleChanging(){const[At,Ot]=this.parentDimensions,Ht=this.width*At,Mt=this.height*Ot;this.setDimensions(Ht,Mt)}enableEditMode(){E(this,b)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",E(this,S)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",E(this,S)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){E(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),wt(this,b,!0),this.div.classList.add("disabled"),bt(this,gt,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(At){this._focusEventsAllowed&&(super.focusin(At),this.enableEditMode())}canvasPointerdown(At){At.button!==0||!this.isInEditMode()||E(this,b)||(this.setInForeground(),At.preventDefault(),At.type!=="mouse"&&this.div.focus(),bt(this,at,Wn).call(this,At.offsetX,At.offsetY))}canvasPointermove(At){At.preventDefault(),bt(this,dt,pn).call(this,At.offsetX,At.offsetY)}canvasPointerup(At){At.preventDefault(),bt(this,j,gn).call(this,At)}canvasPointerleave(At){bt(this,j,gn).call(this,At)}get isResizable(){return!this.isEmpty()&&E(this,b)}render(){if(this.div)return this.div;let At,Ot;this.width&&(At=this.x,Ot=this.y),super.render(),s.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var Ft;return(Ft=this.div)==null?void 0:Ft.setAttribute("aria-label",Qt)});const[Ht,Mt,Wt,Gt]=bt(this,X,Hn).call(this);if(this.setAt(Ht,Mt,0,0),this.setDims(Wt,Gt),bt(this,z,Ie).call(this),this.width){const[Qt,Ft]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*Ft),this.setAt(At*Qt,Ot*Ft,this.width*Qt,this.height*Ft),wt(this,k,!0),bt(this,K,ge).call(this),this.setDims(this.width*Qt,this.height*Ft),bt(this,it,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return bt(this,O,Me).call(this),this.div}setDimensions(At,Ot){const Ht=Math.round(At),Mt=Math.round(Ot);if(E(this,R)===Ht&&E(this,A)===Mt)return;wt(this,R,Ht),wt(this,A,Mt),this.canvas.style.visibility="hidden";const[Wt,Gt]=this.parentDimensions;this.width=At/Wt,this.height=Ot/Gt,this.fixAndSetPosition(),E(this,b)&&bt(this,ct,mn).call(this,At,Ot),bt(this,K,ge).call(this),bt(this,it,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(At,Ot,Ht){var mt,yt,Et;if(At instanceof r.InkAnnotationElement)return null;const Mt=super.deserialize(At,Ot,Ht);Mt.thickness=At.thickness,Mt.color=i.Util.makeHexColor(...At.color),Mt.opacity=At.opacity;const[Wt,Gt]=Mt.pageDimensions,Qt=Mt.width*Wt,Ft=Mt.height*Gt,Jt=Mt.parentScale,$t=At.thickness/2;wt(Mt,b,!0),wt(Mt,R,Math.round(Qt)),wt(Mt,A,Math.round(Ft));const{paths:ot,rect:T,rotation:q}=At;for(let{bezier:Pt}of ot){Pt=bt(mt=Rt,It,Jn).call(mt,Pt,T,q);const Lt=[];Mt.paths.push(Lt);let Dt=Jt*(Pt[0]-$t),Yt=Jt*(Pt[1]-$t);for(let jt=2,qt=Pt.length;jt<qt;jt+=6){const Kt=Jt*(Pt[jt]-$t),Zt=Jt*(Pt[jt+1]-$t),ee=Jt*(Pt[jt+2]-$t),re=Jt*(Pt[jt+3]-$t),se=Jt*(Pt[jt+4]-$t),ae=Jt*(Pt[jt+5]-$t);Lt.push([[Dt,Yt],[Kt,Zt],[ee,re],[se,ae]]),Dt=se,Yt=ae}const Bt=bt(this,rt,Kn).call(this,Lt);Mt.bezierPath2D.push(Bt)}const lt=bt(yt=Mt,Nt,bn).call(yt);return wt(Mt,l,Math.max(s.AnnotationEditor.MIN_SIZE,lt[2]-lt[0])),wt(Mt,u,Math.max(s.AnnotationEditor.MIN_SIZE,lt[3]-lt[1])),bt(Et=Mt,ct,mn).call(Et,Qt,Ft),Mt}serialize(){if(this.isEmpty())return null;const At=this.getRect(0,0),Ot=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:Ot,thickness:this.thickness,opacity:this.opacity,paths:bt(this,Ut,Zn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,At),pageIndex:this.pageIndex,rect:At,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};u=new WeakMap,l=new WeakMap,_=new WeakMap,w=new WeakMap,d=new WeakMap,S=new WeakMap,f=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,P=new WeakMap,R=new WeakMap,A=new WeakMap,F=new WeakMap,U=new WeakSet,Un=function(At){const Ot=this.thickness;this.addCommands({cmd:()=>{this.thickness=At,bt(this,gt,me).call(this)},undo:()=>{this.thickness=Ot,bt(this,gt,me).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},x=new WeakSet,zn=function(At){const Ot=this.color;this.addCommands({cmd:()=>{this.color=At,bt(this,it,le).call(this)},undo:()=>{this.color=Ot,bt(this,it,le).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},H=new WeakSet,$n=function(At){At/=100;const Ot=this.opacity;this.addCommands({cmd:()=>{this.opacity=At,bt(this,it,le).call(this)},undo:()=>{this.opacity=Ot,bt(this,it,le).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Hn=function(){const{parentRotation:At,parentDimensions:[Ot,Ht]}=this;switch(At){case 90:return[0,Ht,Ht,Ot];case 180:return[Ot,Ht,Ot,Ht];case 270:return[Ot,0,Ht,Ot];default:return[0,0,Ot,Ht]}},et=new WeakSet,fn=function(){const{ctx:At,color:Ot,opacity:Ht,thickness:Mt,parentScale:Wt,scaleFactor:Gt}=this;At.lineWidth=Mt*Wt/Gt,At.lineCap="round",At.lineJoin="round",At.miterLimit=10,At.strokeStyle=`${Ot}${(0,h.opacityToHex)(Ht)}`},at=new WeakSet,Wn=function(At,Ot){this.canvas.addEventListener("contextmenu",a.noContextMenu),this.canvas.addEventListener("pointerleave",E(this,w)),this.canvas.addEventListener("pointermove",E(this,_)),this.canvas.addEventListener("pointerup",E(this,d)),this.canvas.removeEventListener("pointerdown",E(this,S)),this.isEditing=!0,E(this,k)||(wt(this,k,!0),bt(this,K,ge).call(this),this.thickness||(this.thickness=Rt._defaultThickness),this.color||(this.color=Rt._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Rt._defaultOpacity)),this.currentPath.push([At,Ot]),wt(this,m,!1),bt(this,et,fn).call(this),wt(this,F,()=>{bt(this,v,qn).call(this),E(this,F)&&window.requestAnimationFrame(E(this,F))}),window.requestAnimationFrame(E(this,F))},dt=new WeakSet,pn=function(At,Ot){const[Ht,Mt]=this.currentPath.at(-1);if(this.currentPath.length>1&&At===Ht&&Ot===Mt)return;const Wt=this.currentPath;let Gt=E(this,f);if(Wt.push([At,Ot]),wt(this,m,!0),Wt.length<=2){Gt.moveTo(...Wt[0]),Gt.lineTo(At,Ot);return}Wt.length===3&&(wt(this,f,Gt=new Path2D),Gt.moveTo(...Wt[0])),bt(this,I,Xn).call(this,Gt,...Wt.at(-3),...Wt.at(-2),At,Ot)},ut=new WeakSet,Vn=function(){if(this.currentPath.length===0)return;const At=this.currentPath.at(-1);E(this,f).lineTo(...At)},B=new WeakSet,Gn=function(At,Ot){wt(this,F,null),At=Math.min(Math.max(At,0),this.canvas.width),Ot=Math.min(Math.max(Ot,0),this.canvas.height),bt(this,dt,pn).call(this,At,Ot),bt(this,ut,Vn).call(this);let Ht;if(this.currentPath.length!==1)Ht=bt(this,W,Yn).call(this);else{const Ft=[At,Ot];Ht=[[Ft,Ft.slice(),Ft.slice(),Ft]]}const Mt=E(this,f),Wt=this.currentPath;this.currentPath=[],wt(this,f,new Path2D);const Gt=()=>{this.allRawPaths.push(Wt),this.paths.push(Ht),this.bezierPath2D.push(Mt),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(bt(this,z,Ie).call(this),bt(this,O,Me).call(this)),bt(this,gt,me).call(this))};this.addCommands({cmd:Gt,undo:Qt,mustExec:!0})},v=new WeakSet,qn=function(){if(!E(this,m))return;wt(this,m,!1);const At=Math.ceil(this.thickness*this.parentScale),Ot=this.currentPath.slice(-3),Ht=Ot.map(Gt=>Gt[0]),Mt=Ot.map(Gt=>Gt[1]);Math.min(...Ht)-At,Math.max(...Ht)+At,Math.min(...Mt)-At,Math.max(...Mt)+At;const{ctx:Wt}=this;Wt.save(),Wt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Gt of this.bezierPath2D)Wt.stroke(Gt);Wt.stroke(E(this,f)),Wt.restore()},I=new WeakSet,Xn=function(At,Ot,Ht,Mt,Wt,Gt,Qt){const Ft=(Ot+Mt)/2,Jt=(Ht+Wt)/2,$t=(Mt+Gt)/2,ot=(Wt+Qt)/2;At.bezierCurveTo(Ft+2*(Mt-Ft)/3,Jt+2*(Wt-Jt)/3,$t+2*(Mt-$t)/3,ot+2*(Wt-ot)/3,$t,ot)},W=new WeakSet,Yn=function(){const At=this.currentPath;if(At.length<=2)return[[At[0],At[0],At.at(-1),At.at(-1)]];const Ot=[];let Ht,[Mt,Wt]=At[0];for(Ht=1;Ht<At.length-2;Ht++){const[T,q]=At[Ht],[lt,mt]=At[Ht+1],yt=(T+lt)/2,Et=(q+mt)/2,Pt=[Mt+2*(T-Mt)/3,Wt+2*(q-Wt)/3],Lt=[yt+2*(T-yt)/3,Et+2*(q-Et)/3];Ot.push([[Mt,Wt],Pt,Lt,[yt,Et]]),[Mt,Wt]=[yt,Et]}const[Gt,Qt]=At[Ht],[Ft,Jt]=At[Ht+1],$t=[Mt+2*(Gt-Mt)/3,Wt+2*(Qt-Wt)/3],ot=[Ft+2*(Gt-Ft)/3,Jt+2*(Qt-Jt)/3];return Ot.push([[Mt,Wt],$t,ot,[Ft,Jt]]),Ot},it=new WeakSet,le=function(){if(this.isEmpty()){bt(this,J,De).call(this);return}bt(this,et,fn).call(this);const{canvas:At,ctx:Ot}=this;Ot.setTransform(1,0,0,1,0,0),Ot.clearRect(0,0,At.width,At.height),bt(this,J,De).call(this);for(const Ht of this.bezierPath2D)Ot.stroke(Ht)},j=new WeakSet,gn=function(At){this.canvas.removeEventListener("pointerleave",E(this,w)),this.canvas.removeEventListener("pointermove",E(this,_)),this.canvas.removeEventListener("pointerup",E(this,d)),this.canvas.addEventListener("pointerdown",E(this,S)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",a.noContextMenu)},10),bt(this,B,Gn).call(this,At.offsetX,At.offsetY),this.addToAnnotationStorage(),this.setInBackground()},z=new WeakSet,Ie=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(At=>{var Ot;return(Ot=this.canvas)==null?void 0:Ot.setAttribute("aria-label",At)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},O=new WeakSet,Me=function(){wt(this,P,new ResizeObserver(At=>{const Ot=At[0].contentRect;Ot.width&&Ot.height&&this.setDimensions(Ot.width,Ot.height)})),E(this,P).observe(this.div)},K=new WeakSet,ge=function(){if(!E(this,k))return;const[At,Ot]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*At),this.canvas.height=Math.ceil(this.height*Ot),bt(this,J,De).call(this)},ct=new WeakSet,mn=function(At,Ot){const Ht=bt(this,xt,Le).call(this),Mt=(At-Ht)/E(this,l),Wt=(Ot-Ht)/E(this,u);this.scaleFactor=Math.min(Mt,Wt)},J=new WeakSet,De=function(){const At=bt(this,xt,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+At,this.translationY*this.scaleFactor+At)},rt=new WeakSet,Kn=function(At){const Ot=new Path2D;for(let Ht=0,Mt=At.length;Ht<Mt;Ht++){const[Wt,Gt,Qt,Ft]=At[Ht];Ht===0&&Ot.moveTo(...Wt),Ot.bezierCurveTo(Gt[0],Gt[1],Qt[0],Qt[1],Ft[0],Ft[1])}return Ot},Ct=new WeakSet,_n=function(At,Ot,Ht){const[Mt,Wt,Gt,Qt]=Ot;switch(Ht){case 0:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2)At[Ft]+=Mt,At[Ft+1]=Qt-At[Ft+1];break;case 90:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2){const $t=At[Ft];At[Ft]=At[Ft+1]+Mt,At[Ft+1]=$t+Wt}break;case 180:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2)At[Ft]=Gt-At[Ft],At[Ft+1]+=Wt;break;case 270:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2){const $t=At[Ft];At[Ft]=Gt-At[Ft+1],At[Ft+1]=Qt-$t}break;default:throw new Error("Invalid rotation")}return At},It=new WeakSet,Jn=function(At,Ot,Ht){const[Mt,Wt,Gt,Qt]=Ot;switch(Ht){case 0:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2)At[Ft]-=Mt,At[Ft+1]=Qt-At[Ft+1];break;case 90:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2){const $t=At[Ft];At[Ft]=At[Ft+1]-Wt,At[Ft+1]=$t-Mt}break;case 180:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2)At[Ft]=Gt-At[Ft],At[Ft+1]-=Wt;break;case 270:for(let Ft=0,Jt=At.length;Ft<Jt;Ft+=2){const $t=At[Ft];At[Ft]=Qt-At[Ft+1],At[Ft+1]=Gt-$t}break;default:throw new Error("Invalid rotation")}return At},Ut=new WeakSet,Zn=function(At,Ot,Ht,Mt){var Jt,$t;const Wt=[],Gt=this.thickness/2,Qt=At*Ot+Gt,Ft=At*Ht+Gt;for(const ot of this.paths){const T=[],q=[];for(let lt=0,mt=ot.length;lt<mt;lt++){const[yt,Et,Pt,Lt]=ot[lt],Dt=At*yt[0]+Qt,Yt=At*yt[1]+Ft,Bt=At*Et[0]+Qt,jt=At*Et[1]+Ft,qt=At*Pt[0]+Qt,Kt=At*Pt[1]+Ft,Zt=At*Lt[0]+Qt,ee=At*Lt[1]+Ft;lt===0&&(T.push(Dt,Yt),q.push(Dt,Yt)),T.push(Bt,jt,qt,Kt,Zt,ee),q.push(Bt,jt),lt===mt-1&&q.push(Zt,ee)}Wt.push({bezier:bt(Jt=Rt,Ct,_n).call(Jt,T,Mt,this.rotation),points:bt($t=Rt,Ct,_n).call($t,q,Mt,this.rotation)})}return Wt},Nt=new WeakSet,bn=function(){let At=1/0,Ot=-1/0,Ht=1/0,Mt=-1/0;for(const Wt of this.paths)for(const[Gt,Qt,Ft,Jt]of Wt){const $t=i.Util.bezierBoundingBox(...Gt,...Qt,...Ft,...Jt);At=Math.min(At,$t[0]),Ht=Math.min(Ht,$t[1]),Ot=Math.max(Ot,$t[2]),Mt=Math.max(Mt,$t[3])}return[At,Ht,Ot,Mt]},xt=new WeakSet,Le=function(){return E(this,b)?Math.ceil(this.thickness*this.parentScale):0},gt=new WeakSet,me=function(At=!1){if(this.isEmpty())return;if(!E(this,b)){bt(this,it,le).call(this);return}const Ot=bt(this,Nt,bn).call(this),Ht=bt(this,xt,Le).call(this);wt(this,l,Math.max(s.AnnotationEditor.MIN_SIZE,Ot[2]-Ot[0])),wt(this,u,Math.max(s.AnnotationEditor.MIN_SIZE,Ot[3]-Ot[1]));const Mt=Math.ceil(Ht+E(this,l)*this.scaleFactor),Wt=Math.ceil(Ht+E(this,u)*this.scaleFactor),[Gt,Qt]=this.parentDimensions;this.width=Mt/Gt,this.height=Wt/Qt,this.setAspectRatio(Mt,Wt);const Ft=this.translationX,Jt=this.translationY;this.translationX=-Ot[0],this.translationY=-Ot[1],bt(this,K,ge).call(this),bt(this,it,le).call(this),wt(this,R,Mt),wt(this,A,Wt),this.setDims(Mt,Wt);const $t=At?Ht/this.scaleFactor/2:0;this.translate(Ft-this.translationX-$t,Jt-this.translationY-$t)},ht(Rt,rt),ht(Rt,Ct),ht(Rt,It),ie(Rt,"_defaultColor",null),ie(Rt,"_defaultOpacity",1),ie(Rt,"_defaultThickness",1),ie(Rt,"_type","ink");let c=Rt;e.InkEditor=c},(t,e,n)=>{var c,u,l,_,w,d,S,f,b,m,k,Se,R,Ee,F,Ne,M,yn,$,Qn,N,ti,g,vn,ft,Be,st,ei;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var i=n(1),s=n(4),r=n(6),a=n(29);const St=class St extends s.AnnotationEditor{constructor(B){super({...B,name:"stampEditor"});ht(this,k);ht(this,R);ht(this,F);ht(this,M);ht(this,$);ht(this,N);ht(this,g);ht(this,ft);ht(this,st);ht(this,c,null);ht(this,u,null);ht(this,l,null);ht(this,_,null);ht(this,w,null);ht(this,d,null);ht(this,S,null);ht(this,f,null);ht(this,b,!1);ht(this,m,!1);wt(this,_,B.bitmapUrl),wt(this,w,B.bitmapFile)}static initialize(B){s.AnnotationEditor.initialize(B)}static get supportedTypes(){const B=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",B.map(y=>`image/${y}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(B){return this.supportedTypes.includes(B)}static paste(B,y){y.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:B.getAsFile()})}remove(){var B,y;E(this,u)&&(wt(this,c,null),this._uiManager.imageManager.deleteId(E(this,u)),(B=E(this,d))==null||B.remove(),wt(this,d,null),(y=E(this,S))==null||y.disconnect(),wt(this,S,null)),super.remove()}rebuild(){if(!this.parent){E(this,u)&&bt(this,F,Ne).call(this);return}super.rebuild(),this.div!==null&&(E(this,u)&&bt(this,F,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(E(this,l)||E(this,c)||E(this,_)||E(this,w))}get isResizable(){return!0}render(){if(this.div)return this.div;let B,y;if(this.width&&(B=this.x,y=this.y),super.render(),this.div.hidden=!0,E(this,c)?bt(this,M,yn).call(this):bt(this,F,Ne).call(this),this.width){const[v,C]=this.parentDimensions;this.setAt(B*v,y*C,this.width*v,this.height*C)}return this.div}static deserialize(B,y,v){if(B instanceof a.StampAnnotationElement)return null;const C=super.deserialize(B,y,v),{rect:I,bitmapUrl:D,bitmapId:W,isSvg:Q,accessibilityData:it}=B;W&&v.imageManager.isValidId(W)?wt(C,u,W):wt(C,_,D),wt(C,b,Q);const[pt,j]=C.pageDimensions;return C.width=(I[2]-I[0])/pt,C.height=(I[3]-I[1])/j,it&&(C.altTextData=it),C}serialize(B=!1,y=null){if(this.isEmpty())return null;const v={annotationType:i.AnnotationEditorType.STAMP,bitmapId:E(this,u),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:E(this,b),structTreeParentId:this._structTreeParentId};if(B)return v.bitmapUrl=bt(this,ft,Be).call(this,!0),v.accessibilityData=this.altTextData,v;const{decorative:C,altText:I}=this.altTextData;if(!C&&I&&(v.accessibilityData={type:"Figure",alt:I}),y===null)return v;y.stamps||(y.stamps=new Map);const D=E(this,b)?(v.rect[2]-v.rect[0])*(v.rect[3]-v.rect[1]):null;if(!y.stamps.has(E(this,u)))y.stamps.set(E(this,u),{area:D,serialized:v}),v.bitmap=bt(this,ft,Be).call(this,!1);else if(E(this,b)){const W=y.stamps.get(E(this,u));D>W.area&&(W.area=D,W.serialized.bitmap.close(),W.serialized.bitmap=bt(this,ft,Be).call(this,!1))}return v}};c=new WeakMap,u=new WeakMap,l=new WeakMap,_=new WeakMap,w=new WeakMap,d=new WeakMap,S=new WeakMap,f=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakSet,Se=function(B,y=!1){if(!B){this.remove();return}wt(this,c,B.bitmap),y||(wt(this,u,B.id),wt(this,b,B.isSvg)),bt(this,M,yn).call(this)},R=new WeakSet,Ee=function(){wt(this,l,null),this._uiManager.enableWaiting(!1),E(this,d)&&this.div.focus()},F=new WeakSet,Ne=function(){if(E(this,u)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(E(this,u)).then(y=>bt(this,k,Se).call(this,y,!0)).finally(()=>bt(this,R,Ee).call(this));return}if(E(this,_)){const y=E(this,_);wt(this,_,null),this._uiManager.enableWaiting(!0),wt(this,l,this._uiManager.imageManager.getFromUrl(y).then(v=>bt(this,k,Se).call(this,v)).finally(()=>bt(this,R,Ee).call(this)));return}if(E(this,w)){const y=E(this,w);wt(this,w,null),this._uiManager.enableWaiting(!0),wt(this,l,this._uiManager.imageManager.getFromFile(y).then(v=>bt(this,k,Se).call(this,v)).finally(()=>bt(this,R,Ee).call(this)));return}const B=document.createElement("input");B.type="file",B.accept=St.supportedTypesStr,wt(this,l,new Promise(y=>{B.addEventListener("change",async()=>{if(!B.files||B.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const v=await this._uiManager.imageManager.getFromFile(B.files[0]);bt(this,k,Se).call(this,v)}y()}),B.addEventListener("cancel",()=>{this.remove(),y()})}).finally(()=>bt(this,R,Ee).call(this))),B.click()},M=new WeakSet,yn=function(){const{div:B}=this;let{width:y,height:v}=E(this,c);const[C,I]=this.pageDimensions,D=.75;if(this.width)y=this.width*C,v=this.height*I;else if(y>D*C||v>D*I){const pt=Math.min(D*C/y,D*I/v);y*=pt,v*=pt}const[W,Q]=this.parentDimensions;this.setDims(y*W/C,v*Q/I),this._uiManager.enableWaiting(!1);const it=wt(this,d,document.createElement("canvas"));B.append(it),B.hidden=!1,bt(this,g,vn).call(this,y,v),bt(this,st,ei).call(this),E(this,m)||(this.parent.addUndoableEditor(this),wt(this,m,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},$=new WeakSet,Qn=function(B,y){var D;const[v,C]=this.parentDimensions;this.width=B/v,this.height=y/C,this.setDims(B,y),(D=this._initialOptions)!=null&&D.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,E(this,f)!==null&&clearTimeout(E(this,f)),wt(this,f,setTimeout(()=>{wt(this,f,null),bt(this,g,vn).call(this,B,y)},200))},N=new WeakSet,ti=function(B,y){const{width:v,height:C}=E(this,c);let I=v,D=C,W=E(this,c);for(;I>2*B||D>2*y;){const Q=I,it=D;I>2*B&&(I=I>=16384?Math.floor(I/2)-1:Math.ceil(I/2)),D>2*y&&(D=D>=16384?Math.floor(D/2)-1:Math.ceil(D/2));const pt=new OffscreenCanvas(I,D);pt.getContext("2d").drawImage(W,0,0,Q,it,0,0,I,D),W=pt.transferToImageBitmap()}return W},g=new WeakSet,vn=function(B,y){B=Math.ceil(B),y=Math.ceil(y);const v=E(this,d);if(!v||v.width===B&&v.height===y)return;v.width=B,v.height=y;const C=E(this,b)?E(this,c):bt(this,N,ti).call(this,B,y),I=v.getContext("2d");I.filter=this._uiManager.hcmFilter,I.drawImage(C,0,0,C.width,C.height,0,0,B,y)},ft=new WeakSet,Be=function(B){if(B){if(E(this,b)){const C=this._uiManager.imageManager.getSvgUrl(E(this,u));if(C)return C}const y=document.createElement("canvas");return{width:y.width,height:y.height}=E(this,c),y.getContext("2d").drawImage(E(this,c),0,0),y.toDataURL()}if(E(this,b)){const[y,v]=this.pageDimensions,C=Math.round(this.width*y*r.PixelsPerInch.PDF_TO_CSS_UNITS),I=Math.round(this.height*v*r.PixelsPerInch.PDF_TO_CSS_UNITS),D=new OffscreenCanvas(C,I);return D.getContext("2d").drawImage(E(this,c),0,0,E(this,c).width,E(this,c).height,0,0,C,I),D.transferToImageBitmap()}return structuredClone(E(this,c))},st=new WeakSet,ei=function(){wt(this,S,new ResizeObserver(B=>{const y=B[0].contentRect;y.width&&y.height&&bt(this,$,Qn).call(this,y.width,y.height)})),E(this,S).observe(this.div)},ie(St,"_type","stamp");let h=St;e.StampEditor=h}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return h.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return c.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),r=__w_pdfjs_require__(27),a=__w_pdfjs_require__(5),h=__w_pdfjs_require__(29),c=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(t,e){(function(n,i){i()})(commonjsGlobal,function(){function n(u,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function i(u,l,_){var w=new XMLHttpRequest;w.open("GET",u),w.responseType="blob",w.onload=function(){c(w.response,l,_)},w.onerror=function(){console.error("could not download file")},w.send()}function s(u){var l=new XMLHttpRequest;l.open("HEAD",u,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,h=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(u,l,_){var w=a.URL||a.webkitURL,d=document.createElement("a");l=l||u.name||"download",d.download=l,d.rel="noopener",typeof u=="string"?(d.href=u,d.origin===location.origin?r(d):s(d.href)?i(u,l,_):r(d,d.target="_blank")):(d.href=w.createObjectURL(u),setTimeout(function(){w.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(u,l,_){if(l=l||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,_),l);else if(s(u))i(u,l,_);else{var w=document.createElement("a");w.href=u,w.target="_blank",setTimeout(function(){r(w)})}}:function(u,l,_,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof u=="string")return i(u,l,_);var d=u.type==="application/octet-stream",S=/constructor/i.test(a.HTMLElement)||a.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||d&&S||h)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var P=b.result;P=f?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=P:location=P,w=null},b.readAsDataURL(u)}else{var m=a.URL||a.webkitURL,k=m.createObjectURL(u);w?w.location=k:location.href=k,w=null,setTimeout(function(){m.revokeObjectURL(k)},4e4)}});a.saveAs=c.saveAs=c,t.exports=c})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function generateCanvas(t,e,n,i=!1,s=!1,r=!1){const{width:a,height:h,words:c,compression:u}=t,l=document.createElement("canvas"),_=l.getContext("2d");let w=1;i&&(w=s?1:Math.max(2,window.devicePixelRatio||1)),l.width=(n?e.width:a)*w,l.height=(n?e.height:h)*w,i&&w>1&&(l.style.width=(n?e.width:a)+"px",l.style.height=(n?e.height:h)+"px"),w>1&&_.scale(w,w),_.imageSmoothingEnabled=!0,_.imageSmoothingQuality=s?"medium":"high",_.drawImage(e,0,0,n?e.width:a,n?e.height:h),c.trim().length>0&&addWaterMark(t,_,w);let d="image/jpeg",S=u;return i&&(r?(d="image/jpeg",S=1):s?(d="image/jpeg",S=.8):(d="image/png",S=1)),{src:l.toDataURL(d,S),newCanvas:l}}function addWaterMark(t,e,n=1){const{width:i,height:s,words:r,fontSize:a,color:h,rotate:c,row:u,col:l,startX:_,startY:w,offsetX:d,offsetY:S,fontFamily:f}=t;e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(0,0,i,s),e.rotate(parseInt(c.toString())*Math.PI/180),e.fillStyle=h,e.font=`normal ${a}px ${f}`,Array.from({length:u}).forEach((b,m)=>{Array.from({length:l}).forEach((k,P)=>{if(r.includes(`
`))multipleWords(e,m,P,r,a,_.toString(),w.toString(),d,S);else{const R=+_+P*(r.length*a+d),A=+w+m*(S+a);e.fillText(r,R,A)}})})}function multipleWords(t,e,n,i,s,r,a,h,c){const u=i.split(`
`),l=u.length,_=Math.max(...u.map(w=>w.length));for(let w=0;w<l;w++){const d=+r+n*(_*s+h)+(_-u[w].length)/2*s,S=+a+e*c+s*1.3*(w+l*e);t.fillText(u[w],d,S)}}function downloadImage(t,e,n){const i=new Image;i.src=t,i.onload=()=>{const s=document.createElement("canvas");s.width=+e.width,s.height=+e.height;const r=s.getContext("2d");r==null||r.drawImage(i,0,0);const a=s.toDataURL("image/png"),h=dataURLToBlob(a),c=document.createElement("a");c.href=URL.createObjectURL(h),c.download=n,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}function dataURLToBlob(t){const e=t.split(";base64,"),n=e[0].split(":")[1],i=window.atob(e[1]),s=i.length,r=new Uint8Array(s);for(let a=0;a<s;++a)r[a]=i.charCodeAt(a);return new Blob([r],{type:n})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;async function loadPdfPreview(t,e,n,i,s){pdfExports.getDocument({url:t,disableRange:!0}).promise.then(a=>{n.value&&(n.value.innerHTML="");const h=a.numPages;let c=0;for(let u=1;u<=h;u++)a.getPage(u).then(l=>{const _=document.createElement("canvas"),w=_.getContext("2d"),d=1,S=l.getViewport({scale:d});_.width=S.width,_.height=S.height,e.width=S.width,e.height=S.height,w.imageSmoothingEnabled=!0,w.imageSmoothingQuality="medium";const f={canvasContext:w,viewport:S};l.render(f).promise.then(function(){const{newCanvas:m}=generateCanvas(e,_,s,!0,!0);n.value.appendChild(m),c++,c===h&&(i.value=!1)})})})}async function img2PdfWithData(t,e,n){try{const{PDFDocument:i}=await __vitePreload(()=>import("./index-6a9bec72.js"),[],import.meta.url),s=await i.create();for(let h=0;h<n.length;h++){const{src:c,width:u,height:l}=n[h],_=c.split(",")[1];if(!_)continue;const w=Uint8Array.from(atob(_),f=>f.charCodeAt(0));let d;c.startsWith("data:image/jpeg")?d=await s.embedJpg(w):d=await s.embedPng(w),s.addPage([d.width,d.height]).drawImage(d,{x:0,y:0,width:d.width,height:d.height})}const r=await s.save({useObjectStreams:!1,addDefaultPage:!1,objectsPerTick:50}),a=new Blob([r],{type:"application/pdf"});FileSaver_minExports.saveAs(a,t),e.value=!1}catch(i){throw console.error("生成PDF失败:",i),e.value=!1,i}}const zhTranslations={title:"水印工具",description:"为图片/PDF添加水印",noServerSafe:"文件不会上传，安全可靠",load:"加载文件",loadBatch:"批量加载",addMoreFiles:"添加更多文件",download:"下载",downloadAll:"批量下载",words:"水印文字",fontFamily:"字体",width:"图片宽度",height:"图片高度",fontSize:"文字大小",color:"颜色",rotate:"旋转角度",row:"行数",col:"列数",startX:"起始X坐标",startY:"起始Y坐标",offsetX:"X轴偏移",offsetY:"Y轴偏移",compression:"压缩质量",saveConfig:"保存配置",tooltips:{words:"水印文字内容，使用回车键换行",fontFamily:"水印字体",width:"图片宽度，对PDF无效",height:"图片高度，对PDF无效",fontSize:"水印文字大小",color:"水印颜色，rgba格式，最后一个参数是透明度",rotate:"水印旋转角度",row:"水印行数",col:"水印列数",startX:"第一个水印的X轴位置",startY:"第一个水印的Y轴位置",offsetX:"水印之间的X轴偏移量",offsetY:"水印之间的Y轴偏移量",compression:"压缩级别",saveConfig:"保存配置供下次使用"},compressionTitle:"数值越低，压缩越高",opacity:"透明度",originalProject:"原始项目",forkWithEnhancements:"新增功能的分叉",clear:"清空",processing:"处理中...",pages:"页",pdfDocument:"PDF 文档",batchEmptyHint:'点击"{loadBatch}"选择多张图片或PDF文件进行批量处理'},enTranslations={title:"Watermark",description:"Add watermark to image/pdf",noServerSafe:"No server, so safe",load:"Load",loadBatch:"Batch Load",addMoreFiles:"Add More Files",download:"Download",downloadAll:"Download All",words:"Words",fontFamily:"Font",width:"Width",height:"Height",fontSize:"Font Size",color:"Color",rotate:"Rotate",row:"Row",col:"Col",startX:"Start X",startY:"Start Y",offsetX:"Offset X",offsetY:"Offset Y",compression:"Compression",saveConfig:"Save Config",tooltips:{words:"The words of watermark, use enter key to wrap lines",fontFamily:"The font family for the watermark text",width:"The width of image, pdf is not useful",height:"The height of image, pdf is not useful",fontSize:"The font size of the watermark",color:"The color of the watermark, rgba is three-primary color, last parameter is opacity",rotate:"The rotation angle of watermark",row:"The rows of watermarks",col:"The columns of watermarks",startX:"The position along the X axis of first watermark",startY:"The position along the Y axis of first watermark",offsetX:"The offset along the X axis between two watermarks",offsetY:"The offset along the Y axis between two watermarks",compression:"The level for compression",saveConfig:"Save the config for next use"},compressionTitle:"Lower the Value, Better the Compression",opacity:"Opacity",originalProject:"Original Project",forkWithEnhancements:"Fork with Enhancements",clear:"Clear",processing:"Processing...",pages:"pages",pdfDocument:"PDF Document",batchEmptyHint:'Click "{loadBatch}" to select multiple images or PDF files for batch processing'},currentLocale=ref("zh"),translations=ref(zhTranslations);function detectBrowserLanguage(){var e;return(navigator.language||((e=navigator.languages)==null?void 0:e[0])||"en").startsWith("zh")?"zh":"en"}const detectedLang=detectBrowserLanguage();currentLocale.value=detectedLang;translations.value=detectedLang==="zh"?zhTranslations:enTranslations;function useI18n(){return{t:computed(()=>translations.value),locale:computed(()=>currentLocale.value)}}var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(i,s,r){function a(u,l){if(!s[u]){if(!i[u]){var _=typeof commonjsRequire=="function"&&commonjsRequire;if(!l&&_)return _(u,!0);if(h)return h(u,!0);var w=new Error("Cannot find module '"+u+"'");throw w.code="MODULE_NOT_FOUND",w}var d=s[u]={exports:{}};i[u][0].call(d.exports,function(S){var f=i[u][1][S];return a(f||S)},d,d.exports,n,i,s,r)}return s[u].exports}for(var h=typeof commonjsRequire=="function"&&commonjsRequire,c=0;c<r.length;c++)a(r[c]);return a}({1:[function(n,i,s){var r=n("./utils"),a=n("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,l,_,w,d,S,f,b=[],m=0,k=c.length,P=k,R=r.getTypeOf(c)!=="string";m<c.length;)P=k-m,_=R?(u=c[m++],l=m<k?c[m++]:0,m<k?c[m++]:0):(u=c.charCodeAt(m++),l=m<k?c.charCodeAt(m++):0,m<k?c.charCodeAt(m++):0),w=u>>2,d=(3&u)<<4|l>>4,S=1<P?(15&l)<<2|_>>6:64,f=2<P?63&_:64,b.push(h.charAt(w)+h.charAt(d)+h.charAt(S)+h.charAt(f));return b.join("")},s.decode=function(c){var u,l,_,w,d,S,f=0,b=0,m="data:";if(c.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var k,P=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===h.charAt(64)&&P--,c.charAt(c.length-2)===h.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=a.uint8array?new Uint8Array(0|P):new Array(0|P);f<c.length;)u=h.indexOf(c.charAt(f++))<<2|(w=h.indexOf(c.charAt(f++)))>>4,l=(15&w)<<4|(d=h.indexOf(c.charAt(f++)))>>2,_=(3&d)<<6|(S=h.indexOf(c.charAt(f++))),k[b++]=u,d!==64&&(k[b++]=l),S!==64&&(k[b++]=_);return k}},{"./support":30,"./utils":32}],2:[function(n,i,s){var r=n("./external"),a=n("./stream/DataWorker"),h=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(l,_,w,d,S){this.compressedSize=l,this.uncompressedSize=_,this.crc32=w,this.compression=d,this.compressedContent=S}u.prototype={getContentWorker:function(){var l=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),_=this;return l.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(l,_,w){return l.pipe(new h).pipe(new c("uncompressedSize")).pipe(_.compressWorker(w)).pipe(new c("compressedSize")).withStreamInfo("compression",_)},i.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,s){var r=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,s){var r=n("./utils"),a=function(){for(var h,c=[],u=0;u<256;u++){h=u;for(var l=0;l<8;l++)h=1&h?3988292384^h>>>1:h>>>1;c[u]=h}return c}();i.exports=function(h,c){return h!==void 0&&h.length?r.getTypeOf(h)!=="string"?function(u,l,_,w){var d=a,S=w+_;u^=-1;for(var f=w;f<S;f++)u=u>>>8^d[255&(u^l[f])];return-1^u}(0|c,h,h.length,0):function(u,l,_,w){var d=a,S=w+_;u^=-1;for(var f=w;f<S;f++)u=u>>>8^d[255&(u^l.charCodeAt(f))];return-1^u}(0|c,h,h.length,0):0}},{"./utils":32}],5:[function(n,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,i,s){var r=null;r=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:r}},{lie:37}],7:[function(n,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),h=n("./utils"),c=n("./stream/GenericWorker"),u=r?"uint8array":"array";function l(_,w){c.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=w,this.meta={}}s.magic="\b\0",h.inherits(l,c),l.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(u,_.data),!1)},l.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(w){_.push({data:w,meta:_.meta})}},s.compressWorker=function(_){return new l("Deflate",_)},s.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,s){function r(d,S){var f,b="";for(f=0;f<S;f++)b+=String.fromCharCode(255&d),d>>>=8;return b}function a(d,S,f,b,m,k){var P,R,A=d.file,F=d.compression,U=k!==u.utf8encode,M=h.transformTo("string",k(A.name)),x=h.transformTo("string",u.utf8encode(A.name)),$=A.comment,H=h.transformTo("string",k($)),N=h.transformTo("string",u.utf8encode($)),X=x.length!==A.name.length,g=N.length!==$.length,et="",ft="",at="",st=A.dir,dt=A.date,St={crc32:0,compressedSize:0,uncompressedSize:0};S&&!f||(St.crc32=d.crc32,St.compressedSize=d.compressedSize,St.uncompressedSize=d.uncompressedSize);var ut=0;S&&(ut|=8),U||!X&&!g||(ut|=2048);var Y=0,B=0;st&&(Y|=16),m==="UNIX"?(B=798,Y|=function(v,C){var I=v;return v||(I=C?16893:33204),(65535&I)<<16}(A.unixPermissions,st)):(B=20,Y|=function(v){return 63&(v||0)}(A.dosPermissions)),P=dt.getUTCHours(),P<<=6,P|=dt.getUTCMinutes(),P<<=5,P|=dt.getUTCSeconds()/2,R=dt.getUTCFullYear()-1980,R<<=4,R|=dt.getUTCMonth()+1,R<<=5,R|=dt.getUTCDate(),X&&(ft=r(1,1)+r(l(M),4)+x,et+="up"+r(ft.length,2)+ft),g&&(at=r(1,1)+r(l(H),4)+N,et+="uc"+r(at.length,2)+at);var y="";return y+=`
\0`,y+=r(ut,2),y+=F.magic,y+=r(P,2),y+=r(R,2),y+=r(St.crc32,4),y+=r(St.compressedSize,4),y+=r(St.uncompressedSize,4),y+=r(M.length,2),y+=r(et.length,2),{fileRecord:_.LOCAL_FILE_HEADER+y+M+et,dirRecord:_.CENTRAL_FILE_HEADER+r(B,2)+y+r(H.length,2)+"\0\0\0\0"+r(Y,4)+r(b,4)+M+et+H}}var h=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),l=n("../crc32"),_=n("../signature");function w(d,S,f,b){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=f,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(w,c),w.prototype.push=function(d){var S=d.meta.percent||0,f=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,c.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:f?(S+100*(f-b-1))/f:100}}))},w.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var S=this.streamFiles&&!d.file.dir;if(S){var f=a(d,S,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(d){this.accumulate=!1;var S=this.streamFiles&&!d.file.dir,f=a(d,S,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),S)this.push({data:function(b){return _.DATA_DESCRIPTOR+r(b.crc32,4)+r(b.compressedSize,4)+r(b.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var d=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var f=this.bytesWritten-d,b=function(m,k,P,R,A){var F=h.transformTo("string",A(R));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(m,2)+r(m,2)+r(k,4)+r(P,4)+r(F.length,2)+F}(this.dirRecords.length,f,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(d){this._sources.push(d);var S=this;return d.on("data",function(f){S.processChunk(f)}),d.on("end",function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()}),d.on("error",function(f){S.error(f)}),this},w.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(d){var S=this._sources;if(!c.prototype.error.call(this,d))return!1;for(var f=0;f<S.length;f++)try{S[f].error(d)}catch{}return!0},w.prototype.lock=function(){c.prototype.lock.call(this);for(var d=this._sources,S=0;S<d.length;S++)d[S].lock()},i.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,s){var r=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(h,c,u){var l=new a(c.streamFiles,u,c.platform,c.encodeFileName),_=0;try{h.forEach(function(w,d){_++;var S=function(k,P){var R=k||P,A=r[R];if(!A)throw new Error(R+" is not a valid compression method !");return A}(d.options.compression,c.compression),f=d.options.compressionOptions||c.compressionOptions||{},b=d.dir,m=d.date;d._compressWorker(S,f).withStreamInfo("file",{name:w,dir:b,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=_}catch(w){l.error(w)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,s){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new r;for(var h in this)typeof this[h]!="function"&&(a[h]=this[h]);return a}}(r.prototype=n("./object")).loadAsync=n("./load"),r.support=n("./support"),r.defaults=n("./defaults"),r.version="3.10.1",r.loadAsync=function(a,h){return new r().loadAsync(a,h)},r.external=n("./external"),i.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,s){var r=n("./utils"),a=n("./external"),h=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function _(w){return new a.Promise(function(d,S){var f=w.decompressed.getContentWorker().pipe(new u);f.on("error",function(b){S(b)}).on("end",function(){f.streamInfo.crc32!==w.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}i.exports=function(w,d){var S=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),l.isNode&&l.isStream(w)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",w,!0,d.optimizedBinaryString,d.base64).then(function(f){var b=new c(d);return b.load(f),b}).then(function(f){var b=[a.Promise.resolve(f)],m=f.files;if(d.checkCRC32)for(var k=0;k<m.length;k++)b.push(_(m[k]));return a.Promise.all(b)}).then(function(f){for(var b=f.shift(),m=b.files,k=0;k<m.length;k++){var P=m[k],R=P.fileNameStr,A=r.resolve(P.fileNameStr);S.file(A,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:d.createFolders}),P.dir||(S.file(A).unsafeOriginalName=R)}return b.zipComment.length&&(S.comment=b.zipComment),S})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,s){var r=n("../utils"),a=n("../stream/GenericWorker");function h(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}r.inherits(h,a),h.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(l){u.push({data:l,meta:{percent:0}})}).on("error",function(l){u.isPaused?this.generatedError=l:u.error(l)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},h.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,s){var r=n("readable-stream").Readable;function a(h,c,u){r.call(this,c),this._helper=h;var l=this;h.on("data",function(_,w){l.push(_)||l._helper.pause(),u&&u(w)}).on("error",function(_){l.emit("error",_)}).on("end",function(){l.push(null)})}n("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,a);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,a)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var a=new Buffer(r);return a.fill(0),a},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(n,i,s){function r(A,F,U){var M,x=h.getTypeOf(F),$=h.extend(U||{},l);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(A=m(A)),$.createFolders&&(M=b(A))&&k.call(this,M,!0);var H=x==="string"&&$.binary===!1&&$.base64===!1;U&&U.binary!==void 0||($.binary=!H),(F instanceof _&&F.uncompressedSize===0||$.dir||!F||F.length===0)&&($.base64=!1,$.binary=!0,F="",$.compression="STORE",x="string");var N=null;N=F instanceof _||F instanceof c?F:S.isNode&&S.isStream(F)?new f(A,F):h.prepareContent(A,F,$.binary,$.optimizedBinaryString,$.base64);var X=new w(A,N,$);this.files[A]=X}var a=n("./utf8"),h=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),l=n("./defaults"),_=n("./compressedObject"),w=n("./zipObject"),d=n("./generate"),S=n("./nodejsUtils"),f=n("./nodejs/NodejsStreamInputAdapter"),b=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var F=A.lastIndexOf("/");return 0<F?A.substring(0,F):""},m=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},k=function(A,F){return F=F!==void 0?F:l.createFolders,A=m(A),this.files[A]||r.call(this,A,null,{dir:!0,createFolders:F}),this.files[A]};function P(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var F,U,M;for(F in this.files)M=this.files[F],(U=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&A(U,M)},filter:function(A){var F=[];return this.forEach(function(U,M){A(U,M)&&F.push(M)}),F},file:function(A,F,U){if(arguments.length!==1)return A=this.root+A,r.call(this,A,F,U),this;if(P(A)){var M=A;return this.filter(function($,H){return!H.dir&&M.test($)})}var x=this.files[this.root+A];return x&&!x.dir?x:null},folder:function(A){if(!A)return this;if(P(A))return this.filter(function(x,$){return $.dir&&A.test(x)});var F=this.root+A,U=k.call(this,F),M=this.clone();return M.root=U.name,M},remove:function(A){A=this.root+A;var F=this.files[A];if(F||(A.slice(-1)!=="/"&&(A+="/"),F=this.files[A]),F&&!F.dir)delete this.files[A];else for(var U=this.filter(function(x,$){return $.name.slice(0,A.length)===A}),M=0;M<U.length;M++)delete this.files[U[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var F,U={};try{if((U=h.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");h.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var M=U.comment||this.comment||"";F=d.generateWorker(this,U,M)}catch(x){(F=new c("error")).error(x)}return new u(F,U.type||"string",U.mimeType)},generateAsync:function(A,F){return this.generateInternalStream(A).accumulate(F)},generateNodeStream:function(A,F){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(F)}};i.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,s){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,s){var r=n("./DataReader");function a(h){r.call(this,h);for(var c=0;c<this.data.length;c++)h[c]=255&h[c]}n("../utils").inherits(a,r),a.prototype.byteAt=function(h){return this.data[this.zero+h]},a.prototype.lastIndexOfSignature=function(h){for(var c=h.charCodeAt(0),u=h.charCodeAt(1),l=h.charCodeAt(2),_=h.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===c&&this.data[w+1]===u&&this.data[w+2]===l&&this.data[w+3]===_)return w-this.zero;return-1},a.prototype.readAndCheckSignature=function(h){var c=h.charCodeAt(0),u=h.charCodeAt(1),l=h.charCodeAt(2),_=h.charCodeAt(3),w=this.readData(4);return c===w[0]&&u===w[1]&&l===w[2]&&_===w[3]},a.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,i,s){var r=n("../utils");function a(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var c,u=0;for(this.checkOffset(h),c=this.index+h-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=h,u},readString:function(h){return r.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},i.exports=a},{"../utils":32}],19:[function(n,i,s){var r=n("./Uint8ArrayReader");function a(h){r.call(this,h)}n("../utils").inherits(a,r),a.prototype.readData=function(h){this.checkOffset(h);var c=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,s){var r=n("./DataReader");function a(h){r.call(this,h)}n("../utils").inherits(a,r),a.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},a.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},a.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},a.prototype.readData=function(h){this.checkOffset(h);var c=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,i,s){var r=n("./ArrayReader");function a(h){r.call(this,h)}n("../utils").inherits(a,r),a.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,s){var r=n("../utils"),a=n("../support"),h=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");i.exports=function(_){var w=r.getTypeOf(_);return r.checkSupport(w),w!=="string"||a.uint8array?w==="nodebuffer"?new u(_):a.uint8array?new l(r.transformTo("uint8array",_)):new h(r.transformTo("array",_)):new c(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,s){var r=n("./GenericWorker"),a=n("../utils");function h(c){r.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(h,r),h.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},i.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,s){var r=n("./GenericWorker"),a=n("../crc32");function h(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(h,r),h.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},i.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,s){var r=n("../utils"),a=n("./GenericWorker");function h(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}r.inherits(h,a),h.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},i.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,s){var r=n("../utils"),a=n("./GenericWorker");function h(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(l){u.dataIsReady=!0,u.data=l,u.max=l&&l.length||0,u.type=r.getTypeOf(l),u.isPaused||u._tickAndRepeat()},function(l){u.error(l)})}r.inherits(h,a),h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,s){function r(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,h){return this._listeners[a].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,h){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,h)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var h=this;return a.on("data",function(c){h.processChunk(c)}),a.on("end",function(){h.end()}),a.on("error",function(c){h.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,h){return this.extraStreamInfo[a]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=r},{}],29:[function(n,i,s){var r=n("../utils"),a=n("./ConvertWorker"),h=n("./GenericWorker"),c=n("../base64"),u=n("../support"),l=n("../external"),_=null;if(u.nodestream)try{_=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(S,f){return new l.Promise(function(b,m){var k=[],P=S._internalType,R=S._outputType,A=S._mimeType;S.on("data",function(F,U){k.push(F),f&&f(U)}).on("error",function(F){k=[],m(F)}).on("end",function(){try{var F=function(U,M,x){switch(U){case"blob":return r.newBlob(r.transformTo("arraybuffer",M),x);case"base64":return c.encode(M);default:return r.transformTo(U,M)}}(R,function(U,M){var x,$=0,H=null,N=0;for(x=0;x<M.length;x++)N+=M[x].length;switch(U){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(H=new Uint8Array(N),x=0;x<M.length;x++)H.set(M[x],$),$+=M[x].length;return H;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+U+"'")}}(P,k),A);b(F)}catch(U){m(U)}k=[]}).resume()})}function d(S,f,b){var m=f;switch(f){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=f,this._mimeType=b,r.checkSupport(m),this._worker=S.pipe(new a(m)),S.lock()}catch(k){this._worker=new h("error"),this._worker.error(k)}}d.prototype={accumulate:function(S){return w(this,S)},on:function(S,f){var b=this;return S==="data"?this._worker.on(S,function(m){f.call(b,m.data,m.meta)}):this._worker.on(S,function(){r.delay(f,arguments,b)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(S){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},S)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var r=new ArrayBuffer(0);try{s.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,s){for(var r=n("./utils"),a=n("./support"),h=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;u[254]=u[254]=1;function _(){c.call(this,"utf-8 decode"),this.leftOver=null}function w(){c.call(this,"utf-8 encode")}s.utf8encode=function(d){return a.nodebuffer?h.newBufferFrom(d,"utf-8"):function(S){var f,b,m,k,P,R=S.length,A=0;for(k=0;k<R;k++)(64512&(b=S.charCodeAt(k)))==55296&&k+1<R&&(64512&(m=S.charCodeAt(k+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),k++),A+=b<128?1:b<2048?2:b<65536?3:4;for(f=a.uint8array?new Uint8Array(A):new Array(A),k=P=0;P<A;k++)(64512&(b=S.charCodeAt(k)))==55296&&k+1<R&&(64512&(m=S.charCodeAt(k+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),k++),b<128?f[P++]=b:(b<2048?f[P++]=192|b>>>6:(b<65536?f[P++]=224|b>>>12:(f[P++]=240|b>>>18,f[P++]=128|b>>>12&63),f[P++]=128|b>>>6&63),f[P++]=128|63&b);return f}(d)},s.utf8decode=function(d){return a.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):function(S){var f,b,m,k,P=S.length,R=new Array(2*P);for(f=b=0;f<P;)if((m=S[f++])<128)R[b++]=m;else if(4<(k=u[m]))R[b++]=65533,f+=k-1;else{for(m&=k===2?31:k===3?15:7;1<k&&f<P;)m=m<<6|63&S[f++],k--;1<k?R[b++]=65533:m<65536?R[b++]=m:(m-=65536,R[b++]=55296|m>>10&1023,R[b++]=56320|1023&m)}return R.length!==b&&(R.subarray?R=R.subarray(0,b):R.length=b),r.applyFromCharCode(R)}(d=r.transformTo(a.uint8array?"uint8array":"array",d))},r.inherits(_,c),_.prototype.processChunk=function(d){var S=r.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var f=S;(S=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),S.set(f,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var b=function(k,P){var R;for((P=P||k.length)>k.length&&(P=k.length),R=P-1;0<=R&&(192&k[R])==128;)R--;return R<0||R===0?P:R+u[k[R]]>P?R:P}(S),m=S;b!==S.length&&(a.uint8array?(m=S.subarray(0,b),this.leftOver=S.subarray(b,S.length)):(m=S.slice(0,b),this.leftOver=S.slice(b,S.length))),this.push({data:s.utf8decode(m),meta:d.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=_,r.inherits(w,c),w.prototype.processChunk=function(d){this.push({data:s.utf8encode(d.data),meta:d.meta})},s.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,s){var r=n("./support"),a=n("./base64"),h=n("./nodejsUtils"),c=n("./external");function u(f){return f}function l(f,b){for(var m=0;m<f.length;++m)b[m]=255&f.charCodeAt(m);return b}n("setimmediate"),s.newBlob=function(f,b){s.checkSupport("blob");try{return new Blob([f],{type:b})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(f),m.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(f,b,m){var k=[],P=0,R=f.length;if(R<=m)return String.fromCharCode.apply(null,f);for(;P<R;)b==="array"||b==="nodebuffer"?k.push(String.fromCharCode.apply(null,f.slice(P,Math.min(P+m,R)))):k.push(String.fromCharCode.apply(null,f.subarray(P,Math.min(P+m,R)))),P+=m;return k.join("")},stringifyByChar:function(f){for(var b="",m=0;m<f.length;m++)b+=String.fromCharCode(f[m]);return b},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function w(f){var b=65536,m=s.getTypeOf(f),k=!0;if(m==="uint8array"?k=_.applyCanBeUsed.uint8array:m==="nodebuffer"&&(k=_.applyCanBeUsed.nodebuffer),k)for(;1<b;)try{return _.stringifyByChunk(f,m,b)}catch{b=Math.floor(b/2)}return _.stringifyByChar(f)}function d(f,b){for(var m=0;m<f.length;m++)b[m]=f[m];return b}s.applyFromCharCode=w;var S={};S.string={string:u,array:function(f){return l(f,new Array(f.length))},arraybuffer:function(f){return S.string.uint8array(f).buffer},uint8array:function(f){return l(f,new Uint8Array(f.length))},nodebuffer:function(f){return l(f,h.allocBuffer(f.length))}},S.array={string:w,array:u,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return h.newBufferFrom(f)}},S.arraybuffer={string:function(f){return w(new Uint8Array(f))},array:function(f){return d(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:u,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return h.newBufferFrom(new Uint8Array(f))}},S.uint8array={string:w,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:u,nodebuffer:function(f){return h.newBufferFrom(f)}},S.nodebuffer={string:w,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return S.nodebuffer.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:u},s.transformTo=function(f,b){if(b=b||"",!f)return b;s.checkSupport(f);var m=s.getTypeOf(b);return S[m][f](b)},s.resolve=function(f){for(var b=f.split("/"),m=[],k=0;k<b.length;k++){var P=b[k];P==="."||P===""&&k!==0&&k!==b.length-1||(P===".."?m.pop():m.push(P))}return m.join("/")},s.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":r.nodebuffer&&h.isBuffer(f)?"nodebuffer":r.uint8array&&f instanceof Uint8Array?"uint8array":r.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(f){if(!r[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(f){var b,m,k="";for(m=0;m<(f||"").length;m++)k+="\\x"+((b=f.charCodeAt(m))<16?"0":"")+b.toString(16).toUpperCase();return k},s.delay=function(f,b,m){setImmediate(function(){f.apply(m||null,b||[])})},s.inherits=function(f,b){function m(){}m.prototype=b.prototype,f.prototype=new m},s.extend=function(){var f,b,m={};for(f=0;f<arguments.length;f++)for(b in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],b)&&m[b]===void 0&&(m[b]=arguments[f][b]);return m},s.prepareContent=function(f,b,m,k,P){return c.Promise.resolve(b).then(function(R){return r.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,F){var U=new FileReader;U.onload=function(M){A(M.target.result)},U.onerror=function(M){F(M.target.error)},U.readAsArrayBuffer(R)}):R}).then(function(R){var A=s.getTypeOf(R);return A?(A==="arraybuffer"?R=s.transformTo("uint8array",R):A==="string"&&(P?R=a.decode(R):m&&k!==!0&&(R=function(F){return l(F,r.uint8array?new Uint8Array(F.length):new Array(F.length))}(R))),R):c.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,s){var r=n("./reader/readerFor"),a=n("./utils"),h=n("./signature"),c=n("./zipEntry"),u=n("./support");function l(_){this.files=[],this.loadOptions=_}l.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(w)+", expected "+a.pretty(_)+")")}},isSignature:function(_,w){var d=this.reader.index;this.reader.setIndex(_);var S=this.reader.readString(4)===w;return this.reader.setIndex(d),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),w=u.uint8array?"uint8array":"array",d=a.transformTo(w,_);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,w,d,S=this.zip64EndOfCentralSize-44;0<S;)_=this.reader.readInt(2),w=this.reader.readInt(4),d=this.reader.readData(w),this.zip64ExtensibleData[_]={id:_,length:w,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,w;for(_=0;_<this.files.length;_++)w=this.files[_],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(_=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var w=_;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var S=w-d;if(0<S)this.isSignature(w,h.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(_){this.reader=r(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,s){var r=n("./reader/readerFor"),a=n("./utils"),h=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),l=n("./compressions"),_=n("./support");function w(d,S){this.options=d,this.loadOptions=S}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var S,f;if(d.skip(22),this.fileNameLength=d.readInt(2),f=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((S=function(b){for(var m in l)if(Object.prototype.hasOwnProperty.call(l,m)&&l[m].magic===b)return l[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,S,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var S=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(S),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var S,f,b,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)S=d.readInt(2),f=d.readInt(2),b=d.readData(f),this.extraFields[S]={id:S,length:f,value:b};d.setIndex(m)},handleUTF8:function(){var d=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(S!==null)this.fileNameStr=S;else{var f=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var m=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var S=r(d.value);return S.readInt(1)!==1||c(this.fileName)!==S.readInt(4)?null:u.utf8decode(S.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var S=r(d.value);return S.readInt(1)!==1||c(this.fileComment)!==S.readInt(4)?null:u.utf8decode(S.readData(d.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,s){function r(S,f,b){this.name=S,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=f,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=n("./stream/StreamHelper"),h=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),l=n("./stream/GenericWorker");r.prototype={internalStream:function(S){var f=null,b="string";try{if(!S)throw new Error("No output type specified.");var m=(b=S.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),f=this._decompressWorker();var k=!this._dataBinary;k&&!m&&(f=f.pipe(new c.Utf8EncodeWorker)),!k&&m&&(f=f.pipe(new c.Utf8DecodeWorker))}catch(P){(f=new l("error")).error(P)}return new a(f,b,"")},async:function(S,f){return this.internalStream(S).accumulate(f)},nodeStream:function(S,f){return this.internalStream(S||"nodebuffer").toNodejsStream(f)},_compressWorker:function(S,f){if(this._data instanceof u&&this._data.compression.magic===S.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(b,S,f)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof l?this._data:new h(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<_.length;d++)r.prototype[_[d]]=w;i.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,s){(function(r){var a,h,c=r.MutationObserver||r.WebKitMutationObserver;if(c){var u=0,l=new c(S),_=r.document.createTextNode("");l.observe(_,{characterData:!0}),a=function(){_.data=u=++u%2}}else if(r.setImmediate||r.MessageChannel===void 0)a="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var f=r.document.createElement("script");f.onreadystatechange=function(){S(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},r.document.documentElement.appendChild(f)}:function(){setTimeout(S,0)};else{var w=new r.MessageChannel;w.port1.onmessage=S,a=function(){w.port2.postMessage(0)}}var d=[];function S(){var f,b;h=!0;for(var m=d.length;m;){for(b=d,d=[],f=-1;++f<m;)b[f]();m=d.length}h=!1}i.exports=function(f){d.push(f)!==1||h||a()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,s){var r=n("immediate");function a(){}var h={},c=["REJECTED"],u=["FULFILLED"],l=["PENDING"];function _(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,m!==a&&f(this,m)}function w(m,k,P){this.promise=m,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function d(m,k,P){r(function(){var R;try{R=k(P)}catch(A){return h.reject(m,A)}R===m?h.reject(m,new TypeError("Cannot resolve promise with itself")):h.resolve(m,R)})}function S(m){var k=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof k=="function")return function(){k.apply(m,arguments)}}function f(m,k){var P=!1;function R(U){P||(P=!0,h.reject(m,U))}function A(U){P||(P=!0,h.resolve(m,U))}var F=b(function(){k(A,R)});F.status==="error"&&R(F.value)}function b(m,k){var P={};try{P.value=m(k),P.status="success"}catch(R){P.status="error",P.value=R}return P}(i.exports=_).prototype.finally=function(m){if(typeof m!="function")return this;var k=this.constructor;return this.then(function(P){return k.resolve(m()).then(function(){return P})},function(P){return k.resolve(m()).then(function(){throw P})})},_.prototype.catch=function(m){return this.then(null,m)},_.prototype.then=function(m,k){if(typeof m!="function"&&this.state===u||typeof k!="function"&&this.state===c)return this;var P=new this.constructor(a);return this.state!==l?d(P,this.state===u?m:k,this.outcome):this.queue.push(new w(P,m,k)),P},w.prototype.callFulfilled=function(m){h.resolve(this.promise,m)},w.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},w.prototype.callRejected=function(m){h.reject(this.promise,m)},w.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},h.resolve=function(m,k){var P=b(S,k);if(P.status==="error")return h.reject(m,P.value);var R=P.value;if(R)f(m,R);else{m.state=u,m.outcome=k;for(var A=-1,F=m.queue.length;++A<F;)m.queue[A].callFulfilled(k)}return m},h.reject=function(m,k){m.state=c,m.outcome=k;for(var P=-1,R=m.queue.length;++P<R;)m.queue[P].callRejected(k);return m},_.resolve=function(m){return m instanceof this?m:h.resolve(new this(a),m)},_.reject=function(m){var k=new this(a);return h.reject(k,m)},_.all=function(m){var k=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=m.length,R=!1;if(!P)return this.resolve([]);for(var A=new Array(P),F=0,U=-1,M=new this(a);++U<P;)x(m[U],U);return M;function x($,H){k.resolve($).then(function(N){A[H]=N,++F!==P||R||(R=!0,h.resolve(M,A))},function(N){R||(R=!0,h.reject(M,N))})}},_.race=function(m){var k=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=m.length,R=!1;if(!P)return this.resolve([]);for(var A=-1,F=new this(a);++A<P;)U=m[A],k.resolve(U).then(function(M){R||(R=!0,h.resolve(F,M))},function(M){R||(R=!0,h.reject(F,M))});var U;return F}},{immediate:36}],38:[function(n,i,s){var r={};(0,n("./lib/utils/common").assign)(r,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,s){var r=n("./zlib/deflate"),a=n("./utils/common"),h=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),l=Object.prototype.toString,_=0,w=-1,d=0,S=8;function f(m){if(!(this instanceof f))return new f(m);this.options=a.assign({level:w,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var P=r.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(P!==_)throw new Error(c[P]);if(k.header&&r.deflateSetHeader(this.strm,k.header),k.dictionary){var R;if(R=typeof k.dictionary=="string"?h.string2buf(k.dictionary):l.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(P=r.deflateSetDictionary(this.strm,R))!==_)throw new Error(c[P]);this._dict_set=!0}}function b(m,k){var P=new f(k);if(P.push(m,!0),P.err)throw P.msg||c[P.err];return P.result}f.prototype.push=function(m,k){var P,R,A=this.strm,F=this.options.chunkSize;if(this.ended)return!1;R=k===~~k?k:k===!0?4:0,typeof m=="string"?A.input=h.string2buf(m):l.call(m)==="[object ArrayBuffer]"?A.input=new Uint8Array(m):A.input=m,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(F),A.next_out=0,A.avail_out=F),(P=r.deflate(A,R))!==1&&P!==_)return this.onEnd(P),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(a.shrinkBuf(A.output,A.next_out))):this.onData(a.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&P!==1);return R===4?(P=r.deflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===_):R!==2||(this.onEnd(_),!(A.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Deflate=f,s.deflate=b,s.deflateRaw=function(m,k){return(k=k||{}).raw=!0,b(m,k)},s.gzip=function(m,k){return(k=k||{}).gzip=!0,b(m,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,s){var r=n("./zlib/inflate"),a=n("./utils/common"),h=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),l=n("./zlib/zstream"),_=n("./zlib/gzheader"),w=Object.prototype.toString;function d(f){if(!(this instanceof d))return new d(f);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},f||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||f&&f.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=r.inflateInit2(this.strm,b.windowBits);if(m!==c.Z_OK)throw new Error(u[m]);this.header=new _,r.inflateGetHeader(this.strm,this.header)}function S(f,b){var m=new d(b);if(m.push(f,!0),m.err)throw m.msg||u[m.err];return m.result}d.prototype.push=function(f,b){var m,k,P,R,A,F,U=this.strm,M=this.options.chunkSize,x=this.options.dictionary,$=!1;if(this.ended)return!1;k=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof f=="string"?U.input=h.binstring2buf(f):w.call(f)==="[object ArrayBuffer]"?U.input=new Uint8Array(f):U.input=f,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new a.Buf8(M),U.next_out=0,U.avail_out=M),(m=r.inflate(U,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&x&&(F=typeof x=="string"?h.string2buf(x):w.call(x)==="[object ArrayBuffer]"?new Uint8Array(x):x,m=r.inflateSetDictionary(this.strm,F)),m===c.Z_BUF_ERROR&&$===!0&&(m=c.Z_OK,$=!1),m!==c.Z_STREAM_END&&m!==c.Z_OK)return this.onEnd(m),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&m!==c.Z_STREAM_END&&(U.avail_in!==0||k!==c.Z_FINISH&&k!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=h.utf8border(U.output,U.next_out),R=U.next_out-P,A=h.buf2string(U.output,P),U.next_out=R,U.avail_out=M-R,R&&a.arraySet(U.output,U.output,P,R,0),this.onData(A)):this.onData(a.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&($=!0)}while((0<U.avail_in||U.avail_out===0)&&m!==c.Z_STREAM_END);return m===c.Z_STREAM_END&&(k=c.Z_FINISH),k===c.Z_FINISH?(m=r.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c.Z_OK):k!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(U.avail_out=0))},d.prototype.onData=function(f){this.chunks.push(f)},d.prototype.onEnd=function(f){f===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},s.Inflate=d,s.inflate=S,s.inflateRaw=function(f,b){return(b=b||{}).raw=!0,S(f,b)},s.ungzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var l=u.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var _ in l)l.hasOwnProperty(_)&&(c[_]=l[_])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,l,_,w){if(u.subarray&&c.subarray)c.set(u.subarray(l,l+_),w);else for(var d=0;d<_;d++)c[w+d]=u[l+d]},flattenChunks:function(c){var u,l,_,w,d,S;for(u=_=0,l=c.length;u<l;u++)_+=c[u].length;for(S=new Uint8Array(_),u=w=0,l=c.length;u<l;u++)d=c[u],S.set(d,w),w+=d.length;return S}},h={arraySet:function(c,u,l,_,w){for(var d=0;d<_;d++)c[w+d]=u[l+d]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,h))},s.setTyped(r)},{}],42:[function(n,i,s){var r=n("./common"),a=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var c=new r.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(_,w){if(w<65537&&(_.subarray&&h||!_.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(_,w));for(var d="",S=0;S<w;S++)d+=String.fromCharCode(_[S]);return d}c[254]=c[254]=1,s.string2buf=function(_){var w,d,S,f,b,m=_.length,k=0;for(f=0;f<m;f++)(64512&(d=_.charCodeAt(f)))==55296&&f+1<m&&(64512&(S=_.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(S-56320),f++),k+=d<128?1:d<2048?2:d<65536?3:4;for(w=new r.Buf8(k),f=b=0;b<k;f++)(64512&(d=_.charCodeAt(f)))==55296&&f+1<m&&(64512&(S=_.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(S-56320),f++),d<128?w[b++]=d:(d<2048?w[b++]=192|d>>>6:(d<65536?w[b++]=224|d>>>12:(w[b++]=240|d>>>18,w[b++]=128|d>>>12&63),w[b++]=128|d>>>6&63),w[b++]=128|63&d);return w},s.buf2binstring=function(_){return l(_,_.length)},s.binstring2buf=function(_){for(var w=new r.Buf8(_.length),d=0,S=w.length;d<S;d++)w[d]=_.charCodeAt(d);return w},s.buf2string=function(_,w){var d,S,f,b,m=w||_.length,k=new Array(2*m);for(d=S=0;d<m;)if((f=_[d++])<128)k[S++]=f;else if(4<(b=c[f]))k[S++]=65533,d+=b-1;else{for(f&=b===2?31:b===3?15:7;1<b&&d<m;)f=f<<6|63&_[d++],b--;1<b?k[S++]=65533:f<65536?k[S++]=f:(f-=65536,k[S++]=55296|f>>10&1023,k[S++]=56320|1023&f)}return l(k,S)},s.utf8border=function(_,w){var d;for((w=w||_.length)>_.length&&(w=_.length),d=w-1;0<=d&&(192&_[d])==128;)d--;return d<0||d===0?w:d+c[_[d]]>w?d:w}},{"./common":41}],43:[function(n,i,s){i.exports=function(r,a,h,c){for(var u=65535&r|0,l=r>>>16&65535|0,_=0;h!==0;){for(h-=_=2e3<h?2e3:h;l=l+(u=u+a[c++]|0)|0,--_;);u%=65521,l%=65521}return u|l<<16|0}},{}],44:[function(n,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,s){var r=function(){for(var a,h=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;h[c]=a}return h}();i.exports=function(a,h,c,u){var l=r,_=u+c;a^=-1;for(var w=u;w<_;w++)a=a>>>8^l[255&(a^h[w])];return-1^a}},{}],46:[function(n,i,s){var r,a=n("../utils/common"),h=n("./trees"),c=n("./adler32"),u=n("./crc32"),l=n("./messages"),_=0,w=4,d=0,S=-2,f=-1,b=4,m=2,k=8,P=9,R=286,A=30,F=19,U=2*R+1,M=15,x=3,$=258,H=$+x+1,N=42,X=113,g=1,et=2,ft=3,at=4;function st(o,z){return o.msg=l[z],z}function dt(o){return(o<<1)-(4<o?9:0)}function St(o){for(var z=o.length;0<=--z;)o[z]=0}function ut(o){var z=o.state,G=z.pending;G>o.avail_out&&(G=o.avail_out),G!==0&&(a.arraySet(o.output,z.pending_buf,z.pending_out,G,o.next_out),o.next_out+=G,z.pending_out+=G,o.total_out+=G,o.avail_out-=G,z.pending-=G,z.pending===0&&(z.pending_out=0))}function Y(o,z){h._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,z),o.block_start=o.strstart,ut(o.strm)}function B(o,z){o.pending_buf[o.pending++]=z}function y(o,z){o.pending_buf[o.pending++]=z>>>8&255,o.pending_buf[o.pending++]=255&z}function v(o,z){var G,O,L=o.max_chain_length,K=o.strstart,nt=o.prev_length,ct=o.nice_match,V=o.strstart>o.w_size-H?o.strstart-(o.w_size-H):0,J=o.window,Z=o.w_mask,rt=o.prev,vt=o.strstart+$,Ct=J[K+nt-1],Tt=J[K+nt];o.prev_length>=o.good_match&&(L>>=2),ct>o.lookahead&&(ct=o.lookahead);do if(J[(G=z)+nt]===Tt&&J[G+nt-1]===Ct&&J[G]===J[K]&&J[++G]===J[K+1]){K+=2,G++;do;while(J[++K]===J[++G]&&J[++K]===J[++G]&&J[++K]===J[++G]&&J[++K]===J[++G]&&J[++K]===J[++G]&&J[++K]===J[++G]&&J[++K]===J[++G]&&J[++K]===J[++G]&&K<vt);if(O=$-(vt-K),K=vt-$,nt<O){if(o.match_start=z,ct<=(nt=O))break;Ct=J[K+nt-1],Tt=J[K+nt]}}while((z=rt[z&Z])>V&&--L!=0);return nt<=o.lookahead?nt:o.lookahead}function C(o){var z,G,O,L,K,nt,ct,V,J,Z,rt=o.w_size;do{if(L=o.window_size-o.lookahead-o.strstart,o.strstart>=rt+(rt-H)){for(a.arraySet(o.window,o.window,rt,rt,0),o.match_start-=rt,o.strstart-=rt,o.block_start-=rt,z=G=o.hash_size;O=o.head[--z],o.head[z]=rt<=O?O-rt:0,--G;);for(z=G=rt;O=o.prev[--z],o.prev[z]=rt<=O?O-rt:0,--G;);L+=rt}if(o.strm.avail_in===0)break;if(nt=o.strm,ct=o.window,V=o.strstart+o.lookahead,J=L,Z=void 0,Z=nt.avail_in,J<Z&&(Z=J),G=Z===0?0:(nt.avail_in-=Z,a.arraySet(ct,nt.input,nt.next_in,Z,V),nt.state.wrap===1?nt.adler=c(nt.adler,ct,Z,V):nt.state.wrap===2&&(nt.adler=u(nt.adler,ct,Z,V)),nt.next_in+=Z,nt.total_in+=Z,Z),o.lookahead+=G,o.lookahead+o.insert>=x)for(K=o.strstart-o.insert,o.ins_h=o.window[K],o.ins_h=(o.ins_h<<o.hash_shift^o.window[K+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[K+x-1])&o.hash_mask,o.prev[K&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=K,K++,o.insert--,!(o.lookahead+o.insert<x)););}while(o.lookahead<H&&o.strm.avail_in!==0)}function I(o,z){for(var G,O;;){if(o.lookahead<H){if(C(o),o.lookahead<H&&z===_)return g;if(o.lookahead===0)break}if(G=0,o.lookahead>=x&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+x-1])&o.hash_mask,G=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),G!==0&&o.strstart-G<=o.w_size-H&&(o.match_length=v(o,G)),o.match_length>=x)if(O=h._tr_tally(o,o.strstart-o.match_start,o.match_length-x),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=x){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+x-1])&o.hash_mask,G=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else O=h._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(O&&(Y(o,!1),o.strm.avail_out===0))return g}return o.insert=o.strstart<x-1?o.strstart:x-1,z===w?(Y(o,!0),o.strm.avail_out===0?ft:at):o.last_lit&&(Y(o,!1),o.strm.avail_out===0)?g:et}function D(o,z){for(var G,O,L;;){if(o.lookahead<H){if(C(o),o.lookahead<H&&z===_)return g;if(o.lookahead===0)break}if(G=0,o.lookahead>=x&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+x-1])&o.hash_mask,G=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=x-1,G!==0&&o.prev_length<o.max_lazy_match&&o.strstart-G<=o.w_size-H&&(o.match_length=v(o,G),o.match_length<=5&&(o.strategy===1||o.match_length===x&&4096<o.strstart-o.match_start)&&(o.match_length=x-1)),o.prev_length>=x&&o.match_length<=o.prev_length){for(L=o.strstart+o.lookahead-x,O=h._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-x),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=L&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+x-1])&o.hash_mask,G=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=x-1,o.strstart++,O&&(Y(o,!1),o.strm.avail_out===0))return g}else if(o.match_available){if((O=h._tr_tally(o,0,o.window[o.strstart-1]))&&Y(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return g}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(O=h._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<x-1?o.strstart:x-1,z===w?(Y(o,!0),o.strm.avail_out===0?ft:at):o.last_lit&&(Y(o,!1),o.strm.avail_out===0)?g:et}function W(o,z,G,O,L){this.good_length=o,this.max_lazy=z,this.nice_length=G,this.max_chain=O,this.func=L}function Q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*U),this.dyn_dtree=new a.Buf16(2*(2*A+1)),this.bl_tree=new a.Buf16(2*(2*F+1)),St(this.dyn_ltree),St(this.dyn_dtree),St(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(M+1),this.heap=new a.Buf16(2*R+1),St(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*R+1),St(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(o){var z;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=m,(z=o.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?N:X,o.adler=z.wrap===2?0:1,z.last_flush=_,h._tr_init(z),d):st(o,S)}function pt(o){var z=it(o);return z===d&&function(G){G.window_size=2*G.w_size,St(G.head),G.max_lazy_match=r[G.level].max_lazy,G.good_match=r[G.level].good_length,G.nice_match=r[G.level].nice_length,G.max_chain_length=r[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=x-1,G.match_available=0,G.ins_h=0}(o.state),z}function j(o,z,G,O,L,K){if(!o)return S;var nt=1;if(z===f&&(z=6),O<0?(nt=0,O=-O):15<O&&(nt=2,O-=16),L<1||P<L||G!==k||O<8||15<O||z<0||9<z||K<0||b<K)return st(o,S);O===8&&(O=9);var ct=new Q;return(o.state=ct).strm=o,ct.wrap=nt,ct.gzhead=null,ct.w_bits=O,ct.w_size=1<<ct.w_bits,ct.w_mask=ct.w_size-1,ct.hash_bits=L+7,ct.hash_size=1<<ct.hash_bits,ct.hash_mask=ct.hash_size-1,ct.hash_shift=~~((ct.hash_bits+x-1)/x),ct.window=new a.Buf8(2*ct.w_size),ct.head=new a.Buf16(ct.hash_size),ct.prev=new a.Buf16(ct.w_size),ct.lit_bufsize=1<<L+6,ct.pending_buf_size=4*ct.lit_bufsize,ct.pending_buf=new a.Buf8(ct.pending_buf_size),ct.d_buf=1*ct.lit_bufsize,ct.l_buf=3*ct.lit_bufsize,ct.level=z,ct.strategy=K,ct.method=G,pt(o)}r=[new W(0,0,0,0,function(o,z){var G=65535;for(G>o.pending_buf_size-5&&(G=o.pending_buf_size-5);;){if(o.lookahead<=1){if(C(o),o.lookahead===0&&z===_)return g;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var O=o.block_start+G;if((o.strstart===0||o.strstart>=O)&&(o.lookahead=o.strstart-O,o.strstart=O,Y(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-H&&(Y(o,!1),o.strm.avail_out===0))return g}return o.insert=0,z===w?(Y(o,!0),o.strm.avail_out===0?ft:at):(o.strstart>o.block_start&&(Y(o,!1),o.strm.avail_out),g)}),new W(4,4,8,4,I),new W(4,5,16,8,I),new W(4,6,32,32,I),new W(4,4,16,16,D),new W(8,16,32,32,D),new W(8,16,128,128,D),new W(8,32,128,256,D),new W(32,128,258,1024,D),new W(32,258,258,4096,D)],s.deflateInit=function(o,z){return j(o,z,k,15,8,0)},s.deflateInit2=j,s.deflateReset=pt,s.deflateResetKeep=it,s.deflateSetHeader=function(o,z){return o&&o.state?o.state.wrap!==2?S:(o.state.gzhead=z,d):S},s.deflate=function(o,z){var G,O,L,K;if(!o||!o.state||5<z||z<0)return o?st(o,S):S;if(O=o.state,!o.output||!o.input&&o.avail_in!==0||O.status===666&&z!==w)return st(o,o.avail_out===0?-5:S);if(O.strm=o,G=O.last_flush,O.last_flush=z,O.status===N)if(O.wrap===2)o.adler=0,B(O,31),B(O,139),B(O,8),O.gzhead?(B(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),B(O,255&O.gzhead.time),B(O,O.gzhead.time>>8&255),B(O,O.gzhead.time>>16&255),B(O,O.gzhead.time>>24&255),B(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),B(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(B(O,255&O.gzhead.extra.length),B(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(o.adler=u(o.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(B(O,0),B(O,0),B(O,0),B(O,0),B(O,0),B(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),B(O,3),O.status=X);else{var nt=k+(O.w_bits-8<<4)<<8;nt|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(nt|=32),nt+=31-nt%31,O.status=X,y(O,nt),O.strstart!==0&&(y(O,o.adler>>>16),y(O,65535&o.adler)),o.adler=1}if(O.status===69)if(O.gzhead.extra){for(L=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>L&&(o.adler=u(o.adler,O.pending_buf,O.pending-L,L)),ut(o),L=O.pending,O.pending!==O.pending_buf_size));)B(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>L&&(o.adler=u(o.adler,O.pending_buf,O.pending-L,L)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){L=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>L&&(o.adler=u(o.adler,O.pending_buf,O.pending-L,L)),ut(o),L=O.pending,O.pending===O.pending_buf_size)){K=1;break}K=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,B(O,K)}while(K!==0);O.gzhead.hcrc&&O.pending>L&&(o.adler=u(o.adler,O.pending_buf,O.pending-L,L)),K===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){L=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>L&&(o.adler=u(o.adler,O.pending_buf,O.pending-L,L)),ut(o),L=O.pending,O.pending===O.pending_buf_size)){K=1;break}K=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,B(O,K)}while(K!==0);O.gzhead.hcrc&&O.pending>L&&(o.adler=u(o.adler,O.pending_buf,O.pending-L,L)),K===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&ut(o),O.pending+2<=O.pending_buf_size&&(B(O,255&o.adler),B(O,o.adler>>8&255),o.adler=0,O.status=X)):O.status=X),O.pending!==0){if(ut(o),o.avail_out===0)return O.last_flush=-1,d}else if(o.avail_in===0&&dt(z)<=dt(G)&&z!==w)return st(o,-5);if(O.status===666&&o.avail_in!==0)return st(o,-5);if(o.avail_in!==0||O.lookahead!==0||z!==_&&O.status!==666){var ct=O.strategy===2?function(V,J){for(var Z;;){if(V.lookahead===0&&(C(V),V.lookahead===0)){if(J===_)return g;break}if(V.match_length=0,Z=h._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,Z&&(Y(V,!1),V.strm.avail_out===0))return g}return V.insert=0,J===w?(Y(V,!0),V.strm.avail_out===0?ft:at):V.last_lit&&(Y(V,!1),V.strm.avail_out===0)?g:et}(O,z):O.strategy===3?function(V,J){for(var Z,rt,vt,Ct,Tt=V.window;;){if(V.lookahead<=$){if(C(V),V.lookahead<=$&&J===_)return g;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=x&&0<V.strstart&&(rt=Tt[vt=V.strstart-1])===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]){Ct=V.strstart+$;do;while(rt===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]&&rt===Tt[++vt]&&vt<Ct);V.match_length=$-(Ct-vt),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=x?(Z=h._tr_tally(V,1,V.match_length-x),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(Z=h._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),Z&&(Y(V,!1),V.strm.avail_out===0))return g}return V.insert=0,J===w?(Y(V,!0),V.strm.avail_out===0?ft:at):V.last_lit&&(Y(V,!1),V.strm.avail_out===0)?g:et}(O,z):r[O.level].func(O,z);if(ct!==ft&&ct!==at||(O.status=666),ct===g||ct===ft)return o.avail_out===0&&(O.last_flush=-1),d;if(ct===et&&(z===1?h._tr_align(O):z!==5&&(h._tr_stored_block(O,0,0,!1),z===3&&(St(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),ut(o),o.avail_out===0))return O.last_flush=-1,d}return z!==w?d:O.wrap<=0?1:(O.wrap===2?(B(O,255&o.adler),B(O,o.adler>>8&255),B(O,o.adler>>16&255),B(O,o.adler>>24&255),B(O,255&o.total_in),B(O,o.total_in>>8&255),B(O,o.total_in>>16&255),B(O,o.total_in>>24&255)):(y(O,o.adler>>>16),y(O,65535&o.adler)),ut(o),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?d:1)},s.deflateEnd=function(o){var z;return o&&o.state?(z=o.state.status)!==N&&z!==69&&z!==73&&z!==91&&z!==103&&z!==X&&z!==666?st(o,S):(o.state=null,z===X?st(o,-3):d):S},s.deflateSetDictionary=function(o,z){var G,O,L,K,nt,ct,V,J,Z=z.length;if(!o||!o.state||(K=(G=o.state).wrap)===2||K===1&&G.status!==N||G.lookahead)return S;for(K===1&&(o.adler=c(o.adler,z,Z,0)),G.wrap=0,Z>=G.w_size&&(K===0&&(St(G.head),G.strstart=0,G.block_start=0,G.insert=0),J=new a.Buf8(G.w_size),a.arraySet(J,z,Z-G.w_size,G.w_size,0),z=J,Z=G.w_size),nt=o.avail_in,ct=o.next_in,V=o.input,o.avail_in=Z,o.next_in=0,o.input=z,C(G);G.lookahead>=x;){for(O=G.strstart,L=G.lookahead-(x-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[O+x-1])&G.hash_mask,G.prev[O&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=O,O++,--L;);G.strstart=O,G.lookahead=x-1,C(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=x-1,G.match_available=0,o.next_in=ct,o.input=V,o.avail_in=nt,G.wrap=K,d},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,s){i.exports=function(r,a){var h,c,u,l,_,w,d,S,f,b,m,k,P,R,A,F,U,M,x,$,H,N,X,g,et;h=r.state,c=r.next_in,g=r.input,u=c+(r.avail_in-5),l=r.next_out,et=r.output,_=l-(a-r.avail_out),w=l+(r.avail_out-257),d=h.dmax,S=h.wsize,f=h.whave,b=h.wnext,m=h.window,k=h.hold,P=h.bits,R=h.lencode,A=h.distcode,F=(1<<h.lenbits)-1,U=(1<<h.distbits)-1;t:do{P<15&&(k+=g[c++]<<P,P+=8,k+=g[c++]<<P,P+=8),M=R[k&F];e:for(;;){if(k>>>=x=M>>>24,P-=x,(x=M>>>16&255)===0)et[l++]=65535&M;else{if(!(16&x)){if(!(64&x)){M=R[(65535&M)+(k&(1<<x)-1)];continue e}if(32&x){h.mode=12;break t}r.msg="invalid literal/length code",h.mode=30;break t}$=65535&M,(x&=15)&&(P<x&&(k+=g[c++]<<P,P+=8),$+=k&(1<<x)-1,k>>>=x,P-=x),P<15&&(k+=g[c++]<<P,P+=8,k+=g[c++]<<P,P+=8),M=A[k&U];n:for(;;){if(k>>>=x=M>>>24,P-=x,!(16&(x=M>>>16&255))){if(!(64&x)){M=A[(65535&M)+(k&(1<<x)-1)];continue n}r.msg="invalid distance code",h.mode=30;break t}if(H=65535&M,P<(x&=15)&&(k+=g[c++]<<P,(P+=8)<x&&(k+=g[c++]<<P,P+=8)),d<(H+=k&(1<<x)-1)){r.msg="invalid distance too far back",h.mode=30;break t}if(k>>>=x,P-=x,(x=l-_)<H){if(f<(x=H-x)&&h.sane){r.msg="invalid distance too far back",h.mode=30;break t}if(X=m,(N=0)===b){if(N+=S-x,x<$){for($-=x;et[l++]=m[N++],--x;);N=l-H,X=et}}else if(b<x){if(N+=S+b-x,(x-=b)<$){for($-=x;et[l++]=m[N++],--x;);if(N=0,b<$){for($-=x=b;et[l++]=m[N++],--x;);N=l-H,X=et}}}else if(N+=b-x,x<$){for($-=x;et[l++]=m[N++],--x;);N=l-H,X=et}for(;2<$;)et[l++]=X[N++],et[l++]=X[N++],et[l++]=X[N++],$-=3;$&&(et[l++]=X[N++],1<$&&(et[l++]=X[N++]))}else{for(N=l-H;et[l++]=et[N++],et[l++]=et[N++],et[l++]=et[N++],2<($-=3););$&&(et[l++]=et[N++],1<$&&(et[l++]=et[N++]))}break}}break}}while(c<u&&l<w);c-=$=P>>3,k&=(1<<(P-=$<<3))-1,r.next_in=c,r.next_out=l,r.avail_in=c<u?u-c+5:5-(c-u),r.avail_out=l<w?w-l+257:257-(l-w),h.hold=k,h.bits=P}},{}],49:[function(n,i,s){var r=n("../utils/common"),a=n("./adler32"),h=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),l=1,_=2,w=0,d=-2,S=1,f=852,b=592;function m(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function P(N){var X;return N&&N.state?(X=N.state,N.total_in=N.total_out=X.total=0,N.msg="",X.wrap&&(N.adler=1&X.wrap),X.mode=S,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new r.Buf32(f),X.distcode=X.distdyn=new r.Buf32(b),X.sane=1,X.back=-1,w):d}function R(N){var X;return N&&N.state?((X=N.state).wsize=0,X.whave=0,X.wnext=0,P(N)):d}function A(N,X){var g,et;return N&&N.state?(et=N.state,X<0?(g=0,X=-X):(g=1+(X>>4),X<48&&(X&=15)),X&&(X<8||15<X)?d:(et.window!==null&&et.wbits!==X&&(et.window=null),et.wrap=g,et.wbits=X,R(N))):d}function F(N,X){var g,et;return N?(et=new k,(N.state=et).window=null,(g=A(N,X))!==w&&(N.state=null),g):d}var U,M,x=!0;function $(N){if(x){var X;for(U=new r.Buf32(512),M=new r.Buf32(32),X=0;X<144;)N.lens[X++]=8;for(;X<256;)N.lens[X++]=9;for(;X<280;)N.lens[X++]=7;for(;X<288;)N.lens[X++]=8;for(u(l,N.lens,0,288,U,0,N.work,{bits:9}),X=0;X<32;)N.lens[X++]=5;u(_,N.lens,0,32,M,0,N.work,{bits:5}),x=!1}N.lencode=U,N.lenbits=9,N.distcode=M,N.distbits=5}function H(N,X,g,et){var ft,at=N.state;return at.window===null&&(at.wsize=1<<at.wbits,at.wnext=0,at.whave=0,at.window=new r.Buf8(at.wsize)),et>=at.wsize?(r.arraySet(at.window,X,g-at.wsize,at.wsize,0),at.wnext=0,at.whave=at.wsize):(et<(ft=at.wsize-at.wnext)&&(ft=et),r.arraySet(at.window,X,g-et,ft,at.wnext),(et-=ft)?(r.arraySet(at.window,X,g-et,et,0),at.wnext=et,at.whave=at.wsize):(at.wnext+=ft,at.wnext===at.wsize&&(at.wnext=0),at.whave<at.wsize&&(at.whave+=ft))),0}s.inflateReset=R,s.inflateReset2=A,s.inflateResetKeep=P,s.inflateInit=function(N){return F(N,15)},s.inflateInit2=F,s.inflate=function(N,X){var g,et,ft,at,st,dt,St,ut,Y,B,y,v,C,I,D,W,Q,it,pt,j,o,z,G,O,L=0,K=new r.Buf8(4),nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return d;(g=N.state).mode===12&&(g.mode=13),st=N.next_out,ft=N.output,St=N.avail_out,at=N.next_in,et=N.input,dt=N.avail_in,ut=g.hold,Y=g.bits,B=dt,y=St,z=w;t:for(;;)switch(g.mode){case S:if(g.wrap===0){g.mode=13;break}for(;Y<16;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(2&g.wrap&&ut===35615){K[g.check=0]=255&ut,K[1]=ut>>>8&255,g.check=h(g.check,K,2,0),Y=ut=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&ut)<<8)+(ut>>8))%31){N.msg="incorrect header check",g.mode=30;break}if((15&ut)!=8){N.msg="unknown compression method",g.mode=30;break}if(Y-=4,o=8+(15&(ut>>>=4)),g.wbits===0)g.wbits=o;else if(o>g.wbits){N.msg="invalid window size",g.mode=30;break}g.dmax=1<<o,N.adler=g.check=1,g.mode=512&ut?10:12,Y=ut=0;break;case 2:for(;Y<16;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(g.flags=ut,(255&g.flags)!=8){N.msg="unknown compression method",g.mode=30;break}if(57344&g.flags){N.msg="unknown header flags set",g.mode=30;break}g.head&&(g.head.text=ut>>8&1),512&g.flags&&(K[0]=255&ut,K[1]=ut>>>8&255,g.check=h(g.check,K,2,0)),Y=ut=0,g.mode=3;case 3:for(;Y<32;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}g.head&&(g.head.time=ut),512&g.flags&&(K[0]=255&ut,K[1]=ut>>>8&255,K[2]=ut>>>16&255,K[3]=ut>>>24&255,g.check=h(g.check,K,4,0)),Y=ut=0,g.mode=4;case 4:for(;Y<16;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}g.head&&(g.head.xflags=255&ut,g.head.os=ut>>8),512&g.flags&&(K[0]=255&ut,K[1]=ut>>>8&255,g.check=h(g.check,K,2,0)),Y=ut=0,g.mode=5;case 5:if(1024&g.flags){for(;Y<16;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}g.length=ut,g.head&&(g.head.extra_len=ut),512&g.flags&&(K[0]=255&ut,K[1]=ut>>>8&255,g.check=h(g.check,K,2,0)),Y=ut=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&(dt<(v=g.length)&&(v=dt),v&&(g.head&&(o=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),r.arraySet(g.head.extra,et,at,v,o)),512&g.flags&&(g.check=h(g.check,et,v,at)),dt-=v,at+=v,g.length-=v),g.length))break t;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(dt===0)break t;for(v=0;o=et[at+v++],g.head&&o&&g.length<65536&&(g.head.name+=String.fromCharCode(o)),o&&v<dt;);if(512&g.flags&&(g.check=h(g.check,et,v,at)),dt-=v,at+=v,o)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(dt===0)break t;for(v=0;o=et[at+v++],g.head&&o&&g.length<65536&&(g.head.comment+=String.fromCharCode(o)),o&&v<dt;);if(512&g.flags&&(g.check=h(g.check,et,v,at)),dt-=v,at+=v,o)break t}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;Y<16;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(ut!==(65535&g.check)){N.msg="header crc mismatch",g.mode=30;break}Y=ut=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),N.adler=g.check=0,g.mode=12;break;case 10:for(;Y<32;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}N.adler=g.check=m(ut),Y=ut=0,g.mode=11;case 11:if(g.havedict===0)return N.next_out=st,N.avail_out=St,N.next_in=at,N.avail_in=dt,g.hold=ut,g.bits=Y,2;N.adler=g.check=1,g.mode=12;case 12:if(X===5||X===6)break t;case 13:if(g.last){ut>>>=7&Y,Y-=7&Y,g.mode=27;break}for(;Y<3;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}switch(g.last=1&ut,Y-=1,3&(ut>>>=1)){case 0:g.mode=14;break;case 1:if($(g),g.mode=20,X!==6)break;ut>>>=2,Y-=2;break t;case 2:g.mode=17;break;case 3:N.msg="invalid block type",g.mode=30}ut>>>=2,Y-=2;break;case 14:for(ut>>>=7&Y,Y-=7&Y;Y<32;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if((65535&ut)!=(ut>>>16^65535)){N.msg="invalid stored block lengths",g.mode=30;break}if(g.length=65535&ut,Y=ut=0,g.mode=15,X===6)break t;case 15:g.mode=16;case 16:if(v=g.length){if(dt<v&&(v=dt),St<v&&(v=St),v===0)break t;r.arraySet(ft,et,at,v,st),dt-=v,at+=v,St-=v,st+=v,g.length-=v;break}g.mode=12;break;case 17:for(;Y<14;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(g.nlen=257+(31&ut),ut>>>=5,Y-=5,g.ndist=1+(31&ut),ut>>>=5,Y-=5,g.ncode=4+(15&ut),ut>>>=4,Y-=4,286<g.nlen||30<g.ndist){N.msg="too many length or distance symbols",g.mode=30;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;Y<3;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}g.lens[nt[g.have++]]=7&ut,ut>>>=3,Y-=3}for(;g.have<19;)g.lens[nt[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,G={bits:g.lenbits},z=u(0,g.lens,0,19,g.lencode,0,g.work,G),g.lenbits=G.bits,z){N.msg="invalid code lengths set",g.mode=30;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;W=(L=g.lencode[ut&(1<<g.lenbits)-1])>>>16&255,Q=65535&L,!((D=L>>>24)<=Y);){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(Q<16)ut>>>=D,Y-=D,g.lens[g.have++]=Q;else{if(Q===16){for(O=D+2;Y<O;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(ut>>>=D,Y-=D,g.have===0){N.msg="invalid bit length repeat",g.mode=30;break}o=g.lens[g.have-1],v=3+(3&ut),ut>>>=2,Y-=2}else if(Q===17){for(O=D+3;Y<O;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}Y-=D,o=0,v=3+(7&(ut>>>=D)),ut>>>=3,Y-=3}else{for(O=D+7;Y<O;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}Y-=D,o=0,v=11+(127&(ut>>>=D)),ut>>>=7,Y-=7}if(g.have+v>g.nlen+g.ndist){N.msg="invalid bit length repeat",g.mode=30;break}for(;v--;)g.lens[g.have++]=o}}if(g.mode===30)break;if(g.lens[256]===0){N.msg="invalid code -- missing end-of-block",g.mode=30;break}if(g.lenbits=9,G={bits:g.lenbits},z=u(l,g.lens,0,g.nlen,g.lencode,0,g.work,G),g.lenbits=G.bits,z){N.msg="invalid literal/lengths set",g.mode=30;break}if(g.distbits=6,g.distcode=g.distdyn,G={bits:g.distbits},z=u(_,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,G),g.distbits=G.bits,z){N.msg="invalid distances set",g.mode=30;break}if(g.mode=20,X===6)break t;case 20:g.mode=21;case 21:if(6<=dt&&258<=St){N.next_out=st,N.avail_out=St,N.next_in=at,N.avail_in=dt,g.hold=ut,g.bits=Y,c(N,y),st=N.next_out,ft=N.output,St=N.avail_out,at=N.next_in,et=N.input,dt=N.avail_in,ut=g.hold,Y=g.bits,g.mode===12&&(g.back=-1);break}for(g.back=0;W=(L=g.lencode[ut&(1<<g.lenbits)-1])>>>16&255,Q=65535&L,!((D=L>>>24)<=Y);){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(W&&!(240&W)){for(it=D,pt=W,j=Q;W=(L=g.lencode[j+((ut&(1<<it+pt)-1)>>it)])>>>16&255,Q=65535&L,!(it+(D=L>>>24)<=Y);){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}ut>>>=it,Y-=it,g.back+=it}if(ut>>>=D,Y-=D,g.back+=D,g.length=Q,W===0){g.mode=26;break}if(32&W){g.back=-1,g.mode=12;break}if(64&W){N.msg="invalid literal/length code",g.mode=30;break}g.extra=15&W,g.mode=22;case 22:if(g.extra){for(O=g.extra;Y<O;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}g.length+=ut&(1<<g.extra)-1,ut>>>=g.extra,Y-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;W=(L=g.distcode[ut&(1<<g.distbits)-1])>>>16&255,Q=65535&L,!((D=L>>>24)<=Y);){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(!(240&W)){for(it=D,pt=W,j=Q;W=(L=g.distcode[j+((ut&(1<<it+pt)-1)>>it)])>>>16&255,Q=65535&L,!(it+(D=L>>>24)<=Y);){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}ut>>>=it,Y-=it,g.back+=it}if(ut>>>=D,Y-=D,g.back+=D,64&W){N.msg="invalid distance code",g.mode=30;break}g.offset=Q,g.extra=15&W,g.mode=24;case 24:if(g.extra){for(O=g.extra;Y<O;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}g.offset+=ut&(1<<g.extra)-1,ut>>>=g.extra,Y-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){N.msg="invalid distance too far back",g.mode=30;break}g.mode=25;case 25:if(St===0)break t;if(v=y-St,g.offset>v){if((v=g.offset-v)>g.whave&&g.sane){N.msg="invalid distance too far back",g.mode=30;break}C=v>g.wnext?(v-=g.wnext,g.wsize-v):g.wnext-v,v>g.length&&(v=g.length),I=g.window}else I=ft,C=st-g.offset,v=g.length;for(St<v&&(v=St),St-=v,g.length-=v;ft[st++]=I[C++],--v;);g.length===0&&(g.mode=21);break;case 26:if(St===0)break t;ft[st++]=g.length,St--,g.mode=21;break;case 27:if(g.wrap){for(;Y<32;){if(dt===0)break t;dt--,ut|=et[at++]<<Y,Y+=8}if(y-=St,N.total_out+=y,g.total+=y,y&&(N.adler=g.check=g.flags?h(g.check,ft,y,st-y):a(g.check,ft,y,st-y)),y=St,(g.flags?ut:m(ut))!==g.check){N.msg="incorrect data check",g.mode=30;break}Y=ut=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;Y<32;){if(dt===0)break t;dt--,ut+=et[at++]<<Y,Y+=8}if(ut!==(4294967295&g.total)){N.msg="incorrect length check",g.mode=30;break}Y=ut=0}g.mode=29;case 29:z=1;break t;case 30:z=-3;break t;case 31:return-4;case 32:default:return d}return N.next_out=st,N.avail_out=St,N.next_in=at,N.avail_in=dt,g.hold=ut,g.bits=Y,(g.wsize||y!==N.avail_out&&g.mode<30&&(g.mode<27||X!==4))&&H(N,N.output,N.next_out,y-N.avail_out)?(g.mode=31,-4):(B-=N.avail_in,y-=N.avail_out,N.total_in+=B,N.total_out+=y,g.total+=y,g.wrap&&y&&(N.adler=g.check=g.flags?h(g.check,ft,y,N.next_out-y):a(g.check,ft,y,N.next_out-y)),N.data_type=g.bits+(g.last?64:0)+(g.mode===12?128:0)+(g.mode===20||g.mode===15?256:0),(B==0&&y===0||X===4)&&z===w&&(z=-5),z)},s.inflateEnd=function(N){if(!N||!N.state)return d;var X=N.state;return X.window&&(X.window=null),N.state=null,w},s.inflateGetHeader=function(N,X){var g;return N&&N.state&&2&(g=N.state).wrap?((g.head=X).done=!1,w):d},s.inflateSetDictionary=function(N,X){var g,et=X.length;return N&&N.state?(g=N.state).wrap!==0&&g.mode!==11?d:g.mode===11&&a(1,X,et,0)!==g.check?-3:H(N,X,et,et)?(g.mode=31,-4):(g.havedict=1,w):d},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,s){var r=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(l,_,w,d,S,f,b,m){var k,P,R,A,F,U,M,x,$,H=m.bits,N=0,X=0,g=0,et=0,ft=0,at=0,st=0,dt=0,St=0,ut=0,Y=null,B=0,y=new r.Buf16(16),v=new r.Buf16(16),C=null,I=0;for(N=0;N<=15;N++)y[N]=0;for(X=0;X<d;X++)y[_[w+X]]++;for(ft=H,et=15;1<=et&&y[et]===0;et--);if(et<ft&&(ft=et),et===0)return S[f++]=20971520,S[f++]=20971520,m.bits=1,0;for(g=1;g<et&&y[g]===0;g++);for(ft<g&&(ft=g),N=dt=1;N<=15;N++)if(dt<<=1,(dt-=y[N])<0)return-1;if(0<dt&&(l===0||et!==1))return-1;for(v[1]=0,N=1;N<15;N++)v[N+1]=v[N]+y[N];for(X=0;X<d;X++)_[w+X]!==0&&(b[v[_[w+X]]++]=X);if(U=l===0?(Y=C=b,19):l===1?(Y=a,B-=257,C=h,I-=257,256):(Y=c,C=u,-1),N=g,F=f,st=X=ut=0,R=-1,A=(St=1<<(at=ft))-1,l===1&&852<St||l===2&&592<St)return 1;for(;;){for(M=N-st,$=b[X]<U?(x=0,b[X]):b[X]>U?(x=C[I+b[X]],Y[B+b[X]]):(x=96,0),k=1<<N-st,g=P=1<<at;S[F+(ut>>st)+(P-=k)]=M<<24|x<<16|$|0,P!==0;);for(k=1<<N-1;ut&k;)k>>=1;if(k!==0?(ut&=k-1,ut+=k):ut=0,X++,--y[N]==0){if(N===et)break;N=_[w+b[X]]}if(ft<N&&(ut&A)!==R){for(st===0&&(st=ft),F+=g,dt=1<<(at=N-st);at+st<et&&!((dt-=y[at+st])<=0);)at++,dt<<=1;if(St+=1<<at,l===1&&852<St||l===2&&592<St)return 1;S[R=ut&A]=ft<<24|at<<16|F-f|0}}return ut!==0&&(S[F+ut]=N-st<<24|64<<16|0),m.bits=ft,0}},{"../utils/common":41}],51:[function(n,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,s){var r=n("../utils/common"),a=0,h=1;function c(L){for(var K=L.length;0<=--K;)L[K]=0}var u=0,l=29,_=256,w=_+1+l,d=30,S=19,f=2*w+1,b=15,m=16,k=7,P=256,R=16,A=17,F=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(w+2));c(H);var N=new Array(2*d);c(N);var X=new Array(512);c(X);var g=new Array(256);c(g);var et=new Array(l);c(et);var ft,at,st,dt=new Array(d);function St(L,K,nt,ct,V){this.static_tree=L,this.extra_bits=K,this.extra_base=nt,this.elems=ct,this.max_length=V,this.has_stree=L&&L.length}function ut(L,K){this.dyn_tree=L,this.max_code=0,this.stat_desc=K}function Y(L){return L<256?X[L]:X[256+(L>>>7)]}function B(L,K){L.pending_buf[L.pending++]=255&K,L.pending_buf[L.pending++]=K>>>8&255}function y(L,K,nt){L.bi_valid>m-nt?(L.bi_buf|=K<<L.bi_valid&65535,B(L,L.bi_buf),L.bi_buf=K>>m-L.bi_valid,L.bi_valid+=nt-m):(L.bi_buf|=K<<L.bi_valid&65535,L.bi_valid+=nt)}function v(L,K,nt){y(L,nt[2*K],nt[2*K+1])}function C(L,K){for(var nt=0;nt|=1&L,L>>>=1,nt<<=1,0<--K;);return nt>>>1}function I(L,K,nt){var ct,V,J=new Array(b+1),Z=0;for(ct=1;ct<=b;ct++)J[ct]=Z=Z+nt[ct-1]<<1;for(V=0;V<=K;V++){var rt=L[2*V+1];rt!==0&&(L[2*V]=C(J[rt]++,rt))}}function D(L){var K;for(K=0;K<w;K++)L.dyn_ltree[2*K]=0;for(K=0;K<d;K++)L.dyn_dtree[2*K]=0;for(K=0;K<S;K++)L.bl_tree[2*K]=0;L.dyn_ltree[2*P]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function W(L){8<L.bi_valid?B(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Q(L,K,nt,ct){var V=2*K,J=2*nt;return L[V]<L[J]||L[V]===L[J]&&ct[K]<=ct[nt]}function it(L,K,nt){for(var ct=L.heap[nt],V=nt<<1;V<=L.heap_len&&(V<L.heap_len&&Q(K,L.heap[V+1],L.heap[V],L.depth)&&V++,!Q(K,ct,L.heap[V],L.depth));)L.heap[nt]=L.heap[V],nt=V,V<<=1;L.heap[nt]=ct}function pt(L,K,nt){var ct,V,J,Z,rt=0;if(L.last_lit!==0)for(;ct=L.pending_buf[L.d_buf+2*rt]<<8|L.pending_buf[L.d_buf+2*rt+1],V=L.pending_buf[L.l_buf+rt],rt++,ct===0?v(L,V,K):(v(L,(J=g[V])+_+1,K),(Z=U[J])!==0&&y(L,V-=et[J],Z),v(L,J=Y(--ct),nt),(Z=M[J])!==0&&y(L,ct-=dt[J],Z)),rt<L.last_lit;);v(L,P,K)}function j(L,K){var nt,ct,V,J=K.dyn_tree,Z=K.stat_desc.static_tree,rt=K.stat_desc.has_stree,vt=K.stat_desc.elems,Ct=-1;for(L.heap_len=0,L.heap_max=f,nt=0;nt<vt;nt++)J[2*nt]!==0?(L.heap[++L.heap_len]=Ct=nt,L.depth[nt]=0):J[2*nt+1]=0;for(;L.heap_len<2;)J[2*(V=L.heap[++L.heap_len]=Ct<2?++Ct:0)]=1,L.depth[V]=0,L.opt_len--,rt&&(L.static_len-=Z[2*V+1]);for(K.max_code=Ct,nt=L.heap_len>>1;1<=nt;nt--)it(L,J,nt);for(V=vt;nt=L.heap[1],L.heap[1]=L.heap[L.heap_len--],it(L,J,1),ct=L.heap[1],L.heap[--L.heap_max]=nt,L.heap[--L.heap_max]=ct,J[2*V]=J[2*nt]+J[2*ct],L.depth[V]=(L.depth[nt]>=L.depth[ct]?L.depth[nt]:L.depth[ct])+1,J[2*nt+1]=J[2*ct+1]=V,L.heap[1]=V++,it(L,J,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Tt,It){var zt,Ut,Vt,Nt,Xt,xt,_t=It.dyn_tree,gt=It.max_code,kt=It.stat_desc.static_tree,Rt=It.stat_desc.has_stree,ne=It.stat_desc.extra_bits,te=It.stat_desc.extra_base,At=It.stat_desc.max_length,Ot=0;for(Nt=0;Nt<=b;Nt++)Tt.bl_count[Nt]=0;for(_t[2*Tt.heap[Tt.heap_max]+1]=0,zt=Tt.heap_max+1;zt<f;zt++)At<(Nt=_t[2*_t[2*(Ut=Tt.heap[zt])+1]+1]+1)&&(Nt=At,Ot++),_t[2*Ut+1]=Nt,gt<Ut||(Tt.bl_count[Nt]++,Xt=0,te<=Ut&&(Xt=ne[Ut-te]),xt=_t[2*Ut],Tt.opt_len+=xt*(Nt+Xt),Rt&&(Tt.static_len+=xt*(kt[2*Ut+1]+Xt)));if(Ot!==0){do{for(Nt=At-1;Tt.bl_count[Nt]===0;)Nt--;Tt.bl_count[Nt]--,Tt.bl_count[Nt+1]+=2,Tt.bl_count[At]--,Ot-=2}while(0<Ot);for(Nt=At;Nt!==0;Nt--)for(Ut=Tt.bl_count[Nt];Ut!==0;)gt<(Vt=Tt.heap[--zt])||(_t[2*Vt+1]!==Nt&&(Tt.opt_len+=(Nt-_t[2*Vt+1])*_t[2*Vt],_t[2*Vt+1]=Nt),Ut--)}}(L,K),I(J,Ct,L.bl_count)}function o(L,K,nt){var ct,V,J=-1,Z=K[1],rt=0,vt=7,Ct=4;for(Z===0&&(vt=138,Ct=3),K[2*(nt+1)+1]=65535,ct=0;ct<=nt;ct++)V=Z,Z=K[2*(ct+1)+1],++rt<vt&&V===Z||(rt<Ct?L.bl_tree[2*V]+=rt:V!==0?(V!==J&&L.bl_tree[2*V]++,L.bl_tree[2*R]++):rt<=10?L.bl_tree[2*A]++:L.bl_tree[2*F]++,J=V,Ct=(rt=0)===Z?(vt=138,3):V===Z?(vt=6,3):(vt=7,4))}function z(L,K,nt){var ct,V,J=-1,Z=K[1],rt=0,vt=7,Ct=4;for(Z===0&&(vt=138,Ct=3),ct=0;ct<=nt;ct++)if(V=Z,Z=K[2*(ct+1)+1],!(++rt<vt&&V===Z)){if(rt<Ct)for(;v(L,V,L.bl_tree),--rt!=0;);else V!==0?(V!==J&&(v(L,V,L.bl_tree),rt--),v(L,R,L.bl_tree),y(L,rt-3,2)):rt<=10?(v(L,A,L.bl_tree),y(L,rt-3,3)):(v(L,F,L.bl_tree),y(L,rt-11,7));J=V,Ct=(rt=0)===Z?(vt=138,3):V===Z?(vt=6,3):(vt=7,4)}}c(dt);var G=!1;function O(L,K,nt,ct){y(L,(u<<1)+(ct?1:0),3),function(V,J,Z,rt){W(V),rt&&(B(V,Z),B(V,~Z)),r.arraySet(V.pending_buf,V.window,J,Z,V.pending),V.pending+=Z}(L,K,nt,!0)}s._tr_init=function(L){G||(function(){var K,nt,ct,V,J,Z=new Array(b+1);for(V=ct=0;V<l-1;V++)for(et[V]=ct,K=0;K<1<<U[V];K++)g[ct++]=V;for(g[ct-1]=V,V=J=0;V<16;V++)for(dt[V]=J,K=0;K<1<<M[V];K++)X[J++]=V;for(J>>=7;V<d;V++)for(dt[V]=J<<7,K=0;K<1<<M[V]-7;K++)X[256+J++]=V;for(nt=0;nt<=b;nt++)Z[nt]=0;for(K=0;K<=143;)H[2*K+1]=8,K++,Z[8]++;for(;K<=255;)H[2*K+1]=9,K++,Z[9]++;for(;K<=279;)H[2*K+1]=7,K++,Z[7]++;for(;K<=287;)H[2*K+1]=8,K++,Z[8]++;for(I(H,w+1,Z),K=0;K<d;K++)N[2*K+1]=5,N[2*K]=C(K,5);ft=new St(H,U,_+1,w,b),at=new St(N,M,0,d,b),st=new St(new Array(0),x,0,S,k)}(),G=!0),L.l_desc=new ut(L.dyn_ltree,ft),L.d_desc=new ut(L.dyn_dtree,at),L.bl_desc=new ut(L.bl_tree,st),L.bi_buf=0,L.bi_valid=0,D(L)},s._tr_stored_block=O,s._tr_flush_block=function(L,K,nt,ct){var V,J,Z=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(rt){var vt,Ct=4093624447;for(vt=0;vt<=31;vt++,Ct>>>=1)if(1&Ct&&rt.dyn_ltree[2*vt]!==0)return a;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return h;for(vt=32;vt<_;vt++)if(rt.dyn_ltree[2*vt]!==0)return h;return a}(L)),j(L,L.l_desc),j(L,L.d_desc),Z=function(rt){var vt;for(o(rt,rt.dyn_ltree,rt.l_desc.max_code),o(rt,rt.dyn_dtree,rt.d_desc.max_code),j(rt,rt.bl_desc),vt=S-1;3<=vt&&rt.bl_tree[2*$[vt]+1]===0;vt--);return rt.opt_len+=3*(vt+1)+5+5+4,vt}(L),V=L.opt_len+3+7>>>3,(J=L.static_len+3+7>>>3)<=V&&(V=J)):V=J=nt+5,nt+4<=V&&K!==-1?O(L,K,nt,ct):L.strategy===4||J===V?(y(L,2+(ct?1:0),3),pt(L,H,N)):(y(L,4+(ct?1:0),3),function(rt,vt,Ct,Tt){var It;for(y(rt,vt-257,5),y(rt,Ct-1,5),y(rt,Tt-4,4),It=0;It<Tt;It++)y(rt,rt.bl_tree[2*$[It]+1],3);z(rt,rt.dyn_ltree,vt-1),z(rt,rt.dyn_dtree,Ct-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Z+1),pt(L,L.dyn_ltree,L.dyn_dtree)),D(L),ct&&W(L)},s._tr_tally=function(L,K,nt){return L.pending_buf[L.d_buf+2*L.last_lit]=K>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&K,L.pending_buf[L.l_buf+L.last_lit]=255&nt,L.last_lit++,K===0?L.dyn_ltree[2*nt]++:(L.matches++,K--,L.dyn_ltree[2*(g[nt]+_+1)]++,L.dyn_dtree[2*Y(K)]++),L.last_lit===L.lit_bufsize-1},s._tr_align=function(L){y(L,2,3),v(L,P,H),function(K){K.bi_valid===16?(B(K,K.bi_buf),K.bi_buf=0,K.bi_valid=0):8<=K.bi_valid&&(K.pending_buf[K.pending++]=255&K.bi_buf,K.bi_buf>>=8,K.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,s){(function(r){(function(a,h){if(!a.setImmediate){var c,u,l,_,w=1,d={},S=!1,f=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,c={}.toString.call(a.process)==="[object process]"?function(R){process.nextTick(function(){k(R)})}:function(){if(a.postMessage&&!a.importScripts){var R=!0,A=a.onmessage;return a.onmessage=function(){R=!1},a.postMessage("","*"),a.onmessage=A,R}}()?(_="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",P,!1):a.attachEvent("onmessage",P),function(R){a.postMessage(_+R,"*")}):a.MessageChannel?((l=new MessageChannel).port1.onmessage=function(R){k(R.data)},function(R){l.port2.postMessage(R)}):f&&"onreadystatechange"in f.createElement("script")?(u=f.documentElement,function(R){var A=f.createElement("script");A.onreadystatechange=function(){k(R),A.onreadystatechange=null,u.removeChild(A),A=null},u.appendChild(A)}):function(R){setTimeout(k,0,R)},b.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var A=new Array(arguments.length-1),F=0;F<A.length;F++)A[F]=arguments[F+1];var U={callback:R,args:A};return d[w]=U,c(w),w++},b.clearImmediate=m}function m(R){delete d[R]}function k(R){if(S)setTimeout(k,0,R);else{var A=d[R];if(A){S=!0;try{(function(F){var U=F.callback,M=F.args;switch(M.length){case 0:U();break;case 1:U(M[0]);break;case 2:U(M[0],M[1]);break;case 3:U(M[0],M[1],M[2]);break;default:U.apply(h,M)}})(A)}finally{m(R),S=!1}}}}function P(R){R.source===a&&typeof R.data=="string"&&R.data.indexOf(_)===0&&k(+R.data.slice(_.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),_hoisted_1$5={"pl-100":""},_hoisted_2$4={class:"flex items-center gap-4 p-3"},_hoisted_3$4=["disabled"],_hoisted_4$4=["disabled"],_hoisted_5$1={key:0,"mb-4":""},_hoisted_6$1={"text-sm":"","text-gray-600":"","mb-2":""},_hoisted_7$1={class:"progress-bar","w-full":"","h-2":"","bg-gray-200":"",rounded:""},_hoisted_8$1={key:1},_hoisted_9$1={"m-3":"","w-fit":"","border-1":"","border-rd":"","p-3":"","mr-5":""},_hoisted_10$1={key:0},_hoisted_11$1=["src"],_hoisted_12$1={key:1},_hoisted_13$1={key:2,"w-200":"","h-168":"",flex:"","justify-center":"","flex-items-center":""},_hoisted_14$1={key:2,class:"file-grid",grid:"","grid-cols-2":"","md:grid-cols-3":"","lg:grid-cols-4":"","gap-4":"","m-3":""},_hoisted_15$1=["onClick"],_hoisted_16$1={key:0,class:"preview-container"},_hoisted_17=["src","alt"],_hoisted_18={key:1,class:"preview-container"},_hoisted_19={key:0,class:"pdf-preview-with-image"},_hoisted_20=["src","alt"],_hoisted_21={key:1,class:"pdf-preview","w-full":"","h-32":"","bg-gray-100":"",rounded:"","mb-2":"",flex:"","items-center":"","justify-center":""},_hoisted_22={"text-center":""},_hoisted_23={"text-xs":"","text-gray-600":""},_hoisted_24={"text-xs":"","text-gray-600":"","mb-2":""},_hoisted_25=["title"],_hoisted_26={key:0},_hoisted_27={key:1},_hoisted_28={key:0},_hoisted_29=["onClick","disabled"],_hoisted_30={key:3,class:"empty-state","text-center":"","py-8":"","text-gray-500":"","m-3":""},_hoisted_31={class:"loading-overlay",position:"fixed","left-0":"","top-0":"","right-0":"","bottom-0":"",flex:"","items-center":"","justify-center":"","bg-teal-100":"","z-50":""},_sfc_main$7=defineComponent({__name:"TheMain",props:{config:null},setup(t){const{t:e}=useI18n();let n=!1,i="",s="",r;const a=ref(),h=ref(),c=ref(""),u=ref(""),l=ref(!1),_=ref(),w=ref([]),d=ref(0),S=ref(),f=computed(()=>w.value.length>1),b=computed(()=>w.value.length>0||c.value!==""||u.value!=="");let m=null;watch(t.config,k);function k(){n=!1,r&&(h.value.src=generateCanvas(t.config,r,n,!1,!0).src),u.value&&loadPdfPreview(u.value,t.config,_,l,n),w.value.length>0&&(m&&clearTimeout(m),m=setTimeout(()=>{X()},300))}function P(Y){const B=Y.target.files;if(!B||B.length===0)return;if(!(w.value.length>0||c.value!==""||u.value!==""))U(),w.value=[];else if(c.value!==""||u.value!==""){if(c.value!==""&&r){const v=generateCanvas(t.config,r,!0),C={id:Math.random().toString(36).substr(2,9),name:s||"current_image.png",originalFile:new File([A(c.value)],s||"current_image.png"),type:"image",originalImage:r,processedDataUrl:v.src,width:r.width,height:r.height};w.value=[C],r&&(r=null),c.value&&(c.value=""),_.value&&(_.value.innerHTML="")}else if(u.value!==""){console.log("将当前单个PDF文件转换为批量模式");const v=A(u.value),C=new File([v],s||"current_document.pdf",{type:"application/pdf"});u.value,u.value&&(u.value=""),_.value&&(_.value.innerHTML=""),l.value=!0,N(C).then(I=>{I?(w.value=[I],console.log("PDF文件已转换为批量模式，现在添加新文件"),R(B)):(console.error("PDF转换失败，直接处理新文件"),R(B))}).catch(I=>{console.error("转换PDF文件到批量模式失败:",I),R(B)});return}}B.length===1&&w.value.length===0?F(B[0]):R(B)}function R(Y){l.value=!0;const B=Array.from(Y).filter(v=>w.value.some(I=>I.name===v.name)?(console.log(`文件 ${v.name} 已存在，跳过`),!1):v.type.startsWith("image/")||v.type==="application/pdf");if(B.length===0){l.value=!1,console.log("没有新的文件需要添加");return}console.log(`添加 ${B.length} 个新文件到现有的 ${w.value.length} 个文件中`);const y=w.value.length;d.value=y,Promise.all(B.map($)).then(v=>{const C=v.filter(I=>I!==null);w.value=[...w.value,...C],l.value=!1,console.log(`成功添加 ${C.length} 个文件，当前总文件数: ${w.value.length}`)}).catch(v=>{console.error("添加文件失败:",v),l.value=!1})}function A(Y){const[B,y]=Y.split(","),v=B.split(":")[1].split(";")[0],C=atob(y),I=new Uint8Array(C.length);for(let D=0;D<C.length;D++)I[D]=C.charCodeAt(D);return new Blob([I],{type:v})}function F(Y){n=!0,i=Y.type,s=Y.name,i.startsWith("image/")&&M(Y),i==="application/pdf"&&(l.value=!0,x(Y))}function U(){r&&(r=null),c.value&&(c.value=""),u.value&&(u.value=""),_.value&&(_.value.innerHTML="")}function M(Y){const B=new FileReader;B.readAsDataURL(Y),B.onload=()=>{const y=new Image;y.src=B.result,r=y,y.onload=()=>{t.config.width=y.width,t.config.height=y.height,h.value.src=generateCanvas(t.config,y,n).src}},B.onloadend=()=>{c.value=B.result}}function x(Y){const B=new FileReader;B.readAsDataURL(Y),B.onloadend=()=>{u.value=B.result,loadPdfPreview(u.value,t.config,_,l,n)}}function $(Y){return Y.type.startsWith("image/")?H(Y):Y.type==="application/pdf"?N(Y):Promise.resolve(null)}function H(Y){return new Promise(B=>{const y=new FileReader;y.onload=()=>{const v=new Image;v.onload=()=>{try{const C=generateCanvas(t.config,v,!0),I={id:Math.random().toString(36).substr(2,9),name:Y.name,originalFile:Y,type:"image",originalImage:v,processedDataUrl:C.src,width:v.width,height:v.height};B(I),d.value+=1}catch(C){console.error(`处理图片 ${Y.name} 失败:`,C),B(null)}},v.onerror=()=>{console.error(`加载图片 ${Y.name} 失败`),B(null)},v.src=y.result},y.onerror=()=>{console.error(`读取文件 ${Y.name} 失败`),B(null)},y.readAsDataURL(Y)})}function N(Y){return new Promise(B=>{const y=new FileReader;y.onload=async()=>{try{const C=await pdfExports.getDocument({data:y.result,disableRange:!0}).promise,I=C.numPages,D=[];for(let Q=1;Q<=I;Q++){const it=await C.getPage(Q),pt=document.createElement("canvas"),j=pt.getContext("2d"),o=1,z=it.getViewport({scale:o});pt.width=z.width,pt.height=z.height,j.imageSmoothingEnabled=!0,j.imageSmoothingQuality="medium",await it.render({canvasContext:j,viewport:z}).promise;const O=generateCanvas(t.config,pt,!0,!0,!0).newCanvas.toDataURL("image/png",.8);D.push(O)}const W={id:Math.random().toString(36).substr(2,9),name:Y.name,originalFile:Y,type:"pdf",pdfPages:D,width:0,height:0};B(W),d.value+=1}catch(v){console.error(`处理PDF ${Y.name} 失败:`,v),B(null)}},y.onerror=()=>{console.error(`读取PDF文件 ${Y.name} 失败`),B(null)},y.readAsArrayBuffer(Y)})}function X(){if(w.value.length===0)return;const Y=w.value.map(async(B,y)=>{try{if(B.type==="image"&&B.originalImage){const v=generateCanvas(t.config,B.originalImage,!0,!1,!0);return B.processedDataUrl=v.src,Promise.resolve()}else if(B.type==="pdf")return new Promise(v=>{const C=new FileReader;C.onload=async()=>{try{const D=await pdfExports.getDocument({data:C.result,disableRange:!0}).promise,W=D.numPages,Q=[];for(let it=1;it<=W;it++){const pt=await D.getPage(it),j=document.createElement("canvas"),o=j.getContext("2d"),z=1,G=pt.getViewport({scale:z});j.width=G.width,j.height=G.height,o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="medium",await pt.render({canvasContext:o,viewport:G}).promise;const L=generateCanvas(t.config,j,!0,!0,!0).newCanvas.toDataURL("image/png",.8);Q.push(L)}B.pdfPages=Q,v()}catch(I){console.error(`预览模式重新处理PDF ${B.name} 失败:`,I),v()}},C.onerror=()=>{console.error(`读取PDF文件 ${B.name} 失败`),v()},C.readAsArrayBuffer(B.originalFile)})}catch(v){return console.error(`预览模式重新处理文件 ${B.name} 失败:`,v),Promise.resolve()}});Promise.all(Y).catch(B=>{console.error("预览模式批量重新处理失败:",B)})}function g(){f.value?at():et()}async function et(){if(!(c.value===""&&u.value==="")){if(i.startsWith("image/")&&r){const Y=generateCanvas(t.config,r,n,!1,!1).src;downloadImage(Y,t.config,s)}if(i==="application/pdf"){l.value=!0;try{await ft()}catch(Y){console.error("PDF下载失败:",Y),l.value=!1}}}}async function ft(){if(!u.value){l.value=!1;return}try{console.log("开始生成高质量PDF...");const B=await pdfExports.getDocument({url:u.value,disableRange:!0}).promise,y=B.numPages;console.log(`PDF总页数: ${y}`);const v=[];for(let C=1;C<=y;C++){console.log(`正在处理第 ${C}/${y} 页...`);const I=await B.getPage(C),D=document.createElement("canvas"),W=D.getContext("2d"),Q=Math.max(2,window.devicePixelRatio||1),it=I.getViewport({scale:Q});D.width=it.width,D.height=it.height,W.imageSmoothingEnabled=!0,W.imageSmoothingQuality="high",await I.render({canvasContext:W,viewport:it}).promise;const{src:pt}=generateCanvas(t.config,D,!0,!0,!1,!0);v.push({src:pt,width:D.width,height:D.height})}console.log("页面处理完成，开始生成PDF文件..."),await img2PdfWithData(s,l,v)}catch(Y){throw console.error("生成高质量PDF失败:",Y),l.value=!1,Y}}async function at(){if(w.value.length!==0){console.log("开始批量下载，总文件数:",w.value.length),console.log("文件列表:",w.value.map(Y=>{var B;return{name:Y.name,type:Y.type,hasPdfPages:!!Y.pdfPages,pdfPagesCount:(B=Y.pdfPages)==null?void 0:B.length}})),l.value=!0;try{const Y=new JSZip;for(const v of w.value){console.log(`正在处理文件: ${v.name}, 类型: ${v.type}`);try{if(v.type==="image"&&v.originalImage){console.log(`处理图片文件: ${v.name}`);const D=generateCanvas(t.config,v.originalImage,!0,!1,!1).src.split(","),W=D[0].match(/:(.*?);/)[1],Q=atob(D[1]);let it=Q.length;const pt=new Uint8Array(it);for(;it--;)pt[it]=Q.charCodeAt(it);const j=new Blob([pt],{type:W}),o=v.name.replace(/\.[^/.]+$/,"")+"_watermarked.png";Y.file(o,j),console.log(`图片文件 ${v.name} 处理完成`)}else if(v.type==="pdf"&&v.originalFile){console.log(`处理PDF文件: ${v.name}`);const C=new FileReader;await new Promise((I,D)=>{C.onload=async()=>{try{const Q=await pdfExports.getDocument({data:C.result,disableRange:!0}).promise,it=Q.numPages,pt=[];for(let z=1;z<=it;z++){const G=await Q.getPage(z),O=document.createElement("canvas"),L=O.getContext("2d"),K=Math.max(2,window.devicePixelRatio||1),nt=G.getViewport({scale:K});O.width=nt.width,O.height=nt.height,L.imageSmoothingEnabled=!0,L.imageSmoothingQuality="high",await G.render({canvasContext:L,viewport:nt}).promise;const V=generateCanvas(t.config,O,!0,!0,!1,!0).src;pt.push(V)}const{PDFDocument:j}=await __vitePreload(()=>import("./index-6a9bec72.js"),[],import.meta.url),o=await j.create();for(let z=0;z<pt.length;z++){const G=pt[z];try{const O=G.split(",")[1];if(!O)continue;const L=Uint8Array.from(atob(O),ct=>ct.charCodeAt(0));let K;G.startsWith("data:image/jpeg")?K=await o.embedJpg(L):K=await o.embedPng(L),o.addPage([K.width,K.height]).drawImage(K,{x:0,y:0,width:K.width,height:K.height}),console.log(`PDF ${v.name} 第 ${z+1} 页处理完成`)}catch(O){console.error(`处理PDF ${v.name} 第 ${z+1} 页失败:`,O);continue}}if(o.getPages().length>0){const z=await o.save({useObjectStreams:!1,addDefaultPage:!1,objectsPerTick:50}),G=new Blob([z],{type:"application/pdf"}),O=v.name.replace(/\.[^/.]+$/,"")+"_watermarked.pdf";Y.file(O,G),console.log(`PDF文件 ${v.name} 处理完成，页数: ${o.getPages().length}`)}else console.error(`PDF ${v.name} 处理后没有有效页面`);I()}catch(W){console.error(`重新生成高质量PDF ${v.name} 失败:`,W),D(W)}},C.onerror=()=>D(new Error(`读取PDF文件 ${v.name} 失败`)),C.readAsArrayBuffer(v.originalFile)})}}catch(C){console.error(`处理文件 ${v.name} 时发生错误:`,C);continue}}const B=Object.keys(Y.files);if(B.length===0)throw new Error("没有文件被成功处理，无法创建下载包");console.log(`成功处理了 ${B.length} 个文件:`,B);const y=await Y.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});console.log("ZIP包生成完成，大小:",y.size,"bytes"),FileSaver_minExports.saveAs(y,"watermarked_files.zip")}catch(Y){console.error("批量下载失败:",Y),alert("批量下载失败，请检查控制台了解详细错误信息")}finally{l.value=!1}}}async function st(Y){l.value=!0;try{if(Y.type==="image"&&Y.originalImage){const v=generateCanvas(t.config,Y.originalImage,!0,!1,!1).src.split(","),C=v[0].match(/:(.*?);/)[1],I=atob(v[1]);let D=I.length;const W=new Uint8Array(D);for(;D--;)W[D]=I.charCodeAt(D);const Q=new Blob([W],{type:C}),it=Y.name.replace(/\.[^/.]+$/,"")+"_watermarked.png";FileSaver_minExports.saveAs(Q,it)}else Y.type==="pdf"&&Y.originalFile&&(console.log(`开始处理PDF文件: ${Y.name}`),await new Promise((B,y)=>{const v=new FileReader;v.onload=async()=>{try{const I=await pdfExports.getDocument({data:v.result,disableRange:!0}).promise,D=I.numPages;console.log(`PDF ${Y.name} 总页数: ${D}`);const W=[];for(let pt=1;pt<=D;pt++){console.log(`正在处理PDF ${Y.name} 第 ${pt}/${D} 页...`);const j=await I.getPage(pt),o=document.createElement("canvas"),z=o.getContext("2d"),G=Math.max(2,window.devicePixelRatio||1),O=j.getViewport({scale:G});o.width=O.width,o.height=O.height,z.imageSmoothingEnabled=!0,z.imageSmoothingQuality="high",await j.render({canvasContext:z,viewport:O}).promise;const K=generateCanvas(t.config,o,!0,!0,!1,!0).src;W.push(K)}console.log(`PDF ${Y.name} 页面处理完成，开始生成PDF文件...`);const{PDFDocument:Q}=await __vitePreload(()=>import("./index-6a9bec72.js"),[],import.meta.url),it=await Q.create();for(let pt=0;pt<W.length;pt++){const j=W[pt];try{const o=j.split(",")[1];if(!o)continue;const z=Uint8Array.from(atob(o),L=>L.charCodeAt(0));let G;j.startsWith("data:image/jpeg")?G=await it.embedJpg(z):G=await it.embedPng(z),it.addPage([G.width,G.height]).drawImage(G,{x:0,y:0,width:G.width,height:G.height})}catch(o){console.error(`处理PDF ${Y.name} 第 ${pt+1} 页失败:`,o);continue}}if(it.getPages().length>0){const pt=await it.save({useObjectStreams:!1,addDefaultPage:!1,objectsPerTick:50}),j=new Blob([pt],{type:"application/pdf"}),o=Y.name.replace(/\.[^/.]+$/,"")+"_watermarked.pdf";FileSaver_minExports.saveAs(j,o),console.log(`PDF文件 ${Y.name} 下载完成`),B()}else y(new Error(`PDF ${Y.name} 处理后没有有效页面`))}catch(C){console.error(`重新生成高质量PDF ${Y.name} 失败:`,C),y(C)}},v.onerror=()=>{y(new Error(`读取PDF文件 ${Y.name} 失败`))},v.readAsArrayBuffer(Y.originalFile)}))}catch(B){console.error("下载失败:",B),alert(`下载失败: ${B.message||"未知错误"}`)}finally{l.value=!1}}function dt(Y){if(w.value=w.value.filter(B=>B.id!==Y),w.value.length===1){const B=w.value[0];F(B.originalFile),w.value=[]}else w.value.length===0&&U()}function St(){w.value=[],U(),S.value&&(S.value.value=""),d.value=0,n=!1,i="",s="",r=null,m&&(clearTimeout(m),m=null),l.value=!1,console.log("所有文件和状态已清空")}function ut(){var Y;(Y=S.value)==null||Y.click()}return(Y,B)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("input",{ref_key:"fileInput",ref:S,style:{display:"none"},type:"file",accept:"image/*, application/pdf",multiple:"",onChange:P},null,544),createBaseVNode("button",{onClick:ut,class:"text-sm btn"},toDisplayString(unref(b)?unref(e).addMoreFiles:unref(f)?unref(e).loadBatch:unref(e).load),1),createBaseVNode("button",{class:"text-sm btn",disabled:!unref(b),onClick:g},toDisplayString(unref(f)?unref(e).downloadAll:unref(e).download),9,_hoisted_3$4),unref(b)?(openBlock(),createElementBlock("button",{key:0,class:"text-sm btn bg-red-500 hover:bg-red-600",onClick:St,disabled:unref(l)},toDisplayString(unref(e).clear),9,_hoisted_4$4)):createCommentVNode("",!0)]),unref(l)&&unref(f)?(openBlock(),createElementBlock("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,toDisplayString(unref(e).processing)+" "+toDisplayString(unref(d))+" / "+toDisplayString(unref(w).length),1),createBaseVNode("div",_hoisted_7$1,[createBaseVNode("div",{class:"progress-fill","h-full":"","bg-blue-500":"",rounded:"","transition-all":"",style:normalizeStyle({width:unref(w).length>0?unref(d)/unref(w).length*100+"%":"0%"})},null,4)])])):createCommentVNode("",!0),unref(f)?unref(b)?(openBlock(),createElementBlock("div",_hoisted_14$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(w),y=>(openBlock(),createElementBlock("div",{key:y.id,class:"file-item",border:"1 solid gray-200",rounded:"","p-2":"",relative:""},[createBaseVNode("button",{onClick:v=>dt(y.id),class:"delete-btn",absolute:"","top-0":"","right-1":"","w-8":"","h-8":"","text-red-500":"","hover:text-red-600":"","transition-colors":"","text-2xl":"","font-bold":"","z-20":""}," × ",8,_hoisted_15$1),y.type==="image"?(openBlock(),createElementBlock("div",_hoisted_16$1,[createBaseVNode("img",{src:y.processedDataUrl,alt:y.name,class:"preview-image","w-full":"","h-32":"","object-cover":"",rounded:"","mb-2":""},null,8,_hoisted_17)])):y.type==="pdf"?(openBlock(),createElementBlock("div",_hoisted_18,[y.pdfPages&&y.pdfPages.length>0?(openBlock(),createElementBlock("div",_hoisted_19,[createBaseVNode("img",{src:y.pdfPages[0],alt:`${y.name} 第一页预览`,class:"preview-image","w-full":"","h-32":"","object-cover":"",rounded:"","mb-2":""},null,8,_hoisted_20),B[1]||(B[1]=createBaseVNode("div",{class:"pdf-overlay",absolute:"","top-1":"","left-1":"","bg-black":"","bg-opacity-60":"","text-white":"","text-xs":"","px-1":"",rounded:""}," PDF ",-1))])):(openBlock(),createElementBlock("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[B[2]||(B[2]=createBaseVNode("div",{"text-2xl":"","mb-1":""},"📄",-1)),B[3]||(B[3]=createBaseVNode("div",{"text-xs":"","text-gray-600":""},"PDF",-1)),createBaseVNode("div",_hoisted_23,toDisplayString(unref(e).processing)+"...",1)])]))])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_24,[createBaseVNode("div",{truncate:"",title:y.name},toDisplayString(y.name),9,_hoisted_25),y.type==="image"?(openBlock(),createElementBlock("div",_hoisted_26,toDisplayString(y.width)+" × "+toDisplayString(y.height),1)):y.type==="pdf"?(openBlock(),createElementBlock("div",_hoisted_27,[createBaseVNode("span",null,toDisplayString(unref(e).pdfDocument),1),y.pdfPages&&y.pdfPages.length>0?(openBlock(),createElementBlock("span",_hoisted_28," · "+toDisplayString(y.pdfPages.length)+" "+toDisplayString(unref(e).pages),1)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("button",{onClick:v=>st(y),class:"download-btn btn text-xs w-full",disabled:unref(l)},toDisplayString(unref(e).download),9,_hoisted_29)]))),128))])):unref(f)&&!unref(l)?(openBlock(),createElementBlock("div",_hoisted_30,[B[4]||(B[4]=createBaseVNode("div",{"text-4xl":"","mb-2":""},"📁",-1)),createBaseVNode("div",null,toDisplayString(unref(e).batchEmptyHint.replace("{loadBatch}",unref(e).loadBatch)),1)])):createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_8$1,[createBaseVNode("div",_hoisted_9$1,[unref(c)?(openBlock(),createElementBlock("div",_hoisted_10$1,[createBaseVNode("img",{ref_key:"preview",ref:h,src:unref(c),style:normalizeStyle(`width: ${t.config.width}px;height: ${t.config.height}px;max-width: unset;`)},null,12,_hoisted_11$1),createBaseVNode("canvas",{ref_key:"canvas",ref:a,"display-none":""},null,512)])):unref(u)?(openBlock(),createElementBlock("div",_hoisted_12$1,[createBaseVNode("div",{ref_key:"wrap",ref:_},null,512)])):(openBlock(),createElementBlock("div",_hoisted_13$1,[createBaseVNode("button",{onClick:ut,"border-1":"","border-dashed":""},B[0]||(B[0]=[createBaseVNode("span",{"icon-btn":"","text-10":"","display-block":"","i-carbon:task-add":""},null,-1)]))]))])])),withDirectives(createBaseVNode("div",_hoisted_31,B[5]||(B[5]=[createBaseVNode("span",{class:"loading btn","i-carbon-3rd-party-connected":"","text-4xl":""},null,-1)]),512),[[vShow,unref(l)]])]))}}),TheMain_vue_vue_type_style_index_0_scoped_28ee915d_lang="",_export_sfc=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},__unplugin_components_1=_export_sfc(_sfc_main$7,[["__scopeId","data-v-28ee915d"]]);var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",noop=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,e){function n(...i){return new Promise((s,r)=>{Promise.resolve(t(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(r)})}return n}const bypassFilter=t=>t();function pausableFilter(t=bypassFilter){const e=ref(!0);function n(){e.value=!1}function i(){e.value=!0}const s=(...r)=>{e.value&&t(...r)};return{isActive:readonly(e),pause:n,resume:i,eventFilter:s}}function identity(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function resolveRef(t){return typeof t=="function"?computed(t):ref(t)}function tryOnMounted(t,e=!0){getCurrentInstance()?onMounted(t):e?t():nextTick(t)}function useToggle(t=!1,e={}){const{truthyValue:n=!0,falsyValue:i=!1}=e,s=isRef(t),r=ref(t);function a(h){if(arguments.length)return r.value=h,r.value;{const c=resolveUnref(n);return r.value=r.value===c?resolveUnref(i):c,r.value}}return s?a:[r,a]}var __getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__objRest$5=(t,e)=>{var n={};for(var i in t)__hasOwnProp$6.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&__getOwnPropSymbols$6)for(var i of __getOwnPropSymbols$6(t))e.indexOf(i)<0&&__propIsEnum$6.call(t,i)&&(n[i]=t[i]);return n};function watchWithFilter(t,e,n={}){const i=n,{eventFilter:s=bypassFilter}=i,r=__objRest$5(i,["eventFilter"]);return watch(t,createFilterWrapper(s,e),r)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(t,e,n)=>e in t?__defProp$2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$2=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$2.call(e,n)&&__defNormalProp$2(t,n,e[n]);if(__getOwnPropSymbols$2)for(var n of __getOwnPropSymbols$2(e))__propIsEnum$2.call(e,n)&&__defNormalProp$2(t,n,e[n]);return t},__spreadProps$2=(t,e)=>__defProps$2(t,__getOwnPropDescs$2(e)),__objRest$1=(t,e)=>{var n={};for(var i in t)__hasOwnProp$2.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&__getOwnPropSymbols$2)for(var i of __getOwnPropSymbols$2(t))e.indexOf(i)<0&&__propIsEnum$2.call(t,i)&&(n[i]=t[i]);return n};function watchPausable(t,e,n={}){const i=n,{eventFilter:s}=i,r=__objRest$1(i,["eventFilter"]),{eventFilter:a,pause:h,resume:c,isActive:u}=pausableFilter(s);return{stop:watchWithFilter(t,e,__spreadProps$2(__spreadValues$2({},r),{eventFilter:a})),pause:h,resume:c,isActive:u}}function unrefElement(t){var e;const n=resolveUnref(t);return(e=n==null?void 0:n.$el)!=null?e:n}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let e,n,i,s;if(isString(t[0])||Array.isArray(t[0])?([n,i,s]=t,e=defaultWindow):[e,n,i,s]=t,!e)return noop;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const r=[],a=()=>{r.forEach(l=>l()),r.length=0},h=(l,_,w,d)=>(l.addEventListener(_,w,d),()=>l.removeEventListener(_,w,d)),c=watch(()=>[unrefElement(e),resolveUnref(s)],([l,_])=>{a(),l&&r.push(...n.flatMap(w=>i.map(d=>h(l,w,d,_))))},{immediate:!0,flush:"post"}),u=()=>{c(),a()};return tryOnScopeDispose(u),u}function useSupported(t,e=!1){const n=ref(),i=()=>n.value=!!t();return i(),tryOnMounted(i,e),n}function useMediaQuery(t,e={}){const{window:n=defaultWindow}=e,i=useSupported(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const r=ref(!1),a=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",h):s.removeListener(h))},h=()=>{i.value&&(a(),s=n.matchMedia(resolveRef(t).value),r.value=s.matches,"addEventListener"in s?s.addEventListener("change",h):s.addListener(h))};return watchEffect(h),tryOnScopeDispose(()=>a()),r}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers=_global[globalKey];function getSSRHandler(t,e){return handlers[t]||e}function guessSerializerType(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}var __defProp$k=Object.defineProperty,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(t,e,n)=>e in t?__defProp$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$k=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$m.call(e,n)&&__defNormalProp$k(t,n,e[n]);if(__getOwnPropSymbols$m)for(var n of __getOwnPropSymbols$m(e))__propIsEnum$m.call(e,n)&&__defNormalProp$k(t,n,e[n]);return t};const StorageSerializers={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(t,e,n,i={}){var s;const{flush:r="pre",deep:a=!0,listenToStorageChanges:h=!0,writeDefaults:c=!0,mergeDefaults:u=!1,shallow:l,window:_=defaultWindow,eventFilter:w,onError:d=M=>{console.error(M)}}=i,S=(l?shallowRef:ref)(e);if(!n)try{n=getSSRHandler("getDefaultStorage",()=>{var M;return(M=defaultWindow)==null?void 0:M.localStorage})()}catch(M){d(M)}if(!n)return S;const f=resolveUnref(e),b=guessSerializerType(f),m=(s=i.serializer)!=null?s:StorageSerializers[b],{pause:k,resume:P}=watchPausable(S,()=>R(S.value),{flush:r,deep:a,eventFilter:w});return _&&h&&(useEventListener(_,"storage",U),useEventListener(_,customStorageEventName,F)),U(),S;function R(M){try{if(M==null)n.removeItem(t);else{const x=m.write(M),$=n.getItem(t);$!==x&&(n.setItem(t,x),_&&_.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:t,oldValue:$,newValue:x,storageArea:n}})))}}catch(x){d(x)}}function A(M){const x=M?M.newValue:n.getItem(t);if(x==null)return c&&f!==null&&n.setItem(t,m.write(f)),f;if(!M&&u){const $=m.read(x);return isFunction(u)?u($,f):b==="object"&&!Array.isArray($)?__spreadValues$k(__spreadValues$k({},f),$):$}else return typeof x!="string"?x:m.read(x)}function F(M){U(M.detail)}function U(M){if(!(M&&M.storageArea!==n)){if(M&&M.key==null){S.value=f;return}if(!(M&&M.key!==t)){k();try{S.value=A(M)}catch(x){d(x)}finally{M?nextTick(P):P()}}}}}function usePreferredDark(t){return useMediaQuery("(prefers-color-scheme: dark)",t)}var __defProp$j=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(t,e,n)=>e in t?__defProp$j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$j=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$l.call(e,n)&&__defNormalProp$j(t,n,e[n]);if(__getOwnPropSymbols$l)for(var n of __getOwnPropSymbols$l(e))__propIsEnum$l.call(e,n)&&__defNormalProp$j(t,n,e[n]);return t};function useColorMode(t={}){const{selector:e="html",attribute:n="class",initialValue:i="auto",window:s=defaultWindow,storage:r,storageKey:a="vueuse-color-scheme",listenToStorageChanges:h=!0,storageRef:c,emitAuto:u}=t,l=__spreadValues$j({auto:"",light:"light",dark:"dark"},t.modes||{}),_=usePreferredDark({window:s}),w=computed(()=>_.value?"dark":"light"),d=c||(a==null?ref(i):useStorage(a,i,r,{window:s,listenToStorageChanges:h})),S=computed({get(){return d.value==="auto"&&!u?w.value:d.value},set(k){d.value=k}}),f=getSSRHandler("updateHTMLAttrs",(k,P,R)=>{const A=s==null?void 0:s.document.querySelector(k);if(A)if(P==="class"){const F=R.split(/\s/g);Object.values(l).flatMap(U=>(U||"").split(/\s/g)).filter(Boolean).forEach(U=>{F.includes(U)?A.classList.add(U):A.classList.remove(U)})}else A.setAttribute(P,R)});function b(k){var P;const R=k==="auto"?w.value:k;f(e,n,(P=l[R])!=null?P:R)}function m(k){t.onChanged?t.onChanged(k,b):b(k)}return watch(S,m,{flush:"post",immediate:!0}),u&&watch(w,()=>m(S.value),{flush:"post"}),tryOnMounted(()=>m(S.value)),S}var __defProp$i=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(t,e,n)=>e in t?__defProp$i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$i=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$k.call(e,n)&&__defNormalProp$i(t,n,e[n]);if(__getOwnPropSymbols$k)for(var n of __getOwnPropSymbols$k(e))__propIsEnum$k.call(e,n)&&__defNormalProp$i(t,n,e[n]);return t},__spreadProps$7=(t,e)=>__defProps$7(t,__getOwnPropDescs$7(e));function useDark(t={}){const{valueDark:e="dark",valueLight:n="",window:i=defaultWindow}=t,s=useColorMode(__spreadProps$7(__spreadValues$i({},t),{onChanged:(h,c)=>{var u;t.onChanged?(u=t.onChanged)==null||u.call(t,h==="dark"):c(h)},modes:{dark:e,light:n}})),r=usePreferredDark({window:i});return computed({get(){return s.value==="dark"},set(h){h===r.value?s.value="auto":s.value=h?"dark":"light"}})}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues=(t,e)=>{for(var n in e||(e={}))__hasOwnProp.call(e,n)&&__defNormalProp(t,n,e[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))__propIsEnum.call(e,n)&&__defNormalProp(t,n,e[n]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(t,e,n,i={}){var s,r,a;const{clone:h=!1,passive:c=!1,eventName:u,deep:l=!1,defaultValue:_}=i,w=getCurrentInstance(),d=n||(w==null?void 0:w.emit)||((s=w==null?void 0:w.$emit)==null?void 0:s.bind(w))||((a=(r=w==null?void 0:w.proxy)==null?void 0:r.$emit)==null?void 0:a.bind(w==null?void 0:w.proxy));let S=u;e||(e="modelValue"),S=u||S||`update:${e.toString()}`;const f=m=>h?isFunction(h)?h(m):cloneFnJSON(m):m,b=()=>isDef(t[e])?f(t[e]):_;if(c){const m=b(),k=ref(m);return watch(()=>t[e],P=>k.value=f(P)),watch(k,P=>{(P!==t[e]||l)&&d(S,P)},{deep:l}),k}else return computed({get(){return b()},set(m){d(S,m)}})}const isDark=useDark(),toggleDark=useToggle(isDark),_hoisted_1$4={class:"footer-container"},_hoisted_2$3={"mt-6":"","inline-flex":"","gap-2":"","text-xl":""},_hoisted_3$3=["title"],_hoisted_4$3=["title"],_sfc_main$6=defineComponent({__name:"TheFooter",setup(t){const{t:e}=useI18n();return(n,i)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("nav",_hoisted_2$3,[createBaseVNode("button",{"icon-btn":"",onClick:i[0]||(i[0]=s=>("toggleDark"in n?n.toggleDark:unref(toggleDark))())},i[1]||(i[1]=[createBaseVNode("div",{"i-carbon-sun":"","dark:i-carbon-moon":""},null,-1)])),createBaseVNode("a",{"i-carbon-logo-github":"","icon-btn":"",rel:"noreferrer",href:"https://github.com/Efrice/watermark",target:"_blank",title:unref(e).originalProject},null,8,_hoisted_3$3),createBaseVNode("a",{"i-carbon-branch":"","icon-btn":"",rel:"noreferrer",href:"https://github.com/cottboy/watermark",target:"_blank",title:unref(e).forkWithEnhancements},null,8,_hoisted_4$3)])]))}}),_sfc_main$5=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(t,{emit:e}){const n=e;function i(){n("update:value",!t.value)}return(s,r)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["switch",`${t.value?"light":""}`]),type:"button",role:"switch"},[createBaseVNode("span",{class:normalizeClass(["check",`${t.value?"light":""}`]),onClick:i},null,2)],2))}}),TheSwitch_vue_vue_type_style_index_0_scoped_98965b6f_lang="",__unplugin_components_0=_export_sfc(_sfc_main$5,[["__scopeId","data-v-98965b6f"]]),__MACROS_useVModel=(...t)=>{const e=getCurrentInstance().proxy.$props,n=Object.create(null);for(const i of t)if(typeof i=="string")n[i]=useVModel(e,i,void 0,{eventName:`update:${i}`,passive:!0});else{const[s,r=s,a=`update:${s}`,h={}]=i;n[s]=useVModel(e,r,void 0,{eventName:a,passive:!0,...h})}return n},_hoisted_1$3={class:"color-picker","w-58":""},_hoisted_2$2={flex:"","items-center":"","gap-3":""},_hoisted_3$2={"flex-1":""},_hoisted_4$2={"text-sm":"","text-gray-600":"","mb-0.5":"",block:""},_sfc_main$4=defineComponent({__name:"ColorPicker",props:{value:null},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),{t:n}=useI18n(),i=l=>{const _=l.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return _?{r:parseInt(_[1]),g:parseInt(_[2]),b:parseInt(_[3]),a:_[4]?parseFloat(_[4]):1}:{r:0,g:0,b:0,a:.2}},s=(l,_,w)=>"#"+((1<<24)+(l<<16)+(_<<8)+w).toString(16).slice(1),r=l=>{const _=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return _?{r:parseInt(_[1],16),g:parseInt(_[2],16),b:parseInt(_[3],16)}:{r:0,g:0,b:0}},a=computed(()=>i(e.value)),h=computed({get:()=>s(a.value.r,a.value.g,a.value.b),set:l=>{const _=r(l);u(_.r,_.g,_.b,a.value.a)}}),c=computed({get:()=>a.value.a,set:l=>{u(a.value.r,a.value.g,a.value.b,l)}}),u=(l,_,w,d)=>{e.value=`rgba(${l}, ${_}, ${w}, ${d})`};return(l,_)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":_[0]||(_[0]=w=>h.value=w),type:"color",class:"color-input","w-10":"","h-10":"",border:"1 solid gray-300",rounded:"","cursor-pointer":""},null,512),[[vModelText,h.value]])]),createBaseVNode("div",_hoisted_3$2,[createBaseVNode("label",_hoisted_4$2,toDisplayString(unref(n).opacity)+": "+toDisplayString(Math.round(c.value*100))+"%",1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":_[1]||(_[1]=w=>c.value=w),type:"range",min:"0",max:"1",step:"0.01",class:"opacity-slider",style:normalizeStyle({"--current-color":h.value}),"w-full":""},null,4),[[vModelText,c.value,void 0,{number:!0}]])])])]))}}),ColorPicker_vue_vue_type_style_index_0_scoped_e170c65e_lang="",ColorPicker=_export_sfc(_sfc_main$4,[["__scopeId","data-v-e170c65e"]]),WATERMWRK_KEY="watermark-config",defaultConfig={words:"仅用于工作认证",fontFamily:"Arial",width:0,height:0,fontSize:16,color:"rgba(0, 0, 0, 0.2)",rotate:-15,row:7,col:7,startX:-100,startY:0,offsetX:48,offsetY:48,compression:1,saveConfig:!1},fontOptions=[{value:"Arial",label:"Arial"},{value:"SimSun",label:"宋体"},{value:"SimHei",label:"黑体"},{value:"Microsoft YaHei",label:"微软雅黑"},{value:"KaiTi",label:"楷体"},{value:"FangSong",label:"仿宋"},{value:"Microsoft JhengHei",label:"微软正黑体"},{value:"PingFang SC",label:"苹方"},{value:"Hiragino Sans GB",label:"冬青黑体"},{value:"Source Han Sans CN",label:"思源黑体"},{value:"Source Han Serif CN",label:"思源宋体"},{value:"Noto Sans CJK SC",label:"Noto Sans 中文"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Verdana",label:"Verdana"},{value:"Courier New",label:"Courier New"}],_hoisted_1$2={"pb-1":"",flex:"","justify-between":"","flex-items-center":""},_hoisted_2$1=["for"],_hoisted_3$1=["title"],_hoisted_4$1={key:0},_hoisted_5={key:1},_hoisted_6={key:2},_hoisted_7=["value"],_hoisted_8={key:3},_hoisted_9=["id"],_hoisted_10={key:4,pt3:""},_hoisted_11=["title"],_hoisted_12={"py-2":""},_hoisted_13={key:5},_hoisted_14=["id"],_hoisted_15={key:6},_hoisted_16=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{property:null,value:{type:[String,Boolean]}},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),{t:n}=useI18n();return(i,s)=>{const r=__unplugin_components_0;return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("label",{for:t.property},[createTextVNode(toDisplayString(unref(n)[t.property])+" ",1),createBaseVNode("span",{"i-carbon-help":"","inline-block":"","text-sm":"","float-right":"",mt1:"",ml1:"",title:unref(n).tooltips[t.property]},null,8,_hoisted_3$1)],8,_hoisted_2$1),t.property==="saveConfig"?(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(r,{value:unref(e),"onUpdate:value":s[0]||(s[0]=a=>i.$emit("update:value",a))},null,8,["value"])])):t.property==="color"&&typeof unref(e)=="string"?(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(ColorPicker,{value:unref(e),"onUpdate:value":s[1]||(s[1]=a=>isRef(e)?e.value=a:null)},null,8,["value"])])):t.property==="fontFamily"&&typeof unref(e)=="string"?(openBlock(),createElementBlock("div",_hoisted_6,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>isRef(e)?e.value=a:null),p:"x-2 y-1","w-58":"",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none","cursor-pointer":""},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(fontOptions),a=>(openBlock(),createElementBlock("option",{key:a.value,value:a.value},toDisplayString(a.label),9,_hoisted_7))),128))],512),[[vModelSelect,unref(e)]])])):t.property==="words"&&typeof unref(e)=="string"?(openBlock(),createElementBlock("div",_hoisted_8,[withDirectives(createBaseVNode("textarea",{id:t.property,"onUpdate:modelValue":s[3]||(s[3]=a=>isRef(e)?e.value=a:null),"px-1.5":"",cols:"25",rows:"2",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},"      ",8,_hoisted_9),[[vModelText,unref(e)]])])):t.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_10,[withDirectives(createBaseVNode("input",{"w-58":"",class:"range",title:unref(n).compressionTitle,type:"range",min:"0",max:"1","onUpdate:modelValue":s[4]||(s[4]=a=>isRef(e)?e.value=a:null),step:"0.1"},null,8,_hoisted_11),[[vModelText,unref(e)]]),createBaseVNode("p",_hoisted_12,toDisplayString(unref(e)),1)])):typeof unref(e)=="number"?(openBlock(),createElementBlock("div",_hoisted_13,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":s[5]||(s[5]=a=>isRef(e)?e.value=a:null),type:"number",p:"x-0 y-1","w-58":"",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,_hoisted_14),[[vModelText,unref(e)]])])):(openBlock(),createElementBlock("div",_hoisted_15,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":s[6]||(s[6]=a=>isRef(e)?e.value=a:null),type:"text",p:"x-0 y-1","w-58":"",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,_hoisted_16),[[vModelText,unref(e)]])]))])}}}),_hoisted_1$1={"float-left":"","w-100":"",mt:"0","pt-2":"","border-1":"","border-rd":""},_hoisted_2={"text-sm":"",op75:""},_hoisted_3={"px-5":""},_hoisted_4={"text-sm":"",op75:""},_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(t){const{t:e}=useI18n();return(n,i)=>{const s=_sfc_main$3,r=_sfc_main$6;return openBlock(),createElementBlock("div",_hoisted_1$1,[i[0]||(i[0]=createBaseVNode("div",{"i-material-symbols-add-photo-alternate-rounded":"","inline-block":"","text-3xl":""},null,-1)),i[1]||(i[1]=createBaseVNode("div",{"i-carbon-add":"","inline-block":"","text-3xl":""},null,-1)),i[2]||(i[2]=createBaseVNode("div",{"i-material-symbols:picture-as-pdf":"","inline-block":"","text-3xl":""},null,-1)),createBaseVNode("p",null,toDisplayString(unref(e).title),1),createBaseVNode("p",null,[createBaseVNode("em",_hoisted_2,toDisplayString(unref(e).description),1)]),i[3]||(i[3]=createBaseVNode("div",{"py-2":""},null,-1)),createBaseVNode("div",_hoisted_3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.config,(a,h)=>(openBlock(),createBlock(s,{property:h,value:a,"onUpdate:value":c=>n.$emit("update",h,c)},null,8,["property","value","onUpdate:value"]))),256))]),i[4]||(i[4]=createBaseVNode("div",{"py-4":""},null,-1)),createBaseVNode("p",null,[createBaseVNode("em",_hoisted_4,toDisplayString(unref(e).noServerSafe),1)]),createVNode(r)])}}}),_sfc_main$1=defineComponent({__name:"index",setup(t){const e=localStorage.getItem(WATERMWRK_KEY),n=e&&JSON.parse(e),i=reactive(s(n)||defaultConfig);function s(h){if(!h)return;const{rotate:c,startX:u,startY:l}=h;return{...h,rotate:Number(c),startX:Number(u),startY:Number(l)}}const r=["words","fontFamily","color","rotate","startX","startY"];function a(h,c){h==="saveConfig"?i[h]=!!c:r.includes(h)?i[h]=c:i[h]=+c,h==="saveConfig"&&c===!1?localStorage.setItem(WATERMWRK_KEY,""):i.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(i))}return(h,c)=>{const u=_sfc_main$2,l=__unplugin_components_1;return openBlock(),createElementBlock("div",null,[createVNode(u,{config:unref(i),onUpdate:a},null,8,["config"]),createVNode(l,{config:unref(i)},null,8,["config"])])}}}),_hoisted_1={"font-sans":"",p:"x-4 y-4",text:"center gray-700 dark:gray-200"},_sfc_main=defineComponent({__name:"App",setup(t){return(e,n)=>(openBlock(),createElementBlock("main",_hoisted_1,[createVNode(_sfc_main$1)]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");export{getDefaultExportFromCjs as g};
