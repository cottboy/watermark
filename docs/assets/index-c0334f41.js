var ni=Object.defineProperty;var ii=(t,e,n)=>e in t?ni(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>(ii(t,typeof e!="symbol"?e+"":e,n),n),je=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var A=(t,e,n)=>(je(t,e,"read from private field"),n?n.call(t):e.get(t)),dt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},St=(t,e,n,i)=>(je(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var _e=(t,e,n,i)=>({set _(s){St(t,e,s,n)},get _(){return A(t,e,i)}}),bt=(t,e,n)=>(je(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isDate=t=>toTypeString(t)==="[object Date]",isFunction$1=t=>typeof t=="function",isString$1=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$1(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},def=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=isString$1(i)?parseStringStyle(i):normalizeStyle(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(isString$1(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const i=n.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$1(t))e=t;else if(isArray(t))for(let n=0;n<t.length;n++){const i=normalizeClass(t[n]);i&&(e+=i+" ")}else if(isObject(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=looseEqual(t[i],e[i]);return n}function looseEqual(t,e){if(t===e)return!0;let n=isDate(t),i=isDate(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=isSymbol(t),i=isSymbol(e),n||i)return t===e;if(n=isArray(t),i=isArray(e),n||i)return n&&i?looseCompareArrays(t,e):!1;if(n=isObject(t),i=isObject(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const a in t){const h=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(h&&!c||!h&&c||!looseEqual(t[a],e[a]))return!1}}return String(t)===String(e)}function looseIndexOf(t,e){return t.findIndex(n=>looseEqual(n,e))}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString$1(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[stringifySymbol(i,r)+" =>"]=s,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var n;return isSymbol(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,n=t.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),removeSub(i),removeDep(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=n}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,n=activeSub,i=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const s=t.fn(t._value);(e.version===0||hasChanged(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{activeSub=n,shouldTrack=i,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:n,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)removeSub(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=i)}return n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)addSub(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,n){if(shouldTrack&&activeSub){let i=targetMap.get(t);i||targetMap.set(t,i=new Map);let s=i.get(n);s||(i.set(n,s=new Dep),s.map=i,s.key=n),s.track()}}function trigger(t,e,n,i,s,r){const a=targetMap.get(t);if(!a){globalVersion++;return}const h=c=>{c&&c.trigger()};if(startBatch(),e==="clear")a.forEach(h);else{const c=isArray(t),f=c&&isIntegerKey(n);if(c&&n==="length"){const l=Number(i);a.forEach((b,S)=>{(S==="length"||S===ARRAY_ITERATE_KEY||!isSymbol(S)&&S>=l)&&h(b)})}else switch((n!==void 0||a.has(void 0))&&h(a.get(n)),f&&h(a.get(ARRAY_ITERATE_KEY)),e){case"add":c?f&&h(a.get("length")):(h(a.get(ITERATE_KEY)),isMap(t)&&h(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":c||(h(a.get(ITERATE_KEY)),isMap(t)&&h(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&h(a.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toReactive(t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,n=>n.map(toReactive),arguments)},find(t,e){return apply(this,"find",t,e,toReactive,arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,toReactive,arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",toReactive)}};function iterator(t,e,n){const i=shallowReadArray(t),s=i[e]();return i!==t&&!isShallow(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const arrayProto=Array.prototype;function apply(t,e,n,i,s,r){const a=shallowReadArray(t),h=a!==t&&!isShallow(t),c=a[e];if(c!==arrayProto[e]){const b=c.apply(t,r);return h?toReactive(b):b}let f=n;a!==t&&(h?f=function(b,S){return n.call(this,toReactive(b),S,t)}:n.length>2&&(f=function(b,S){return n.call(this,b,S,t)}));const l=c.call(a,f,i);return h&&s?s(l):l}function reduce(t,e,n,i){const s=shallowReadArray(t);let r=n;return s!==t&&(isShallow(t)?n.length>3&&(r=function(a,h,c){return n.call(this,a,h,c,t)}):r=function(a,h,c){return n.call(this,a,toReactive(h),c,t)}),s[e](r,...i)}function searchProxy(t,e,n){const i=toRaw(t);track(i,"iterate",ARRAY_ITERATE_KEY);const s=i[e](...n);return(s===-1||s===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),i[e](...n)):s}function noTracking(t,e,n=[]){pauseTracking(),startBatch();const i=toRaw(t)[e].apply(t,n);return endBatch(),resetTracking(),i}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=isArray(e);if(!s){let c;if(a&&(c=arrayInstrumentations[n]))return c;if(n==="hasOwnProperty")return hasOwnProperty}const h=Reflect.get(e,n,isRef(e)?e:i);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(s||track(e,"get",n),r)?h:isRef(h)?a&&isIntegerKey(n)?h:h.value:isObject(h)?s?readonly(h):reactive(h):h}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const c=isReadonly(r);if(!isShallow(i)&&!isReadonly(i)&&(r=toRaw(r),i=toRaw(i)),!isArray(e)&&isRef(r)&&!isRef(i))return c?!1:(r.value=i,!0)}const a=isArray(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn(e,n),h=Reflect.set(e,n,i,isRef(e)?e:s);return e===toRaw(s)&&(a?hasChanged(i,r)&&trigger(e,"set",n,i):trigger(e,"add",n,i)),h}deleteProperty(e,n){const i=hasOwn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&trigger(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),i}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,n){return function(...i){const s=this.__v_raw,r=toRaw(s),a=isMap(r),h=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,f=s[t](...i),l=n?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:b,done:S}=f.next();return S?{value:b,done:S}:{value:h?[l(b[0]),l(b[1])]:l(b),done:S}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const n={get(s){const r=this.__v_raw,a=toRaw(r),h=toRaw(s);t||(hasChanged(s,h)&&track(a,"get",s),track(a,"get",h));const{has:c}=getProto(a),f=e?toShallow:t?toReadonly:toReactive;if(c.call(a,s))return f(r.get(s));if(c.call(a,h))return f(r.get(h));r!==a&&r.get(s)},get size(){const s=this.__v_raw;return!t&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,a=toRaw(r),h=toRaw(s);return t||(hasChanged(s,h)&&track(a,"has",s),track(a,"has",h)),s===h?r.has(s):r.has(s)||r.has(h)},forEach(s,r){const a=this,h=a.__v_raw,c=toRaw(h),f=e?toShallow:t?toReadonly:toReactive;return!t&&track(c,"iterate",ITERATE_KEY),h.forEach((l,b)=>s.call(r,f(l),f(b),a))}};return extend(n,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(s){!e&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const r=toRaw(this);return getProto(r).has.call(r,s)||(r.add(s),trigger(r,"add",s,s)),this},set(s,r){!e&&!isShallow(r)&&!isReadonly(r)&&(r=toRaw(r));const a=toRaw(this),{has:h,get:c}=getProto(a);let f=h.call(a,s);f||(s=toRaw(s),f=h.call(a,s));const l=c.call(a,s);return a.set(s,r),f?hasChanged(r,l)&&trigger(a,"set",s,r):trigger(a,"add",s,r),this},delete(s){const r=toRaw(this),{has:a,get:h}=getProto(r);let c=a.call(r,s);c||(s=toRaw(s),c=a.call(r,s)),h&&h.call(r,s);const f=r.delete(s);return c&&trigger(r,"delete",s,void 0),f},clear(){const s=toRaw(this),r=s.size!==0,a=s.clear();return r&&trigger(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,t,e)}),n}function createInstrumentationGetter(t,e){const n=createInstrumentations(t,e);return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(hasOwn(n,s)&&s in i?n:i,s,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,n,i,s){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=getTargetType(t);if(r===0)return t;const a=s.get(t);if(a)return a;const h=new Proxy(t,r===2?i:n);return s.set(t,h),h}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||isShallow(e)||isReadonly(e);e=i?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=i?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>e==="__v_raw"?t:unref(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,n=!1){let i,s;return isFunction$1(t)?i=t:(i=t.get,s=t.set),new ComputedRefImpl(i,s,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,n=activeWatcher){if(n){let i=cleanupMap.get(n);i||cleanupMap.set(n,i=[]),i.push(t)}}function watch$1(t,e,n=EMPTY_OBJ){const{immediate:i,deep:s,once:r,scheduler:a,augmentJob:h,call:c}=n,f=R=>s?R:isShallow(R)||s===!1||s===0?traverse(R,1):traverse(R);let l,b,S,u,w=!1,g=!1;if(isRef(t)?(b=()=>t.value,w=isShallow(t)):isReactive(t)?(b=()=>f(t),w=!0):isArray(t)?(g=!0,w=t.some(R=>isReactive(R)||isShallow(R)),b=()=>t.map(R=>{if(isRef(R))return R.value;if(isReactive(R))return f(R);if(isFunction$1(R))return c?c(R,2):R()})):isFunction$1(t)?e?b=c?()=>c(t,2):t:b=()=>{if(S){pauseTracking();try{S()}finally{resetTracking()}}const R=activeWatcher;activeWatcher=l;try{return c?c(t,3,[u]):t(u)}finally{activeWatcher=R}}:b=NOOP,e&&s){const R=b,y=s===!0?1/0:s;b=()=>traverse(R(),y)}const m=getCurrentScope(),_=()=>{l.stop(),m&&m.active&&remove(m.effects,l)};if(r&&e){const R=e;e=(...y)=>{R(...y),_()}}let x=g?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=R=>{if(!(!(l.flags&1)||!l.dirty&&!R))if(e){const y=l.run();if(s||w||(g?y.some((F,B)=>hasChanged(F,x[B])):hasChanged(y,x))){S&&S();const F=activeWatcher;activeWatcher=l;try{const B=[y,x===INITIAL_WATCHER_VALUE?void 0:g&&x[0]===INITIAL_WATCHER_VALUE?[]:x,u];x=y,c?c(e,3,B):e(...B)}finally{activeWatcher=F}}}else l.run()};return h&&h(P),l=new ReactiveEffect(b),l.scheduler=a?()=>a(P,!1):P,u=R=>onWatcherCleanup(R,!1,l),S=l.onStop=()=>{const R=cleanupMap.get(l);if(R){if(c)c(R,4);else for(const y of R)y();cleanupMap.delete(l)}},e?i?P(!0):x=l.run():a?a(P.bind(null,!0),!0):l.run(),_.pause=l.pause.bind(l),_.resume=l.resume.bind(l),_.stop=_,_}function traverse(t,e=1/0,n){if(e<=0||!isObject(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,isRef(t))traverse(t.value,e,n);else if(isArray(t))for(let i=0;i<t.length;i++)traverse(t[i],e,n);else if(isSet(t)||isMap(t))t.forEach(i=>{traverse(i,e,n)});else if(isPlainObject(t)){for(const i in t)traverse(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&traverse(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,i=n&&n.appContext.config.warnHandler,s=getComponentTrace();if(i)callWithErrorHandling(i,n,11,[t+e.map(r=>{var a,h;return(h=(a=r.toString)==null?void 0:a.call(r))!=null?h:JSON.stringify(r)}).join(""),n&&n.proxy,s.map(({vnode:r})=>`at <${formatComponentName(n,r.type)}>`).join(`
`),s]);else{const r=[`[Vue warn]: ${t}`,...e];s.length&&r.push(`
`,...formatTrace(s)),console.warn(...r)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const i=t.component&&t.component.parent;t=i&&i.vnode}return e}function formatTrace(t){const e=[];return t.forEach((n,i)=>{e.push(...i===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",i=t.component?t.component.parent==null:!1,s=` at <${formatComponentName(t.component,t.type,i)}`,r=">"+n;return t.props?[s,...formatProps(t.props),r]:[s+r]}function formatProps(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(i=>{e.push(...formatProp(i,t[i]))}),n.length>3&&e.push(" ..."),e}function formatProp(t,e,n){return isString$1(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):isFunction$1(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${t}=`,e])}function callWithErrorHandling(t,e,n,i){try{return i?t(...i):t()}catch(s){handleError(s,e,n)}}function callWithAsyncErrorHandling(t,e,n,i){if(isFunction$1(t)){const s=callWithErrorHandling(t,e,n,i);return s&&isPromise(s)&&s.catch(r=>{handleError(r,e,n)}),s}if(isArray(t)){const s=[];for(let r=0;r<t.length;r++)s.push(callWithAsyncErrorHandling(t[r],e,n,i));return s}}function handleError(t,e,n,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||EMPTY_OBJ;if(e){let h=e.parent;const c=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const l=h.ec;if(l){for(let b=0;b<l.length;b++)if(l[b](t,c,f)===!1)return}h=h.parent}if(r){pauseTracking(),callWithErrorHandling(r,null,10,[t,c,f]),resetTracking();return}}logError(t,n,s,i,a)}function logError(t,e,n,i=!0,s=!1){if(s)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const i=e+n>>>1,s=queue[i],r=getId(s);r<t||r===t&&s.flags&2?e=i+1:n=i}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),n=queue[queue.length-1];!n||!(t.flags&2)&&e>=getId(n)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,n=flushIndex+1){for(;n<queue.length;n++){const i=queue[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;queue.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,i)=>getId(n)-getId(i));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),callWithErrorHandling(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&(n.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let a;try{a=t(...s)}finally{setCurrentRenderingInstance(r),i._d&&setBlockTracking(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const n=getComponentPublicInstance(currentRenderingInstance),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,a,h,c=EMPTY_OBJ]=e[s];r&&(isFunction$1(r)&&(r={mounted:r,updated:r}),r.deep&&traverse(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:h,modifiers:c}))}return t}function invokeDirectiveHook(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let a=0;a<s.length;a++){const h=s[a];r&&(h.oldValue=r[a].value);let c=h.dir[i];c&&(pauseTracking(),callWithAsyncErrorHandling(c,n,8,[t.el,h,t,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport;function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,e){return isFunction$1(t)?(()=>extend({name:t.name},e,{setup:t}))():t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function setRef(t,e,n,i,s=!1){if(isArray(t)){t.forEach((w,g)=>setRef(w,e&&(isArray(e)?e[g]:e),n,i,s));return}if(isAsyncWrapper(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&setRef(t,e,n,i.component.subTree);return}const r=i.shapeFlag&4?getComponentPublicInstance(i.component):i.el,a=s?null:r,{i:h,r:c}=t,f=e&&e.r,l=h.refs===EMPTY_OBJ?h.refs={}:h.refs,b=h.setupState,S=toRaw(b),u=b===EMPTY_OBJ?()=>!1:w=>hasOwn(S,w);if(f!=null&&f!==c&&(isString$1(f)?(l[f]=null,u(f)&&(b[f]=null)):isRef(f)&&(f.value=null)),isFunction$1(c))callWithErrorHandling(c,h,12,[a,l]);else{const w=isString$1(c),g=isRef(c);if(w||g){const m=()=>{if(t.f){const _=w?u(c)?b[c]:l[c]:c.value;s?isArray(_)&&remove(_,r):isArray(_)?_.includes(r)||_.push(r):w?(l[c]=[r],u(c)&&(b[c]=l[c])):(c.value=[r],t.k&&(l[t.k]=c.value))}else w?(l[c]=a,u(c)&&(b[c]=a)):g&&(c.value=a,t.k&&(l[t.k]=a))};a?(m.id=-1,queuePostRenderEffect(m,n)):m()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(injectHook(e,i,n),n){let s=n.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(i,e,n,s),s=s.parent}}function injectToKeepAliveRoot(t,e,n,i){const s=injectHook(e,t,i,!0);onUnmounted(()=>{remove(i[e],s)},n)}function injectHook(t,e,n=currentInstance,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...a)=>{pauseTracking();const h=setCurrentInstance(n),c=callWithAsyncErrorHandling(e,n,t,a);return h(),resetTracking(),c});return i?s.unshift(r):s.push(r),r}}const createHook=t=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...i)=>e(...i),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,n,i){let s;const r=n&&n[i],a=isArray(t);if(a||isString$1(t)){const h=a&&isReactive(t);let c=!1,f=!1;h&&(c=!isShallow(t),f=isReadonly(t),t=shallowReadArray(t)),s=new Array(t.length);for(let l=0,b=t.length;l<b;l++)s[l]=e(c?f?toReadonly(toReactive(t[l])):toReactive(t[l]):t[l],l,void 0,r&&r[l])}else if(typeof t=="number"){s=new Array(t);for(let h=0;h<t;h++)s[h]=e(h+1,h,void 0,r&&r[h])}else if(isObject(t))if(t[Symbol.iterator])s=Array.from(t,(h,c)=>e(h,c,void 0,r&&r[c]));else{const h=Object.keys(t);s=new Array(h.length);for(let c=0,f=h.length;c<f;c++){const l=h[c];s[c]=e(t[l],l,c,r&&r[c])}}else s=[];return n&&(n[i]=s),s}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:a,type:h,appContext:c}=t;let f;if(e[0]!=="$"){const u=a[e];if(u!==void 0)switch(u){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(hasSetupBinding(i,e))return a[e]=1,i[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return a[e]=2,s[e];if((f=t.propsOptions[0])&&hasOwn(f,e))return a[e]=3,r[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];shouldCacheAccess&&(a[e]=0)}}const l=publicPropertiesMap[e];let b,S;if(l)return e==="$attrs"&&track(t.attrs,"get",""),l(t);if((b=h.__cssModules)&&(b=b[e]))return b;if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];if(S=c.config.globalProperties,hasOwn(S,e))return S[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return hasSetupBinding(s,e)?(s[e]=n,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},a){let h;return!!n[a]||t!==EMPTY_OBJ&&hasOwn(t,a)||hasSetupBinding(e,a)||(h=r[0])&&hasOwn(h,a)||hasOwn(i,a)||hasOwn(publicPropertiesMap,a)||hasOwn(s.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,i=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:a,watch:h,provide:c,inject:f,created:l,beforeMount:b,mounted:S,beforeUpdate:u,updated:w,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:x,destroyed:P,unmounted:R,render:y,renderTracked:F,renderTriggered:B,errorCaptured:I,serverPrefetch:E,expose:U,inheritAttrs:z,components:N,directives:Y,filters:d}=e;if(f&&resolveInjections(f,i,null),a)for(const at in a){const q=a[at];isFunction$1(q)&&(i[at]=q.bind(n))}if(s){const at=s.call(n,n);isObject(at)&&(t.data=reactive(at))}if(shouldCacheAccess=!0,r)for(const at in r){const q=r[at],nt=isFunction$1(q)?q.bind(n,n):isFunction$1(q.get)?q.get.bind(n,n):NOOP,ft=!isFunction$1(q)&&isFunction$1(q.set)?q.set.bind(n):NOOP,lt=computed({get:nt,set:ft});Object.defineProperty(i,at,{enumerable:!0,configurable:!0,get:()=>lt.value,set:rt=>lt.value=rt})}if(h)for(const at in h)createWatcher(h[at],i,n,at);if(c){const at=isFunction$1(c)?c.call(n):c;Reflect.ownKeys(at).forEach(q=>{provide(q,at[q])})}l&&callHook(l,t,"c");function pt(at,q){isArray(q)?q.forEach(nt=>at(nt.bind(n))):q&&at(q.bind(n))}if(pt(onBeforeMount,b),pt(onMounted,S),pt(onBeforeUpdate,u),pt(onUpdated,w),pt(onActivated,g),pt(onDeactivated,m),pt(onErrorCaptured,I),pt(onRenderTracked,F),pt(onRenderTriggered,B),pt(onBeforeUnmount,x),pt(onUnmounted,R),pt(onServerPrefetch,E),isArray(U))if(U.length){const at=t.exposed||(t.exposed={});U.forEach(q=>{Object.defineProperty(at,q,{get:()=>n[q],set:nt=>n[q]=nt})})}else t.exposed||(t.exposed={});y&&t.render===NOOP&&(t.render=y),z!=null&&(t.inheritAttrs=z),N&&(t.components=N),Y&&(t.directives=Y),E&&markAsyncBoundary(t)}function resolveInjections(t,e,n=NOOP){isArray(t)&&(t=normalizeInject(t));for(const i in t){const s=t[i];let r;isObject(s)?"default"in s?r=inject(s.from||i,s.default,!0):r=inject(s.from||i):r=inject(s),isRef(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[i]=r}}function callHook(t,e,n){callWithAsyncErrorHandling(isArray(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,i){let s=i.includes(".")?createPathGetter(n,i):()=>n[i];if(isString$1(t)){const r=e[t];isFunction$1(r)&&watch(s,r)}else if(isFunction$1(t))watch(s,t.bind(n));else if(isObject(t))if(isArray(t))t.forEach(r=>createWatcher(r,e,n,i));else{const r=isFunction$1(t.handler)?t.handler.bind(n):e[t.handler];isFunction$1(r)&&watch(s,r,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=t.appContext,h=r.get(e);let c;return h?c=h:!s.length&&!n&&!i?c=e:(c={},s.length&&s.forEach(f=>mergeOptions(c,f,a,!0)),mergeOptions(c,e,a)),isObject(e)&&r.set(e,c),c}function mergeOptions(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&mergeOptions(t,r,n,!0),s&&s.forEach(a=>mergeOptions(t,a,n,!0));for(const a in e)if(!(i&&a==="expose")){const h=internalOptionMergeStrats[a]||n&&n[a];t[a]=h?h(t[a],e[a]):e[a]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend(Object.create(null),t);for(const i in e)n[i]=mergeAsArray(t[i],e[i]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(i,s=null){isFunction$1(i)||(i=extend({},i)),s!=null&&!isObject(s)&&(s=null);const r=createAppContext(),a=new WeakSet,h=[];let c=!1;const f=r.app={_uid:uid$1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(l){},use(l,...b){return a.has(l)||(l&&isFunction$1(l.install)?(a.add(l),l.install(f,...b)):isFunction$1(l)&&(a.add(l),l(f,...b))),f},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),f},component(l,b){return b?(r.components[l]=b,f):r.components[l]},directive(l,b){return b?(r.directives[l]=b,f):r.directives[l]},mount(l,b,S){if(!c){const u=f._ceVNode||createVNode(i,s);return u.appContext=r,S===!0?S="svg":S===!1&&(S=void 0),b&&e?e(u,l):t(u,l,S),c=!0,f._container=l,l.__vue_app__=f,getComponentPublicInstance(u.component)}},onUnmount(l){h.push(l)},unmount(){c&&(callWithAsyncErrorHandling(h,f._instance,16),t(null,f._container),delete f._container.__vue_app__)},provide(l,b){return r.provides[l]=b,f},runWithContext(l){const b=currentApp;currentApp=f;try{return l()}finally{currentApp=b}}};return f}}let currentApp=null;function provide(t,e){if(currentInstance){let n=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===n&&(n=currentInstance.provides=Object.create(i)),n[t]=e}}function inject(t,e,n=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){let s=currentApp?currentApp._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&isFunction$1(e)?e.call(i&&i.proxy):e}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,n,i=!1){const s={},r=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,s,r);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);n?t.props=i?s:shallowReactive(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function updateProps(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:a}}=t,h=toRaw(s),[c]=t.propsOptions;let f=!1;if((i||a>0)&&!(a&16)){if(a&8){const l=t.vnode.dynamicProps;for(let b=0;b<l.length;b++){let S=l[b];if(isEmitListener(t.emitsOptions,S))continue;const u=e[S];if(c)if(hasOwn(r,S))u!==r[S]&&(r[S]=u,f=!0);else{const w=camelize(S);s[w]=resolvePropValue(c,h,w,u,t,!1)}else u!==r[S]&&(r[S]=u,f=!0)}}}else{setFullProps(t,e,s,r)&&(f=!0);let l;for(const b in h)(!e||!hasOwn(e,b)&&((l=hyphenate(b))===b||!hasOwn(e,l)))&&(c?n&&(n[b]!==void 0||n[l]!==void 0)&&(s[b]=resolvePropValue(c,h,b,void 0,t,!0)):delete s[b]);if(r!==h)for(const b in r)(!e||!hasOwn(e,b))&&(delete r[b],f=!0)}f&&trigger(t.attrs,"set","")}function setFullProps(t,e,n,i){const[s,r]=t.propsOptions;let a=!1,h;if(e)for(let c in e){if(isReservedProp(c))continue;const f=e[c];let l;s&&hasOwn(s,l=camelize(c))?!r||!r.includes(l)?n[l]=f:(h||(h={}))[l]=f:isEmitListener(t.emitsOptions,c)||(!(c in i)||f!==i[c])&&(i[c]=f,a=!0)}if(r){const c=toRaw(n),f=h||EMPTY_OBJ;for(let l=0;l<r.length;l++){const b=r[l];n[b]=resolvePropValue(s,c,b,f[b],t,!hasOwn(f,b))}}return a}function resolvePropValue(t,e,n,i,s,r){const a=t[n];if(a!=null){const h=hasOwn(a,"default");if(h&&i===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction$1(c)){const{propsDefaults:f}=s;if(n in f)i=f[n];else{const l=setCurrentInstance(s);i=f[n]=c.call(null,e),l()}}else i=c;s.ce&&s.ce._setProp(n,i)}a[0]&&(r&&!h?i=!1:a[1]&&(i===""||i===hyphenate(n))&&(i=!0))}return i}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,n=!1){const i=n?mixinPropsCache:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,a={},h=[];let c=!1;if(!isFunction$1(t)){const l=b=>{c=!0;const[S,u]=normalizePropsOptions(b,e,!0);extend(a,S),u&&h.push(...u)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!r&&!c)return isObject(t)&&i.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(r))for(let l=0;l<r.length;l++){const b=camelize(r[l]);validatePropName(b)&&(a[b]=EMPTY_OBJ)}else if(r)for(const l in r){const b=camelize(l);if(validatePropName(b)){const S=r[l],u=a[b]=isArray(S)||isFunction$1(S)?{type:S}:extend({},S),w=u.type;let g=!1,m=!0;if(isArray(w))for(let _=0;_<w.length;++_){const x=w[_],P=isFunction$1(x)&&x.name;if(P==="Boolean"){g=!0;break}else P==="String"&&(m=!1)}else g=isFunction$1(w)&&w.name==="Boolean";u[0]=g,u[1]=m,(g||hasOwn(u,"default"))&&h.push(b)}}const f=[a,h];return isObject(t)&&i.set(t,f),f}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,n)=>{if(e._n)return e;const i=withCtx((...s)=>normalizeSlotValue(e(...s)),n);return i._c=!1,i},normalizeObjectSlots=(t,e,n)=>{const i=t._ctx;for(const s in t){if(isInternalKey(s))continue;const r=t[s];if(isFunction$1(r))e[s]=normalizeSlot(s,r,i);else if(r!=null){const a=normalizeSlotValue(r);e[s]=()=>a}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},assignSlots=(t,e,n)=>{for(const i in e)(n||!isInternalKey(i))&&(t[i]=e[i])},initSlots=(t,e,n)=>{const i=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const s=e._;s?(assignSlots(i,e,n),n&&def(i,"_",s,!0)):normalizeObjectSlots(e,i)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,a=EMPTY_OBJ;if(i.shapeFlag&32){const h=e._;h?n&&h===1?r=!1:assignSlots(s,e,n):(r=!e.$stable,normalizeObjectSlots(e,s)),a=e}else e&&(normalizeVNodeSlots(t,e),a={default:1});if(r)for(const h in s)!isInternalKey(h)&&a[h]==null&&delete s[h]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:a,createText:h,createComment:c,setText:f,setElementText:l,parentNode:b,nextSibling:S,setScopeId:u=NOOP,insertStaticContent:w}=t,g=(j,o,$,X=null,O=null,D=null,Z=void 0,it=null,ut=!!o.dynamicChildren)=>{if(j===o)return;j&&!isSameVNodeType(j,o)&&(X=M(j),rt(j,O,D,!0),j=null),o.patchFlag===-2&&(ut=!1,o.dynamicChildren=null);const{type:W,ref:K,shapeFlag:J}=o;switch(W){case Text:m(j,o,$,X);break;case Comment:_(j,o,$,X);break;case Static:j==null&&x(o,$,X,Z);break;case Fragment:N(j,o,$,X,O,D,Z,it,ut);break;default:J&1?y(j,o,$,X,O,D,Z,it,ut):J&6?Y(j,o,$,X,O,D,Z,it,ut):(J&64||J&128)&&W.process(j,o,$,X,O,D,Z,it,ut,et)}K!=null&&O&&setRef(K,j&&j.ref,D,o||j,!o)},m=(j,o,$,X)=>{if(j==null)i(o.el=h(o.children),$,X);else{const O=o.el=j.el;o.children!==j.children&&f(O,o.children)}},_=(j,o,$,X)=>{j==null?i(o.el=c(o.children||""),$,X):o.el=j.el},x=(j,o,$,X)=>{[j.el,j.anchor]=w(j.children,o,$,X,j.el,j.anchor)},P=({el:j,anchor:o},$,X)=>{let O;for(;j&&j!==o;)O=S(j),i(j,$,X),j=O;i(o,$,X)},R=({el:j,anchor:o})=>{let $;for(;j&&j!==o;)$=S(j),s(j),j=$;s(o)},y=(j,o,$,X,O,D,Z,it,ut)=>{o.type==="svg"?Z="svg":o.type==="math"&&(Z="mathml"),j==null?F(o,$,X,O,D,Z,it,ut):E(j,o,O,D,Z,it,ut)},F=(j,o,$,X,O,D,Z,it)=>{let ut,W;const{props:K,shapeFlag:J,transition:st,dirs:At}=j;if(ut=j.el=a(j.type,D,K&&K.is,K),J&8?l(ut,j.children):J&16&&I(j.children,ut,null,X,O,resolveChildrenNamespace(j,D),Z,it),At&&invokeDirectiveHook(j,null,X,"created"),B(ut,j,j.scopeId,Z,X),K){for(const Tt in K)Tt!=="value"&&!isReservedProp(Tt)&&r(ut,Tt,null,K[Tt],D,X);"value"in K&&r(ut,"value",null,K.value,D),(W=K.onVnodeBeforeMount)&&invokeVNodeHook(W,X,j)}At&&invokeDirectiveHook(j,null,X,"beforeMount");const Ct=needTransition(O,st);Ct&&st.beforeEnter(ut),i(ut,o,$),((W=K&&K.onVnodeMounted)||Ct||At)&&queuePostRenderEffect(()=>{W&&invokeVNodeHook(W,X,j),Ct&&st.enter(ut),At&&invokeDirectiveHook(j,null,X,"mounted")},O)},B=(j,o,$,X,O)=>{if($&&u(j,$),X)for(let D=0;D<X.length;D++)u(j,X[D]);if(O){let D=O.subTree;if(o===D||isSuspense(D.type)&&(D.ssContent===o||D.ssFallback===o)){const Z=O.vnode;B(j,Z,Z.scopeId,Z.slotScopeIds,O.parent)}}},I=(j,o,$,X,O,D,Z,it,ut=0)=>{for(let W=ut;W<j.length;W++){const K=j[W]=it?cloneIfMounted(j[W]):normalizeVNode(j[W]);g(null,K,o,$,X,O,D,Z,it)}},E=(j,o,$,X,O,D,Z)=>{const it=o.el=j.el;let{patchFlag:ut,dynamicChildren:W,dirs:K}=o;ut|=j.patchFlag&16;const J=j.props||EMPTY_OBJ,st=o.props||EMPTY_OBJ;let At;if($&&toggleRecurse($,!1),(At=st.onVnodeBeforeUpdate)&&invokeVNodeHook(At,$,o,j),K&&invokeDirectiveHook(o,j,$,"beforeUpdate"),$&&toggleRecurse($,!0),(J.innerHTML&&st.innerHTML==null||J.textContent&&st.textContent==null)&&l(it,""),W?U(j.dynamicChildren,W,it,$,X,resolveChildrenNamespace(o,O),D):Z||q(j,o,it,null,$,X,resolveChildrenNamespace(o,O),D,!1),ut>0){if(ut&16)z(it,J,st,$,O);else if(ut&2&&J.class!==st.class&&r(it,"class",null,st.class,O),ut&4&&r(it,"style",J.style,st.style,O),ut&8){const Ct=o.dynamicProps;for(let Tt=0;Tt<Ct.length;Tt++){const It=Ct[Tt],zt=J[It],Ut=st[It];(Ut!==zt||It==="value")&&r(it,It,zt,Ut,O,$)}}ut&1&&j.children!==o.children&&l(it,o.children)}else!Z&&W==null&&z(it,J,st,$,O);((At=st.onVnodeUpdated)||K)&&queuePostRenderEffect(()=>{At&&invokeVNodeHook(At,$,o,j),K&&invokeDirectiveHook(o,j,$,"updated")},X)},U=(j,o,$,X,O,D,Z)=>{for(let it=0;it<o.length;it++){const ut=j[it],W=o[it],K=ut.el&&(ut.type===Fragment||!isSameVNodeType(ut,W)||ut.shapeFlag&198)?b(ut.el):$;g(ut,W,K,null,X,O,D,Z,!0)}},z=(j,o,$,X,O)=>{if(o!==$){if(o!==EMPTY_OBJ)for(const D in o)!isReservedProp(D)&&!(D in $)&&r(j,D,o[D],null,O,X);for(const D in $){if(isReservedProp(D))continue;const Z=$[D],it=o[D];Z!==it&&D!=="value"&&r(j,D,it,Z,O,X)}"value"in $&&r(j,"value",o.value,$.value,O)}},N=(j,o,$,X,O,D,Z,it,ut)=>{const W=o.el=j?j.el:h(""),K=o.anchor=j?j.anchor:h("");let{patchFlag:J,dynamicChildren:st,slotScopeIds:At}=o;At&&(it=it?it.concat(At):At),j==null?(i(W,$,X),i(K,$,X),I(o.children||[],$,K,O,D,Z,it,ut)):J>0&&J&64&&st&&j.dynamicChildren?(U(j.dynamicChildren,st,$,O,D,Z,it),(o.key!=null||O&&o===O.subTree)&&traverseStaticChildren(j,o,!0)):q(j,o,$,K,O,D,Z,it,ut)},Y=(j,o,$,X,O,D,Z,it,ut)=>{o.slotScopeIds=it,j==null?o.shapeFlag&512?O.ctx.activate(o,$,X,Z,ut):d(o,$,X,O,D,Z,ut):Q(j,o,ut)},d=(j,o,$,X,O,D,Z)=>{const it=j.component=createComponentInstance(j,X,O);if(isKeepAlive(j)&&(it.ctx.renderer=et),setupComponent(it,!1,Z),it.asyncDep){if(O&&O.registerDep(it,pt,Z),!j.el){const ut=it.subTree=createVNode(Comment);_(null,ut,o,$)}}else pt(it,j,o,$,O,D,Z)},Q=(j,o,$)=>{const X=o.component=j.component;if(shouldUpdateComponent(j,o,$))if(X.asyncDep&&!X.asyncResolved){at(X,o,$);return}else X.next=o,X.update();else o.el=j.el,X.vnode=o},pt=(j,o,$,X,O,D,Z)=>{const it=()=>{if(j.isMounted){let{next:J,bu:st,u:At,parent:Ct,vnode:Tt}=j;{const Nt=locateNonHydratedAsyncRoot(j);if(Nt){J&&(J.el=Tt.el,at(j,J,Z)),Nt.asyncDep.then(()=>{j.isUnmounted||it()});return}}let It=J,zt;toggleRecurse(j,!1),J?(J.el=Tt.el,at(j,J,Z)):J=Tt,st&&invokeArrayFns(st),(zt=J.props&&J.props.onVnodeBeforeUpdate)&&invokeVNodeHook(zt,Ct,J,Tt),toggleRecurse(j,!0);const Ut=renderComponentRoot(j),Vt=j.subTree;j.subTree=Ut,g(Vt,Ut,b(Vt.el),M(Vt),j,O,D),J.el=Ut.el,It===null&&updateHOCHostEl(j,Ut.el),At&&queuePostRenderEffect(At,O),(zt=J.props&&J.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(zt,Ct,J,Tt),O)}else{let J;const{el:st,props:At}=o,{bm:Ct,m:Tt,parent:It,root:zt,type:Ut}=j,Vt=isAsyncWrapper(o);if(toggleRecurse(j,!1),Ct&&invokeArrayFns(Ct),!Vt&&(J=At&&At.onVnodeBeforeMount)&&invokeVNodeHook(J,It,o),toggleRecurse(j,!0),st&&vt){const Nt=()=>{j.subTree=renderComponentRoot(j),vt(st,j.subTree,j,O,null)};Vt&&Ut.__asyncHydrate?Ut.__asyncHydrate(st,j,Nt):Nt()}else{zt.ce&&zt.ce._injectChildStyle(Ut);const Nt=j.subTree=renderComponentRoot(j);g(null,Nt,$,X,j,O,D),o.el=Nt.el}if(Tt&&queuePostRenderEffect(Tt,O),!Vt&&(J=At&&At.onVnodeMounted)){const Nt=o;queuePostRenderEffect(()=>invokeVNodeHook(J,It,Nt),O)}(o.shapeFlag&256||It&&isAsyncWrapper(It.vnode)&&It.vnode.shapeFlag&256)&&j.a&&queuePostRenderEffect(j.a,O),j.isMounted=!0,o=$=X=null}};j.scope.on();const ut=j.effect=new ReactiveEffect(it);j.scope.off();const W=j.update=ut.run.bind(ut),K=j.job=ut.runIfDirty.bind(ut);K.i=j,K.id=j.uid,ut.scheduler=()=>queueJob(K),toggleRecurse(j,!0),W()},at=(j,o,$)=>{o.component=j;const X=j.vnode.props;j.vnode=o,j.next=null,updateProps(j,o.props,X,$),updateSlots(j,o.children,$),pauseTracking(),flushPreFlushCbs(j),resetTracking()},q=(j,o,$,X,O,D,Z,it,ut=!1)=>{const W=j&&j.children,K=j?j.shapeFlag:0,J=o.children,{patchFlag:st,shapeFlag:At}=o;if(st>0){if(st&128){ft(W,J,$,X,O,D,Z,it,ut);return}else if(st&256){nt(W,J,$,X,O,D,Z,it,ut);return}}At&8?(K&16&&k(W,O,D),J!==W&&l($,J)):K&16?At&16?ft(W,J,$,X,O,D,Z,it,ut):k(W,O,D,!0):(K&8&&l($,""),At&16&&I(J,$,X,O,D,Z,it,ut))},nt=(j,o,$,X,O,D,Z,it,ut)=>{j=j||EMPTY_ARR,o=o||EMPTY_ARR;const W=j.length,K=o.length,J=Math.min(W,K);let st;for(st=0;st<J;st++){const At=o[st]=ut?cloneIfMounted(o[st]):normalizeVNode(o[st]);g(j[st],At,$,null,O,D,Z,it,ut)}W>K?k(j,O,D,!0,!1,J):I(o,$,X,O,D,Z,it,ut,J)},ft=(j,o,$,X,O,D,Z,it,ut)=>{let W=0;const K=o.length;let J=j.length-1,st=K-1;for(;W<=J&&W<=st;){const At=j[W],Ct=o[W]=ut?cloneIfMounted(o[W]):normalizeVNode(o[W]);if(isSameVNodeType(At,Ct))g(At,Ct,$,null,O,D,Z,it,ut);else break;W++}for(;W<=J&&W<=st;){const At=j[J],Ct=o[st]=ut?cloneIfMounted(o[st]):normalizeVNode(o[st]);if(isSameVNodeType(At,Ct))g(At,Ct,$,null,O,D,Z,it,ut);else break;J--,st--}if(W>J){if(W<=st){const At=st+1,Ct=At<K?o[At].el:X;for(;W<=st;)g(null,o[W]=ut?cloneIfMounted(o[W]):normalizeVNode(o[W]),$,Ct,O,D,Z,it,ut),W++}}else if(W>st)for(;W<=J;)rt(j[W],O,D,!0),W++;else{const At=W,Ct=W,Tt=new Map;for(W=Ct;W<=st;W++){const _t=o[W]=ut?cloneIfMounted(o[W]):normalizeVNode(o[W]);_t.key!=null&&Tt.set(_t.key,W)}let It,zt=0;const Ut=st-Ct+1;let Vt=!1,Nt=0;const Xt=new Array(Ut);for(W=0;W<Ut;W++)Xt[W]=0;for(W=At;W<=J;W++){const _t=j[W];if(zt>=Ut){rt(_t,O,D,!0);continue}let gt;if(_t.key!=null)gt=Tt.get(_t.key);else for(It=Ct;It<=st;It++)if(Xt[It-Ct]===0&&isSameVNodeType(_t,o[It])){gt=It;break}gt===void 0?rt(_t,O,D,!0):(Xt[gt-Ct]=W+1,gt>=Nt?Nt=gt:Vt=!0,g(_t,o[gt],$,null,O,D,Z,it,ut),zt++)}const xt=Vt?getSequence(Xt):EMPTY_ARR;for(It=xt.length-1,W=Ut-1;W>=0;W--){const _t=Ct+W,gt=o[_t],kt=_t+1<K?o[_t+1].el:X;Xt[W]===0?g(null,gt,$,kt,O,D,Z,it,ut):Vt&&(It<0||W!==xt[It]?lt(gt,$,kt,2):It--)}}},lt=(j,o,$,X,O=null)=>{const{el:D,type:Z,transition:it,children:ut,shapeFlag:W}=j;if(W&6){lt(j.component.subTree,o,$,X);return}if(W&128){j.suspense.move(o,$,X);return}if(W&64){Z.move(j,o,$,et);return}if(Z===Fragment){i(D,o,$);for(let J=0;J<ut.length;J++)lt(ut[J],o,$,X);i(j.anchor,o,$);return}if(Z===Static){P(j,o,$);return}if(X!==2&&W&1&&it)if(X===0)it.beforeEnter(D),i(D,o,$),queuePostRenderEffect(()=>it.enter(D),O);else{const{leave:J,delayLeave:st,afterLeave:At}=it,Ct=()=>{j.ctx.isUnmounted?s(D):i(D,o,$)},Tt=()=>{J(D,()=>{Ct(),At&&At()})};st?st(D,Ct,Tt):Tt()}else i(D,o,$)},rt=(j,o,$,X=!1,O=!1)=>{const{type:D,props:Z,ref:it,children:ut,dynamicChildren:W,shapeFlag:K,patchFlag:J,dirs:st,cacheIndex:At}=j;if(J===-2&&(O=!1),it!=null&&(pauseTracking(),setRef(it,null,$,j,!0),resetTracking()),At!=null&&(o.renderCache[At]=void 0),K&256){o.ctx.deactivate(j);return}const Ct=K&1&&st,Tt=!isAsyncWrapper(j);let It;if(Tt&&(It=Z&&Z.onVnodeBeforeUnmount)&&invokeVNodeHook(It,o,j),K&6)C(j.component,$,X);else{if(K&128){j.suspense.unmount($,X);return}Ct&&invokeDirectiveHook(j,null,o,"beforeUnmount"),K&64?j.type.remove(j,o,$,et,X):W&&!W.hasOnce&&(D!==Fragment||J>0&&J&64)?k(W,o,$,!1,!0):(D===Fragment&&J&384||!O&&K&16)&&k(ut,o,$),X&&H(j)}(Tt&&(It=Z&&Z.onVnodeUnmounted)||Ct)&&queuePostRenderEffect(()=>{It&&invokeVNodeHook(It,o,j),Ct&&invokeDirectiveHook(j,null,o,"unmounted")},$)},H=j=>{const{type:o,el:$,anchor:X,transition:O}=j;if(o===Fragment){v($,X);return}if(o===Static){R(j);return}const D=()=>{s($),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(j.shapeFlag&1&&O&&!O.persisted){const{leave:Z,delayLeave:it}=O,ut=()=>Z($,D);it?it(j.el,D,ut):ut()}else D()},v=(j,o)=>{let $;for(;j!==o;)$=S(j),s(j),j=$;s(o)},C=(j,o,$)=>{const{bum:X,scope:O,job:D,subTree:Z,um:it,m:ut,a:W,parent:K,slots:{__:J}}=j;invalidateMount(ut),invalidateMount(W),X&&invokeArrayFns(X),K&&isArray(J)&&J.forEach(st=>{K.renderCache[st]=void 0}),O.stop(),D&&(D.flags|=8,rt(Z,j,o,$)),it&&queuePostRenderEffect(it,o),queuePostRenderEffect(()=>{j.isUnmounted=!0},o),o&&o.pendingBranch&&!o.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===o.pendingId&&(o.deps--,o.deps===0&&o.resolve())},k=(j,o,$,X=!1,O=!1,D=0)=>{for(let Z=D;Z<j.length;Z++)rt(j[Z],o,$,X,O)},M=j=>{if(j.shapeFlag&6)return M(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const o=S(j.anchor||j.el),$=o&&o[TeleportEndKey];return $?S($):o};let L=!1;const V=(j,o,$)=>{j==null?o._vnode&&rt(o._vnode,null,null,!0):g(o._vnode||null,j,o,null,null,null,$),o._vnode=j,L||(L=!0,flushPreFlushCbs(),flushPostFlushCbs(),L=!1)},et={p:g,um:rt,m:lt,r:H,mt:d,mc:I,pc:q,pbc:U,n:M,o:t};let ot,vt;return e&&([ot,vt]=e(et)),{render:V,hydrate:ot,createApp:createAppAPI(V,ot)}}function resolveChildrenNamespace({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,n=!1){const i=t.children,s=e.children;if(isArray(i)&&isArray(s))for(let r=0;r<i.length;r++){const a=i[r];let h=s[r];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=s[r]=cloneIfMounted(s[r]),h.el=a.el),!n&&h.patchFlag!==-2&&traverseStaticChildren(a,h)),h.type===Text&&(h.el=a.el),h.type===Comment&&!h.el&&(h.el=a.el)}}function getSequence(t){const e=t.slice(),n=[0];let i,s,r,a,h;const c=t.length;for(i=0;i<c;i++){const f=t[i];if(f!==0){if(s=n[n.length-1],t[s]<f){e[i]=s,n.push(i);continue}for(r=0,a=n.length-1;r<a;)h=r+a>>1,t[n[h]]<f?r=h+1:a=h;f<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=e[a];return n}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,e){return doWatch(t,null,e)}function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,n=EMPTY_OBJ){const{immediate:i,deep:s,flush:r,once:a}=n,h=extend({},n),c=e&&i||!e&&r!=="post";let f;if(isInSSRComponentSetup){if(r==="sync"){const u=useSSRContext();f=u.__watcherHandles||(u.__watcherHandles=[])}else if(!c){const u=()=>{};return u.stop=NOOP,u.resume=NOOP,u.pause=NOOP,u}}const l=currentInstance;h.call=(u,w,g)=>callWithAsyncErrorHandling(u,l,w,g);let b=!1;r==="post"?h.scheduler=u=>{queuePostRenderEffect(u,l&&l.suspense)}:r!=="sync"&&(b=!0,h.scheduler=(u,w)=>{w?u():queueJob(u)}),h.augmentJob=u=>{e&&(u.flags|=4),b&&(u.flags|=2,l&&(u.id=l.uid,u.i=l))};const S=watch$1(t,e,h);return isInSSRComponentSetup&&(f?f.push(S):c&&S()),S}function instanceWatch(t,e,n){const i=this.proxy,s=isString$1(t)?t.includes(".")?createPathGetter(i,t):()=>i[t]:t.bind(i,i);let r;isFunction$1(e)?r=e:(r=e.handler,n=e);const a=setCurrentInstance(this),h=doWatch(s,r.bind(i),n);return a(),h}function createPathGetter(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||EMPTY_OBJ;let s=n;const r=e.startsWith("update:"),a=r&&getModelModifiers(i,e.slice(7));a&&(a.trim&&(s=n.map(l=>isString$1(l)?l.trim():l)),a.number&&(s=n.map(looseToNumber)));let h,c=i[h=toHandlerKey(e)]||i[h=toHandlerKey(camelize(e))];!c&&r&&(c=i[h=toHandlerKey(hyphenate(e))]),c&&callWithAsyncErrorHandling(c,t,6,s);const f=i[h+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,callWithAsyncErrorHandling(f,t,6,s)}}function normalizeEmitsOptions(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let a={},h=!1;if(!isFunction$1(t)){const c=f=>{const l=normalizeEmitsOptions(f,e,!0);l&&(h=!0,extend(a,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!h?(isObject(t)&&i.set(t,null),null):(isArray(r)?r.forEach(c=>a[c]=null):extend(a,r),isObject(t)&&i.set(t,a),a)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:a,attrs:h,emit:c,render:f,renderCache:l,props:b,data:S,setupState:u,ctx:w,inheritAttrs:g}=t,m=setCurrentRenderingInstance(t);let _,x;try{if(n.shapeFlag&4){const R=s||i,y=R;_=normalizeVNode(f.call(y,R,l,b,u,S,w)),x=h}else{const R=e;_=normalizeVNode(R.length>1?R(b,{attrs:h,slots:a,emit:c}):R(b,null)),x=e.props?h:getFunctionalFallthrough(h)}}catch(R){blockStack.length=0,handleError(R,t,1),_=createVNode(Comment)}let P=_;if(x&&g!==!1){const R=Object.keys(x),{shapeFlag:y}=P;R.length&&y&7&&(r&&R.some(isModelListener)&&(x=filterModelListeners(x,r)),P=cloneVNode(P,x,!1,!0))}return n.dirs&&(P=cloneVNode(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(P,n.transition),_=P,setCurrentRenderingInstance(m),_}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const i in t)(!isModelListener(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function shouldUpdateComponent(t,e,n){const{props:i,children:s,component:r}=t,{props:a,children:h,patchFlag:c}=e,f=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?hasPropsChanged(i,a,f):!!a;if(c&8){const l=e.dynamicProps;for(let b=0;b<l.length;b++){const S=l[b];if(a[S]!==i[S]&&!isEmitListener(f,S))return!0}}}else return(s||h)&&(!h||!h.$stable)?!0:i===a?!1:i?a?hasPropsChanged(i,a,f):!0:!!a;return!1}function hasPropsChanged(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!isEmitListener(n,r))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,i,s,r){return setupBlock(createBaseVNode(t,e,n,i,s,r,!0))}function createBlock(t,e,n,i,s){return setupBlock(createVNode(t,e,n,i,s,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?isString$1(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null);function createBaseVNode(t,e=null,n=null,i=0,s=null,r=t===Fragment?0:1,a=!1,h=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return h?(normalizeChildren(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=isString$1(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const h=cloneVNode(t,e,!0);return n&&normalizeChildren(h,n),isBlockTreeEnabled>0&&!r&&currentBlock&&(h.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=h:currentBlock.push(h)),h.patchFlag=-2,h}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:h,style:c}=e;h&&!isString$1(h)&&(e.class=normalizeClass(h)),isObject(c)&&(isProxy(c)&&!isArray(c)&&(c=extend({},c)),e.style=normalizeStyle(c))}const a=isString$1(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,n,i,s,a,r,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:a,children:h,transition:c}=t,f=e?mergeProps(s||{},e):s,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?n&&r?isArray(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&i&&setTransitionHooks(l,c.clone(l)),l}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(isArray(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!isInternalObject(e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),i&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(s==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(s)){const r=e[s],a=i[s];a&&r!==a&&!(isArray(r)&&r.includes(a))&&(e[s]=r?[].concat(r,a):a)}else s!==""&&(e[s]=i[s])}return e}function invokeVNodeHook(t,e,n,i=null){callWithAsyncErrorHandling(t,e,7,[n,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||emptyAppContext,r={uid:uid++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,s),emitsOptions:normalizeEmitsOptions(i,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),t.ce&&t.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(a=>a(r)):s[0](r)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,n=!1){e&&setInSSRSetupState(e);const{props:i,children:s}=t.vnode,r=isStatefulComponent(t);initProps(t,i,r,e),initSlots(t,s,n||e);const a=r?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),a}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:i}=n;if(i){pauseTracking();const s=t.setupContext=i.length>1?createSetupContext(t):null,r=setCurrentInstance(t),a=callWithErrorHandling(i,t,0,[t.props,s]),h=isPromise(a);if(resetTracking(),r(),(h||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),h){if(a.then(unsetCurrentInstance,unsetCurrentInstance),e)return a.then(c=>{handleSetupResult(t,c,e)}).catch(c=>{handleError(c,t,0)});t.asyncDep=a}else handleSetupResult(t,a,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const i=t.type;if(!t.render){if(!e&&compile&&!i.render){const s=i.template||resolveMergedOptions(t).template;if(s){const{isCustomElement:r,compilerOptions:a}=t.appContext.config,{delimiters:h,compilerOptions:c}=i,f=extend(extend({isCustomElement:r,delimiters:h},a),c);i.render=compile(s,f)}}t.render=i.render||NOOP}{const s=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,n=!1){let i=getComponentName(e);if(!i&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(i=s[1])}if(!i&&t&&t.parent){const s=r=>{for(const a in r)if(r[a]===e)return a};i=s(t.components||t.parent.type.components)||s(t.appContext.components)}return i?classify(i):n?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):n?doc.createElement(t,{is:n}):doc.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const a=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const h=templateContainer.content;if(i==="svg"||i==="mathml"){const c=h.firstChild;for(;c.firstChild;)h.appendChild(c.firstChild);h.removeChild(c)}e.insertBefore(h,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,n){const i=t[vtcKey];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(t,{value:e},{transition:n}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),setDisplay(t,!0),i.enter(t)):i.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,e,n){const i=t.style,s=isString$1(n);let r=!1;if(n&&!s){if(e)if(isString$1(e))for(const a of e.split(";")){const h=a.slice(0,a.indexOf(":")).trim();n[h]==null&&setStyle(i,h,"")}else for(const a in e)n[a]==null&&setStyle(i,a,"");for(const a in n)a==="display"&&(r=!0),setStyle(i,a,n[a])}else if(s){if(e!==n){const a=i[CSS_VAR_TEXT];a&&(n+=";"+a),i.cssText=n,r=displayRE.test(n)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=r?i.display:"",t[vShowHidden]&&(i.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray(n))n.forEach(i=>setStyle(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(i),n.replace(importantRE,""),"important"):t[i]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let i=camelize(e);if(i!=="filter"&&i in t)return prefixCache[e]=i;i=capitalize(i);for(let s=0;s<prefixes.length;s++){const r=prefixes[s]+i;if(r in t)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,i,s,r=isSpecialBooleanAttr(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n):n==null||r&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,r?"":isSymbol(n)?String(n):n)}function patchDOMProp(t,e,n,i,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const h=r==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(h!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=includeBooleanAttr(n):n==null&&h==="string"?(n="",a=!0):h==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(s||e)}function addEventListener(t,e,n,i){t.addEventListener(e,n,i)}function removeEventListener(t,e,n,i){t.removeEventListener(e,n,i)}const veiKey=Symbol("_vei");function patchEvent(t,e,n,i,s=null){const r=t[veiKey]||(t[veiKey]={}),a=r[e];if(i&&a)a.value=i;else{const[h,c]=parseName(e);if(i){const f=r[e]=createInvoker(i,s);addEventListener(t,h,f,c)}else a&&(removeEventListener(t,h,a,c),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let i;for(;i=t.match(optionsModifierRE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,n.value),e,5,[i])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,n,i,s,r)=>{const a=s==="svg";e==="class"?patchClass(t,i,a):e==="style"?patchStyle(t,n,i):isOn(e)?isModelListener(e)||patchEvent(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,i,a))?(patchDOMProp(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,i,a,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString$1(i))?patchDOMProp(t,camelize(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),patchAttr(t,e,i,a))};function shouldSetAsProp(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction$1(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(e)&&isString$1(n)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[assignKey]=getModelAssigner(s);const r=i||s.props&&s.props.type==="number";addEventListener(t,e?"change":"input",a=>{if(a.target.composing)return;let h=t.value;n&&(h=h.trim()),r&&(h=looseToNumber(h)),t[assignKey](h)}),n&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},a){if(t[assignKey]=getModelAssigner(a),t.composing)return;const h=(r||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,c=e??"";h!==c&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===c)||(t.value=c))}},vModelSelect={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const s=isSet(e);addEventListener(t,"change",()=>{const r=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?looseToNumber(getValue(a)):getValue(a));t[assignKey](t.multiple?s?new Set(r):r:r[0]),t._assigning=!0,nextTick(()=>{t._assigning=!1})}),t[assignKey]=getModelAssigner(i)},mounted(t,{value:e}){setSelected(t,e)},beforeUpdate(t,e,n){t[assignKey]=getModelAssigner(n)},updated(t,{value:e}){t._assigning||setSelected(t,e)}};function setSelected(t,e){const n=t.multiple,i=isArray(e);if(!(n&&!i&&!isSet(e))){for(let s=0,r=t.options.length;s<r;s++){const a=t.options[s],h=getValue(a);if(n)if(i){const c=typeof h;c==="string"||c==="number"?a.selected=e.some(f=>String(f)===String(h)):a.selected=looseIndexOf(e,h)>-1}else a.selected=e.has(h);else if(looseEqual(getValue(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function getValue(t){return"_value"in t?t._value:t.value}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=normalizeContainer(i);if(!s)return;const r=e._component;!isFunction$1(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$1(t)?document.querySelector(t):t}const scriptRel="modulepreload",assetsURL=function(t,e){return new URL(t,e).href},seen={},__vitePreload=function(e,n,i){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=assetsURL(r,i),r in seen)return;seen[r]=!0;const a=r.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!i)for(let l=s.length-1;l>=0;l--){const b=s[l];if(b.href===r&&(!a||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${h}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":scriptRel,a||(f.as="script",f.crossOrigin=""),f.href=r,document.head.appendChild(f),a)return new Promise((l,b)=>{f.addEventListener("load",l),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,n){module.exports=e.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Xt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=nt,e.bytesToString=ot,e.createValidAbsoluteUrl=lt,e.getModificationDate=Ct,e.getUuid=Vt,e.getVerbosityLevel=Q,e.info=pt,e.isArrayBuffer=st,e.isArrayEqual=At,e.isNodeJS=void 0,e.normalizeUnicode=Ut,e.objectFromMap=$,e.objectSize=o,e.setVerbosityLevel=d,e.shadow=rt,e.string32=j,e.stringToBytes=vt,e.stringToPDFString=W,e.stringToUTF8String=K,e.unreachable=q,e.utf8StringToString=J,e.warn=at;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n;const i=[1,0,0,1,0,0];e.IDENTITY_MATRIX=i;const s=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=s;const r=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=r;const a=1.35;e.LINE_FACTOR=a;const h=.35;e.LINE_DESCENT_FACTOR=h;const c=h/a;e.BASELINE_FACTOR=c;const f={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=f;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;const b="pdfjs_internal_editor_";e.AnnotationEditorPrefix=b;const S={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=S;const u={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=u;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=w;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=g;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=m;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=_;const x={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=x;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=P;const R={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=R;const y={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=y;const F={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=F;const B={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=B;const I={O:"PageOpen",C:"PageClose"};e.PageActionEventType=I;const E={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=E;const U={NONE:0,BINARY:1};e.CMapCompressionType=U;const z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=z;const N={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=N;let Y=E.WARNINGS;function d(xt){Number.isInteger(xt)&&(Y=xt)}function Q(){return Y}function pt(xt){Y>=E.INFOS&&console.log(`Info: ${xt}`)}function at(xt){Y>=E.WARNINGS&&console.log(`Warning: ${xt}`)}function q(xt){throw new Error(xt)}function nt(xt,_t){xt||q(_t)}function ft(xt){switch(xt==null?void 0:xt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function lt(xt,_t=null,gt=null){if(!xt)return null;try{if(gt&&typeof xt=="string"){if(gt.addDefaultProtocol&&xt.startsWith("www.")){const Rt=xt.match(/\./g);(Rt==null?void 0:Rt.length)>=2&&(xt=`http://${xt}`)}if(gt.tryConvertEncoding)try{xt=K(xt)}catch{}}const kt=_t?new URL(xt,_t):new URL(xt);if(ft(kt))return kt}catch{}return null}function rt(xt,_t,gt,kt=!1){return Object.defineProperty(xt,_t,{value:gt,enumerable:!kt,configurable:!0,writable:!1}),gt}const H=function(){function _t(gt,kt){this.constructor===_t&&q("Cannot initialize BaseException."),this.message=gt,this.name=kt}return _t.prototype=new Error,_t.constructor=_t,_t}();e.BaseException=H;class v extends H{constructor(_t,gt){super(_t,"PasswordException"),this.code=gt}}e.PasswordException=v;class C extends H{constructor(_t,gt){super(_t,"UnknownErrorException"),this.details=gt}}e.UnknownErrorException=C;class k extends H{constructor(_t){super(_t,"InvalidPDFException")}}e.InvalidPDFException=k;class M extends H{constructor(_t){super(_t,"MissingPDFException")}}e.MissingPDFException=M;class L extends H{constructor(_t,gt){super(_t,"UnexpectedResponseException"),this.status=gt}}e.UnexpectedResponseException=L;class V extends H{constructor(_t){super(_t,"FormatError")}}e.FormatError=V;class et extends H{constructor(_t){super(_t,"AbortException")}}e.AbortException=et;function ot(xt){(typeof xt!="object"||(xt==null?void 0:xt.length)===void 0)&&q("Invalid argument for bytesToString");const _t=xt.length,gt=8192;if(_t<gt)return String.fromCharCode.apply(null,xt);const kt=[];for(let Rt=0;Rt<_t;Rt+=gt){const ne=Math.min(Rt+gt,_t),te=xt.subarray(Rt,ne);kt.push(String.fromCharCode.apply(null,te))}return kt.join("")}function vt(xt){typeof xt!="string"&&q("Invalid argument for stringToBytes");const _t=xt.length,gt=new Uint8Array(_t);for(let kt=0;kt<_t;++kt)gt[kt]=xt.charCodeAt(kt)&255;return gt}function j(xt){return String.fromCharCode(xt>>24&255,xt>>16&255,xt>>8&255,xt&255)}function o(xt){return Object.keys(xt).length}function $(xt){const _t=Object.create(null);for(const[gt,kt]of xt)_t[gt]=kt;return _t}function X(){const xt=new Uint8Array(4);return xt[0]=1,new Uint32Array(xt.buffer,0,1)[0]===1}function O(){try{return new Function(""),!0}catch{return!1}}class D{static get isLittleEndian(){return rt(this,"isLittleEndian",X())}static get isEvalSupported(){return rt(this,"isEvalSupported",O())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?rt(this,"platform",{isWin:!1,isMac:!1}):rt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var _t,gt;return rt(this,"isCSSRoundSupported",(gt=(_t=globalThis.CSS)==null?void 0:_t.supports)==null?void 0:gt.call(_t,"width: round(1.5px, 1px)"))}}e.FeatureTest=D;const Z=[...Array(256).keys()].map(xt=>xt.toString(16).padStart(2,"0"));class it{static makeHexColor(_t,gt,kt){return`#${Z[_t]}${Z[gt]}${Z[kt]}`}static scaleMinMax(_t,gt){let kt;_t[0]?(_t[0]<0&&(kt=gt[0],gt[0]=gt[1],gt[1]=kt),gt[0]*=_t[0],gt[1]*=_t[0],_t[3]<0&&(kt=gt[2],gt[2]=gt[3],gt[3]=kt),gt[2]*=_t[3],gt[3]*=_t[3]):(kt=gt[0],gt[0]=gt[2],gt[2]=kt,kt=gt[1],gt[1]=gt[3],gt[3]=kt,_t[1]<0&&(kt=gt[2],gt[2]=gt[3],gt[3]=kt),gt[2]*=_t[1],gt[3]*=_t[1],_t[2]<0&&(kt=gt[0],gt[0]=gt[1],gt[1]=kt),gt[0]*=_t[2],gt[1]*=_t[2]),gt[0]+=_t[4],gt[1]+=_t[4],gt[2]+=_t[5],gt[3]+=_t[5]}static transform(_t,gt){return[_t[0]*gt[0]+_t[2]*gt[1],_t[1]*gt[0]+_t[3]*gt[1],_t[0]*gt[2]+_t[2]*gt[3],_t[1]*gt[2]+_t[3]*gt[3],_t[0]*gt[4]+_t[2]*gt[5]+_t[4],_t[1]*gt[4]+_t[3]*gt[5]+_t[5]]}static applyTransform(_t,gt){const kt=_t[0]*gt[0]+_t[1]*gt[2]+gt[4],Rt=_t[0]*gt[1]+_t[1]*gt[3]+gt[5];return[kt,Rt]}static applyInverseTransform(_t,gt){const kt=gt[0]*gt[3]-gt[1]*gt[2],Rt=(_t[0]*gt[3]-_t[1]*gt[2]+gt[2]*gt[5]-gt[4]*gt[3])/kt,ne=(-_t[0]*gt[1]+_t[1]*gt[0]+gt[4]*gt[1]-gt[5]*gt[0])/kt;return[Rt,ne]}static getAxialAlignedBoundingBox(_t,gt){const kt=this.applyTransform(_t,gt),Rt=this.applyTransform(_t.slice(2,4),gt),ne=this.applyTransform([_t[0],_t[3]],gt),te=this.applyTransform([_t[2],_t[1]],gt);return[Math.min(kt[0],Rt[0],ne[0],te[0]),Math.min(kt[1],Rt[1],ne[1],te[1]),Math.max(kt[0],Rt[0],ne[0],te[0]),Math.max(kt[1],Rt[1],ne[1],te[1])]}static inverseTransform(_t){const gt=_t[0]*_t[3]-_t[1]*_t[2];return[_t[3]/gt,-_t[1]/gt,-_t[2]/gt,_t[0]/gt,(_t[2]*_t[5]-_t[4]*_t[3])/gt,(_t[4]*_t[1]-_t[5]*_t[0])/gt]}static singularValueDecompose2dScale(_t){const gt=[_t[0],_t[2],_t[1],_t[3]],kt=_t[0]*gt[0]+_t[1]*gt[2],Rt=_t[0]*gt[1]+_t[1]*gt[3],ne=_t[2]*gt[0]+_t[3]*gt[2],te=_t[2]*gt[1]+_t[3]*gt[3],wt=(kt+te)/2,Ot=Math.sqrt((kt+te)**2-4*(kt*te-ne*Rt))/2,Ht=wt+Ot||1,Mt=wt-Ot||1;return[Math.sqrt(Ht),Math.sqrt(Mt)]}static normalizeRect(_t){const gt=_t.slice(0);return _t[0]>_t[2]&&(gt[0]=_t[2],gt[2]=_t[0]),_t[1]>_t[3]&&(gt[1]=_t[3],gt[3]=_t[1]),gt}static intersect(_t,gt){const kt=Math.max(Math.min(_t[0],_t[2]),Math.min(gt[0],gt[2])),Rt=Math.min(Math.max(_t[0],_t[2]),Math.max(gt[0],gt[2]));if(kt>Rt)return null;const ne=Math.max(Math.min(_t[1],_t[3]),Math.min(gt[1],gt[3])),te=Math.min(Math.max(_t[1],_t[3]),Math.max(gt[1],gt[3]));return ne>te?null:[kt,ne,Rt,te]}static bezierBoundingBox(_t,gt,kt,Rt,ne,te,wt,Ot){const Ht=[],Mt=[[],[]];let Wt,Gt,Qt,Ft,Jt,$t,ct,T;for(let yt=0;yt<2;++yt){if(yt===0?(Gt=6*_t-12*kt+6*ne,Wt=-3*_t+9*kt-9*ne+3*wt,Qt=3*kt-3*_t):(Gt=6*gt-12*Rt+6*te,Wt=-3*gt+9*Rt-9*te+3*Ot,Qt=3*Rt-3*gt),Math.abs(Wt)<1e-12){if(Math.abs(Gt)<1e-12)continue;Ft=-Qt/Gt,0<Ft&&Ft<1&&Ht.push(Ft);continue}ct=Gt*Gt-4*Qt*Wt,T=Math.sqrt(ct),!(ct<0)&&(Jt=(-Gt+T)/(2*Wt),0<Jt&&Jt<1&&Ht.push(Jt),$t=(-Gt-T)/(2*Wt),0<$t&&$t<1&&Ht.push($t))}let G=Ht.length,ht;const mt=G;for(;G--;)Ft=Ht[G],ht=1-Ft,Mt[0][G]=ht*ht*ht*_t+3*ht*ht*Ft*kt+3*ht*Ft*Ft*ne+Ft*Ft*Ft*wt,Mt[1][G]=ht*ht*ht*gt+3*ht*ht*Ft*Rt+3*ht*Ft*Ft*te+Ft*Ft*Ft*Ot;return Mt[0][mt]=_t,Mt[1][mt]=gt,Mt[0][mt+1]=wt,Mt[1][mt+1]=Ot,Mt[0].length=Mt[1].length=mt+2,[Math.min(...Mt[0]),Math.min(...Mt[1]),Math.max(...Mt[0]),Math.max(...Mt[1])]}}e.Util=it;const ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function W(xt){if(xt[0]>="ï"){let gt;if(xt[0]==="þ"&&xt[1]==="ÿ"?gt="utf-16be":xt[0]==="ÿ"&&xt[1]==="þ"?gt="utf-16le":xt[0]==="ï"&&xt[1]==="»"&&xt[2]==="¿"&&(gt="utf-8"),gt)try{const kt=new TextDecoder(gt,{fatal:!0}),Rt=vt(xt);return kt.decode(Rt)}catch(kt){at(`stringToPDFString: "${kt}".`)}}const _t=[];for(let gt=0,kt=xt.length;gt<kt;gt++){const Rt=ut[xt.charCodeAt(gt)];_t.push(Rt?String.fromCharCode(Rt):xt.charAt(gt))}return _t.join("")}function K(xt){return decodeURIComponent(escape(xt))}function J(xt){return unescape(encodeURIComponent(xt))}function st(xt){return typeof xt=="object"&&(xt==null?void 0:xt.byteLength)!==void 0}function At(xt,_t){if(xt.length!==_t.length)return!1;for(let gt=0,kt=xt.length;gt<kt;gt++)if(xt[gt]!==_t[gt])return!1;return!0}function Ct(xt=new Date){return[xt.getUTCFullYear().toString(),(xt.getUTCMonth()+1).toString().padStart(2,"0"),xt.getUTCDate().toString().padStart(2,"0"),xt.getUTCHours().toString().padStart(2,"0"),xt.getUTCMinutes().toString().padStart(2,"0"),xt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Tt{constructor(){dt(this,Xt,!1);this.promise=new Promise((_t,gt)=>{this.resolve=kt=>{St(this,Xt,!0),_t(kt)},this.reject=kt=>{St(this,Xt,!0),gt(kt)}})}get settled(){return A(this,Xt)}}Xt=new WeakMap,e.PromiseCapability=Tt;let It=null,zt=null;function Ut(xt){return It||(It=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zt=new Map([["ﬅ","ſt"]])),xt.replaceAll(It,(_t,gt,kt)=>gt?gt.normalize("NFKC"):zt.get(kt))}function Vt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const xt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(xt);else for(let _t=0;_t<32;_t++)xt[_t]=Math.floor(Math.random()*255);return ot(xt)}const Nt="pdfjs_internal_id_";e.AnnotationPrefix=Nt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,n,i,s,de,a,Ce,c,f,l,b,S,u,w,g,m,xe,x,P,Ue,y,F;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(I){if(typeof I=="string"||I instanceof URL?I={url:I}:(0,_util.isArrayBuffer)(I)&&(I={data:I}),typeof I!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!I.url&&!I.data&&!I.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const E=new PDFDocumentLoadingTask,{docId:U}=E,z=I.url?getUrlProp(I.url):null,N=I.data?getDataProp(I.data):null,Y=I.httpHeaders||null,d=I.withCredentials===!0,Q=I.password??null,pt=I.range instanceof PDFDataRangeTransport?I.range:null,at=Number.isInteger(I.rangeChunkSize)&&I.rangeChunkSize>0?I.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let q=I.worker instanceof PDFWorker?I.worker:null;const nt=I.verbosity,ft=typeof I.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(I.docBaseUrl)?I.docBaseUrl:null,lt=typeof I.cMapUrl=="string"?I.cMapUrl:null,rt=I.cMapPacked!==!1,H=I.CMapReaderFactory||DefaultCMapReaderFactory,v=typeof I.standardFontDataUrl=="string"?I.standardFontDataUrl:null,C=I.StandardFontDataFactory||DefaultStandardFontDataFactory,k=I.stopAtErrors!==!0,M=Number.isInteger(I.maxImageSize)&&I.maxImageSize>-1?I.maxImageSize:-1,L=I.isEvalSupported!==!1,V=typeof I.isOffscreenCanvasSupported=="boolean"?I.isOffscreenCanvasSupported:!_util.isNodeJS,et=Number.isInteger(I.canvasMaxAreaInBytes)?I.canvasMaxAreaInBytes:-1,ot=typeof I.disableFontFace=="boolean"?I.disableFontFace:_util.isNodeJS,vt=I.fontExtraProperties===!0,j=I.enableXfa===!0,o=I.ownerDocument||globalThis.document,$=I.disableRange===!0,X=I.disableStream===!0,O=I.disableAutoFetch===!0,D=I.pdfBug===!0,Z=pt?pt.length:I.length??NaN,it=typeof I.useSystemFonts=="boolean"?I.useSystemFonts:!_util.isNodeJS&&!ot,ut=typeof I.useWorkerFetch=="boolean"?I.useWorkerFetch:H===_display_utils.DOMCMapReaderFactory&&C===_display_utils.DOMStandardFontDataFactory&&lt&&v&&(0,_display_utils.isValidFetchUrl)(lt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(v,document.baseURI),W=I.canvasFactory||new DefaultCanvasFactory({ownerDocument:o}),K=I.filterFactory||new DefaultFilterFactory({docId:U,ownerDocument:o}),J=null;(0,_util.setVerbosityLevel)(nt);const st={canvasFactory:W,filterFactory:K};if(ut||(st.cMapReaderFactory=new H({baseUrl:lt,isCompressed:rt}),st.standardFontDataFactory=new C({baseUrl:v})),!q){const Tt={verbosity:nt,port:_worker_options.GlobalWorkerOptions.workerPort};q=Tt.port?PDFWorker.fromPort(Tt):new PDFWorker(Tt),E._worker=q}const At={docId:U,apiVersion:"3.11.174",data:N,password:Q,disableAutoFetch:O,rangeChunkSize:at,length:Z,docBaseUrl:ft,enableXfa:j,evaluatorOptions:{maxImageSize:M,disableFontFace:ot,ignoreErrors:k,isEvalSupported:L,isOffscreenCanvasSupported:V,canvasMaxAreaInBytes:et,fontExtraProperties:vt,useSystemFonts:it,cMapUrl:ut?lt:null,standardFontDataUrl:ut?v:null}},Ct={ignoreErrors:k,isEvalSupported:L,disableFontFace:ot,fontExtraProperties:vt,enableXfa:j,ownerDocument:o,disableAutoFetch:O,pdfBug:D,styleElement:J};return q.promise.then(function(){if(E.destroyed)throw new Error("Loading aborted");const Tt=_fetchDocument(q,At),It=new Promise(function(zt){let Ut;pt?Ut=new _transport_stream.PDFDataTransportStream({length:Z,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:$,disableStream:X},pt):N||(Ut=(Nt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Nt):(0,_display_utils.isValidFetchUrl)(Nt.url)?new _displayFetch_stream.PDFFetchStream(Nt):new _displayNetwork.PDFNetworkStream(Nt))({url:z,length:Z,httpHeaders:Y,withCredentials:d,rangeChunkSize:at,disableRange:$,disableStream:X})),zt(Ut)});return Promise.all([Tt,It]).then(function([zt,Ut]){if(E.destroyed)throw new Error("Loading aborted");const Vt=new _message_handler.MessageHandler(U,zt,q.port),Nt=new WorkerTransport(Vt,E,Ut,Ct,st);E._transport=Nt,Vt.send("Ready",null)})}).catch(E._capability.reject),E}async function _fetchDocument(I,E){if(I.destroyed)throw new Error("Worker was destroyed");const U=await I.messageHandler.sendWithPromise("GetDocRequest",E,E.data?[E.data.buffer]:null);if(I.destroyed)throw new Error("Worker was destroyed");return U}function getUrlProp(I){if(I instanceof URL)return I.href;try{return new URL(I,window.location).href}catch{if(_util.isNodeJS&&typeof I=="string")return I}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(I){if(_util.isNodeJS&&typeof Buffer<"u"&&I instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(I instanceof Uint8Array&&I.byteLength===I.buffer.byteLength)return I;if(typeof I=="string")return(0,_util.stringToBytes)(I);if(typeof I=="object"&&!isNaN(I==null?void 0:I.length)||(0,_util.isArrayBuffer)(I))return new Uint8Array(I);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${_e(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var E,U,z;this.destroyed=!0;try{(E=this._worker)!=null&&E.port&&(this._worker._pendingDestroy=!0),await((U=this._transport)==null?void 0:U.destroy())}catch(N){throw(z=this._worker)!=null&&z.port&&delete this._worker._pendingDestroy,N}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,dt(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(E,U,z=!1,N=null){this.length=E,this.initialData=U,this.progressiveDone=z,this.contentDispositionFilename=N,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(E){this._rangeListeners.push(E)}addProgressListener(E){this._progressListeners.push(E)}addProgressiveReadListener(E){this._progressiveReadListeners.push(E)}addProgressiveDoneListener(E){this._progressiveDoneListeners.push(E)}onDataRange(E,U){for(const z of this._rangeListeners)z(E,U)}onDataProgress(E,U){this._readyCapability.promise.then(()=>{for(const z of this._progressListeners)z(E,U)})}onDataProgressiveRead(E){this._readyCapability.promise.then(()=>{for(const U of this._progressiveReadListeners)U(E)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const E of this._progressiveDoneListeners)E()})}transportReady(){this._readyCapability.resolve()}requestDataRange(E,U){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(E,U){this._pdfInfo=E,this._transport=U,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(z=>{if(!z)return z;const N=[];for(const Y in z)N.push(...z[Y]);return N}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(E){return this._transport.getPage(E)}getPageIndex(E){return this._transport.getPageIndex(E)}getDestinations(){return this._transport.getDestinations()}getDestination(E){return this._transport.getDestination(E)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(E=!1){return this._transport.startCleanup(E||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(E,U,z,N=!1){dt(this,s);dt(this,a);dt(this,n,null);dt(this,i,!1);this._pageIndex=E,this._pageInfo=U,this._transport=z,this._stats=N?new _display_utils.StatTimer:null,this._pdfBug=N,this.commonObjs=z.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:E,rotation:U=this.rotate,offsetX:z=0,offsetY:N=0,dontFlip:Y=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:E,rotation:U,offsetX:z,offsetY:N,dontFlip:Y})}getAnnotations({intent:E="display"}={}){const U=this._transport.getRenderingIntent(E);return this._transport.getAnnotations(this._pageIndex,U.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var E;return((E=this._transport._htmlForXfa)==null?void 0:E.children[this._pageIndex])||null}render({canvasContext:E,viewport:U,intent:z="display",annotationMode:N=_util.AnnotationMode.ENABLE,transform:Y=null,background:d=null,optionalContentConfigPromise:Q=null,annotationCanvasMap:pt=null,pageColors:at=null,printAnnotationStorage:q=null}){var C,k;(C=this._stats)==null||C.time("Overall");const nt=this._transport.getRenderingIntent(z,N,q);St(this,i,!1),bt(this,a,Ce).call(this),Q||(Q=this._transport.getOptionalContentConfig());let ft=this._intentStates.get(nt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(nt.cacheKey,ft)),ft.streamReaderCancelTimeout&&(clearTimeout(ft.streamReaderCancelTimeout),ft.streamReaderCancelTimeout=null);const lt=!!(nt.renderingIntent&_util.RenderingIntentFlag.PRINT);ft.displayReadyCapability||(ft.displayReadyCapability=new _util.PromiseCapability,ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(nt));const rt=M=>{var L,V;ft.renderTasks.delete(H),(this._maybeCleanupAfterRender||lt)&&St(this,i,!0),bt(this,s,de).call(this,!lt),M?(H.capability.reject(M),this._abortOperatorList({intentState:ft,reason:M instanceof Error?M:new Error(M)})):H.capability.resolve(),(L=this._stats)==null||L.timeEnd("Rendering"),(V=this._stats)==null||V.timeEnd("Overall")},H=new InternalRenderTask({callback:rt,params:{canvasContext:E,viewport:U,transform:Y,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:ft.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!lt,pdfBug:this._pdfBug,pageColors:at});(ft.renderTasks||(ft.renderTasks=new Set)).add(H);const v=H.task;return Promise.all([ft.displayReadyCapability.promise,Q]).then(([M,L])=>{var V;if(this.destroyed){rt();return}(V=this._stats)==null||V.time("Rendering"),H.initializeGraphics({transparency:M,optionalContentConfig:L}),H.operatorListChanged()}).catch(rt),v}getOperatorList({intent:E="display",annotationMode:U=_util.AnnotationMode.ENABLE,printAnnotationStorage:z=null}={}){var pt;function N(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(Q))}const Y=this._transport.getRenderingIntent(E,U,z,!0);let d=this._intentStates.get(Y.cacheKey);d||(d=Object.create(null),this._intentStates.set(Y.cacheKey,d));let Q;return d.opListReadCapability||(Q=Object.create(null),Q.operatorListChanged=N,d.opListReadCapability=new _util.PromiseCapability,(d.renderTasks||(d.renderTasks=new Set)).add(Q),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(Y)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:E=!1,disableNormalization:U=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:E===!0,disableNormalization:U===!0},{highWaterMark:100,size(N){return N.items.length}})}getTextContent(E={}){if(this._transport._htmlForXfa)return this.getXfa().then(z=>_xfa_text.XfaText.textContent(z));const U=this.streamTextContent(E);return new Promise(function(z,N){function Y(){d.read().then(function({value:pt,done:at}){if(at){z(Q);return}Object.assign(Q.styles,pt.styles),Q.items.push(...pt.items),Y()},N)}const d=U.getReader(),Q={items:[],styles:Object.create(null)};Y()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const E=[];for(const U of this._intentStates.values())if(this._abortOperatorList({intentState:U,reason:new Error("Page was destroyed."),force:!0}),!U.opListReadCapability)for(const z of U.renderTasks)E.push(z.completed),z.cancel();return this.objs.clear(),St(this,i,!1),bt(this,a,Ce).call(this),Promise.all(E)}cleanup(E=!1){St(this,i,!0);const U=bt(this,s,de).call(this,!1);return E&&U&&this._stats&&(this._stats=new _display_utils.StatTimer),U}_startRenderPage(E,U){var N,Y;const z=this._intentStates.get(U);z&&((N=this._stats)==null||N.timeEnd("Page Request"),(Y=z.displayReadyCapability)==null||Y.resolve(E))}_renderPageChunk(E,U){for(let z=0,N=E.length;z<N;z++)U.operatorList.fnArray.push(E.fnArray[z]),U.operatorList.argsArray.push(E.argsArray[z]);U.operatorList.lastChunk=E.lastChunk,U.operatorList.separateAnnots=E.separateAnnots;for(const z of U.renderTasks)z.operatorListChanged();E.lastChunk&&bt(this,s,de).call(this,!0)}_pumpOperatorList({renderingIntent:E,cacheKey:U,annotationStorageSerializable:z}){const{map:N,transfers:Y}=z,Q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:E,cacheKey:U,annotationStorage:N},Y).getReader(),pt=this._intentStates.get(U);pt.streamReader=Q;const at=()=>{Q.read().then(({value:q,done:nt})=>{if(nt){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(q,pt),at())},q=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const nt of pt.renderTasks)nt.operatorListChanged();bt(this,s,de).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject(q);else if(pt.opListReadCapability)pt.opListReadCapability.reject(q);else throw q}})};at()}_abortOperatorList({intentState:E,reason:U,force:z=!1}){if(E.streamReader){if(E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null),!z){if(E.renderTasks.size>0)return;if(U instanceof _display_utils.RenderingCancelledException){let N=RENDERING_CANCELLED_TIMEOUT;U.extraDelay>0&&U.extraDelay<1e3&&(N+=U.extraDelay),E.streamReaderCancelTimeout=setTimeout(()=>{E.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:E,reason:U,force:!0})},N);return}}if(E.streamReader.cancel(new _util.AbortException(U.message)).catch(()=>{}),E.streamReader=null,!this._transport.destroyed){for(const[N,Y]of this._intentStates)if(Y===E){this._intentStates.delete(N);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,i=new WeakMap,s=new WeakSet,de=function(E=!1){if(bt(this,a,Ce).call(this),!A(this,i)||this.destroyed)return!1;if(E)return St(this,n,setTimeout(()=>{St(this,n,null),bt(this,s,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:U,operatorList:z}of this._intentStates.values())if(U.size>0||!z.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),St(this,i,!1),!0},a=new WeakSet,Ce=function(){A(this,n)&&(clearTimeout(A(this,n)),St(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){dt(this,c,new Set);dt(this,f,Promise.resolve())}postMessage(E,U){const z={data:structuredClone(E,U?{transfer:U}:null)};A(this,f).then(()=>{for(const N of A(this,c))N.call(this,z)})}addEventListener(E,U){A(this,c).add(U)}removeEventListener(E,U){A(this,c).delete(U)}terminate(){A(this,c).clear()}}c=new WeakMap,f=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const I=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;I&&(PDFWorkerUtil.fallbackWorkerSrc=I.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(I,E){let U;try{if(U=new URL(I),!U.origin||U.origin==="null")return!1}catch{return!1}const z=new URL(E,U);return U.origin===z.origin},PDFWorkerUtil.createCDNWrapper=function(I){const E=`importScripts("${I}");`;return URL.createObjectURL(new Blob([E]))}}const _PDFWorker=class _PDFWorker{constructor({name:I=null,port:E=null,verbosity:U=(0,_util.getVerbosityLevel)()}={}){var z;if(this.name=I,this.destroyed=!1,this.verbosity=U,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,E){if((z=A(_PDFWorker,b))!=null&&z.has(E))throw new Error("Cannot use more than one PDFWorker per port.");(A(_PDFWorker,b)||St(_PDFWorker,b,new WeakMap)).set(E,this),this._initializeFromPort(E);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(I){this._port=I,this._messageHandler=new _message_handler.MessageHandler("main","worker",I),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:I}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,I)||(I=PDFWorkerUtil.createCDNWrapper(new URL(I,window.location).href));const E=new Worker(I),U=new _message_handler.MessageHandler("main","worker",E),z=()=>{E.removeEventListener("error",N),U.destroy(),E.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},N=()=>{this._webWorker||z()};E.addEventListener("error",N),U.on("test",d=>{if(E.removeEventListener("error",N),this.destroyed){z();return}d?(this._messageHandler=U,this._port=E,this._webWorker=E,this._readyCapability.resolve(),U.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),U.destroy(),E.terminate())}),U.on("ready",d=>{if(E.removeEventListener("error",N),this.destroyed){z();return}try{Y()}catch{this._setupFakeWorker()}});const Y=()=>{const d=new Uint8Array;U.send("test",d,[d.buffer])};Y();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(I=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const E=new LoopbackPort;this._port=E;const U=`fake${PDFWorkerUtil.fakeWorkerId++}`,z=new _message_handler.MessageHandler(U+"_worker",U,E);I.setup(z,E);const N=new _message_handler.MessageHandler(U,U+"_worker",E);this._messageHandler=N,this._readyCapability.resolve(),N.send("configure",{verbosity:this.verbosity})}).catch(I=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${I.message}".`))})}destroy(){var I;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(I=A(_PDFWorker,b))==null||I.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(I){var U;if(!(I!=null&&I.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const E=(U=A(this,b))==null?void 0:U.get(I.port);if(E){if(E._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return E}return new _PDFWorker(I)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var I;try{return((I=globalThis.pdfjsWorker)==null?void 0:I.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};b=new WeakMap,dt(_PDFWorker,b,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(E,U,z,N,Y){dt(this,m);dt(this,S,new Map);dt(this,u,new Map);dt(this,w,new Map);dt(this,g,null);this.messageHandler=E,this.loadingTask=U,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:N.ownerDocument,styleElement:N.styleElement}),this._params=N,this.canvasFactory=Y.canvasFactory,this.filterFactory=Y.filterFactory,this.cMapReaderFactory=Y.cMapReaderFactory,this.standardFontDataFactory=Y.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=z,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(E,U=_util.AnnotationMode.ENABLE,z=null,N=!1){let Y=_util.RenderingIntentFlag.DISPLAY,d=_annotation_storage.SerializableEmpty;switch(E){case"any":Y=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Y=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${E}`)}switch(U){case _util.AnnotationMode.DISABLE:Y+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Y+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Y+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,d=(Y&_util.RenderingIntentFlag.PRINT&&z instanceof _annotation_storage.PrintAnnotationStorage?z:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${U}`)}return N&&(Y+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Y,cacheKey:`${Y}_${d.hash}`,annotationStorageSerializable:d}}destroy(){var z;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(z=A(this,g))==null||z.reject(new Error("Worker was destroyed during onPassword callback"));const E=[];for(const N of A(this,u).values())E.push(N._destroy());A(this,u).clear(),A(this,w).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const U=this.messageHandler.sendWithPromise("Terminate",null);return E.push(U),Promise.all(E).then(()=>{var N;this.commonObjs.clear(),this.fontLoader.clear(),A(this,S).clear(),this.filterFactory.destroy(),(N=this._networkStream)==null||N.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:E,loadingTask:U}=this;E.on("GetReader",(z,N)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Y=>{this._lastProgress={loaded:Y.loaded,total:Y.total}},N.onPull=()=>{this._fullReader.read().then(function({value:Y,done:d}){if(d){N.close();return}(0,_util.assert)(Y instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),N.enqueue(new Uint8Array(Y),1,[Y])}).catch(Y=>{N.error(Y)})},N.onCancel=Y=>{this._fullReader.cancel(Y),N.ready.catch(d=>{if(!this.destroyed)throw d})}}),E.on("ReaderHeadersReady",z=>{const N=new _util.PromiseCapability,Y=this._fullReader;return Y.headersReady.then(()=>{var d;(!Y.isStreamingSupported||!Y.isRangeSupported)&&(this._lastProgress&&((d=U.onProgress)==null||d.call(U,this._lastProgress)),Y.onProgress=Q=>{var pt;(pt=U.onProgress)==null||pt.call(U,{loaded:Q.loaded,total:Q.total})}),N.resolve({isStreamingSupported:Y.isStreamingSupported,isRangeSupported:Y.isRangeSupported,contentLength:Y.contentLength})},N.reject),N.promise}),E.on("GetRangeReader",(z,N)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Y=this._networkStream.getRangeReader(z.begin,z.end);if(!Y){N.close();return}N.onPull=()=>{Y.read().then(function({value:d,done:Q}){if(Q){N.close();return}(0,_util.assert)(d instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),N.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{N.error(d)})},N.onCancel=d=>{Y.cancel(d),N.ready.catch(Q=>{if(!this.destroyed)throw Q})}}),E.on("GetDoc",({pdfInfo:z})=>{this._numPages=z.numPages,this._htmlForXfa=z.htmlForXfa,delete z.htmlForXfa,U._capability.resolve(new PDFDocumentProxy(z,this))}),E.on("DocException",function(z){let N;switch(z.name){case"PasswordException":N=new _util.PasswordException(z.message,z.code);break;case"InvalidPDFException":N=new _util.InvalidPDFException(z.message);break;case"MissingPDFException":N=new _util.MissingPDFException(z.message);break;case"UnexpectedResponseException":N=new _util.UnexpectedResponseException(z.message,z.status);break;case"UnknownErrorException":N=new _util.UnknownErrorException(z.message,z.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}U._capability.reject(N)}),E.on("PasswordRequest",z=>{if(St(this,g,new _util.PromiseCapability),U.onPassword){const N=Y=>{Y instanceof Error?A(this,g).reject(Y):A(this,g).resolve({password:Y})};try{U.onPassword(N,z.code)}catch(Y){A(this,g).reject(Y)}}else A(this,g).reject(new _util.PasswordException(z.message,z.code));return A(this,g).promise}),E.on("DataLoaded",z=>{var N;(N=U.onProgress)==null||N.call(U,{loaded:z.length,total:z.length}),this.downloadInfoCapability.resolve(z)}),E.on("StartRenderPage",z=>{if(this.destroyed)return;A(this,u).get(z.pageIndex)._startRenderPage(z.transparency,z.cacheKey)}),E.on("commonobj",([z,N,Y])=>{var d;if(!this.destroyed&&!this.commonObjs.has(z))switch(N){case"Font":const Q=this._params;if("error"in Y){const q=Y.error;(0,_util.warn)(`Error during font loading: ${q}`),this.commonObjs.resolve(z,q);break}const pt=Q.pdfBug&&((d=globalThis.FontInspector)!=null&&d.enabled)?(q,nt)=>globalThis.FontInspector.fontAdded(q,nt):null,at=new _font_loader.FontFaceObject(Y,{isEvalSupported:Q.isEvalSupported,disableFontFace:Q.disableFontFace,ignoreErrors:Q.ignoreErrors,inspectFont:pt});this.fontLoader.bind(at).catch(q=>E.sendWithPromise("FontFallback",{id:z})).finally(()=>{!Q.fontExtraProperties&&at.data&&(at.data=null),this.commonObjs.resolve(z,at)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(z,Y);break;default:throw new Error(`Got unknown common object type ${N}`)}}),E.on("obj",([z,N,Y,d])=>{var pt;if(this.destroyed)return;const Q=A(this,u).get(N);if(!Q.objs.has(z))switch(Y){case"Image":if(Q.objs.resolve(z,d),d){let at;if(d.bitmap){const{width:q,height:nt}=d;at=q*nt*4}else at=((pt=d.data)==null?void 0:pt.length)||0;at>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Q._maybeCleanupAfterRender=!0)}break;case"Pattern":Q.objs.resolve(z,d);break;default:throw new Error(`Got unknown object type ${Y}`)}}),E.on("DocProgress",z=>{var N;this.destroyed||(N=U.onProgress)==null||N.call(U,{loaded:z.loaded,total:z.total})}),E.on("FetchBuiltInCMap",z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(z):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),E.on("FetchStandardFontData",z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(z):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var z;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:E,transfers:U}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:E,filename:((z=this._fullReader)==null?void 0:z.filename)??null},U).finally(()=>{this.annotationStorage.resetModified()})}getPage(E){if(!Number.isInteger(E)||E<=0||E>this._numPages)return Promise.reject(new Error("Invalid page request."));const U=E-1,z=A(this,w).get(U);if(z)return z;const N=this.messageHandler.sendWithPromise("GetPage",{pageIndex:U}).then(Y=>{if(this.destroyed)throw new Error("Transport destroyed");const d=new PDFPageProxy(U,Y,this,this._params.pdfBug);return A(this,u).set(U,d),d});return A(this,w).set(U,N),N}getPageIndex(E){return typeof E!="object"||E===null||!Number.isInteger(E.num)||E.num<0||!Number.isInteger(E.gen)||E.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:E.num,gen:E.gen})}getAnnotations(E,U){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:E,intent:U})}getFieldObjects(){return bt(this,m,xe).call(this,"GetFieldObjects")}hasJSActions(){return bt(this,m,xe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(E){return typeof E!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:E})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return bt(this,m,xe).call(this,"GetDocJSActions")}getPageJSActions(E){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:E})}getStructTree(E){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:E})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(E=>new _optional_content_config.OptionalContentConfig(E))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const E="GetMetadata",U=A(this,S).get(E);if(U)return U;const z=this.messageHandler.sendWithPromise(E,null).then(N=>{var Y,d;return{info:N[0],metadata:N[1]?new _metadata.Metadata(N[1]):null,contentDispositionFilename:((Y=this._fullReader)==null?void 0:Y.filename)??null,contentLength:((d=this._fullReader)==null?void 0:d.contentLength)??null}});return A(this,S).set(E,z),z}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(E=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const U of A(this,u).values())if(!U.cleanup())throw new Error(`startCleanup: Page ${U.pageNumber} is currently rendering.`);this.commonObjs.clear(),E||this.fontLoader.clear(),A(this,S).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:E,enableXfa:U}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:E,enableXfa:U})}}S=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakSet,xe=function(E,U=null){const z=A(this,S).get(E);if(z)return z;const N=this.messageHandler.sendWithPromise(E,U);return A(this,S).set(E,N),N};class PDFObjects{constructor(){dt(this,P);dt(this,x,Object.create(null))}get(E,U=null){if(U){const N=bt(this,P,Ue).call(this,E);return N.capability.promise.then(()=>U(N.data)),null}const z=A(this,x)[E];if(!(z!=null&&z.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${E}.`);return z.data}has(E){const U=A(this,x)[E];return(U==null?void 0:U.capability.settled)||!1}resolve(E,U=null){const z=bt(this,P,Ue).call(this,E);z.data=U,z.capability.resolve()}clear(){var E;for(const U in A(this,x)){const{data:z}=A(this,x)[U];(E=z==null?void 0:z.bitmap)==null||E.close()}St(this,x,Object.create(null))}}x=new WeakMap,P=new WeakSet,Ue=function(E){var U;return(U=A(this,x))[E]||(U[E]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(E){dt(this,y,null);St(this,y,E),this.onContinue=null}get promise(){return A(this,y).capability.promise}cancel(E=0){A(this,y).cancel(null,E)}get separateAnnots(){const{separateAnnots:E}=A(this,y).operatorList;if(!E)return!1;const{annotationCanvasMap:U}=A(this,y);return E.form||E.canvas&&(U==null?void 0:U.size)>0}}y=new WeakMap,exports.RenderTask=RenderTask;const B=class B{constructor({callback:E,params:U,objs:z,commonObjs:N,annotationCanvasMap:Y,operatorList:d,pageIndex:Q,canvasFactory:pt,filterFactory:at,useRequestAnimationFrame:q=!1,pdfBug:nt=!1,pageColors:ft=null}){this.callback=E,this.params=U,this.objs=z,this.commonObjs=N,this.annotationCanvasMap=Y,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=Q,this.canvasFactory=pt,this.filterFactory=at,this._pdfBug=nt,this.pageColors=ft,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=q===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=U.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:E=!1,optionalContentConfig:U}){var Q,pt;if(this.cancelled)return;if(this._canvas){if(A(B,F).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");A(B,F).add(this._canvas)}this._pdfBug&&((Q=globalThis.StepperManager)!=null&&Q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:z,viewport:N,transform:Y,background:d}=this.params;this.gfx=new _canvas.CanvasGraphics(z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:U},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Y,viewport:N,transparency:E,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(E=null,U=0){var z;this.running=!1,this.cancelled=!0,(z=this.gfx)==null||z.endDrawing(),A(B,F).delete(this._canvas),this.callback(E||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,U))}operatorListChanged(){var E;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(E=this.stepper)==null||E.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),A(B,F).delete(this._canvas),this.callback())))}};F=new WeakMap,dt(B,F,new WeakSet);let InternalRenderTask=B;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,n)=>{var f,l,b,wn,u;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=n(1),s=n(4),r=n(8);const a=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=a;class h{constructor(){dt(this,b);dt(this,f,!1);dt(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,m){const _=A(this,l).get(g);return _===void 0?m:Object.assign(m,_)}getRawValue(g){return A(this,l).get(g)}remove(g){if(A(this,l).delete(g),A(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const m of A(this,l).values())if(m instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,m){const _=A(this,l).get(g);let x=!1;if(_!==void 0)for(const[P,R]of Object.entries(m))_[P]!==R&&(x=!0,_[P]=R);else x=!0,A(this,l).set(g,m);x&&bt(this,b,wn).call(this),m instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(m.constructor._type)}has(g){return A(this,l).has(g)}getAll(){return A(this,l).size>0?(0,i.objectFromMap)(A(this,l)):null}setAll(g){for(const[m,_]of Object.entries(g))this.setValue(m,_)}get size(){return A(this,l).size}resetModified(){A(this,f)&&(St(this,f,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new c(this)}get serializable(){if(A(this,l).size===0)return a;const g=new Map,m=new r.MurmurHash3_64,_=[],x=Object.create(null);let P=!1;for(const[R,y]of A(this,l)){const F=y instanceof s.AnnotationEditor?y.serialize(!1,x):y;F&&(g.set(R,F),m.update(`${R}:${JSON.stringify(F)}`),P||(P=!!F.bitmap))}if(P)for(const R of g.values())R.bitmap&&_.push(R.bitmap);return g.size>0?{map:g,hash:m.hexdigest(),transfers:_}:a}}f=new WeakMap,l=new WeakMap,b=new WeakSet,wn=function(){A(this,f)||(St(this,f,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=h;class c extends h{constructor(m){super();dt(this,u,void 0);const{map:_,hash:x,transfers:P}=m.serializable,R=structuredClone(_,P?{transfer:P}:null);St(this,u,{map:R,hash:x,transfers:P})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return A(this,u)}}u=new WeakMap,e.PrintAnnotationStorage=c},(t,e,n)=>{var c,f,l,b,S,u,w,g,m,_,x,P,R,y,F,ze,I,$e,U,He,N,We,d,Sn,pt,En,q,Cn,ft,Ve,rt,xn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=n(5),s=n(1),r=n(6);const v=class v{constructor(k){dt(this,F);dt(this,I);dt(this,N);dt(this,d);dt(this,pt);dt(this,q);dt(this,ft);dt(this,rt);dt(this,c,"");dt(this,f,!1);dt(this,l,null);dt(this,b,null);dt(this,S,null);dt(this,u,!1);dt(this,w,null);dt(this,g,this.focusin.bind(this));dt(this,m,this.focusout.bind(this));dt(this,_,!1);dt(this,x,!1);dt(this,P,!1);ie(this,"_initialOptions",Object.create(null));ie(this,"_uiManager",null);ie(this,"_focusEventsAllowed",!0);ie(this,"_l10nPromise",null);dt(this,R,!1);dt(this,y,v._zIndex++);this.constructor===v&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=k.parent,this.id=k.id,this.width=this.height=null,this.pageIndex=k.parent.pageIndex,this.name=k.name,this.div=null,this._uiManager=k.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=k.isCentered,this._structTreeParentId=null;const{rotation:M,rawDims:{pageWidth:L,pageHeight:V,pageX:et,pageY:ot}}=this.parent.viewport;this.rotation=M,this.pageRotation=(360+M-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[L,V],this.pageTranslation=[et,ot];const[vt,j]=this.parentDimensions;this.x=k.x/vt,this.y=k.y/j,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(k){const M=new h({id:k.parent.getNextId(),parent:k.parent,uiManager:k._uiManager});M.annotationElementId=k.annotationElementId,M.deleted=!0,M._uiManager.addToAnnotationStorage(M)}static initialize(k,M=null){if(v._l10nPromise||(v._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(V=>[V,k.get(V)]))),M!=null&&M.strings)for(const V of M.strings)v._l10nPromise.set(V,k.get(V));if(v._borderLineWidth!==-1)return;const L=getComputedStyle(document.documentElement);v._borderLineWidth=parseFloat(L.getPropertyValue("--outline-width"))||0}static updateDefaultParams(k,M){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(k){return!1}static paste(k,M){(0,s.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return A(this,R)}set _isDraggable(k){var M;St(this,R,k),(M=this.div)==null||M.classList.toggle("draggable",k)}center(){const[k,M]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*M/(k*2),this.y+=this.width*k/(M*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*M/(k*2),this.y-=this.width*k/(M*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(k){this._uiManager.addCommands(k)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=A(this,y)}setParent(k){k!==null&&(this.pageIndex=k.pageIndex,this.pageDimensions=k.pageDimensions),this.parent=k}focusin(k){this._focusEventsAllowed&&(A(this,_)?St(this,_,!1):this.parent.setSelected(this))}focusout(k){var L;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const M=k.relatedTarget;M!=null&&M.closest(`#${this.id}`)||(k.preventDefault(),(L=this.parent)!=null&&L.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(k,M,L,V){const[et,ot]=this.parentDimensions;[L,V]=this.screenToPageTranslation(L,V),this.x=(k+L)/et,this.y=(M+V)/ot,this.fixAndSetPosition()}translate(k,M){bt(this,F,ze).call(this,this.parentDimensions,k,M)}translateInPage(k,M){bt(this,F,ze).call(this,this.pageDimensions,k,M),this.div.scrollIntoView({block:"nearest"})}drag(k,M){const[L,V]=this.parentDimensions;if(this.x+=k/L,this.y+=M/V,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:o,y:$}=this.div.getBoundingClientRect();this.parent.findNewParent(this,o,$)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:et,y:ot}=this;const[vt,j]=bt(this,I,$e).call(this);et+=vt,ot+=j,this.div.style.left=`${(100*et).toFixed(2)}%`,this.div.style.top=`${(100*ot).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[k,M]=this.pageDimensions;let{x:L,y:V,width:et,height:ot}=this;switch(et*=k,ot*=M,L*=k,V*=M,this.rotation){case 0:L=Math.max(0,Math.min(k-et,L)),V=Math.max(0,Math.min(M-ot,V));break;case 90:L=Math.max(0,Math.min(k-ot,L)),V=Math.min(M,Math.max(et,V));break;case 180:L=Math.min(k,Math.max(et,L)),V=Math.min(M,Math.max(ot,V));break;case 270:L=Math.min(k,Math.max(ot,L)),V=Math.max(0,Math.min(M-et,V));break}this.x=L/=k,this.y=V/=M;const[vt,j]=bt(this,I,$e).call(this);L+=vt,V+=j;const{style:o}=this.div;o.left=`${(100*L).toFixed(2)}%`,o.top=`${(100*V).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(k,M){var L;return bt(L=v,U,He).call(L,k,M,this.parentRotation)}pageTranslationToScreen(k,M){var L;return bt(L=v,U,He).call(L,k,M,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:k,pageDimensions:[M,L]}=this,V=M*k,et=L*k;return s.FeatureTest.isCSSRoundSupported?[Math.round(V),Math.round(et)]:[V,et]}setDims(k,M){var et;const[L,V]=this.parentDimensions;this.div.style.width=`${(100*k/L).toFixed(2)}%`,A(this,u)||(this.div.style.height=`${(100*M/V).toFixed(2)}%`),(et=A(this,l))==null||et.classList.toggle("small",k<v.SMALL_EDITOR_SIZE||M<v.SMALL_EDITOR_SIZE)}fixDims(){const{style:k}=this.div,{height:M,width:L}=k,V=L.endsWith("%"),et=!A(this,u)&&M.endsWith("%");if(V&&et)return;const[ot,vt]=this.parentDimensions;V||(k.width=`${(100*parseFloat(L)/ot).toFixed(2)}%`),!A(this,u)&&!et&&(k.height=`${(100*parseFloat(M)/vt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(A(this,l))return;const k=St(this,l,document.createElement("button"));k.className="altText";const M=await v._l10nPromise.get("editor_alt_text_button_label");k.textContent=M,k.setAttribute("aria-label",M),k.tabIndex="0",k.addEventListener("contextmenu",r.noContextMenu),k.addEventListener("pointerdown",L=>L.stopPropagation()),k.addEventListener("click",L=>{L.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),k.addEventListener("keydown",L=>{L.target===k&&L.key==="Enter"&&(L.preventDefault(),this._uiManager.editAltText(this))}),bt(this,ft,Ve).call(this),this.div.append(k),v.SMALL_EDITOR_SIZE||(v.SMALL_EDITOR_SIZE=Math.min(128,Math.round(k.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:A(this,c),decorative:A(this,f)}}set altTextData({altText:k,decorative:M}){A(this,c)===k&&A(this,f)===M||(St(this,c,k),St(this,f,M),bt(this,ft,Ve).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",A(this,g)),this.div.addEventListener("focusout",A(this,m));const[k,M]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*M/k).toFixed(2)}%`,this.div.style.maxHeight=`${(100*k/M).toFixed(2)}%`);const[L,V]=this.getInitialTranslation();return this.translate(L,V),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(k){const{isMac:M}=s.FeatureTest.platform;if(k.button!==0||k.ctrlKey&&M){k.preventDefault();return}St(this,_,!0),bt(this,rt,xn).call(this,k)}moveInDOM(){var k;(k=this.parent)==null||k.moveEditorInDOM(this)}_setParentAndPosition(k,M,L){k.changeParent(this),this.x=M,this.y=L,this.fixAndSetPosition()}getRect(k,M){const L=this.parentScale,[V,et]=this.pageDimensions,[ot,vt]=this.pageTranslation,j=k/L,o=M/L,$=this.x*V,X=this.y*et,O=this.width*V,D=this.height*et;switch(this.rotation){case 0:return[$+j+ot,et-X-o-D+vt,$+j+O+ot,et-X-o+vt];case 90:return[$+o+ot,et-X+j+vt,$+o+D+ot,et-X+j+O+vt];case 180:return[$-j-O+ot,et-X+o+vt,$-j+ot,et-X+o+D+vt];case 270:return[$-o-D+ot,et-X-j-O+vt,$-o+ot,et-X-j+vt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(k,M){const[L,V,et,ot]=k,vt=et-L,j=ot-V;switch(this.rotation){case 0:return[L,M-ot,vt,j];case 90:return[L,M-V,j,vt];case 180:return[et,M-V,vt,j];case 270:return[et,M-ot,j,vt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){St(this,P,!0)}disableEditMode(){St(this,P,!1)}isInEditMode(){return A(this,P)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var k,M;(k=this.div)==null||k.addEventListener("focusin",A(this,g)),(M=this.div)==null||M.addEventListener("focusout",A(this,m))}serialize(k=!1,M=null){(0,s.unreachable)("An editor must be serializable")}static deserialize(k,M,L){const V=new this.prototype.constructor({parent:M,id:M.getNextId(),uiManager:L});V.rotation=k.rotation;const[et,ot]=V.pageDimensions,[vt,j,o,$]=V.getRectInCurrentCoords(k.rect,ot);return V.x=vt/et,V.y=j/ot,V.width=o/et,V.height=$/ot,V}remove(){var k;this.div.removeEventListener("focusin",A(this,g)),this.div.removeEventListener("focusout",A(this,m)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(k=A(this,l))==null||k.remove(),St(this,l,null),St(this,b,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(bt(this,d,Sn).call(this),A(this,w).classList.remove("hidden"))}select(){var k;this.makeResizable(),(k=this.div)==null||k.classList.add("selectedEditor")}unselect(){var k,M,L;(k=A(this,w))==null||k.classList.add("hidden"),(M=this.div)==null||M.classList.remove("selectedEditor"),(L=this.div)!=null&&L.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(k,M){}disableEditing(){A(this,l)&&(A(this,l).hidden=!0)}enableEditing(){A(this,l)&&(A(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return A(this,x)}set isEditing(k){St(this,x,k),this.parent&&(k?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(k,M){St(this,u,!0);const L=k/M,{style:V}=this.div;V.aspectRatio=L,V.height="auto"}static get MIN_SIZE(){return 16}};c=new WeakMap,f=new WeakMap,l=new WeakMap,b=new WeakMap,S=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,x=new WeakMap,P=new WeakMap,R=new WeakMap,y=new WeakMap,F=new WeakSet,ze=function([k,M],L,V){[L,V]=this.screenToPageTranslation(L,V),this.x+=L/k,this.y+=V/M,this.fixAndSetPosition()},I=new WeakSet,$e=function(){const[k,M]=this.parentDimensions,{_borderLineWidth:L}=v,V=L/k,et=L/M;switch(this.rotation){case 90:return[-V,et];case 180:return[V,et];case 270:return[V,-et];default:return[-V,-et]}},U=new WeakSet,He=function(k,M,L){switch(L){case 90:return[M,-k];case 180:return[-k,-M];case 270:return[-M,k];default:return[k,M]}},N=new WeakSet,We=function(k){switch(k){case 90:{const[M,L]=this.pageDimensions;return[0,-M/L,L/M,0]}case 180:return[-1,0,0,-1];case 270:{const[M,L]=this.pageDimensions;return[0,M/L,-L/M,0]}default:return[1,0,0,1]}},d=new WeakSet,Sn=function(){if(A(this,w))return;St(this,w,document.createElement("div")),A(this,w).classList.add("resizers");const k=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||k.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const M of k){const L=document.createElement("div");A(this,w).append(L),L.classList.add("resizer",M),L.addEventListener("pointerdown",bt(this,pt,En).bind(this,M)),L.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(A(this,w))},pt=new WeakSet,En=function(k,M){M.preventDefault();const{isMac:L}=s.FeatureTest.platform;if(M.button!==0||M.ctrlKey&&L)return;const V=bt(this,q,Cn).bind(this,k),et=this._isDraggable;this._isDraggable=!1;const ot={passive:!0,capture:!0};window.addEventListener("pointermove",V,ot);const vt=this.x,j=this.y,o=this.width,$=this.height,X=this.parent.div.style.cursor,O=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(M.target).cursor;const D=()=>{this._isDraggable=et,window.removeEventListener("pointerup",D),window.removeEventListener("blur",D),window.removeEventListener("pointermove",V,ot),this.parent.div.style.cursor=X,this.div.style.cursor=O;const Z=this.x,it=this.y,ut=this.width,W=this.height;Z===vt&&it===j&&ut===o&&W===$||this.addCommands({cmd:()=>{this.width=ut,this.height=W,this.x=Z,this.y=it;const[K,J]=this.parentDimensions;this.setDims(K*ut,J*W),this.fixAndSetPosition()},undo:()=>{this.width=o,this.height=$,this.x=vt,this.y=j;const[K,J]=this.parentDimensions;this.setDims(K*o,J*$),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",D),window.addEventListener("blur",D)},q=new WeakSet,Cn=function(k,M){const[L,V]=this.parentDimensions,et=this.x,ot=this.y,vt=this.width,j=this.height,o=v.MIN_SIZE/L,$=v.MIN_SIZE/V,X=kt=>Math.round(kt*1e4)/1e4,O=bt(this,N,We).call(this,this.rotation),D=(kt,Rt)=>[O[0]*kt+O[2]*Rt,O[1]*kt+O[3]*Rt],Z=bt(this,N,We).call(this,360-this.rotation),it=(kt,Rt)=>[Z[0]*kt+Z[2]*Rt,Z[1]*kt+Z[3]*Rt];let ut,W,K=!1,J=!1;switch(k){case"topLeft":K=!0,ut=(kt,Rt)=>[0,0],W=(kt,Rt)=>[kt,Rt];break;case"topMiddle":ut=(kt,Rt)=>[kt/2,0],W=(kt,Rt)=>[kt/2,Rt];break;case"topRight":K=!0,ut=(kt,Rt)=>[kt,0],W=(kt,Rt)=>[0,Rt];break;case"middleRight":J=!0,ut=(kt,Rt)=>[kt,Rt/2],W=(kt,Rt)=>[0,Rt/2];break;case"bottomRight":K=!0,ut=(kt,Rt)=>[kt,Rt],W=(kt,Rt)=>[0,0];break;case"bottomMiddle":ut=(kt,Rt)=>[kt/2,Rt],W=(kt,Rt)=>[kt/2,0];break;case"bottomLeft":K=!0,ut=(kt,Rt)=>[0,Rt],W=(kt,Rt)=>[kt,0];break;case"middleLeft":J=!0,ut=(kt,Rt)=>[0,Rt/2],W=(kt,Rt)=>[kt,Rt/2];break}const st=ut(vt,j),At=W(vt,j);let Ct=D(...At);const Tt=X(et+Ct[0]),It=X(ot+Ct[1]);let zt=1,Ut=1,[Vt,Nt]=this.screenToPageTranslation(M.movementX,M.movementY);if([Vt,Nt]=it(Vt/L,Nt/V),K){const kt=Math.hypot(vt,j);zt=Ut=Math.max(Math.min(Math.hypot(At[0]-st[0]-Vt,At[1]-st[1]-Nt)/kt,1/vt,1/j),o/vt,$/j)}else J?zt=Math.max(o,Math.min(1,Math.abs(At[0]-st[0]-Vt)))/vt:Ut=Math.max($,Math.min(1,Math.abs(At[1]-st[1]-Nt)))/j;const Xt=X(vt*zt),xt=X(j*Ut);Ct=D(...W(Xt,xt));const _t=Tt-Ct[0],gt=It-Ct[1];this.width=Xt,this.height=xt,this.x=_t,this.y=gt,this.setDims(L*Xt,V*xt),this.fixAndSetPosition()},ft=new WeakSet,Ve=async function(){var L;const k=A(this,l);if(!k)return;if(!A(this,c)&&!A(this,f)){k.classList.remove("done"),(L=A(this,b))==null||L.remove();return}v._l10nPromise.get("editor_alt_text_edit_button_label").then(V=>{k.setAttribute("aria-label",V)});let M=A(this,b);if(!M){St(this,b,M=document.createElement("span")),M.className="tooltip",M.setAttribute("role","tooltip");const V=M.id=`alt-text-tooltip-${this.id}`;k.setAttribute("aria-describedby",V);const et=100;k.addEventListener("mouseenter",()=>{St(this,S,setTimeout(()=>{St(this,S,null),A(this,b).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},et))}),k.addEventListener("mouseleave",()=>{var ot;clearTimeout(A(this,S)),St(this,S,null),(ot=A(this,b))==null||ot.classList.remove("show")})}k.classList.add("done"),M.innerText=A(this,f)?await v._l10nPromise.get("editor_alt_text_decorative_tooltip"):A(this,c),M.parentNode||k.append(M)},rt=new WeakSet,xn=function(k){if(!this._isDraggable)return;const M=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let L,V;M&&(L={passive:!0,capture:!0},V=ot=>{const[vt,j]=this.screenToPageTranslation(ot.movementX,ot.movementY);this._uiManager.dragSelectedEditors(vt,j)},window.addEventListener("pointermove",V,L));const et=()=>{if(window.removeEventListener("pointerup",et),window.removeEventListener("blur",et),M&&window.removeEventListener("pointermove",V,L),St(this,_,!1),!this._uiManager.endDragSession()){const{isMac:ot}=s.FeatureTest.platform;k.ctrlKey&&!ot||k.shiftKey||k.metaKey&&ot?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",et),window.addEventListener("blur",et)},dt(v,U),ie(v,"_borderLineWidth",-1),ie(v,"_colorManager",new i.ColorManager),ie(v,"_zIndex",1),ie(v,"SMALL_EDITOR_SIZE",0);let a=v;e.AnnotationEditor=a;class h extends a{constructor(k){super(k),this.annotationElementId=k.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{var u,w,g,m,_,Ge,R,y,F,B,I,kn,z,N,Y,d,Q,pt,at,q,nt,ft,lt,rt,H,v,C,k,M,L,V,et,ot,vt,j,o,$,X,O,D,Z,it,ut,W,K,J,st,Tn,Ct,qe,It,Xe,Ut,ke,Nt,Ye,xt,Ke,gt,oe,Rt,be,te,Pn,Ot,Rn,Mt,Je,Gt,ye,Ft,Ze;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=r,e.opacityToHex=a;var i=n(1),s=n(6);function r(ct,T,G){for(const ht of G)T.addEventListener(ht,ct[ht].bind(ct))}function a(ct){return Math.round(Math.min(255,Math.max(1,255*ct))).toString(16).padStart(2,"0")}class h{constructor(){dt(this,u,0)}getId(){return`${i.AnnotationEditorPrefix}${_e(this,u)._++}`}}u=new WeakMap;const P=class P{constructor(){dt(this,_);dt(this,w,(0,i.getUuid)());dt(this,g,0);dt(this,m,null)}static get _isSVGFittingCanvas(){const T='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ht=new OffscreenCanvas(1,3).getContext("2d"),mt=new Image;mt.src=T;const yt=mt.decode().then(()=>(ht.drawImage(mt,0,0,1,1,0,0,1,3),new Uint32Array(ht.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",yt)}async getFromFile(T){const{lastModified:G,name:ht,size:mt,type:yt}=T;return bt(this,_,Ge).call(this,`${G}_${ht}_${mt}_${yt}`,T)}async getFromUrl(T){return bt(this,_,Ge).call(this,T,T)}async getFromId(T){A(this,m)||St(this,m,new Map);const G=A(this,m).get(T);return G?G.bitmap?(G.refCounter+=1,G):G.file?this.getFromFile(G.file):this.getFromUrl(G.url):null}getSvgUrl(T){const G=A(this,m).get(T);return G!=null&&G.isSvg?G.svgUrl:null}deleteId(T){A(this,m)||St(this,m,new Map);const G=A(this,m).get(T);G&&(G.refCounter-=1,G.refCounter===0&&(G.bitmap=null))}isValidId(T){return T.startsWith(`image_${A(this,w)}_`)}};w=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakSet,Ge=async function(T,G){A(this,m)||St(this,m,new Map);let ht=A(this,m).get(T);if(ht===null)return null;if(ht!=null&&ht.bitmap)return ht.refCounter+=1,ht;try{ht||(ht={bitmap:null,id:`image_${A(this,w)}_${_e(this,g)._++}`,refCounter:0,isSvg:!1});let mt;if(typeof G=="string"){ht.url=G;const yt=await fetch(G);if(!yt.ok)throw new Error(yt.statusText);mt=await yt.blob()}else mt=ht.file=G;if(mt.type==="image/svg+xml"){const yt=P._isSVGFittingCanvas,Et=new FileReader,Pt=new Image,Lt=new Promise((Dt,Yt)=>{Pt.onload=()=>{ht.bitmap=Pt,ht.isSvg=!0,Dt()},Et.onload=async()=>{const Bt=ht.svgUrl=Et.result;Pt.src=await yt?`${Bt}#svgView(preserveAspectRatio(none))`:Bt},Pt.onerror=Et.onerror=Yt});Et.readAsDataURL(mt),await Lt}else ht.bitmap=await createImageBitmap(mt);ht.refCounter=1}catch(mt){console.error(mt),ht=null}return A(this,m).set(T,ht),ht&&A(this,m).set(ht.id,ht),ht};let c=P;class f{constructor(T=128){dt(this,R,[]);dt(this,y,!1);dt(this,F,void 0);dt(this,B,-1);St(this,F,T)}add({cmd:T,undo:G,mustExec:ht,type:mt=NaN,overwriteIfSameType:yt=!1,keepUndo:Et=!1}){if(ht&&T(),A(this,y))return;const Pt={cmd:T,undo:G,type:mt};if(A(this,B)===-1){A(this,R).length>0&&(A(this,R).length=0),St(this,B,0),A(this,R).push(Pt);return}if(yt&&A(this,R)[A(this,B)].type===mt){Et&&(Pt.undo=A(this,R)[A(this,B)].undo),A(this,R)[A(this,B)]=Pt;return}const Lt=A(this,B)+1;Lt===A(this,F)?A(this,R).splice(0,1):(St(this,B,Lt),Lt<A(this,R).length&&A(this,R).splice(Lt)),A(this,R).push(Pt)}undo(){A(this,B)!==-1&&(St(this,y,!0),A(this,R)[A(this,B)].undo(),St(this,y,!1),St(this,B,A(this,B)-1))}redo(){A(this,B)<A(this,R).length-1&&(St(this,B,A(this,B)+1),St(this,y,!0),A(this,R)[A(this,B)].cmd(),St(this,y,!1))}hasSomethingToUndo(){return A(this,B)!==-1}hasSomethingToRedo(){return A(this,B)<A(this,R).length-1}destroy(){St(this,R,null)}}R=new WeakMap,y=new WeakMap,F=new WeakMap,B=new WeakMap,e.CommandManager=f;class l{constructor(T){dt(this,I);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:G}=i.FeatureTest.platform;for(const[ht,mt,yt={}]of T)for(const Et of ht){const Pt=Et.startsWith("mac+");G&&Pt?(this.callbacks.set(Et.slice(4),{callback:mt,options:yt}),this.allKeys.add(Et.split("+").at(-1))):!G&&!Pt&&(this.callbacks.set(Et,{callback:mt,options:yt}),this.allKeys.add(Et.split("+").at(-1)))}}exec(T,G){if(!this.allKeys.has(G.key))return;const ht=this.callbacks.get(bt(this,I,kn).call(this,G));if(!ht)return;const{callback:mt,options:{bubbles:yt=!1,args:Et=[],checker:Pt=null}}=ht;Pt&&!Pt(T,G)||(mt.bind(T,...Et)(),yt||(G.stopPropagation(),G.preventDefault()))}}I=new WeakSet,kn=function(T){T.altKey&&this.buffer.push("alt"),T.ctrlKey&&this.buffer.push("ctrl"),T.metaKey&&this.buffer.push("meta"),T.shiftKey&&this.buffer.push("shift"),this.buffer.push(T.key);const G=this.buffer.join("+");return this.buffer.length=0,G},e.KeyboardManager=l;const U=class U{get _colors(){const T=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(T),(0,i.shadow)(this,"_colors",T)}convert(T){const G=(0,s.getRGB)(T);if(!window.matchMedia("(forced-colors: active)").matches)return G;for(const[ht,mt]of this._colors)if(mt.every((yt,Et)=>yt===G[Et]))return U._colorsMapping.get(ht);return G}getHexCode(T){const G=this._colors.get(T);return G?i.Util.makeHexColor(...G):T}};ie(U,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let b=U;e.ColorManager=b;const $t=class $t{constructor(T,G,ht,mt,yt,Et){dt(this,st);dt(this,Ct);dt(this,It);dt(this,Ut);dt(this,Nt);dt(this,xt);dt(this,gt);dt(this,Rt);dt(this,te);dt(this,Ot);dt(this,Mt);dt(this,Gt);dt(this,Ft);dt(this,z,null);dt(this,N,new Map);dt(this,Y,new Map);dt(this,d,null);dt(this,Q,null);dt(this,pt,new f);dt(this,at,0);dt(this,q,new Set);dt(this,nt,null);dt(this,ft,null);dt(this,lt,new Set);dt(this,rt,null);dt(this,H,new h);dt(this,v,!1);dt(this,C,!1);dt(this,k,null);dt(this,M,i.AnnotationEditorType.NONE);dt(this,L,new Set);dt(this,V,null);dt(this,et,this.blur.bind(this));dt(this,ot,this.focus.bind(this));dt(this,vt,this.copy.bind(this));dt(this,j,this.cut.bind(this));dt(this,o,this.paste.bind(this));dt(this,$,this.keydown.bind(this));dt(this,X,this.onEditingAction.bind(this));dt(this,O,this.onPageChanging.bind(this));dt(this,D,this.onScaleChanging.bind(this));dt(this,Z,this.onRotationChanging.bind(this));dt(this,it,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});dt(this,ut,[0,0]);dt(this,W,null);dt(this,K,null);dt(this,J,null);St(this,K,T),St(this,J,G),St(this,d,ht),this._eventBus=mt,this._eventBus._on("editingaction",A(this,X)),this._eventBus._on("pagechanging",A(this,O)),this._eventBus._on("scalechanging",A(this,D)),this._eventBus._on("rotationchanging",A(this,Z)),St(this,Q,yt.annotationStorage),St(this,rt,yt.filterFactory),St(this,V,Et),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const T=$t.prototype,G=yt=>{const{activeElement:Et}=document;return Et&&A(yt,K).contains(Et)&&yt.hasSomethingToControl()},ht=this.TRANSLATE_SMALL,mt=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],T.selectAll],[["ctrl+z","mac+meta+z"],T.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],T.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],T.delete],[["Escape","mac+Escape"],T.unselectAll],[["ArrowLeft","mac+ArrowLeft"],T.translateSelectedEditors,{args:[-ht,0],checker:G}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],T.translateSelectedEditors,{args:[-mt,0],checker:G}],[["ArrowRight","mac+ArrowRight"],T.translateSelectedEditors,{args:[ht,0],checker:G}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],T.translateSelectedEditors,{args:[mt,0],checker:G}],[["ArrowUp","mac+ArrowUp"],T.translateSelectedEditors,{args:[0,-ht],checker:G}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],T.translateSelectedEditors,{args:[0,-mt],checker:G}],[["ArrowDown","mac+ArrowDown"],T.translateSelectedEditors,{args:[0,ht],checker:G}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],T.translateSelectedEditors,{args:[0,mt],checker:G}]]))}destroy(){bt(this,Ut,ke).call(this),bt(this,Ct,qe).call(this),this._eventBus._off("editingaction",A(this,X)),this._eventBus._off("pagechanging",A(this,O)),this._eventBus._off("scalechanging",A(this,D)),this._eventBus._off("rotationchanging",A(this,Z));for(const T of A(this,Y).values())T.destroy();A(this,Y).clear(),A(this,N).clear(),A(this,lt).clear(),St(this,z,null),A(this,L).clear(),A(this,pt).destroy(),A(this,d).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",A(this,V)?A(this,rt).addHCMFilter(A(this,V).foreground,A(this,V).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(A(this,K)).direction)}editAltText(T){var G;(G=A(this,d))==null||G.editAltText(this,T)}onPageChanging({pageNumber:T}){St(this,at,T-1)}focusMainContainer(){A(this,K).focus()}findParent(T,G){for(const ht of A(this,Y).values()){const{x:mt,y:yt,width:Et,height:Pt}=ht.div.getBoundingClientRect();if(T>=mt&&T<=mt+Et&&G>=yt&&G<=yt+Pt)return ht}return null}disableUserSelect(T=!1){A(this,J).classList.toggle("noUserSelect",T)}addShouldRescale(T){A(this,lt).add(T)}removeShouldRescale(T){A(this,lt).delete(T)}onScaleChanging({scale:T}){this.commitOrRemove(),this.viewParameters.realScale=T*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const G of A(this,lt))G.onScaleChanging()}onRotationChanging({pagesRotation:T}){this.commitOrRemove(),this.viewParameters.rotation=T}addToAnnotationStorage(T){!T.isEmpty()&&A(this,Q)&&!A(this,Q).has(T.id)&&A(this,Q).setValue(T.id,T)}blur(){if(!this.hasSelection)return;const{activeElement:T}=document;for(const G of A(this,L))if(G.div.contains(T)){St(this,k,[G,T]),G._focusEventsAllowed=!1;break}}focus(){if(!A(this,k))return;const[T,G]=A(this,k);St(this,k,null),G.addEventListener("focusin",()=>{T._focusEventsAllowed=!0},{once:!0}),G.focus()}addEditListeners(){bt(this,It,Xe).call(this),bt(this,Nt,Ye).call(this)}removeEditListeners(){bt(this,Ut,ke).call(this),bt(this,xt,Ke).call(this)}copy(T){var ht;if(T.preventDefault(),(ht=A(this,z))==null||ht.commitOrRemove(),!this.hasSelection)return;const G=[];for(const mt of A(this,L)){const yt=mt.serialize(!0);yt&&G.push(yt)}G.length!==0&&T.clipboardData.setData("application/pdfjs",JSON.stringify(G))}cut(T){this.copy(T),this.delete()}paste(T){T.preventDefault();const{clipboardData:G}=T;for(const yt of G.items)for(const Et of A(this,ft))if(Et.isHandlingMimeForPasting(yt.type)){Et.paste(yt,this.currentLayer);return}let ht=G.getData("application/pdfjs");if(!ht)return;try{ht=JSON.parse(ht)}catch(yt){(0,i.warn)(`paste: "${yt.message}".`);return}if(!Array.isArray(ht))return;this.unselectAll();const mt=this.currentLayer;try{const yt=[];for(const Lt of ht){const Dt=mt.deserialize(Lt);if(!Dt)return;yt.push(Dt)}const Et=()=>{for(const Lt of yt)bt(this,Mt,Je).call(this,Lt);bt(this,Ft,Ze).call(this,yt)},Pt=()=>{for(const Lt of yt)Lt.remove()};this.addCommands({cmd:Et,undo:Pt,mustExec:!0})}catch(yt){(0,i.warn)(`paste: "${yt.message}".`)}}keydown(T){var G;(G=this.getActive())!=null&&G.shouldGetKeyboardEvents()||$t._keyboardManager.exec(this,T)}onEditingAction(T){["undo","redo","delete","selectAll"].includes(T.name)&&this[T.name]()}setEditingState(T){T?(bt(this,st,Tn).call(this),bt(this,It,Xe).call(this),bt(this,Nt,Ye).call(this),bt(this,gt,oe).call(this,{isEditing:A(this,M)!==i.AnnotationEditorType.NONE,isEmpty:bt(this,Gt,ye).call(this),hasSomethingToUndo:A(this,pt).hasSomethingToUndo(),hasSomethingToRedo:A(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(bt(this,Ct,qe).call(this),bt(this,Ut,ke).call(this),bt(this,xt,Ke).call(this),bt(this,gt,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(T){if(!A(this,ft)){St(this,ft,T);for(const G of A(this,ft))bt(this,Rt,be).call(this,G.defaultPropertiesToUpdate)}}getId(){return A(this,H).getId()}get currentLayer(){return A(this,Y).get(A(this,at))}getLayer(T){return A(this,Y).get(T)}get currentPageIndex(){return A(this,at)}addLayer(T){A(this,Y).set(T.pageIndex,T),A(this,v)?T.enable():T.disable()}removeLayer(T){A(this,Y).delete(T.pageIndex)}updateMode(T,G=null){if(A(this,M)!==T){if(St(this,M,T),T===i.AnnotationEditorType.NONE){this.setEditingState(!1),bt(this,Ot,Rn).call(this);return}this.setEditingState(!0),bt(this,te,Pn).call(this),this.unselectAll();for(const ht of A(this,Y).values())ht.updateMode(T);if(G){for(const ht of A(this,N).values())if(ht.annotationElementId===G){this.setSelected(ht),ht.enterInEditMode();break}}}}updateToolbar(T){T!==A(this,M)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:T})}updateParams(T,G){if(A(this,ft)){if(T===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(T);return}for(const ht of A(this,L))ht.updateParams(T,G);for(const ht of A(this,ft))ht.updateDefaultParams(T,G)}}enableWaiting(T=!1){if(A(this,C)!==T){St(this,C,T);for(const G of A(this,Y).values())T?G.disableClick():G.enableClick(),G.div.classList.toggle("waiting",T)}}getEditors(T){const G=[];for(const ht of A(this,N).values())ht.pageIndex===T&&G.push(ht);return G}getEditor(T){return A(this,N).get(T)}addEditor(T){A(this,N).set(T.id,T)}removeEditor(T){var G;A(this,N).delete(T.id),this.unselect(T),(!T.annotationElementId||!A(this,q).has(T.annotationElementId))&&((G=A(this,Q))==null||G.remove(T.id))}addDeletedAnnotationElement(T){A(this,q).add(T.annotationElementId),T.deleted=!0}isDeletedAnnotationElement(T){return A(this,q).has(T)}removeDeletedAnnotationElement(T){A(this,q).delete(T.annotationElementId),T.deleted=!1}setActiveEditor(T){A(this,z)!==T&&(St(this,z,T),T&&bt(this,Rt,be).call(this,T.propertiesToUpdate))}toggleSelected(T){if(A(this,L).has(T)){A(this,L).delete(T),T.unselect(),bt(this,gt,oe).call(this,{hasSelectedEditor:this.hasSelection});return}A(this,L).add(T),T.select(),bt(this,Rt,be).call(this,T.propertiesToUpdate),bt(this,gt,oe).call(this,{hasSelectedEditor:!0})}setSelected(T){for(const G of A(this,L))G!==T&&G.unselect();A(this,L).clear(),A(this,L).add(T),T.select(),bt(this,Rt,be).call(this,T.propertiesToUpdate),bt(this,gt,oe).call(this,{hasSelectedEditor:!0})}isSelected(T){return A(this,L).has(T)}unselect(T){T.unselect(),A(this,L).delete(T),bt(this,gt,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return A(this,L).size!==0}undo(){A(this,pt).undo(),bt(this,gt,oe).call(this,{hasSomethingToUndo:A(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:bt(this,Gt,ye).call(this)})}redo(){A(this,pt).redo(),bt(this,gt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:A(this,pt).hasSomethingToRedo(),isEmpty:bt(this,Gt,ye).call(this)})}addCommands(T){A(this,pt).add(T),bt(this,gt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:bt(this,Gt,ye).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const T=[...A(this,L)],G=()=>{for(const mt of T)mt.remove()},ht=()=>{for(const mt of T)bt(this,Mt,Je).call(this,mt)};this.addCommands({cmd:G,undo:ht,mustExec:!0})}commitOrRemove(){var T;(T=A(this,z))==null||T.commitOrRemove()}hasSomethingToControl(){return A(this,z)||this.hasSelection}selectAll(){for(const T of A(this,L))T.commit();bt(this,Ft,Ze).call(this,A(this,N).values())}unselectAll(){if(A(this,z)){A(this,z).commitOrRemove();return}if(this.hasSelection){for(const T of A(this,L))T.unselect();A(this,L).clear(),bt(this,gt,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(T,G,ht=!1){if(ht||this.commitOrRemove(),!this.hasSelection)return;A(this,ut)[0]+=T,A(this,ut)[1]+=G;const[mt,yt]=A(this,ut),Et=[...A(this,L)],Pt=1e3;A(this,W)&&clearTimeout(A(this,W)),St(this,W,setTimeout(()=>{St(this,W,null),A(this,ut)[0]=A(this,ut)[1]=0,this.addCommands({cmd:()=>{for(const Lt of Et)A(this,N).has(Lt.id)&&Lt.translateInPage(mt,yt)},undo:()=>{for(const Lt of Et)A(this,N).has(Lt.id)&&Lt.translateInPage(-mt,-yt)},mustExec:!1})},Pt));for(const Lt of Et)Lt.translateInPage(T,G)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),St(this,nt,new Map);for(const T of A(this,L))A(this,nt).set(T,{savedX:T.x,savedY:T.y,savedPageIndex:T.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!A(this,nt))return!1;this.disableUserSelect(!1);const T=A(this,nt);St(this,nt,null);let G=!1;for(const[{x:mt,y:yt,pageIndex:Et},Pt]of T)Pt.newX=mt,Pt.newY=yt,Pt.newPageIndex=Et,G||(G=mt!==Pt.savedX||yt!==Pt.savedY||Et!==Pt.savedPageIndex);if(!G)return!1;const ht=(mt,yt,Et,Pt)=>{if(A(this,N).has(mt.id)){const Lt=A(this,Y).get(Pt);Lt?mt._setParentAndPosition(Lt,yt,Et):(mt.pageIndex=Pt,mt.x=yt,mt.y=Et)}};return this.addCommands({cmd:()=>{for(const[mt,{newX:yt,newY:Et,newPageIndex:Pt}]of T)ht(mt,yt,Et,Pt)},undo:()=>{for(const[mt,{savedX:yt,savedY:Et,savedPageIndex:Pt}]of T)ht(mt,yt,Et,Pt)},mustExec:!0}),!0}dragSelectedEditors(T,G){if(A(this,nt))for(const ht of A(this,nt).keys())ht.drag(T,G)}rebuild(T){if(T.parent===null){const G=this.getLayer(T.pageIndex);G?(G.changeParent(T),G.addOrRebuild(T)):(this.addEditor(T),this.addToAnnotationStorage(T),T.rebuild())}else T.parent.addOrRebuild(T)}isActive(T){return A(this,z)===T}getActive(){return A(this,z)}getMode(){return A(this,M)}get imageManager(){return(0,i.shadow)(this,"imageManager",new c)}};z=new WeakMap,N=new WeakMap,Y=new WeakMap,d=new WeakMap,Q=new WeakMap,pt=new WeakMap,at=new WeakMap,q=new WeakMap,nt=new WeakMap,ft=new WeakMap,lt=new WeakMap,rt=new WeakMap,H=new WeakMap,v=new WeakMap,C=new WeakMap,k=new WeakMap,M=new WeakMap,L=new WeakMap,V=new WeakMap,et=new WeakMap,ot=new WeakMap,vt=new WeakMap,j=new WeakMap,o=new WeakMap,$=new WeakMap,X=new WeakMap,O=new WeakMap,D=new WeakMap,Z=new WeakMap,it=new WeakMap,ut=new WeakMap,W=new WeakMap,K=new WeakMap,J=new WeakMap,st=new WeakSet,Tn=function(){window.addEventListener("focus",A(this,ot)),window.addEventListener("blur",A(this,et))},Ct=new WeakSet,qe=function(){window.removeEventListener("focus",A(this,ot)),window.removeEventListener("blur",A(this,et))},It=new WeakSet,Xe=function(){window.addEventListener("keydown",A(this,$),{capture:!0})},Ut=new WeakSet,ke=function(){window.removeEventListener("keydown",A(this,$),{capture:!0})},Nt=new WeakSet,Ye=function(){document.addEventListener("copy",A(this,vt)),document.addEventListener("cut",A(this,j)),document.addEventListener("paste",A(this,o))},xt=new WeakSet,Ke=function(){document.removeEventListener("copy",A(this,vt)),document.removeEventListener("cut",A(this,j)),document.removeEventListener("paste",A(this,o))},gt=new WeakSet,oe=function(T){Object.entries(T).some(([ht,mt])=>A(this,it)[ht]!==mt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(A(this,it),T)})},Rt=new WeakSet,be=function(T){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:T})},te=new WeakSet,Pn=function(){if(!A(this,v)){St(this,v,!0);for(const T of A(this,Y).values())T.enable()}},Ot=new WeakSet,Rn=function(){if(this.unselectAll(),A(this,v)){St(this,v,!1);for(const T of A(this,Y).values())T.disable()}},Mt=new WeakSet,Je=function(T){const G=A(this,Y).get(T.pageIndex);G?G.addOrRebuild(T):this.addEditor(T)},Gt=new WeakSet,ye=function(){if(A(this,N).size===0)return!0;if(A(this,N).size===1)for(const T of A(this,N).values())return T.isEmpty();return!1},Ft=new WeakSet,Ze=function(T){A(this,L).clear();for(const G of T)G.isEmpty()||(A(this,L).add(G),G.select());bt(this,gt,oe).call(this,{hasSelectedEditor:!0})},ie($t,"TRANSLATE_SMALL",1),ie($t,"TRANSLATE_BIG",10);let S=$t;e.AnnotationEditorUIManager=S},(t,e,n)=>{var at,q,nt,ft,lt,rt,H,v,C,k,M,L,fe,et,pe,vt,Qe,o,Te,X,Pe,D,ve,it,Ae;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=B,e.getColorValues=N,e.getCurrentTransform=Y,e.getCurrentTransformInverse=d,e.getFilenameFromUrl=_,e.getPdfFilenameFromUrl=x,e.getRGB=z,e.getXfaPageViewport=U,e.isDataScheme=g,e.isPdfFile=m,e.isValidFetchUrl=R,e.loadScript=F,e.noContextMenu=y,e.setLayerDimensions=Q;var i=n(7),s=n(1);const r="http://www.w3.org/2000/svg",pt=class pt{};ie(pt,"CSS",96),ie(pt,"PDF",72),ie(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let a=pt;e.PixelsPerInch=a;class h extends i.BaseFilterFactory{constructor({docId:J,ownerDocument:st=globalThis.document}={}){super();dt(this,L);dt(this,et);dt(this,vt);dt(this,o);dt(this,X);dt(this,D);dt(this,it);dt(this,at,void 0);dt(this,q,void 0);dt(this,nt,void 0);dt(this,ft,void 0);dt(this,lt,void 0);dt(this,rt,void 0);dt(this,H,void 0);dt(this,v,void 0);dt(this,C,void 0);dt(this,k,void 0);dt(this,M,0);St(this,nt,J),St(this,ft,st)}addFilter(J){if(!J)return"none";let st=A(this,L,fe).get(J);if(st)return st;let At,Ct,Tt,It;if(J.length===1){const Nt=J[0],Xt=new Array(256);for(let xt=0;xt<256;xt++)Xt[xt]=Nt[xt]/255;It=At=Ct=Tt=Xt.join(",")}else{const[Nt,Xt,xt]=J,_t=new Array(256),gt=new Array(256),kt=new Array(256);for(let Rt=0;Rt<256;Rt++)_t[Rt]=Nt[Rt]/255,gt[Rt]=Xt[Rt]/255,kt[Rt]=xt[Rt]/255;At=_t.join(","),Ct=gt.join(","),Tt=kt.join(","),It=`${At}${Ct}${Tt}`}if(st=A(this,L,fe).get(It),st)return A(this,L,fe).set(J,st),st;const zt=`g_${A(this,nt)}_transfer_map_${_e(this,M)._++}`,Ut=`url(#${zt})`;A(this,L,fe).set(J,Ut),A(this,L,fe).set(It,Ut);const Vt=bt(this,o,Te).call(this,zt);return bt(this,D,ve).call(this,At,Ct,Tt,Vt),Ut}addHCMFilter(J,st){var Xt;const At=`${J}-${st}`;if(A(this,rt)===At)return A(this,H);if(St(this,rt,At),St(this,H,"none"),(Xt=A(this,lt))==null||Xt.remove(),!J||!st)return A(this,H);const Ct=bt(this,it,Ae).call(this,J);J=s.Util.makeHexColor(...Ct);const Tt=bt(this,it,Ae).call(this,st);if(st=s.Util.makeHexColor(...Tt),A(this,et,pe).style.color="",J==="#000000"&&st==="#ffffff"||J===st)return A(this,H);const It=new Array(256);for(let xt=0;xt<=255;xt++){const _t=xt/255;It[xt]=_t<=.03928?_t/12.92:((_t+.055)/1.055)**2.4}const zt=It.join(","),Ut=`g_${A(this,nt)}_hcm_filter`,Vt=St(this,v,bt(this,o,Te).call(this,Ut));bt(this,D,ve).call(this,zt,zt,zt,Vt),bt(this,vt,Qe).call(this,Vt);const Nt=(xt,_t)=>{const gt=Ct[xt]/255,kt=Tt[xt]/255,Rt=new Array(_t+1);for(let ne=0;ne<=_t;ne++)Rt[ne]=gt+ne/_t*(kt-gt);return Rt.join(",")};return bt(this,D,ve).call(this,Nt(0,5),Nt(1,5),Nt(2,5),Vt),St(this,H,`url(#${Ut})`),A(this,H)}addHighlightHCMFilter(J,st,At,Ct){var kt;const Tt=`${J}-${st}-${At}-${Ct}`;if(A(this,C)===Tt)return A(this,k);if(St(this,C,Tt),St(this,k,"none"),(kt=A(this,v))==null||kt.remove(),!J||!st)return A(this,k);const[It,zt]=[J,st].map(bt(this,it,Ae).bind(this));let Ut=Math.round(.2126*It[0]+.7152*It[1]+.0722*It[2]),Vt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),[Nt,Xt]=[At,Ct].map(bt(this,it,Ae).bind(this));Vt<Ut&&([Ut,Vt,Nt,Xt]=[Vt,Ut,Xt,Nt]),A(this,et,pe).style.color="";const xt=(Rt,ne,te)=>{const wt=new Array(256),Ot=(Vt-Ut)/te,Ht=Rt/255,Mt=(ne-Rt)/(255*te);let Wt=0;for(let Gt=0;Gt<=te;Gt++){const Qt=Math.round(Ut+Gt*Ot),Ft=Ht+Gt*Mt;for(let Jt=Wt;Jt<=Qt;Jt++)wt[Jt]=Ft;Wt=Qt+1}for(let Gt=Wt;Gt<256;Gt++)wt[Gt]=wt[Wt-1];return wt.join(",")},_t=`g_${A(this,nt)}_hcm_highlight_filter`,gt=St(this,v,bt(this,o,Te).call(this,_t));return bt(this,vt,Qe).call(this,gt),bt(this,D,ve).call(this,xt(Nt[0],Xt[0],5),xt(Nt[1],Xt[1],5),xt(Nt[2],Xt[2],5),gt),St(this,k,`url(#${_t})`),A(this,k)}destroy(J=!1){J&&(A(this,H)||A(this,k))||(A(this,q)&&(A(this,q).parentNode.parentNode.remove(),St(this,q,null)),A(this,at)&&(A(this,at).clear(),St(this,at,null)),St(this,M,0))}}at=new WeakMap,q=new WeakMap,nt=new WeakMap,ft=new WeakMap,lt=new WeakMap,rt=new WeakMap,H=new WeakMap,v=new WeakMap,C=new WeakMap,k=new WeakMap,M=new WeakMap,L=new WeakSet,fe=function(){return A(this,at)||St(this,at,new Map)},et=new WeakSet,pe=function(){if(!A(this,q)){const J=A(this,ft).createElement("div"),{style:st}=J;st.visibility="hidden",st.contain="strict",st.width=st.height=0,st.position="absolute",st.top=st.left=0,st.zIndex=-1;const At=A(this,ft).createElementNS(r,"svg");At.setAttribute("width",0),At.setAttribute("height",0),St(this,q,A(this,ft).createElementNS(r,"defs")),J.append(At),At.append(A(this,q)),A(this,ft).body.append(J)}return A(this,q)},vt=new WeakSet,Qe=function(J){const st=A(this,ft).createElementNS(r,"feColorMatrix");st.setAttribute("type","matrix"),st.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),J.append(st)},o=new WeakSet,Te=function(J){const st=A(this,ft).createElementNS(r,"filter");return st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("id",J),A(this,et,pe).append(st),st},X=new WeakSet,Pe=function(J,st,At){const Ct=A(this,ft).createElementNS(r,st);Ct.setAttribute("type","discrete"),Ct.setAttribute("tableValues",At),J.append(Ct)},D=new WeakSet,ve=function(J,st,At,Ct){const Tt=A(this,ft).createElementNS(r,"feComponentTransfer");Ct.append(Tt),bt(this,X,Pe).call(this,Tt,"feFuncR",J),bt(this,X,Pe).call(this,Tt,"feFuncG",st),bt(this,X,Pe).call(this,Tt,"feFuncB",At)},it=new WeakSet,Ae=function(J){return A(this,et,pe).style.color=J,z(getComputedStyle(A(this,et,pe)).getPropertyValue("color"))},e.DOMFilterFactory=h;class c extends i.BaseCanvasFactory{constructor({ownerDocument:K=globalThis.document}={}){super(),this._document=K}_createCanvas(K,J){const st=this._document.createElement("canvas");return st.width=K,st.height=J,st}}e.DOMCanvasFactory=c;async function f(W,K=!1){if(R(W,document.baseURI)){const J=await fetch(W);if(!J.ok)throw new Error(J.statusText);return K?new Uint8Array(await J.arrayBuffer()):(0,s.stringToBytes)(await J.text())}return new Promise((J,st)=>{const At=new XMLHttpRequest;At.open("GET",W,!0),K&&(At.responseType="arraybuffer"),At.onreadystatechange=()=>{if(At.readyState===XMLHttpRequest.DONE){if(At.status===200||At.status===0){let Ct;if(K&&At.response?Ct=new Uint8Array(At.response):!K&&At.responseText&&(Ct=(0,s.stringToBytes)(At.responseText)),Ct){J(Ct);return}}st(new Error(At.statusText))}},At.send(null)})}class l extends i.BaseCMapReaderFactory{_fetchData(K,J){return f(K,this.isCompressed).then(st=>({cMapData:st,compressionType:J}))}}e.DOMCMapReaderFactory=l;class b extends i.BaseStandardFontDataFactory{_fetchData(K){return f(K,!0)}}e.DOMStandardFontDataFactory=b;class S extends i.BaseSVGFactory{_createSVG(K){return document.createElementNS(r,K)}}e.DOMSVGFactory=S;class u{constructor({viewBox:K,scale:J,rotation:st,offsetX:At=0,offsetY:Ct=0,dontFlip:Tt=!1}){this.viewBox=K,this.scale=J,this.rotation=st,this.offsetX=At,this.offsetY=Ct;const It=(K[2]+K[0])/2,zt=(K[3]+K[1])/2;let Ut,Vt,Nt,Xt;switch(st%=360,st<0&&(st+=360),st){case 180:Ut=-1,Vt=0,Nt=0,Xt=1;break;case 90:Ut=0,Vt=1,Nt=1,Xt=0;break;case 270:Ut=0,Vt=-1,Nt=-1,Xt=0;break;case 0:Ut=1,Vt=0,Nt=0,Xt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Tt&&(Nt=-Nt,Xt=-Xt);let xt,_t,gt,kt;Ut===0?(xt=Math.abs(zt-K[1])*J+At,_t=Math.abs(It-K[0])*J+Ct,gt=(K[3]-K[1])*J,kt=(K[2]-K[0])*J):(xt=Math.abs(It-K[0])*J+At,_t=Math.abs(zt-K[1])*J+Ct,gt=(K[2]-K[0])*J,kt=(K[3]-K[1])*J),this.transform=[Ut*J,Vt*J,Nt*J,Xt*J,xt-Ut*J*It-Nt*J*zt,_t-Vt*J*It-Xt*J*zt],this.width=gt,this.height=kt}get rawDims(){const{viewBox:K}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:K[2]-K[0],pageHeight:K[3]-K[1],pageX:K[0],pageY:K[1]})}clone({scale:K=this.scale,rotation:J=this.rotation,offsetX:st=this.offsetX,offsetY:At=this.offsetY,dontFlip:Ct=!1}={}){return new u({viewBox:this.viewBox.slice(),scale:K,rotation:J,offsetX:st,offsetY:At,dontFlip:Ct})}convertToViewportPoint(K,J){return s.Util.applyTransform([K,J],this.transform)}convertToViewportRectangle(K){const J=s.Util.applyTransform([K[0],K[1]],this.transform),st=s.Util.applyTransform([K[2],K[3]],this.transform);return[J[0],J[1],st[0],st[1]]}convertToPdfPoint(K,J){return s.Util.applyInverseTransform([K,J],this.transform)}}e.PageViewport=u;class w extends s.BaseException{constructor(K,J=0){super(K,"RenderingCancelledException"),this.extraDelay=J}}e.RenderingCancelledException=w;function g(W){const K=W.length;let J=0;for(;J<K&&W[J].trim()==="";)J++;return W.substring(J,J+5).toLowerCase()==="data:"}function m(W){return typeof W=="string"&&/\.pdf$/i.test(W)}function _(W,K=!1){return K||([W]=W.split(/[#?]/,1)),W.substring(W.lastIndexOf("/")+1)}function x(W,K="document.pdf"){if(typeof W!="string")return K;if(g(W))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),K;const J=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,st=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,At=J.exec(W);let Ct=st.exec(At[1])||st.exec(At[2])||st.exec(At[3]);if(Ct&&(Ct=Ct[0],Ct.includes("%")))try{Ct=st.exec(decodeURIComponent(Ct))[0]}catch{}return Ct||K}class P{constructor(){ie(this,"started",Object.create(null));ie(this,"times",[])}time(K){K in this.started&&(0,s.warn)(`Timer is already running for ${K}`),this.started[K]=Date.now()}timeEnd(K){K in this.started||(0,s.warn)(`Timer has not been started for ${K}`),this.times.push({name:K,start:this.started[K],end:Date.now()}),delete this.started[K]}toString(){const K=[];let J=0;for(const{name:st}of this.times)J=Math.max(st.length,J);for(const{name:st,start:At,end:Ct}of this.times)K.push(`${st.padEnd(J)} ${Ct-At}ms
`);return K.join("")}}e.StatTimer=P;function R(W,K){try{const{protocol:J}=K?new URL(W,K):new URL(W);return J==="http:"||J==="https:"}catch{return!1}}function y(W){W.preventDefault()}function F(W,K=!1){return new Promise((J,st)=>{const At=document.createElement("script");At.src=W,At.onload=function(Ct){K&&At.remove(),J(Ct)},At.onerror=function(){st(new Error(`Cannot load script at: ${At.src}`))},(document.head||document.documentElement).append(At)})}function B(W){console.log("Deprecated API usage: "+W)}let I;class E{static toDateObject(K){if(!K||typeof K!="string")return null;I||(I=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const J=I.exec(K);if(!J)return null;const st=parseInt(J[1],10);let At=parseInt(J[2],10);At=At>=1&&At<=12?At-1:0;let Ct=parseInt(J[3],10);Ct=Ct>=1&&Ct<=31?Ct:1;let Tt=parseInt(J[4],10);Tt=Tt>=0&&Tt<=23?Tt:0;let It=parseInt(J[5],10);It=It>=0&&It<=59?It:0;let zt=parseInt(J[6],10);zt=zt>=0&&zt<=59?zt:0;const Ut=J[7]||"Z";let Vt=parseInt(J[8],10);Vt=Vt>=0&&Vt<=23?Vt:0;let Nt=parseInt(J[9],10)||0;return Nt=Nt>=0&&Nt<=59?Nt:0,Ut==="-"?(Tt+=Vt,It+=Nt):Ut==="+"&&(Tt-=Vt,It-=Nt),new Date(Date.UTC(st,At,Ct,Tt,It,zt))}}e.PDFDateString=E;function U(W,{scale:K=1,rotation:J=0}){const{width:st,height:At}=W.attributes.style,Ct=[0,0,parseInt(st),parseInt(At)];return new u({viewBox:Ct,scale:K,rotation:J})}function z(W){if(W.startsWith("#")){const K=parseInt(W.slice(1),16);return[(K&16711680)>>16,(K&65280)>>8,K&255]}return W.startsWith("rgb(")?W.slice(4,-1).split(",").map(K=>parseInt(K)):W.startsWith("rgba(")?W.slice(5,-1).split(",").map(K=>parseInt(K)).slice(0,3):((0,s.warn)(`Not a valid color format: "${W}"`),[0,0,0])}function N(W){const K=document.createElement("span");K.style.visibility="hidden",document.body.append(K);for(const J of W.keys()){K.style.color=J;const st=window.getComputedStyle(K).color;W.set(J,z(st))}K.remove()}function Y(W){const{a:K,b:J,c:st,d:At,e:Ct,f:Tt}=W.getTransform();return[K,J,st,At,Ct,Tt]}function d(W){const{a:K,b:J,c:st,d:At,e:Ct,f:Tt}=W.getTransform().invertSelf();return[K,J,st,At,Ct,Tt]}function Q(W,K,J=!1,st=!0){if(K instanceof u){const{pageWidth:At,pageHeight:Ct}=K.rawDims,{style:Tt}=W,It=s.FeatureTest.isCSSRoundSupported,zt=`var(--scale-factor) * ${At}px`,Ut=`var(--scale-factor) * ${Ct}px`,Vt=It?`round(${zt}, 1px)`:`calc(${zt})`,Nt=It?`round(${Ut}, 1px)`:`calc(${Ut})`;!J||K.rotation%180===0?(Tt.width=Vt,Tt.height=Nt):(Tt.width=Nt,Tt.height=Vt)}st&&W.setAttribute("data-main-rotation",K.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=n(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,b){return"none"}addHighlightHCMFilter(l,b,S,u){return"none"}destroy(l=!1){}}e.BaseFilterFactory=s;class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,b){if(l<=0||b<=0)throw new Error("Invalid canvas size");const S=this._createCanvas(l,b);return{canvas:S,context:S.getContext("2d")}}reset(l,b,S){if(!l.canvas)throw new Error("Canvas is not specified");if(b<=0||S<=0)throw new Error("Invalid canvas size");l.canvas.width=b,l.canvas.height=S}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,b){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=r;class a{constructor({baseUrl:l=null,isCompressed:b=!0}){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=b}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const b=this.baseUrl+l+(this.isCompressed?".bcmap":""),S=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(b,S).catch(u=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${b}`)})}_fetchData(l,b){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=a;class h{constructor({baseUrl:l=null}){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const b=`${this.baseUrl}${l}`;return this._fetchData(b).catch(S=>{throw new Error(`Unable to load font data at: ${b}`)})}_fetchData(l){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=h;class c{constructor(){this.constructor===c&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,b,S=!1){if(l<=0||b<=0)throw new Error("Invalid SVG dimensions");const u=this._createSVG("svg:svg");return u.setAttribute("version","1.1"),S||(u.setAttribute("width",`${l}px`),u.setAttribute("height",`${b}px`)),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("viewBox",`0 0 ${l} ${b}`),u}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=c},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=n(1);const s=3285377520,r=4294901760,a=65535;class h{constructor(f){this.h1=f?f&4294967295:s,this.h2=f?f&4294967295:s}update(f){let l,b;if(typeof f=="string"){l=new Uint8Array(f.length*2),b=0;for(let B=0,I=f.length;B<I;B++){const E=f.charCodeAt(B);E<=255?l[b++]=E:(l[b++]=E>>>8,l[b++]=E&255)}}else if((0,i.isArrayBuffer)(f))l=f.slice(),b=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const S=b>>2,u=b-S*4,w=new Uint32Array(l.buffer,0,S);let g=0,m=0,_=this.h1,x=this.h2;const P=3432918353,R=461845907,y=P&a,F=R&a;for(let B=0;B<S;B++)B&1?(g=w[B],g=g*P&r|g*y&a,g=g<<15|g>>>17,g=g*R&r|g*F&a,_^=g,_=_<<13|_>>>19,_=_*5+3864292196):(m=w[B],m=m*P&r|m*y&a,m=m<<15|m>>>17,m=m*R&r|m*F&a,x^=m,x=x<<13|x>>>19,x=x*5+3864292196);switch(g=0,u){case 3:g^=l[S*4+2]<<16;case 2:g^=l[S*4+1]<<8;case 1:g^=l[S*4],g=g*P&r|g*y&a,g=g<<15|g>>>17,g=g*R&r|g*F&a,S&1?_^=g:x^=g}this.h1=_,this.h2=x}hexdigest(){let f=this.h1,l=this.h2;return f^=l>>>1,f=f*3981806797&r|f*36045&a,l=l*4283543511&r|((l<<16|f>>>16)*2950163797&r)>>>16,f^=l>>>1,f=f*444984403&r|f*60499&a,l=l*3301882366&r|((l<<16|f>>>16)*3120437893&r)>>>16,f^=l>>>1,(f>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=h},(t,e,n)=>{var a;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=n(1);class s{constructor({ownerDocument:c=globalThis.document,styleElement:f=null}){dt(this,a,new Set);this._document=c,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(c){this.nativeFontFaces.add(c),this._document.fonts.add(c)}removeNativeFontFace(c){this.nativeFontFaces.delete(c),this._document.fonts.delete(c)}insertRule(c){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const f=this.styleElement.sheet;f.insertRule(c,f.cssRules.length)}clear(){for(const c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.clear(),A(this,a).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(c){if(!(!c||A(this,a).has(c.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:f,src:l,style:b}=c,S=new FontFace(f,l,b);this.addNativeFontFace(S);try{await S.load(),A(this,a).add(f)}catch{(0,i.warn)(`Cannot load system font: ${c.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(S)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(c){if(c.attached||c.missingFile&&!c.systemFontInfo)return;if(c.attached=!0,c.systemFontInfo){await this.loadSystemFont(c.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=c.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(b){throw(0,i.warn)(`Failed to load font '${l.family}': '${b}'.`),c.disableFontFace=!0,b}}return}const f=c.createFontFaceRule();if(f){if(this.insertRule(f),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const b=this._queueLoadingCallback(l);this._prepareFontLoadEvent(c,b)})}}get isFontLoadingAPISupported(){var f;const c=!!((f=this._document)!=null&&f.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){let c=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(c=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function f(){for((0,i.assert)(!b.done,"completeRequest() cannot be called twice."),b.done=!0;l.length>0&&l[0].done;){const S=l.shift();setTimeout(S.callback,0)}}const{loadingRequests:l}=this,b={done:!1,complete:f,callback:c};return l.push(b),b}get _loadTestFont(){const c=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",c)}_prepareFontLoadEvent(c,f){function l(z,N){return z.charCodeAt(N)<<24|z.charCodeAt(N+1)<<16|z.charCodeAt(N+2)<<8|z.charCodeAt(N+3)&255}function b(z,N,Y,d){const Q=z.substring(0,N),pt=z.substring(N+Y);return Q+d+pt}let S,u;const w=this._document.createElement("canvas");w.width=1,w.height=1;const g=w.getContext("2d");let m=0;function _(z,N){if(++m>30){(0,i.warn)("Load test font never loaded."),N();return}if(g.font="30px "+z,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(_.bind(null,z,N))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=b(P,976,x.length,x);const y=16,F=1482184792;let B=l(P,y);for(S=0,u=x.length-3;S<u;S+=4)B=B-F+l(x,S)|0;S<x.length&&(B=B-F+l(x+"XXX",S)|0),P=b(P,y,4,(0,i.string32)(B));const I=`url(data:font/opentype;base64,${btoa(P)});`,E=`@font-face {font-family:"${x}";src:${I}}`;this.insertRule(E);const U=this._document.createElement("div");U.style.visibility="hidden",U.style.width=U.style.height="10px",U.style.position="absolute",U.style.top=U.style.left="0px";for(const z of[c.loadedName,x]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=z,U.append(N)}this._document.body.append(U),_(x,()=>{U.remove(),f.complete()})}}a=new WeakMap,e.FontLoader=s;class r{constructor(c,{isEvalSupported:f=!0,disableFontFace:l=!1,ignoreErrors:b=!1,inspectFont:S=null}){this.compiledGlyphs=Object.create(null);for(const u in c)this[u]=c[u];this.isEvalSupported=f!==!1,this.disableFontFace=l===!0,this.ignoreErrors=b===!0,this._inspectFont=S}createNativeFontFace(){var f;if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(f=this._inspectFont)==null||f.call(this,this),c}createFontFaceRule(){var b;if(!this.data||this.disableFontFace)return null;const c=(0,i.bytesToString)(this.data),f=`url(data:${this.mimetype};base64,${btoa(c)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${f}}`;else{let S=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(S+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${S}src:${f}}`}return(b=this._inspectFont)==null||b.call(this,this,f),l}getPathGenerator(c,f){if(this.compiledGlyphs[f]!==void 0)return this.compiledGlyphs[f];let l;try{l=c.get(this.loadedName+"_path_"+f)}catch(b){if(!this.ignoreErrors)throw b;return(0,i.warn)(`getPathGenerator - ignoring character: "${b}".`),this.compiledGlyphs[f]=function(S,u){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const b=[];for(const S of l){const u=S.args!==void 0?S.args.join(","):"";b.push("c.",S.cmd,"(",u,`);
`)}return this.compiledGlyphs[f]=new Function("c","size",b.join(""))}return this.compiledGlyphs[f]=function(b,S){for(const u of l)u.cmd==="scale"&&(u.args=[S,-S]),b[u.cmd].apply(b,u.args)}}}e.FontFaceObject=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=n(7);n(1);const s=function(f){return new Promise((l,b)=>{require$$5.readFile(f,(u,w)=>{if(u||!w){b(new Error(u));return}l(new Uint8Array(w))})})};class r extends i.BaseFilterFactory{}e.NodeFilterFactory=r;class a extends i.BaseCanvasFactory{_createCanvas(l,b){return require$$5.createCanvas(l,b)}}e.NodeCanvasFactory=a;class h extends i.BaseCMapReaderFactory{_fetchData(l,b){return s(l).then(S=>({cMapData:S,compressionType:b}))}}e.NodeCMapReaderFactory=h;class c extends i.BaseStandardFontDataFactory{_fetchData(l){return s(l)}}e.NodeStandardFontDataFactory=c},(t,e,n)=>{var q,tn,ft,en;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=n(1),s=n(6),r=n(12),a=n(13);const h=16,c=100,f=4096,l=15,b=10,S=1e3,u=16;function w(H,v){if(H._removeMirroring)throw new Error("Context is already forwarding operations.");H.__originalSave=H.save,H.__originalRestore=H.restore,H.__originalRotate=H.rotate,H.__originalScale=H.scale,H.__originalTranslate=H.translate,H.__originalTransform=H.transform,H.__originalSetTransform=H.setTransform,H.__originalResetTransform=H.resetTransform,H.__originalClip=H.clip,H.__originalMoveTo=H.moveTo,H.__originalLineTo=H.lineTo,H.__originalBezierCurveTo=H.bezierCurveTo,H.__originalRect=H.rect,H.__originalClosePath=H.closePath,H.__originalBeginPath=H.beginPath,H._removeMirroring=()=>{H.save=H.__originalSave,H.restore=H.__originalRestore,H.rotate=H.__originalRotate,H.scale=H.__originalScale,H.translate=H.__originalTranslate,H.transform=H.__originalTransform,H.setTransform=H.__originalSetTransform,H.resetTransform=H.__originalResetTransform,H.clip=H.__originalClip,H.moveTo=H.__originalMoveTo,H.lineTo=H.__originalLineTo,H.bezierCurveTo=H.__originalBezierCurveTo,H.rect=H.__originalRect,H.closePath=H.__originalClosePath,H.beginPath=H.__originalBeginPath,delete H._removeMirroring},H.save=function(){v.save(),this.__originalSave()},H.restore=function(){v.restore(),this.__originalRestore()},H.translate=function(k,M){v.translate(k,M),this.__originalTranslate(k,M)},H.scale=function(k,M){v.scale(k,M),this.__originalScale(k,M)},H.transform=function(k,M,L,V,et,ot){v.transform(k,M,L,V,et,ot),this.__originalTransform(k,M,L,V,et,ot)},H.setTransform=function(k,M,L,V,et,ot){v.setTransform(k,M,L,V,et,ot),this.__originalSetTransform(k,M,L,V,et,ot)},H.resetTransform=function(){v.resetTransform(),this.__originalResetTransform()},H.rotate=function(k){v.rotate(k),this.__originalRotate(k)},H.clip=function(k){v.clip(k),this.__originalClip(k)},H.moveTo=function(C,k){v.moveTo(C,k),this.__originalMoveTo(C,k)},H.lineTo=function(C,k){v.lineTo(C,k),this.__originalLineTo(C,k)},H.bezierCurveTo=function(C,k,M,L,V,et){v.bezierCurveTo(C,k,M,L,V,et),this.__originalBezierCurveTo(C,k,M,L,V,et)},H.rect=function(C,k,M,L){v.rect(C,k,M,L),this.__originalRect(C,k,M,L)},H.closePath=function(){v.closePath(),this.__originalClosePath()},H.beginPath=function(){v.beginPath(),this.__originalBeginPath()}}class g{constructor(v){this.canvasFactory=v,this.cache=Object.create(null)}getCanvas(v,C,k){let M;return this.cache[v]!==void 0?(M=this.cache[v],this.canvasFactory.reset(M,C,k)):(M=this.canvasFactory.create(C,k),this.cache[v]=M),M}delete(v){delete this.cache[v]}clear(){for(const v in this.cache){const C=this.cache[v];this.canvasFactory.destroy(C),delete this.cache[v]}}}function m(H,v,C,k,M,L,V,et,ot,vt){const[j,o,$,X,O,D]=(0,s.getCurrentTransform)(H);if(o===0&&$===0){const ut=V*j+O,W=Math.round(ut),K=et*X+D,J=Math.round(K),st=(V+ot)*j+O,At=Math.abs(Math.round(st)-W)||1,Ct=(et+vt)*X+D,Tt=Math.abs(Math.round(Ct)-J)||1;return H.setTransform(Math.sign(j),0,0,Math.sign(X),W,J),H.drawImage(v,C,k,M,L,0,0,At,Tt),H.setTransform(j,o,$,X,O,D),[At,Tt]}if(j===0&&X===0){const ut=et*$+O,W=Math.round(ut),K=V*o+D,J=Math.round(K),st=(et+vt)*$+O,At=Math.abs(Math.round(st)-W)||1,Ct=(V+ot)*o+D,Tt=Math.abs(Math.round(Ct)-J)||1;return H.setTransform(0,Math.sign(o),Math.sign($),0,W,J),H.drawImage(v,C,k,M,L,0,0,Tt,At),H.setTransform(j,o,$,X,O,D),[Tt,At]}H.drawImage(v,C,k,M,L,V,et,ot,vt);const Z=Math.hypot(j,o),it=Math.hypot($,X);return[Z*ot,it*vt]}function _(H){const{width:v,height:C}=H;if(v>S||C>S)return null;const k=1e3,M=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=v+1;let V=new Uint8Array(L*(C+1)),et,ot,vt;const j=v+7&-8;let o=new Uint8Array(j*C),$=0;for(const it of H.data){let ut=128;for(;ut>0;)o[$++]=it&ut?0:255,ut>>=1}let X=0;for($=0,o[$]!==0&&(V[0]=1,++X),ot=1;ot<v;ot++)o[$]!==o[$+1]&&(V[ot]=o[$]?2:1,++X),$++;for(o[$]!==0&&(V[ot]=2,++X),et=1;et<C;et++){$=et*j,vt=et*L,o[$-j]!==o[$]&&(V[vt]=o[$]?1:8,++X);let it=(o[$]?4:0)+(o[$-j]?8:0);for(ot=1;ot<v;ot++)it=(it>>2)+(o[$+1]?4:0)+(o[$-j+1]?8:0),M[it]&&(V[vt+ot]=M[it],++X),$++;if(o[$-j]!==o[$]&&(V[vt+ot]=o[$]?2:4,++X),X>k)return null}for($=j*(C-1),vt=et*L,o[$]!==0&&(V[vt]=8,++X),ot=1;ot<v;ot++)o[$]!==o[$+1]&&(V[vt+ot]=o[$]?4:8,++X),$++;if(o[$]!==0&&(V[vt+ot]=4,++X),X>k)return null;const O=new Int32Array([0,L,-1,0,-L,0,0,0,1]),D=new Path2D;for(et=0;X&&et<=C;et++){let it=et*L;const ut=it+v;for(;it<ut&&!V[it];)it++;if(it===ut)continue;D.moveTo(it%L,et);const W=it;let K=V[it];do{const J=O[K];do it+=J;while(!V[it]);const st=V[it];st!==5&&st!==10?(K=st,V[it]=0):(K=st&51*K>>4,V[it]&=K>>2|K<<2),D.lineTo(it%L,it/L|0),V[it]||--X}while(W!==it);--et}return o=null,V=null,function(it){it.save(),it.scale(1/v,-1/C),it.translate(0,-C),it.fill(D),it.beginPath(),it.restore()}}class x{constructor(v,C){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,v,C])}clone(){const v=Object.create(this);return v.clipBox=this.clipBox.slice(),v}setCurrentPoint(v,C){this.x=v,this.y=C}updatePathMinMax(v,C,k){[C,k]=i.Util.applyTransform([C,k],v),this.minX=Math.min(this.minX,C),this.minY=Math.min(this.minY,k),this.maxX=Math.max(this.maxX,C),this.maxY=Math.max(this.maxY,k)}updateRectMinMax(v,C){const k=i.Util.applyTransform(C,v),M=i.Util.applyTransform(C.slice(2),v);this.minX=Math.min(this.minX,k[0],M[0]),this.minY=Math.min(this.minY,k[1],M[1]),this.maxX=Math.max(this.maxX,k[0],M[0]),this.maxY=Math.max(this.maxY,k[1],M[1])}updateScalingPathMinMax(v,C){i.Util.scaleMinMax(v,C),this.minX=Math.min(this.minX,C[0]),this.maxX=Math.max(this.maxX,C[1]),this.minY=Math.min(this.minY,C[2]),this.maxY=Math.max(this.maxY,C[3])}updateCurvePathMinMax(v,C,k,M,L,V,et,ot,vt,j){const o=i.Util.bezierBoundingBox(C,k,M,L,V,et,ot,vt);if(j){j[0]=Math.min(j[0],o[0],o[2]),j[1]=Math.max(j[1],o[0],o[2]),j[2]=Math.min(j[2],o[1],o[3]),j[3]=Math.max(j[3],o[1],o[3]);return}this.updateRectMinMax(v,o)}getPathBoundingBox(v=r.PathType.FILL,C=null){const k=[this.minX,this.minY,this.maxX,this.maxY];if(v===r.PathType.STROKE){C||(0,i.unreachable)("Stroke bounding box must include transform.");const M=i.Util.singularValueDecompose2dScale(C),L=M[0]*this.lineWidth/2,V=M[1]*this.lineWidth/2;k[0]-=L,k[1]-=V,k[2]+=L,k[3]+=V}return k}updateClipFromPath(){const v=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(v||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(v){this.clipBox=v,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(v=r.PathType.FILL,C=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(v,C))}}function P(H,v){if(typeof ImageData<"u"&&v instanceof ImageData){H.putImageData(v,0,0);return}const C=v.height,k=v.width,M=C%u,L=(C-M)/u,V=M===0?L:L+1,et=H.createImageData(k,u);let ot=0,vt;const j=v.data,o=et.data;let $,X,O,D;if(v.kind===i.ImageKind.GRAYSCALE_1BPP){const Z=j.byteLength,it=new Uint32Array(o.buffer,0,o.byteLength>>2),ut=it.length,W=k+7>>3,K=4294967295,J=i.FeatureTest.isLittleEndian?4278190080:255;for($=0;$<V;$++){for(O=$<L?u:M,vt=0,X=0;X<O;X++){const st=Z-ot;let At=0;const Ct=st>W?k:st*8-7,Tt=Ct&-8;let It=0,zt=0;for(;At<Tt;At+=8)zt=j[ot++],it[vt++]=zt&128?K:J,it[vt++]=zt&64?K:J,it[vt++]=zt&32?K:J,it[vt++]=zt&16?K:J,it[vt++]=zt&8?K:J,it[vt++]=zt&4?K:J,it[vt++]=zt&2?K:J,it[vt++]=zt&1?K:J;for(;At<Ct;At++)It===0&&(zt=j[ot++],It=128),it[vt++]=zt&It?K:J,It>>=1}for(;vt<ut;)it[vt++]=0;H.putImageData(et,0,$*u)}}else if(v.kind===i.ImageKind.RGBA_32BPP){for(X=0,D=k*u*4,$=0;$<L;$++)o.set(j.subarray(ot,ot+D)),ot+=D,H.putImageData(et,0,X),X+=u;$<V&&(D=k*M*4,o.set(j.subarray(ot,ot+D)),H.putImageData(et,0,X))}else if(v.kind===i.ImageKind.RGB_24BPP)for(O=u,D=k*O,$=0;$<V;$++){for($>=L&&(O=M,D=k*O),vt=0,X=D;X--;)o[vt++]=j[ot++],o[vt++]=j[ot++],o[vt++]=j[ot++],o[vt++]=255;H.putImageData(et,0,$*u)}else throw new Error(`bad image kind: ${v.kind}`)}function R(H,v){if(v.bitmap){H.drawImage(v.bitmap,0,0);return}const C=v.height,k=v.width,M=C%u,L=(C-M)/u,V=M===0?L:L+1,et=H.createImageData(k,u);let ot=0;const vt=v.data,j=et.data;for(let o=0;o<V;o++){const $=o<L?u:M;({srcPos:ot}=(0,a.convertBlackAndWhiteToRGBA)({src:vt,srcPos:ot,dest:j,width:k,height:$,nonBlackColor:0})),H.putImageData(et,0,o*u)}}function y(H,v){const C=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const k of C)H[k]!==void 0&&(v[k]=H[k]);H.setLineDash!==void 0&&(v.setLineDash(H.getLineDash()),v.lineDashOffset=H.lineDashOffset)}function F(H){if(H.strokeStyle=H.fillStyle="#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0),!i.isNodeJS){const{filter:v}=H;v!=="none"&&v!==""&&(H.filter="none")}}function B(H,v,C,k){const M=H.length;for(let L=3;L<M;L+=4){const V=H[L];if(V===0)H[L-3]=v,H[L-2]=C,H[L-1]=k;else if(V<255){const et=255-V;H[L-3]=H[L-3]*V+v*et>>8,H[L-2]=H[L-2]*V+C*et>>8,H[L-1]=H[L-1]*V+k*et>>8}}}function I(H,v,C){const k=H.length,M=1/255;for(let L=3;L<k;L+=4){const V=C?C[H[L]]:H[L];v[L]=v[L]*V*M|0}}function E(H,v,C){const k=H.length;for(let M=3;M<k;M+=4){const L=H[M-3]*77+H[M-2]*152+H[M-1]*28;v[M]=C?v[M]*C[L>>8]>>8:v[M]*L>>16}}function U(H,v,C,k,M,L,V,et,ot,vt,j){const o=!!L,$=o?L[0]:0,X=o?L[1]:0,O=o?L[2]:0,D=M==="Luminosity"?E:I,it=Math.min(k,Math.ceil(1048576/C));for(let ut=0;ut<k;ut+=it){const W=Math.min(it,k-ut),K=H.getImageData(et-vt,ut+(ot-j),C,W),J=v.getImageData(et,ut+ot,C,W);o&&B(K.data,$,X,O),D(K.data,J.data,V),v.putImageData(J,et,ut+ot)}}function z(H,v,C,k){const M=k[0],L=k[1],V=k[2]-M,et=k[3]-L;V===0||et===0||(U(v.context,C,V,et,v.subtype,v.backdrop,v.transferMap,M,L,v.offsetX,v.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(C.canvas,0,0),H.restore())}function N(H,v){const C=i.Util.singularValueDecompose2dScale(H);C[0]=Math.fround(C[0]),C[1]=Math.fround(C[1]);const k=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return v!==void 0?v:C[0]<=k||C[1]<=k}const Y=["butt","round","square"],d=["miter","round","bevel"],Q={},pt={},rt=class rt{constructor(v,C,k,M,L,{optionalContentConfig:V,markedContentStack:et=null},ot,vt){dt(this,q);dt(this,ft);this.ctx=v,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=C,this.objs=k,this.canvasFactory=M,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=et||[],this.optionalContentConfig=V,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ot,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=vt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(v,C=null){return typeof v=="string"?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):C}beginDrawing({transform:v,viewport:C,transparency:k=!1,background:M=null}){const L=this.ctx.canvas.width,V=this.ctx.canvas.height,et=this.ctx.fillStyle;if(this.ctx.fillStyle=M||"#ffffff",this.ctx.fillRect(0,0,L,V),this.ctx.fillStyle=et,k){const ot=this.cachedCanvases.getCanvas("transparent",L,V);this.compositeCtx=this.ctx,this.transparentCanvas=ot.canvas,this.ctx=ot.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),F(this.ctx),v&&(this.ctx.transform(...v),this.outputScaleX=v[0],this.outputScaleY=v[0]),this.ctx.transform(...C.transform),this.viewportScale=C.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(v,C,k,M){const L=v.argsArray,V=v.fnArray;let et=C||0;const ot=L.length;if(ot===et)return et;const vt=ot-et>b&&typeof k=="function",j=vt?Date.now()+l:0;let o=0;const $=this.commonObjs,X=this.objs;let O;for(;;){if(M!==void 0&&et===M.nextBreakPoint)return M.breakIt(et,k),et;if(O=V[et],O!==i.OPS.dependency)this[O].apply(this,L[et]);else for(const D of L[et]){const Z=D.startsWith("g_")?$:X;if(!Z.has(D))return Z.get(D,k),et}if(et++,et===ot)return et;if(vt&&++o>b){if(Date.now()>j)return k(),et;o=0}}}endDrawing(){bt(this,q,tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const v of this._cachedBitmapsMap.values()){for(const C of v.values())typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement&&(C.width=C.height=0);v.clear()}this._cachedBitmapsMap.clear(),bt(this,ft,en).call(this)}_scaleImage(v,C){const k=v.width,M=v.height;let L=Math.max(Math.hypot(C[0],C[1]),1),V=Math.max(Math.hypot(C[2],C[3]),1),et=k,ot=M,vt="prescale1",j,o;for(;L>2&&et>1||V>2&&ot>1;){let $=et,X=ot;L>2&&et>1&&($=et>=16384?Math.floor(et/2)-1||1:Math.ceil(et/2),L/=et/$),V>2&&ot>1&&(X=ot>=16384?Math.floor(ot/2)-1||1:Math.ceil(ot)/2,V/=ot/X),j=this.cachedCanvases.getCanvas(vt,$,X),o=j.context,o.clearRect(0,0,$,X),o.drawImage(v,0,0,et,ot,0,0,$,X),v=j.canvas,et=$,ot=X,vt=vt==="prescale1"?"prescale2":"prescale1"}return{img:v,paintWidth:et,paintHeight:ot}}_createMaskCanvas(v){const C=this.ctx,{width:k,height:M}=v,L=this.current.fillColor,V=this.current.patternFill,et=(0,s.getCurrentTransform)(C);let ot,vt,j,o;if((v.bitmap||v.data)&&v.count>1){const At=v.bitmap||v.data.buffer;vt=JSON.stringify(V?et:[et.slice(0,4),L]),ot=this._cachedBitmapsMap.get(At),ot||(ot=new Map,this._cachedBitmapsMap.set(At,ot));const Ct=ot.get(vt);if(Ct&&!V){const Tt=Math.round(Math.min(et[0],et[2])+et[4]),It=Math.round(Math.min(et[1],et[3])+et[5]);return{canvas:Ct,offsetX:Tt,offsetY:It}}j=Ct}j||(o=this.cachedCanvases.getCanvas("maskCanvas",k,M),R(o.context,v));let $=i.Util.transform(et,[1/k,0,0,-1/M,0,0]);$=i.Util.transform($,[1,0,0,1,0,-M]);const X=i.Util.applyTransform([0,0],$),O=i.Util.applyTransform([k,M],$),D=i.Util.normalizeRect([X[0],X[1],O[0],O[1]]),Z=Math.round(D[2]-D[0])||1,it=Math.round(D[3]-D[1])||1,ut=this.cachedCanvases.getCanvas("fillCanvas",Z,it),W=ut.context,K=Math.min(X[0],O[0]),J=Math.min(X[1],O[1]);W.translate(-K,-J),W.transform(...$),j||(j=this._scaleImage(o.canvas,(0,s.getCurrentTransformInverse)(W)),j=j.img,ot&&V&&ot.set(vt,j)),W.imageSmoothingEnabled=N((0,s.getCurrentTransform)(W),v.interpolate),m(W,j,0,0,j.width,j.height,0,0,k,M),W.globalCompositeOperation="source-in";const st=i.Util.transform((0,s.getCurrentTransformInverse)(W),[1,0,0,1,-K,-J]);return W.fillStyle=V?L.getPattern(C,this,st,r.PathType.FILL):L,W.fillRect(0,0,k,M),ot&&!V&&(this.cachedCanvases.delete("fillCanvas"),ot.set(vt,ut.canvas)),{canvas:ut.canvas,offsetX:Math.round(K),offsetY:Math.round(J)}}setLineWidth(v){v!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=v,this.ctx.lineWidth=v}setLineCap(v){this.ctx.lineCap=Y[v]}setLineJoin(v){this.ctx.lineJoin=d[v]}setMiterLimit(v){this.ctx.miterLimit=v}setDash(v,C){const k=this.ctx;k.setLineDash!==void 0&&(k.setLineDash(v),k.lineDashOffset=C)}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(const[C,k]of v)switch(C){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k[0],k[1]);break;case"CA":this.current.strokeAlpha=k;break;case"ca":this.current.fillAlpha=k,this.ctx.globalAlpha=k;break;case"BM":this.ctx.globalCompositeOperation=k;break;case"SMask":this.current.activeSMask=k?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(k);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const v=this.inSMaskMode;this.current.activeSMask&&!v?this.beginSMaskMode():!this.current.activeSMask&&v&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const v=this.ctx.canvas.width,C=this.ctx.canvas.height,k="smaskGroupAt"+this.groupLevel,M=this.cachedCanvases.getCanvas(k,v,C);this.suspendedCtx=this.ctx,this.ctx=M.context;const L=this.ctx;L.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),y(this.suspendedCtx,L),w(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),y(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(v){if(!this.current.activeSMask)return;v?(v[0]=Math.floor(v[0]),v[1]=Math.floor(v[1]),v[2]=Math.ceil(v[2]),v[3]=Math.ceil(v[3])):v=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const C=this.current.activeSMask,k=this.suspendedCtx;z(k,C,this.ctx,v),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(y(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const v=this.current;this.stateStack.push(v),this.current=v.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),y(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(v,C,k,M,L,V){this.ctx.transform(v,C,k,M,L,V),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(v,C,k){const M=this.ctx,L=this.current;let V=L.x,et=L.y,ot,vt;const j=(0,s.getCurrentTransform)(M),o=j[0]===0&&j[3]===0||j[1]===0&&j[2]===0,$=o?k.slice(0):null;for(let X=0,O=0,D=v.length;X<D;X++)switch(v[X]|0){case i.OPS.rectangle:V=C[O++],et=C[O++];const Z=C[O++],it=C[O++],ut=V+Z,W=et+it;M.moveTo(V,et),Z===0||it===0?M.lineTo(ut,W):(M.lineTo(ut,et),M.lineTo(ut,W),M.lineTo(V,W)),o||L.updateRectMinMax(j,[V,et,ut,W]),M.closePath();break;case i.OPS.moveTo:V=C[O++],et=C[O++],M.moveTo(V,et),o||L.updatePathMinMax(j,V,et);break;case i.OPS.lineTo:V=C[O++],et=C[O++],M.lineTo(V,et),o||L.updatePathMinMax(j,V,et);break;case i.OPS.curveTo:ot=V,vt=et,V=C[O+4],et=C[O+5],M.bezierCurveTo(C[O],C[O+1],C[O+2],C[O+3],V,et),L.updateCurvePathMinMax(j,ot,vt,C[O],C[O+1],C[O+2],C[O+3],V,et,$),O+=6;break;case i.OPS.curveTo2:ot=V,vt=et,M.bezierCurveTo(V,et,C[O],C[O+1],C[O+2],C[O+3]),L.updateCurvePathMinMax(j,ot,vt,V,et,C[O],C[O+1],C[O+2],C[O+3],$),V=C[O+2],et=C[O+3],O+=4;break;case i.OPS.curveTo3:ot=V,vt=et,V=C[O+2],et=C[O+3],M.bezierCurveTo(C[O],C[O+1],V,et,V,et),L.updateCurvePathMinMax(j,ot,vt,C[O],C[O+1],V,et,V,et,$),O+=4;break;case i.OPS.closePath:M.closePath();break}o&&L.updateScalingPathMinMax(j,$),L.setCurrentPoint(V,et)}closePath(){this.ctx.closePath()}stroke(v=!0){const C=this.ctx,k=this.current.strokeColor;C.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof k=="object"&&(k!=null&&k.getPattern)?(C.save(),C.strokeStyle=k.getPattern(C,this,(0,s.getCurrentTransformInverse)(C),r.PathType.STROKE),this.rescaleAndStroke(!1),C.restore()):this.rescaleAndStroke(!0)),v&&this.consumePath(this.current.getClippedPathBoundingBox()),C.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(v=!0){const C=this.ctx,k=this.current.fillColor,M=this.current.patternFill;let L=!1;M&&(C.save(),C.fillStyle=k.getPattern(C,this,(0,s.getCurrentTransformInverse)(C),r.PathType.FILL),L=!0);const V=this.current.getClippedPathBoundingBox();this.contentVisible&&V!==null&&(this.pendingEOFill?(C.fill("evenodd"),this.pendingEOFill=!1):C.fill()),L&&C.restore(),v&&this.consumePath(V)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Q}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const v=this.pendingTextPaths,C=this.ctx;if(v===void 0){C.beginPath();return}C.save(),C.beginPath();for(const k of v)C.setTransform(...k.transform),C.translate(k.x,k.y),k.addToPath(C,k.fontSize);C.restore(),C.clip(),C.beginPath(),delete this.pendingTextPaths}setCharSpacing(v){this.current.charSpacing=v}setWordSpacing(v){this.current.wordSpacing=v}setHScale(v){this.current.textHScale=v/100}setLeading(v){this.current.leading=-v}setFont(v,C){var j;const k=this.commonObjs.get(v),M=this.current;if(!k)throw new Error(`Can't find font for ${v}`);if(M.fontMatrix=k.fontMatrix||i.FONT_IDENTITY_MATRIX,(M.fontMatrix[0]===0||M.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+v),C<0?(C=-C,M.fontDirection=-1):M.fontDirection=1,this.current.font=k,this.current.fontSize=C,k.isType3Font)return;const L=k.loadedName||"sans-serif",V=((j=k.systemFontInfo)==null?void 0:j.css)||`"${L}", ${k.fallbackName}`;let et="normal";k.black?et="900":k.bold&&(et="bold");const ot=k.italic?"italic":"normal";let vt=C;C<h?vt=h:C>c&&(vt=c),this.current.fontSizeScale=C/vt,this.ctx.font=`${ot} ${et} ${vt}px ${V}`}setTextRenderingMode(v){this.current.textRenderingMode=v}setTextRise(v){this.current.textRise=v}moveText(v,C){this.current.x=this.current.lineX+=v,this.current.y=this.current.lineY+=C}setLeadingMoveText(v,C){this.setLeading(-C),this.moveText(v,C)}setTextMatrix(v,C,k,M,L,V){this.current.textMatrix=[v,C,k,M,L,V],this.current.textMatrixScale=Math.hypot(v,C),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(v,C,k,M){const L=this.ctx,V=this.current,et=V.font,ot=V.textRenderingMode,vt=V.fontSize/V.fontSizeScale,j=ot&i.TextRenderingMode.FILL_STROKE_MASK,o=!!(ot&i.TextRenderingMode.ADD_TO_PATH_FLAG),$=V.patternFill&&!et.missingFile;let X;(et.disableFontFace||o||$)&&(X=et.getPathGenerator(this.commonObjs,v)),et.disableFontFace||$?(L.save(),L.translate(C,k),L.beginPath(),X(L,vt),M&&L.setTransform(...M),(j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&L.fill(),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&L.fillText(v,C,k),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&L.strokeText(v,C,k)),o&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(L),x:C,y:k,fontSize:vt,addToPath:X})}get isFontSubpixelAAEnabled(){const{context:v}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);v.scale(1.5,1),v.fillText("I",0,10);const C=v.getImageData(0,0,10,10).data;let k=!1;for(let M=3;M<C.length;M+=4)if(C[M]>0&&C[M]<255){k=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",k)}showText(v){const C=this.current,k=C.font;if(k.isType3Font)return this.showType3Text(v);const M=C.fontSize;if(M===0)return;const L=this.ctx,V=C.fontSizeScale,et=C.charSpacing,ot=C.wordSpacing,vt=C.fontDirection,j=C.textHScale*vt,o=v.length,$=k.vertical,X=$?1:-1,O=k.defaultVMetrics,D=M*C.fontMatrix[0],Z=C.textRenderingMode===i.TextRenderingMode.FILL&&!k.disableFontFace&&!C.patternFill;L.save(),L.transform(...C.textMatrix),L.translate(C.x,C.y+C.textRise),vt>0?L.scale(j,-1):L.scale(j,1);let it;if(C.patternFill){L.save();const st=C.fillColor.getPattern(L,this,(0,s.getCurrentTransformInverse)(L),r.PathType.FILL);it=(0,s.getCurrentTransform)(L),L.restore(),L.fillStyle=st}let ut=C.lineWidth;const W=C.textMatrixScale;if(W===0||ut===0){const st=C.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(st===i.TextRenderingMode.STROKE||st===i.TextRenderingMode.FILL_STROKE)&&(ut=this.getSinglePixelWidth())}else ut/=W;if(V!==1&&(L.scale(V,V),ut/=V),L.lineWidth=ut,k.isInvalidPDFjsFont){const st=[];let At=0;for(const Ct of v)st.push(Ct.unicode),At+=Ct.width;L.fillText(st.join(""),0,0),C.x+=At*D*j,L.restore(),this.compose();return}let K=0,J;for(J=0;J<o;++J){const st=v[J];if(typeof st=="number"){K+=X*st*M/1e3;continue}let At=!1;const Ct=(st.isSpace?ot:0)+et,Tt=st.fontChar,It=st.accent;let zt,Ut,Vt=st.width;if($){const Xt=st.vmetric||O,xt=-(st.vmetric?Xt[1]:Vt*.5)*D,_t=Xt[2]*D;Vt=Xt?-Xt[0]:Vt,zt=xt/V,Ut=(K+_t)/V}else zt=K/V,Ut=0;if(k.remeasure&&Vt>0){const Xt=L.measureText(Tt).width*1e3/M*V;if(Vt<Xt&&this.isFontSubpixelAAEnabled){const xt=Vt/Xt;At=!0,L.save(),L.scale(xt,1),zt/=xt}else Vt!==Xt&&(zt+=(Vt-Xt)/2e3*M/V)}if(this.contentVisible&&(st.isInFont||k.missingFile)){if(Z&&!It)L.fillText(Tt,zt,Ut);else if(this.paintChar(Tt,zt,Ut,it),It){const Xt=zt+M*It.offset.x/V,xt=Ut-M*It.offset.y/V;this.paintChar(It.fontChar,Xt,xt,it)}}const Nt=$?Vt*D-Ct*vt:Vt*D+Ct*vt;K+=Nt,At&&L.restore()}$?C.y-=K:C.x+=K*j,L.restore(),this.compose()}showType3Text(v){const C=this.ctx,k=this.current,M=k.font,L=k.fontSize,V=k.fontDirection,et=M.vertical?1:-1,ot=k.charSpacing,vt=k.wordSpacing,j=k.textHScale*V,o=k.fontMatrix||i.FONT_IDENTITY_MATRIX,$=v.length,X=k.textRenderingMode===i.TextRenderingMode.INVISIBLE;let O,D,Z,it;if(!(X||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,C.save(),C.transform(...k.textMatrix),C.translate(k.x,k.y),C.scale(j,V),O=0;O<$;++O){if(D=v[O],typeof D=="number"){it=et*D*L/1e3,this.ctx.translate(it,0),k.x+=it*j;continue}const ut=(D.isSpace?vt:0)+ot,W=M.charProcOperatorList[D.operatorListId];if(!W){(0,i.warn)(`Type3 character "${D.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=D,this.save(),C.scale(L,L),C.transform(...o),this.executeOperatorList(W),this.restore()),Z=i.Util.applyTransform([D.width,0],o)[0]*L+ut,C.translate(Z,0),k.x+=Z*j}C.restore(),this.processingType3=null}}setCharWidth(v,C){}setCharWidthAndBounds(v,C,k,M,L,V){this.ctx.rect(k,M,L-k,V-M),this.ctx.clip(),this.endPath()}getColorN_Pattern(v){let C;if(v[0]==="TilingPattern"){const k=v[1],M=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),L={createCanvasGraphics:V=>new rt(V,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};C=new r.TilingPattern(v,k,this.ctx,L,M)}else C=this._getPattern(v[1],v[2]);return C}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(v,C,k){const M=i.Util.makeHexColor(v,C,k);this.ctx.strokeStyle=M,this.current.strokeColor=M}setFillRGBColor(v,C,k){const M=i.Util.makeHexColor(v,C,k);this.ctx.fillStyle=M,this.current.fillColor=M,this.current.patternFill=!1}_getPattern(v,C=null){let k;return this.cachedPatterns.has(v)?k=this.cachedPatterns.get(v):(k=(0,r.getShadingPattern)(this.getObject(v)),this.cachedPatterns.set(v,k)),C&&(k.matrix=C),k}shadingFill(v){if(!this.contentVisible)return;const C=this.ctx;this.save();const k=this._getPattern(v);C.fillStyle=k.getPattern(C,this,(0,s.getCurrentTransformInverse)(C),r.PathType.SHADING);const M=(0,s.getCurrentTransformInverse)(C);if(M){const{width:L,height:V}=C.canvas,[et,ot,vt,j]=i.Util.getAxialAlignedBoundingBox([0,0,L,V],M);this.ctx.fillRect(et,ot,vt-et,j-ot)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(v,C){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(v)&&v.length===6&&this.transform(...v),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),C)){const k=C[2]-C[0],M=C[3]-C[1];this.ctx.rect(C[0],C[1],k,M),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),C),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(v){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const C=this.ctx;v.isolated||(0,i.info)("TODO: Support non-isolated groups."),v.knockout&&(0,i.warn)("Knockout groups not supported.");const k=(0,s.getCurrentTransform)(C);if(v.matrix&&C.transform(...v.matrix),!v.bbox)throw new Error("Bounding box is required.");let M=i.Util.getAxialAlignedBoundingBox(v.bbox,(0,s.getCurrentTransform)(C));const L=[0,0,C.canvas.width,C.canvas.height];M=i.Util.intersect(M,L)||[0,0,0,0];const V=Math.floor(M[0]),et=Math.floor(M[1]);let ot=Math.max(Math.ceil(M[2])-V,1),vt=Math.max(Math.ceil(M[3])-et,1),j=1,o=1;ot>f&&(j=ot/f,ot=f),vt>f&&(o=vt/f,vt=f),this.current.startNewPathAndClipBox([0,0,ot,vt]);let $="groupAt"+this.groupLevel;v.smask&&($+="_smask_"+this.smaskCounter++%2);const X=this.cachedCanvases.getCanvas($,ot,vt),O=X.context;O.scale(1/j,1/o),O.translate(-V,-et),O.transform(...k),v.smask?this.smaskStack.push({canvas:X.canvas,context:O,offsetX:V,offsetY:et,scaleX:j,scaleY:o,subtype:v.smask.subtype,backdrop:v.smask.backdrop,transferMap:v.smask.transferMap||null,startTransformInverse:null}):(C.setTransform(1,0,0,1,0,0),C.translate(V,et),C.scale(j,o),C.save()),y(C,O),this.ctx=O,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(C),this.groupLevel++}endGroup(v){if(!this.contentVisible)return;this.groupLevel--;const C=this.ctx,k=this.groupStack.pop();if(this.ctx=k,this.ctx.imageSmoothingEnabled=!1,v.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const M=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...M);const L=i.Util.getAxialAlignedBoundingBox([0,0,C.canvas.width,C.canvas.height],M);this.ctx.drawImage(C.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(v,C,k,M,L){if(bt(this,q,tn).call(this),F(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(C)&&C.length===4){const V=C[2]-C[0],et=C[3]-C[1];if(L&&this.annotationCanvasMap){k=k.slice(),k[4]-=C[0],k[5]-=C[1],C=C.slice(),C[0]=C[1]=0,C[2]=V,C[3]=et;const[ot,vt]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:j}=this,o=Math.ceil(V*this.outputScaleX*j),$=Math.ceil(et*this.outputScaleY*j);this.annotationCanvas=this.canvasFactory.create(o,$);const{canvas:X,context:O}=this.annotationCanvas;this.annotationCanvasMap.set(v,X),this.annotationCanvas.savedCtx=this.ctx,this.ctx=O,this.ctx.save(),this.ctx.setTransform(ot,0,0,-vt,0,et*vt),F(this.ctx)}else F(this.ctx),this.ctx.rect(C[0],C[1],V,et),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...k),this.transform(...M)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),bt(this,ft,en).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(v){if(!this.contentVisible)return;const C=v.count;v=this.getObject(v.data,v),v.count=C;const k=this.ctx,M=this.processingType3;if(M&&(M.compiled===void 0&&(M.compiled=_(v)),M.compiled)){M.compiled(k);return}const L=this._createMaskCanvas(v),V=L.canvas;k.save(),k.setTransform(1,0,0,1,0,0),k.drawImage(V,L.offsetX,L.offsetY),k.restore(),this.compose()}paintImageMaskXObjectRepeat(v,C,k=0,M=0,L,V){if(!this.contentVisible)return;v=this.getObject(v.data,v);const et=this.ctx;et.save();const ot=(0,s.getCurrentTransform)(et);et.transform(C,k,M,L,0,0);const vt=this._createMaskCanvas(v);et.setTransform(1,0,0,1,vt.offsetX-ot[4],vt.offsetY-ot[5]);for(let j=0,o=V.length;j<o;j+=2){const $=i.Util.transform(ot,[C,k,M,L,V[j],V[j+1]]),[X,O]=i.Util.applyTransform([0,0],$);et.drawImage(vt.canvas,X,O)}et.restore(),this.compose()}paintImageMaskXObjectGroup(v){if(!this.contentVisible)return;const C=this.ctx,k=this.current.fillColor,M=this.current.patternFill;for(const L of v){const{data:V,width:et,height:ot,transform:vt}=L,j=this.cachedCanvases.getCanvas("maskCanvas",et,ot),o=j.context;o.save();const $=this.getObject(V,L);R(o,$),o.globalCompositeOperation="source-in",o.fillStyle=M?k.getPattern(o,this,(0,s.getCurrentTransformInverse)(C),r.PathType.FILL):k,o.fillRect(0,0,et,ot),o.restore(),C.save(),C.transform(...vt),C.scale(1,-1),m(C,j.canvas,0,0,et,ot,0,-1,1,1),C.restore()}this.compose()}paintImageXObject(v){if(!this.contentVisible)return;const C=this.getObject(v);if(!C){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(C)}paintImageXObjectRepeat(v,C,k,M){if(!this.contentVisible)return;const L=this.getObject(v);if(!L){(0,i.warn)("Dependent image isn't ready yet");return}const V=L.width,et=L.height,ot=[];for(let vt=0,j=M.length;vt<j;vt+=2)ot.push({transform:[C,0,0,k,M[vt],M[vt+1]],x:0,y:0,w:V,h:et});this.paintInlineImageXObjectGroup(L,ot)}applyTransferMapsToCanvas(v){return this.current.transferMaps!=="none"&&(v.filter=this.current.transferMaps,v.drawImage(v.canvas,0,0),v.filter="none"),v.canvas}applyTransferMapsToBitmap(v){if(this.current.transferMaps==="none")return v.bitmap;const{bitmap:C,width:k,height:M}=v,L=this.cachedCanvases.getCanvas("inlineImage",k,M),V=L.context;return V.filter=this.current.transferMaps,V.drawImage(C,0,0),V.filter="none",L.canvas}paintInlineImageXObject(v){if(!this.contentVisible)return;const C=v.width,k=v.height,M=this.ctx;if(this.save(),!i.isNodeJS){const{filter:et}=M;et!=="none"&&et!==""&&(M.filter="none")}M.scale(1/C,-1/k);let L;if(v.bitmap)L=this.applyTransferMapsToBitmap(v);else if(typeof HTMLElement=="function"&&v instanceof HTMLElement||!v.data)L=v;else{const ot=this.cachedCanvases.getCanvas("inlineImage",C,k).context;P(ot,v),L=this.applyTransferMapsToCanvas(ot)}const V=this._scaleImage(L,(0,s.getCurrentTransformInverse)(M));M.imageSmoothingEnabled=N((0,s.getCurrentTransform)(M),v.interpolate),m(M,V.img,0,0,V.paintWidth,V.paintHeight,0,-k,C,k),this.compose(),this.restore()}paintInlineImageXObjectGroup(v,C){if(!this.contentVisible)return;const k=this.ctx;let M;if(v.bitmap)M=v.bitmap;else{const L=v.width,V=v.height,ot=this.cachedCanvases.getCanvas("inlineImage",L,V).context;P(ot,v),M=this.applyTransferMapsToCanvas(ot)}for(const L of C)k.save(),k.transform(...L.transform),k.scale(1,-1),m(k,M,L.x,L.y,L.w,L.h,0,-1,1,1),k.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(v){}markPointProps(v,C){}beginMarkedContent(v){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(v,C){v==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(C)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(v){const C=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(v);const k=this.ctx;this.pendingClip&&(C||(this.pendingClip===pt?k.clip("evenodd"):k.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),k.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const v=(0,s.getCurrentTransform)(this.ctx);if(v[1]===0&&v[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(v[0]),Math.abs(v[3]));else{const C=Math.abs(v[0]*v[3]-v[2]*v[1]),k=Math.hypot(v[0],v[2]),M=Math.hypot(v[1],v[3]);this._cachedGetSinglePixelWidth=Math.max(k,M)/C}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:v}=this.current,{a:C,b:k,c:M,d:L}=this.ctx.getTransform();let V,et;if(k===0&&M===0){const ot=Math.abs(C),vt=Math.abs(L);if(ot===vt)if(v===0)V=et=1/ot;else{const j=ot*v;V=et=j<1?1/j:1}else if(v===0)V=1/ot,et=1/vt;else{const j=ot*v,o=vt*v;V=j<1?1/j:1,et=o<1?1/o:1}}else{const ot=Math.abs(C*L-k*M),vt=Math.hypot(C,k),j=Math.hypot(M,L);if(v===0)V=j/ot,et=vt/ot;else{const o=v*ot;V=j>o?j/o:1,et=vt>o?vt/o:1}}this._cachedScaleForStroking[0]=V,this._cachedScaleForStroking[1]=et}return this._cachedScaleForStroking}rescaleAndStroke(v){const{ctx:C}=this,{lineWidth:k}=this.current,[M,L]=this.getScaleForStroking();if(C.lineWidth=k||1,M===1&&L===1){C.stroke();return}const V=C.getLineDash();if(v&&C.save(),C.scale(M,L),V.length>0){const et=Math.max(M,L);C.setLineDash(V.map(ot=>ot/et)),C.lineDashOffset/=et}C.stroke(),v&&C.restore()}isContentVisible(){for(let v=this.markedContentStack.length-1;v>=0;v--)if(!this.markedContentStack[v].visible)return!1;return!0}};q=new WeakSet,tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ft=new WeakSet,en=function(){if(this.pageColors){const v=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(v!=="none"){const C=this.ctx.filter;this.ctx.filter=v,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=C}}};let at=rt;e.CanvasGraphics=at;for(const H in i.OPS)at.prototype[H]!==void 0&&(at.prototype[i.OPS[H]]=at.prototype[H])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=u;var i=n(1),s=n(6);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=r;function a(_,x){if(!x)return;const P=x[2]-x[0],R=x[3]-x[1],y=new Path2D;y.rect(x[0],x[1],P,R),_.clip(y)}class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class c extends h{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let P;this._type==="axial"?P=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const R of this._colorStops)P.addColorStop(R[0],R[1]);return P}getPattern(x,P,R,y){let F;if(y===r.STROKE||y===r.FILL){const B=P.current.getClippedPathBoundingBox(y,(0,s.getCurrentTransform)(x))||[0,0,0,0],I=Math.ceil(B[2]-B[0])||1,E=Math.ceil(B[3]-B[1])||1,U=P.cachedCanvases.getCanvas("pattern",I,E,!0),z=U.context;z.clearRect(0,0,z.canvas.width,z.canvas.height),z.beginPath(),z.rect(0,0,z.canvas.width,z.canvas.height),z.translate(-B[0],-B[1]),R=i.Util.transform(R,[1,0,0,1,B[0],B[1]]),z.transform(...P.baseTransform),this.matrix&&z.transform(...this.matrix),a(z,this._bbox),z.fillStyle=this._createGradient(z),z.fill(),F=x.createPattern(U.canvas,"no-repeat");const N=new DOMMatrix(R);F.setTransform(N)}else a(x,this._bbox),F=this._createGradient(x);return F}}function f(_,x,P,R,y,F,B,I){const E=x.coords,U=x.colors,z=_.data,N=_.width*4;let Y;E[P+1]>E[R+1]&&(Y=P,P=R,R=Y,Y=F,F=B,B=Y),E[R+1]>E[y+1]&&(Y=R,R=y,y=Y,Y=B,B=I,I=Y),E[P+1]>E[R+1]&&(Y=P,P=R,R=Y,Y=F,F=B,B=Y);const d=(E[P]+x.offsetX)*x.scaleX,Q=(E[P+1]+x.offsetY)*x.scaleY,pt=(E[R]+x.offsetX)*x.scaleX,at=(E[R+1]+x.offsetY)*x.scaleY,q=(E[y]+x.offsetX)*x.scaleX,nt=(E[y+1]+x.offsetY)*x.scaleY;if(Q>=nt)return;const ft=U[F],lt=U[F+1],rt=U[F+2],H=U[B],v=U[B+1],C=U[B+2],k=U[I],M=U[I+1],L=U[I+2],V=Math.round(Q),et=Math.round(nt);let ot,vt,j,o,$,X,O,D;for(let Z=V;Z<=et;Z++){if(Z<at){const J=Z<Q?0:(Q-Z)/(Q-at);ot=d-(d-pt)*J,vt=ft-(ft-H)*J,j=lt-(lt-v)*J,o=rt-(rt-C)*J}else{let J;Z>nt?J=1:at===nt?J=0:J=(at-Z)/(at-nt),ot=pt-(pt-q)*J,vt=H-(H-k)*J,j=v-(v-M)*J,o=C-(C-L)*J}let it;Z<Q?it=0:Z>nt?it=1:it=(Q-Z)/(Q-nt),$=d-(d-q)*it,X=ft-(ft-k)*it,O=lt-(lt-M)*it,D=rt-(rt-L)*it;const ut=Math.round(Math.min(ot,$)),W=Math.round(Math.max(ot,$));let K=N*Z+ut*4;for(let J=ut;J<=W;J++)it=(ot-J)/(ot-$),it<0?it=0:it>1&&(it=1),z[K++]=vt-(vt-X)*it|0,z[K++]=j-(j-O)*it|0,z[K++]=o-(o-D)*it|0,z[K++]=255}}function l(_,x,P){const R=x.coords,y=x.colors;let F,B;switch(x.type){case"lattice":const I=x.verticesPerRow,E=Math.floor(R.length/I)-1,U=I-1;for(F=0;F<E;F++){let z=F*I;for(let N=0;N<U;N++,z++)f(_,P,R[z],R[z+1],R[z+I],y[z],y[z+1],y[z+I]),f(_,P,R[z+I+1],R[z+1],R[z+I],y[z+I+1],y[z+1],y[z+I])}break;case"triangles":for(F=0,B=R.length;F<B;F+=3)f(_,P,R[F],R[F+1],R[F+2],y[F],y[F+1],y[F+2]);break;default:throw new Error("illegal figure")}}class b extends h{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,P,R){const I=Math.floor(this._bounds[0]),E=Math.floor(this._bounds[1]),U=Math.ceil(this._bounds[2])-I,z=Math.ceil(this._bounds[3])-E,N=Math.min(Math.ceil(Math.abs(U*x[0]*1.1)),3e3),Y=Math.min(Math.ceil(Math.abs(z*x[1]*1.1)),3e3),d=U/N,Q=z/Y,pt={coords:this._coords,colors:this._colors,offsetX:-I,offsetY:-E,scaleX:1/d,scaleY:1/Q},at=N+2*2,q=Y+2*2,nt=R.getCanvas("mesh",at,q,!1),ft=nt.context,lt=ft.createImageData(N,Y);if(P){const H=lt.data;for(let v=0,C=H.length;v<C;v+=4)H[v]=P[0],H[v+1]=P[1],H[v+2]=P[2],H[v+3]=255}for(const H of this._figures)l(lt,H,pt);return ft.putImageData(lt,2,2),{canvas:nt.canvas,offsetX:I-2*d,offsetY:E-2*Q,scaleX:d,scaleY:Q}}getPattern(x,P,R,y){a(x,this._bbox);let F;if(y===r.SHADING)F=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(x));else if(F=i.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const I=i.Util.singularValueDecompose2dScale(this.matrix);F=[F[0]*I[0],F[1]*I[1]]}const B=this._createMeshCanvas(F,y===r.SHADING?null:this._background,P.cachedCanvases);return y!==r.SHADING&&(x.setTransform(...P.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(B.offsetX,B.offsetY),x.scale(B.scaleX,B.scaleY),x.createPattern(B.canvas,"no-repeat")}}class S extends h{getPattern(){return"hotpink"}}function u(_){switch(_[0]){case"RadialAxial":return new c(_);case"Mesh":return new b(_);case"Dummy":return new S}throw new Error(`Unknown IR type: ${_[0]}`)}const w={COLORED:1,UNCOLORED:2},m=class m{constructor(x,P,R,y,F){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=P,this.ctx=R,this.canvasGraphicsFactory=y,this.baseTransform=F}createPatternCanvas(x){const P=this.operatorList,R=this.bbox,y=this.xstep,F=this.ystep,B=this.paintType,I=this.tilingType,E=this.color,U=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+I);const z=R[0],N=R[1],Y=R[2],d=R[3],Q=i.Util.singularValueDecompose2dScale(this.matrix),pt=i.Util.singularValueDecompose2dScale(this.baseTransform),at=[Q[0]*pt[0],Q[1]*pt[1]],q=this.getSizeAndScale(y,this.ctx.canvas.width,at[0]),nt=this.getSizeAndScale(F,this.ctx.canvas.height,at[1]),ft=x.cachedCanvases.getCanvas("pattern",q.size,nt.size,!0),lt=ft.context,rt=U.createCanvasGraphics(lt);rt.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(rt,B,E);let H=z,v=N,C=Y,k=d;return z<0&&(H=0,C+=Math.abs(z)),N<0&&(v=0,k+=Math.abs(N)),lt.translate(-(q.scale*H),-(nt.scale*v)),rt.transform(q.scale,0,0,nt.scale,0,0),lt.save(),this.clipBbox(rt,H,v,C,k),rt.baseTransform=(0,s.getCurrentTransform)(rt.ctx),rt.executeOperatorList(P),rt.endDrawing(),{canvas:ft.canvas,scaleX:q.scale,scaleY:nt.scale,offsetX:H,offsetY:v}}getSizeAndScale(x,P,R){x=Math.abs(x);const y=Math.max(m.MAX_PATTERN_SIZE,P);let F=Math.ceil(x*R);return F>=y?F=y:R=F/x,{scale:R,size:F}}clipBbox(x,P,R,y,F){const B=y-P,I=F-R;x.ctx.rect(P,R,B,I),x.current.updateRectMinMax((0,s.getCurrentTransform)(x.ctx),[P,R,y,F]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,P,R){const y=x.ctx,F=x.current;switch(P){case w.COLORED:const B=this.ctx;y.fillStyle=B.fillStyle,y.strokeStyle=B.strokeStyle,F.fillColor=B.fillStyle,F.strokeColor=B.strokeStyle;break;case w.UNCOLORED:const I=i.Util.makeHexColor(R[0],R[1],R[2]);y.fillStyle=I,y.strokeStyle=I,F.fillColor=I,F.strokeColor=I;break;default:throw new i.FormatError(`Unsupported paint type: ${P}`)}}getPattern(x,P,R,y){let F=R;y!==r.SHADING&&(F=i.Util.transform(F,P.baseTransform),this.matrix&&(F=i.Util.transform(F,this.matrix)));const B=this.createPatternCanvas(P);let I=new DOMMatrix(F);I=I.translate(B.offsetX,B.offsetY),I=I.scale(1/B.scaleX,1/B.scaleY);const E=x.createPattern(B.canvas,"repeat");return E.setTransform(I),E}};ie(m,"MAX_PATTERN_SIZE",3e3);let g=m;e.TilingPattern=g},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=r,e.convertToRGBA=s,e.grayToRGBA=h;var i=n(1);function s(c){switch(c.kind){case i.ImageKind.GRAYSCALE_1BPP:return r(c);case i.ImageKind.RGB_24BPP:return a(c)}return null}function r({src:c,srcPos:f=0,dest:l,width:b,height:S,nonBlackColor:u=4294967295,inverseDecode:w=!1}){const g=i.FeatureTest.isLittleEndian?4278190080:255,[m,_]=w?[u,g]:[g,u],x=b>>3,P=b&7,R=c.length;l=new Uint32Array(l.buffer);let y=0;for(let F=0;F<S;F++){for(const I=f+x;f<I;f++){const E=f<R?c[f]:255;l[y++]=E&128?_:m,l[y++]=E&64?_:m,l[y++]=E&32?_:m,l[y++]=E&16?_:m,l[y++]=E&8?_:m,l[y++]=E&4?_:m,l[y++]=E&2?_:m,l[y++]=E&1?_:m}if(P===0)continue;const B=f<R?c[f++]:255;for(let I=0;I<P;I++)l[y++]=B&1<<7-I?_:m}return{srcPos:f,destPos:y}}function a({src:c,srcPos:f=0,dest:l,destPos:b=0,width:S,height:u}){let w=0;const g=c.length>>2,m=new Uint32Array(c.buffer,f,g);if(i.FeatureTest.isLittleEndian){for(;w<g-2;w+=3,b+=4){const _=m[w],x=m[w+1],P=m[w+2];l[b]=_|4278190080,l[b+1]=_>>>24|x<<8|4278190080,l[b+2]=x>>>16|P<<16|4278190080,l[b+3]=P>>>8|4278190080}for(let _=w*4,x=c.length;_<x;_+=3)l[b++]=c[_]|c[_+1]<<8|c[_+2]<<16|4278190080}else{for(;w<g-2;w+=3,b+=4){const _=m[w],x=m[w+1],P=m[w+2];l[b]=_|255,l[b+1]=_<<24|x>>>8|255,l[b+2]=x<<16|P>>>16|255,l[b+3]=P<<8|255}for(let _=w*4,x=c.length;_<x;_+=3)l[b++]=c[_]<<24|c[_+1]<<16|c[_+2]<<8|255}return{srcPos:f,destPos:b}}function h(c,f){if(i.FeatureTest.isLittleEndian)for(let l=0,b=c.length;l<b;l++)f[l]=c[l]*65793|4278190080;else for(let l=0,b=c.length;l<b;l++)f[l]=c[l]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{var c,Fn,l,On,S,Re;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=n(1);const s={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new i.AbortException(w.message);case"MissingPDFException":return new i.MissingPDFException(w.message);case"PasswordException":return new i.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new i.UnknownErrorException(w.message,w.details);default:return new i.UnknownErrorException(w.message,w.toString())}}class h{constructor(g,m,_){dt(this,c);dt(this,l);dt(this,S);this.sourceName=g,this.targetName=m,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const P=x.data;if(P.targetName!==this.sourceName)return;if(P.stream){bt(this,l,On).call(this,P);return}if(P.callback){const y=P.callbackId,F=this.callbackCapabilities[y];if(!F)throw new Error(`Cannot resolve callback ${y}`);if(delete this.callbackCapabilities[y],P.callback===s.DATA)F.resolve(P.data);else if(P.callback===s.ERROR)F.reject(a(P.reason));else throw new Error("Unexpected callback case");return}const R=this.actionHandler[P.action];if(!R)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const y=this.sourceName,F=P.sourceName;new Promise(function(B){B(R(P.data))}).then(function(B){_.postMessage({sourceName:y,targetName:F,callback:s.DATA,callbackId:P.callbackId,data:B})},function(B){_.postMessage({sourceName:y,targetName:F,callback:s.ERROR,callbackId:P.callbackId,reason:a(B)})});return}if(P.streamId){bt(this,c,Fn).call(this,P);return}R(P.data)},_.addEventListener("message",this._onComObjOnMessage)}on(g,m){const _=this.actionHandler;if(_[g])throw new Error(`There is already an actionName called "${g}"`);_[g]=m}send(g,m,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:m},_)}sendWithPromise(g,m,_){const x=this.callbackId++,P=new i.PromiseCapability;this.callbackCapabilities[x]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:x,data:m},_)}catch(R){P.reject(R)}return P.promise}sendWithStream(g,m,_,x){const P=this.streamId++,R=this.sourceName,y=this.targetName,F=this.comObj;return new ReadableStream({start:B=>{const I=new i.PromiseCapability;return this.streamControllers[P]={controller:B,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},F.postMessage({sourceName:R,targetName:y,action:g,streamId:P,data:m,desiredSize:B.desiredSize},x),I.promise},pull:B=>{const I=new i.PromiseCapability;return this.streamControllers[P].pullCall=I,F.postMessage({sourceName:R,targetName:y,stream:r.PULL,streamId:P,desiredSize:B.desiredSize}),I.promise},cancel:B=>{(0,i.assert)(B instanceof Error,"cancel must have a valid reason");const I=new i.PromiseCapability;return this.streamControllers[P].cancelCall=I,this.streamControllers[P].isClosed=!0,F.postMessage({sourceName:R,targetName:y,stream:r.CANCEL,streamId:P,reason:a(B)}),I.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}c=new WeakSet,Fn=function(g){const m=g.streamId,_=this.sourceName,x=g.sourceName,P=this.comObj,R=this,y=this.actionHandler[g.action],F={enqueue(B,I=1,E){if(this.isCancelled)return;const U=this.desiredSize;this.desiredSize-=I,U>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),P.postMessage({sourceName:_,targetName:x,stream:r.ENQUEUE,streamId:m,chunk:B},E)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:_,targetName:x,stream:r.CLOSE,streamId:m}),delete R.streamSinks[m])},error(B){(0,i.assert)(B instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:_,targetName:x,stream:r.ERROR,streamId:m,reason:a(B)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};F.sinkCapability.resolve(),F.ready=F.sinkCapability.promise,this.streamSinks[m]=F,new Promise(function(B){B(y(g.data,F))}).then(function(){P.postMessage({sourceName:_,targetName:x,stream:r.START_COMPLETE,streamId:m,success:!0})},function(B){P.postMessage({sourceName:_,targetName:x,stream:r.START_COMPLETE,streamId:m,reason:a(B)})})},l=new WeakSet,On=function(g){const m=g.streamId,_=this.sourceName,x=g.sourceName,P=this.comObj,R=this.streamControllers[m],y=this.streamSinks[m];switch(g.stream){case r.START_COMPLETE:g.success?R.startCall.resolve():R.startCall.reject(a(g.reason));break;case r.PULL_COMPLETE:g.success?R.pullCall.resolve():R.pullCall.reject(a(g.reason));break;case r.PULL:if(!y){P.postMessage({sourceName:_,targetName:x,stream:r.PULL_COMPLETE,streamId:m,success:!0});break}y.desiredSize<=0&&g.desiredSize>0&&y.sinkCapability.resolve(),y.desiredSize=g.desiredSize,new Promise(function(F){var B;F((B=y.onPull)==null?void 0:B.call(y))}).then(function(){P.postMessage({sourceName:_,targetName:x,stream:r.PULL_COMPLETE,streamId:m,success:!0})},function(F){P.postMessage({sourceName:_,targetName:x,stream:r.PULL_COMPLETE,streamId:m,reason:a(F)})});break;case r.ENQUEUE:if((0,i.assert)(R,"enqueue should have stream controller"),R.isClosed)break;R.controller.enqueue(g.chunk);break;case r.CLOSE:if((0,i.assert)(R,"close should have stream controller"),R.isClosed)break;R.isClosed=!0,R.controller.close(),bt(this,S,Re).call(this,R,m);break;case r.ERROR:(0,i.assert)(R,"error should have stream controller"),R.controller.error(a(g.reason)),bt(this,S,Re).call(this,R,m);break;case r.CANCEL_COMPLETE:g.success?R.cancelCall.resolve():R.cancelCall.reject(a(g.reason)),bt(this,S,Re).call(this,R,m);break;case r.CANCEL:if(!y)break;new Promise(function(F){var B;F((B=y.onCancel)==null?void 0:B.call(y,a(g.reason)))}).then(function(){P.postMessage({sourceName:_,targetName:x,stream:r.CANCEL_COMPLETE,streamId:m,success:!0})},function(F){P.postMessage({sourceName:_,targetName:x,stream:r.CANCEL_COMPLETE,streamId:m,reason:a(F)})}),y.sinkCapability.reject(a(g.reason)),y.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}},S=new WeakSet,Re=async function(g,m){var _,x,P;await Promise.allSettled([(_=g.startCall)==null?void 0:_.promise,(x=g.pullCall)==null?void 0:x.promise,(P=g.cancelCall)==null?void 0:P.promise]),delete this.streamControllers[m]},e.MessageHandler=h},(t,e,n)=>{var r,a;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(1);class s{constructor({parsedData:c,rawData:f}){dt(this,r,void 0);dt(this,a,void 0);St(this,r,c),St(this,a,f)}getRaw(){return A(this,a)}get(c){return A(this,r).get(c)??null}getAll(){return(0,i.objectFromMap)(A(this,r))}has(c){return A(this,r).has(c)}}r=new WeakMap,a=new WeakMap,e.Metadata=s},(t,e,n)=>{var c,f,l,b,S,u,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=n(1),s=n(8);const r=Symbol("INTERNAL");class a{constructor(m,_){dt(this,c,!0);this.name=m,this.intent=_}get visible(){return A(this,c)}_setVisible(m,_){m!==r&&(0,i.unreachable)("Internal method `_setVisible` called."),St(this,c,_)}}c=new WeakMap;class h{constructor(m){dt(this,u);dt(this,f,null);dt(this,l,new Map);dt(this,b,null);dt(this,S,null);if(this.name=null,this.creator=null,m!==null){this.name=m.name,this.creator=m.creator,St(this,S,m.order);for(const _ of m.groups)A(this,l).set(_.id,new a(_.name,_.intent));if(m.baseState==="OFF")for(const _ of A(this,l).values())_._setVisible(r,!1);for(const _ of m.on)A(this,l).get(_)._setVisible(r,!0);for(const _ of m.off)A(this,l).get(_)._setVisible(r,!1);St(this,b,this.getHash())}}isVisible(m){if(A(this,l).size===0)return!0;if(!m)return(0,i.warn)("Optional content group not defined."),!0;if(m.type==="OCG")return A(this,l).has(m.id)?A(this,l).get(m.id).visible:((0,i.warn)(`Optional content group not found: ${m.id}`),!0);if(m.type==="OCMD"){if(m.expression)return bt(this,u,nn).call(this,m.expression);if(!m.policy||m.policy==="AnyOn"){for(const _ of m.ids){if(!A(this,l).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(A(this,l).get(_).visible)return!0}return!1}else if(m.policy==="AllOn"){for(const _ of m.ids){if(!A(this,l).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(!A(this,l).get(_).visible)return!1}return!0}else if(m.policy==="AnyOff"){for(const _ of m.ids){if(!A(this,l).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(!A(this,l).get(_).visible)return!0}return!1}else if(m.policy==="AllOff"){for(const _ of m.ids){if(!A(this,l).has(_))return(0,i.warn)(`Optional content group not found: ${_}`),!0;if(A(this,l).get(_).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${m.policy}.`),!0}return(0,i.warn)(`Unknown group type ${m.type}.`),!0}setVisibility(m,_=!0){if(!A(this,l).has(m)){(0,i.warn)(`Optional content group not found: ${m}`);return}A(this,l).get(m)._setVisible(r,!!_),St(this,f,null)}get hasInitialVisibility(){return A(this,b)===null||this.getHash()===A(this,b)}getOrder(){return A(this,l).size?A(this,S)?A(this,S).slice():[...A(this,l).keys()]:null}getGroups(){return A(this,l).size>0?(0,i.objectFromMap)(A(this,l)):null}getGroup(m){return A(this,l).get(m)||null}getHash(){if(A(this,f)!==null)return A(this,f);const m=new s.MurmurHash3_64;for(const[_,x]of A(this,l))m.update(`${_}:${x.visible}`);return St(this,f,m.hexdigest())}}f=new WeakMap,l=new WeakMap,b=new WeakMap,S=new WeakMap,u=new WeakSet,nn=function(m){const _=m.length;if(_<2)return!0;const x=m[0];for(let P=1;P<_;P++){const R=m[P];let y;if(Array.isArray(R))y=bt(this,u,nn).call(this,R);else if(A(this,l).has(R))y=A(this,l).get(R).visible;else return(0,i.warn)(`Optional content group not found: ${R}`),!0;switch(x){case"And":if(!y)return!1;break;case"Or":if(y)return!0;break;case"Not":return!y;default:return!0}}return x==="And"},e.OptionalContentConfig=h},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=n(1),s=n(6);class r{constructor({length:f,initialData:l,progressiveDone:b=!1,contentDispositionFilename:S=null,disableRange:u=!1,disableStream:w=!1},g){if((0,i.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=b,this._contentDispositionFilename=S,(l==null?void 0:l.length)>0){const m=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!w,this._isRangeSupported=!u,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,_)=>{this._onReceiveData({begin:m,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((m,_)=>{this._onProgress({loaded:m,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:f,chunk:l}){const b=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(f===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(b):this._queuedChunks.push(b);else{const S=this._rangeReaders.some(function(u){return u._begin!==f?!1:(u._enqueue(b),!0)});(0,i.assert)(S,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}_onProgress(f){var l,b,S,u;f.total===void 0?(b=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||b.call(l,{loaded:f.loaded}):(u=(S=this._fullRequestReader)==null?void 0:S.onProgress)==null||u.call(S,{loaded:f.loaded,total:f.total})}_onProgressiveDone(){var f;(f=this._fullRequestReader)==null||f.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const l=this._rangeReaders.indexOf(f);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new a(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,l){if(l<=this._progressiveDataLength)return null;const b=new h(this,f,l);return this._pdfDataRangeTransport.requestDataRange(f,l),this._rangeReaders.push(b),b}cancelAllRequests(f){var l;(l=this._fullRequestReader)==null||l.cancel(f);for(const b of this._rangeReaders.slice(0))b.cancel(f);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=r;class a{constructor(f,l,b=!1,S=null){this._stream=f,this._done=b||!1,this._filename=(0,s.isPdfFile)(S)?S:null,this._queuedChunks=l||[],this._loaded=0;for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=new i.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class h{constructor(f,l,b){this._stream=f,this._begin=l,this._end=b,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const f=new i.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=n(1),s=n(20);function r(b,S,u){return{method:"GET",headers:b,signal:u.signal,mode:"cors",credentials:S?"include":"same-origin",redirect:"follow"}}function a(b){const S=new Headers;for(const u in b){const w=b[u];w!==void 0&&S.append(u,w)}return S}function h(b){return b instanceof Uint8Array?b.buffer:b instanceof ArrayBuffer?b:((0,i.warn)(`getArrayBuffer - unexpected data format: ${b}`),new Uint8Array(b).buffer)}class c{constructor(S){this.source=S,this.isHttp=/^https?:/i.test(S.url),this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f(this),this._fullRequestReader}getRangeReader(S,u){if(u<=this._progressiveDataLength)return null;const w=new l(this,S,u);return this._rangeRequestReaders.push(w),w}cancelAllRequests(S){var u;(u=this._fullRequestReader)==null||u.cancel(S);for(const w of this._rangeRequestReaders.slice(0))w.cancel(S)}}e.PDFFetchStream=c;class f{constructor(S){this._stream=S,this._reader=null,this._loaded=0,this._filename=null;const u=S.source;this._withCredentials=u.withCredentials||!1,this._contentLength=u.length,this._headersCapability=new i.PromiseCapability,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._headers=a(this._stream.httpHeaders);const w=u.url;fetch(w,r(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,s.validateResponseStatus)(g.status))throw(0,s.createResponseStatusError)(g.status,w);this._reader=g.body.getReader(),this._headersCapability.resolve();const m=P=>g.headers.get(P),{allowRangeRequests:_,suggestedLength:x}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=x||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._headersCapability.promise;const{value:S,done:u}=await this._reader.read();return u?{value:S,done:u}:(this._loaded+=S.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h(S),done:!1})}cancel(S){var u;(u=this._reader)==null||u.cancel(S),this._abortController.abort()}}class l{constructor(S,u,w){this._stream=S,this._reader=null,this._loaded=0;const g=S.source;this._withCredentials=g.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!g.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${u}-${w-1}`);const m=g.url;fetch(m,r(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,s.validateResponseStatus)(_.status))throw(0,s.createResponseStatusError)(_.status,m);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._readCapability.promise;const{value:S,done:u}=await this._reader.read();return u?{value:S,done:u}:(this._loaded+=S.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:h(S),done:!1})}cancel(S){var u;(u=this._reader)==null||u.cancel(S),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=c,e.extractFilenameFromHeader=h,e.validateRangeRequestCapabilities=a,e.validateResponseStatus=f;var i=n(1),s=n(21),r=n(6);function a({getResponseHeader:l,isHttp:b,rangeChunkSize:S,disableRange:u}){const w={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(l("Content-Length"),10);return!Number.isInteger(g)||(w.suggestedLength=g,g<=2*S)||u||!b||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(w.allowRangeRequests=!0),w}function h(l){const b=l("Content-Disposition");if(b){let S=(0,s.getFilenameFromContentDispositionHeader)(b);if(S.includes("%"))try{S=decodeURIComponent(S)}catch{}if((0,r.isPdfFile)(S))return S}return null}function c(l,b){return l===404||l===0&&b.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+b+'".'):new i.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${b}".`,l)}function f(l){return l===200||l===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=s;var i=n(1);function s(r){let a=!0,h=c("filename\\*","i").exec(r);if(h){h=h[1];let g=S(h);return g=unescape(g),g=u(g),g=w(g),l(g)}if(h=b(r),h){const g=w(h);return l(g)}if(h=c("filename","i").exec(r),h){h=h[1];let g=S(h);return g=w(g),l(g)}function c(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function f(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const _=new TextDecoder(g,{fatal:!0}),x=(0,i.stringToBytes)(m);m=_.decode(x),a=!1}catch{}}return m}function l(g){return a&&/[\x80-\xff]/.test(g)&&(g=f("utf-8",g),a&&(g=f("iso-8859-1",g))),g}function b(g){const m=[];let _;const x=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=x.exec(g))!==null;){let[,R,y,F]=_;if(R=parseInt(R,10),R in m){if(R===0)break;continue}m[R]=[y,F]}const P=[];for(let R=0;R<m.length&&R in m;++R){let[y,F]=m[R];F=S(F),y&&(F=unescape(F),R===0&&(F=u(F))),P.push(F)}return P.join("")}function S(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let _=0;_<m.length;++_){const x=m[_].indexOf('"');x!==-1&&(m[_]=m[_].slice(0,x),m.length=_+1),m[_]=m[_].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function u(g){const m=g.indexOf("'");if(m===-1)return g;const _=g.slice(0,m),P=g.slice(m+1).replace(/^[^']*'/,"");return f(_,P)}function w(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,_,x,P){if(x==="q"||x==="Q")return P=P.replaceAll("_"," "),P=P.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,y){return String.fromCharCode(parseInt(y,16))}),f(_,P);try{P=atob(P)}catch{}return f(_,P)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=n(1),s=n(20);const r=200,a=206;function h(S){const u=S.response;return typeof u!="string"?u:(0,i.stringToBytes)(u).buffer}class c{constructor(u,w={}){this.url=u,this.isHttp=/^https?:/i.test(u),this.httpHeaders=this.isHttp&&w.httpHeaders||Object.create(null),this.withCredentials=w.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(u,w,g){const m={begin:u,end:w};for(const _ in g)m[_]=g[_];return this.request(m)}requestFull(u){return this.request(u)}request(u){const w=new XMLHttpRequest,g=this.currXhrId++,m=this.pendingRequests[g]={xhr:w};w.open("GET",this.url),w.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const x=this.httpHeaders[_];x!==void 0&&w.setRequestHeader(_,x)}return this.isHttp&&"begin"in u&&"end"in u?(w.setRequestHeader("Range",`bytes=${u.begin}-${u.end-1}`),m.expectedStatus=a):m.expectedStatus=r,w.responseType="arraybuffer",u.onError&&(w.onerror=function(_){u.onError(w.status)}),w.onreadystatechange=this.onStateChange.bind(this,g),w.onprogress=this.onProgress.bind(this,g),m.onHeadersReceived=u.onHeadersReceived,m.onDone=u.onDone,m.onError=u.onError,m.onProgress=u.onProgress,w.send(null),g}onProgress(u,w){var m;const g=this.pendingRequests[u];g&&((m=g.onProgress)==null||m.call(g,w))}onStateChange(u,w){var R,y,F;const g=this.pendingRequests[u];if(!g)return;const m=g.xhr;if(m.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),m.readyState!==4||!(u in this.pendingRequests))return;if(delete this.pendingRequests[u],m.status===0&&this.isHttp){(R=g.onError)==null||R.call(g,m.status);return}const _=m.status||r;if(!(_===r&&g.expectedStatus===a)&&_!==g.expectedStatus){(y=g.onError)==null||y.call(g,m.status);return}const P=h(m);if(_===a){const B=m.getResponseHeader("Content-Range"),I=/bytes (\d+)-(\d+)\/(\d+)/.exec(B);g.onDone({begin:parseInt(I[1],10),chunk:P})}else P?g.onDone({begin:0,chunk:P}):(F=g.onError)==null||F.call(g,m.status)}getRequestXhr(u){return this.pendingRequests[u].xhr}isPendingRequest(u){return u in this.pendingRequests}abortRequest(u){const w=this.pendingRequests[u].xhr;delete this.pendingRequests[u],w.abort()}}class f{constructor(u){this._source=u,this._manager=new c(u.url,{httpHeaders:u.httpHeaders,withCredentials:u.withCredentials}),this._rangeChunkSize=u.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(u){const w=this._rangeRequestReaders.indexOf(u);w>=0&&this._rangeRequestReaders.splice(w,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(u,w){const g=new b(this._manager,u,w);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(u){var w;(w=this._fullRequestReader)==null||w.cancel(u);for(const g of this._rangeRequestReaders.slice(0))g.cancel(u)}}e.PDFNetworkStream=f;class l{constructor(u,w){this._manager=u;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._fullRequestId=u.requestFull(g),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=w.disableRange||!1,this._contentLength=w.length,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const u=this._fullRequestId,w=this._manager.getRequestXhr(u),g=x=>w.getResponseHeader(x),{allowRangeRequests:m,suggestedLength:_}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});m&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(u),this._headersReceivedCapability.resolve()}_onDone(u){if(u&&(this._requests.length>0?this._requests.shift().resolve({value:u.chunk,done:!1}):this._cachedChunks.push(u.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(u){this._storedError=(0,s.createResponseStatusError)(u,this._url),this._headersReceivedCapability.reject(this._storedError);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(u){var w;(w=this.onProgress)==null||w.call(this,{loaded:u.loaded,total:u.lengthComputable?u.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new i.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0,this._headersReceivedCapability.reject(u);for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(u,w,g){this._manager=u;const m={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=u.url,this._requestId=u.requestRange(w,g,m),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var u;(u=this.onClosed)==null||u.call(this,this)}_onDone(u){const w=u.chunk;this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunk=w,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(u){this._storedError=(0,s.createResponseStatusError)(u,this._url);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(u){var w;this.isStreamingSupported||(w=this.onProgress)==null||w.call(this,{loaded:u.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new i.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=n(1),s=n(20);const r=/^file:\/\/\/[a-zA-Z]:\//;function a(g){const m=require$$5,_=m.parse(g);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(g)?m.parse(`file:///${g}`):(_.host||(_.protocol="file:"),_)}class h{constructor(m){this.source=m,this.url=a(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new b(this),this._fullRequestReader}getRangeReader(m,_){if(_<=this._progressiveDataLength)return null;const x=this.isFsUrl?new w(this,m,_):new S(this,m,_);return this._rangeRequestReaders.push(x),x}cancelAllRequests(m){var _;(_=this._fullRequestReader)==null||_.cancel(m);for(const x of this._rangeRequestReaders.slice(0))x.cancel(m)}}e.PDFNodeStream=h;class c{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=m.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const _=m.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(g,m){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:m}}class b extends c{constructor(m){super(m);const _=x=>{if(x.statusCode===404){const F=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=F,this._headersCapability.reject(F);return}this._headersCapability.resolve(),this._setReadableStream(x);const P=F=>this._readableStream.headers[F.toLowerCase()],{allowRangeRequests:R,suggestedLength:y}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=y||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(P)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(l(this._url,m.httpHeaders),_)}else{const x=require$$5;this._request=x.request(l(this._url,m.httpHeaders),_)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class S extends f{constructor(m,_,x){super(m),this._httpHeaders={};for(const R in m.httpHeaders){const y=m.httpHeaders[R];y!==void 0&&(this._httpHeaders[R]=y)}this._httpHeaders.Range=`bytes=${_}-${x-1}`;const P=R=>{if(R.statusCode===404){const y=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=y;return}this._setReadableStream(R)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(l(this._url,this._httpHeaders),P)}else{const R=require$$5;this._request=R.request(l(this._url,this._httpHeaders),P)}this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class u extends c{constructor(m){super(m);let _=decodeURIComponent(this._url.path);r.test(this._url.href)&&(_=_.replace(/^\//,""));const x=require$$5;x.lstat(_,(P,R)=>{if(P){P.code==="ENOENT"&&(P=new i.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=P,this._headersCapability.reject(P);return}this._contentLength=R.size,this._setReadableStream(x.createReadStream(_)),this._headersCapability.resolve()})}}class w extends f{constructor(m,_,x){super(m);let P=decodeURIComponent(this._url.path);r.test(this._url.href)&&(P=P.replace(/^\//,""));const R=require$$5;this._setReadableStream(R.createReadStream(P,{start:_,end:x-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=n(6),s=n(1);const r={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},a="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",c=["butt","round","square"],f=["miter","round","bevel"],l=function(R,y="",F=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!F)return URL.createObjectURL(new Blob([R],{type:y}));const B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let I=`data:${y};base64,`;for(let E=0,U=R.length;E<U;E+=3){const z=R[E]&255,N=R[E+1]&255,Y=R[E+2]&255,d=z>>2,Q=(z&3)<<4|N>>4,pt=E+1<U?(N&15)<<2|Y>>6:64,at=E+2<U?Y&63:64;I+=B[d]+B[Q]+B[pt]+B[at]}return I},b=function(){const R=new Uint8Array([137,80,78,71,13,10,26,10]),y=12,F=new Int32Array(256);for(let Y=0;Y<256;Y++){let d=Y;for(let Q=0;Q<8;Q++)d=d&1?3988292384^d>>1&2147483647:d>>1&2147483647;F[Y]=d}function B(Y,d,Q){let pt=-1;for(let at=d;at<Q;at++){const q=(pt^Y[at])&255,nt=F[q];pt=pt>>>8^nt}return pt^-1}function I(Y,d,Q,pt){let at=pt;const q=d.length;Q[at]=q>>24&255,Q[at+1]=q>>16&255,Q[at+2]=q>>8&255,Q[at+3]=q&255,at+=4,Q[at]=Y.charCodeAt(0)&255,Q[at+1]=Y.charCodeAt(1)&255,Q[at+2]=Y.charCodeAt(2)&255,Q[at+3]=Y.charCodeAt(3)&255,at+=4,Q.set(d,at),at+=d.length;const nt=B(Q,pt+4,at);Q[at]=nt>>24&255,Q[at+1]=nt>>16&255,Q[at+2]=nt>>8&255,Q[at+3]=nt&255}function E(Y,d,Q){let pt=1,at=0;for(let q=d;q<Q;++q)pt=(pt+(Y[q]&255))%65521,at=(at+pt)%65521;return at<<16|pt}function U(Y){if(!s.isNodeJS)return z(Y);try{const d=parseInt(process.versions.node)>=8?Y:Buffer.from(Y),Q=require$$5.deflateSync(d,{level:9});return Q instanceof Uint8Array?Q:new Uint8Array(Q)}catch(d){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+d)}return z(Y)}function z(Y){let d=Y.length;const Q=65535,pt=Math.ceil(d/Q),at=new Uint8Array(2+d+pt*5+4);let q=0;at[q++]=120,at[q++]=156;let nt=0;for(;d>Q;)at[q++]=0,at[q++]=255,at[q++]=255,at[q++]=0,at[q++]=0,at.set(Y.subarray(nt,nt+Q),q),q+=Q,nt+=Q,d-=Q;at[q++]=1,at[q++]=d&255,at[q++]=d>>8&255,at[q++]=~d&65535&255,at[q++]=(~d&65535)>>8&255,at.set(Y.subarray(nt),q),q+=Y.length-nt;const ft=E(Y,0,Y.length);return at[q++]=ft>>24&255,at[q++]=ft>>16&255,at[q++]=ft>>8&255,at[q++]=ft&255,at}function N(Y,d,Q,pt){const at=Y.width,q=Y.height;let nt,ft,lt;const rt=Y.data;switch(d){case s.ImageKind.GRAYSCALE_1BPP:ft=0,nt=1,lt=at+7>>3;break;case s.ImageKind.RGB_24BPP:ft=2,nt=8,lt=at*3;break;case s.ImageKind.RGBA_32BPP:ft=6,nt=8,lt=at*4;break;default:throw new Error("invalid format")}const H=new Uint8Array((1+lt)*q);let v=0,C=0;for(let ot=0;ot<q;++ot)H[v++]=0,H.set(rt.subarray(C,C+lt),v),C+=lt,v+=lt;if(d===s.ImageKind.GRAYSCALE_1BPP&&pt){v=0;for(let ot=0;ot<q;ot++){v++;for(let vt=0;vt<lt;vt++)H[v++]^=255}}const k=new Uint8Array([at>>24&255,at>>16&255,at>>8&255,at&255,q>>24&255,q>>16&255,q>>8&255,q&255,nt,ft,0,0,0]),M=U(H),L=R.length+y*3+k.length+M.length,V=new Uint8Array(L);let et=0;return V.set(R,et),et+=R.length,I("IHDR",k,V,et),et+=y+k.length,I("IDATA",M,V,et),et+=y+M.length,I("IEND",new Uint8Array(0),V,et),l(V,"image/png",Q)}return function(d,Q,pt){const at=d.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:d.kind;return N(d,at,Q,pt)}}();class S{constructor(){this.fontSizeScale=1,this.fontWeight=r.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=r.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(y,F){this.x=y,this.y=F}}function u(R){let y=[];const F=[];for(const B of R){if(B.fn==="save"){y.push({fnId:92,fn:"group",items:[]}),F.push(y),y=y.at(-1).items;continue}B.fn==="restore"?y=F.pop():y.push(B)}return y}function w(R){if(Number.isInteger(R))return R.toString();const y=R.toFixed(10);let F=y.length-1;if(y[F]!=="0")return y;do F--;while(y[F]==="0");return y.substring(0,y[F]==="."?F:F+1)}function g(R){if(R[4]===0&&R[5]===0){if(R[1]===0&&R[2]===0)return R[0]===1&&R[3]===1?"":`scale(${w(R[0])} ${w(R[3])})`;if(R[0]===R[3]&&R[1]===-R[2]){const y=Math.acos(R[0])*180/Math.PI;return`rotate(${w(y)})`}}else if(R[0]===1&&R[1]===0&&R[2]===0&&R[3]===1)return`translate(${w(R[4])} ${w(R[5])})`;return`matrix(${w(R[0])} ${w(R[1])} ${w(R[2])} ${w(R[3])} ${w(R[4])} ${w(R[5])})`}let m=0,_=0,x=0;class P{constructor(y,F,B=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new S,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=y,this.objs=F,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!B,this._operatorIdMapping=[];for(const I in s.OPS)this._operatorIdMapping[s.OPS[I]]=I}getObject(y,F=null){return typeof y=="string"?y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y):F}save(){this.transformStack.push(this.transformMatrix);const y=this.current;this.extraStack.push(y),this.current=y.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(y){this.save(),this.executeOpTree(y),this.restore()}loadDependencies(y){const F=y.fnArray,B=y.argsArray;for(let I=0,E=F.length;I<E;I++)if(F[I]===s.OPS.dependency)for(const U of B[I]){const z=U.startsWith("g_")?this.commonObjs:this.objs,N=new Promise(Y=>{z.get(U,Y)});this.current.dependencies.push(N)}return Promise.all(this.current.dependencies)}transform(y,F,B,I,E,U){const z=[y,F,B,I,E,U];this.transformMatrix=s.Util.transform(this.transformMatrix,z),this.tgrp=null}getSVG(y,F){this.viewport=F;const B=this._initialize(F);return this.loadDependencies(y).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(y)),B))}convertOpList(y){const F=this._operatorIdMapping,B=y.argsArray,I=y.fnArray,E=[];for(let U=0,z=I.length;U<z;U++){const N=I[U];E.push({fnId:N,fn:F[N],args:B[U]})}return u(E)}executeOpTree(y){for(const F of y){const B=F.fn,I=F.fnId,E=F.args;switch(I|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(E);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case s.OPS.setFont:this.setFont(E);break;case s.OPS.showText:this.showText(E[0]);break;case s.OPS.showSpacedText:this.showText(E[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(E[0],E[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case s.OPS.setHScale:this.setHScale(E[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case s.OPS.setTextRise:this.setTextRise(E[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case s.OPS.setLineWidth:this.setLineWidth(E[0]);break;case s.OPS.setLineJoin:this.setLineJoin(E[0]);break;case s.OPS.setLineCap:this.setLineCap(E[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case s.OPS.setFillColorN:this.setFillColorN(E);break;case s.OPS.shadingFill:this.shadingFill(E[0]);break;case s.OPS.setDash:this.setDash(E[0],E[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case s.OPS.setFlatness:this.setFlatness(E[0]);break;case s.OPS.setGState:this.setGState(E[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case s.OPS.constructPath:this.constructPath(E[0],E[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(F.items);break;default:(0,s.warn)(`Unimplemented operator ${B}`);break}}}setWordSpacing(y){this.current.wordSpacing=y}setCharSpacing(y){this.current.charSpacing=y}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(y,F,B,I,E,U){const z=this.current;z.textMatrix=z.lineMatrix=[y,F,B,I,E,U],z.textMatrixScale=Math.hypot(y,F),z.x=z.lineX=0,z.y=z.lineY=0,z.xcoords=[],z.ycoords=[],z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${w(z.fontSize)}px`),z.tspan.setAttributeNS(null,"y",w(-z.y)),z.txtElement=this.svgFactory.createElement("svg:text"),z.txtElement.append(z.tspan)}beginText(){const y=this.current;y.x=y.lineX=0,y.y=y.lineY=0,y.textMatrix=s.IDENTITY_MATRIX,y.lineMatrix=s.IDENTITY_MATRIX,y.textMatrixScale=1,y.tspan=this.svgFactory.createElement("svg:tspan"),y.txtElement=this.svgFactory.createElement("svg:text"),y.txtgrp=this.svgFactory.createElement("svg:g"),y.xcoords=[],y.ycoords=[]}moveText(y,F){const B=this.current;B.x=B.lineX+=y,B.y=B.lineY+=F,B.xcoords=[],B.ycoords=[],B.tspan=this.svgFactory.createElement("svg:tspan"),B.tspan.setAttributeNS(null,"font-family",B.fontFamily),B.tspan.setAttributeNS(null,"font-size",`${w(B.fontSize)}px`),B.tspan.setAttributeNS(null,"y",w(-B.y))}showText(y){const F=this.current,B=F.font,I=F.fontSize;if(I===0)return;const E=F.fontSizeScale,U=F.charSpacing,z=F.wordSpacing,N=F.fontDirection,Y=F.textHScale*N,d=B.vertical,Q=d?1:-1,pt=B.defaultVMetrics,at=I*F.fontMatrix[0];let q=0;for(const lt of y){if(lt===null){q+=N*z;continue}else if(typeof lt=="number"){q+=Q*lt*I/1e3;continue}const rt=(lt.isSpace?z:0)+U,H=lt.fontChar;let v,C,k=lt.width;if(d){let L;const V=lt.vmetric||pt;L=lt.vmetric?V[1]:k*.5,L=-L*at;const et=V[2]*at;k=V?-V[0]:k,v=L/E,C=(q+et)/E}else v=q/E,C=0;(lt.isInFont||B.missingFile)&&(F.xcoords.push(F.x+v),d&&F.ycoords.push(-F.y+C),F.tspan.textContent+=H);const M=d?k*at-rt*N:k*at+rt*N;q+=M}F.tspan.setAttributeNS(null,"x",F.xcoords.map(w).join(" ")),d?F.tspan.setAttributeNS(null,"y",F.ycoords.map(w).join(" ")):F.tspan.setAttributeNS(null,"y",w(-F.y)),d?F.y-=q:F.x+=q*Y,F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${w(F.fontSize)}px`),F.fontStyle!==r.fontStyle&&F.tspan.setAttributeNS(null,"font-style",F.fontStyle),F.fontWeight!==r.fontWeight&&F.tspan.setAttributeNS(null,"font-weight",F.fontWeight);const nt=F.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(nt===s.TextRenderingMode.FILL||nt===s.TextRenderingMode.FILL_STROKE?(F.fillColor!==r.fillColor&&F.tspan.setAttributeNS(null,"fill",F.fillColor),F.fillAlpha<1&&F.tspan.setAttributeNS(null,"fill-opacity",F.fillAlpha)):F.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?F.tspan.setAttributeNS(null,"fill","transparent"):F.tspan.setAttributeNS(null,"fill","none"),nt===s.TextRenderingMode.STROKE||nt===s.TextRenderingMode.FILL_STROKE){const lt=1/(F.textMatrixScale||1);this._setStrokeAttributes(F.tspan,lt)}let ft=F.textMatrix;F.textRise!==0&&(ft=ft.slice(),ft[5]+=F.textRise),F.txtElement.setAttributeNS(null,"transform",`${g(ft)} scale(${w(Y)}, -1)`),F.txtElement.setAttributeNS(a,"xml:space","preserve"),F.txtElement.append(F.tspan),F.txtgrp.append(F.txtElement),this._ensureTransformGroup().append(F.txtElement)}setLeadingMoveText(y,F){this.setLeading(-F),this.moveText(y,F)}addFontStyle(y){if(!y.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const F=l(y.data,y.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${y.loadedName}"; src: url(${F}); }
`}setFont(y){const F=this.current,B=this.commonObjs.get(y[0]);let I=y[1];F.font=B,this.embedFonts&&!B.missingFile&&!this.embeddedFonts[B.loadedName]&&(this.addFontStyle(B),this.embeddedFonts[B.loadedName]=B),F.fontMatrix=B.fontMatrix||s.FONT_IDENTITY_MATRIX;let E="normal";B.black?E="900":B.bold&&(E="bold");const U=B.italic?"italic":"normal";I<0?(I=-I,F.fontDirection=-1):F.fontDirection=1,F.fontSize=I,F.fontFamily=B.loadedName,F.fontWeight=E,F.fontStyle=U,F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"y",w(-F.y)),F.xcoords=[],F.ycoords=[]}endText(){var F;const y=this.current;y.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((F=y.txtElement)!=null&&F.hasChildNodes())&&(y.element=y.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(y){y>0&&(this.current.lineWidth=y)}setLineCap(y){this.current.lineCap=c[y]}setLineJoin(y){this.current.lineJoin=f[y]}setMiterLimit(y){this.current.miterLimit=y}setStrokeAlpha(y){this.current.strokeAlpha=y}setStrokeRGBColor(y,F,B){this.current.strokeColor=s.Util.makeHexColor(y,F,B)}setFillAlpha(y){this.current.fillAlpha=y}setFillRGBColor(y,F,B){this.current.fillColor=s.Util.makeHexColor(y,F,B),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(y){this.current.strokeColor=this._makeColorN_Pattern(y)}setFillColorN(y){this.current.fillColor=this._makeColorN_Pattern(y)}shadingFill(y){const{width:F,height:B}=this.viewport,I=s.Util.inverseTransform(this.transformMatrix),[E,U,z,N]=s.Util.getAxialAlignedBoundingBox([0,0,F,B],I),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x",E),Y.setAttributeNS(null,"y",U),Y.setAttributeNS(null,"width",z-E),Y.setAttributeNS(null,"height",N-U),Y.setAttributeNS(null,"fill",this._makeShadingPattern(y)),this.current.fillAlpha<1&&Y.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Y)}_makeColorN_Pattern(y){return y[0]==="TilingPattern"?this._makeTilingPattern(y):this._makeShadingPattern(y)}_makeTilingPattern(y){const F=y[1],B=y[2],I=y[3]||s.IDENTITY_MATRIX,[E,U,z,N]=y[4],Y=y[5],d=y[6],Q=y[7],pt=`shading${x++}`,[at,q,nt,ft]=s.Util.normalizeRect([...s.Util.applyTransform([E,U],I),...s.Util.applyTransform([z,N],I)]),[lt,rt]=s.Util.singularValueDecompose2dScale(I),H=Y*lt,v=d*rt,C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",pt),C.setAttributeNS(null,"patternUnits","userSpaceOnUse"),C.setAttributeNS(null,"width",H),C.setAttributeNS(null,"height",v),C.setAttributeNS(null,"x",`${at}`),C.setAttributeNS(null,"y",`${q}`);const k=this.svg,M=this.transformMatrix,L=this.current.fillColor,V=this.current.strokeColor,et=this.svgFactory.create(nt-at,ft-q);if(this.svg=et,this.transformMatrix=I,Q===2){const ot=s.Util.makeHexColor(...F);this.current.fillColor=ot,this.current.strokeColor=ot}return this.executeOpTree(this.convertOpList(B)),this.svg=k,this.transformMatrix=M,this.current.fillColor=L,this.current.strokeColor=V,C.append(et.childNodes[0]),this.defs.append(C),`url(#${pt})`}_makeShadingPattern(y){switch(typeof y=="string"&&(y=this.objs.get(y)),y[0]){case"RadialAxial":const F=`shading${x++}`,B=y[3];let I;switch(y[1]){case"axial":const E=y[4],U=y[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",F),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",E[0]),I.setAttributeNS(null,"y1",E[1]),I.setAttributeNS(null,"x2",U[0]),I.setAttributeNS(null,"y2",U[1]);break;case"radial":const z=y[4],N=y[5],Y=y[6],d=y[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",F),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",N[0]),I.setAttributeNS(null,"cy",N[1]),I.setAttributeNS(null,"r",d),I.setAttributeNS(null,"fx",z[0]),I.setAttributeNS(null,"fy",z[1]),I.setAttributeNS(null,"fr",Y);break;default:throw new Error(`Unknown RadialAxial type: ${y[1]}`)}for(const E of B){const U=this.svgFactory.createElement("svg:stop");U.setAttributeNS(null,"offset",E[0]),U.setAttributeNS(null,"stop-color",E[1]),I.append(U)}return this.defs.append(I),`url(#${F})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${y[0]}`)}}setDash(y,F){this.current.dashArray=y,this.current.dashPhase=F}constructPath(y,F){const B=this.current;let I=B.x,E=B.y,U=[],z=0;for(const N of y)switch(N|0){case s.OPS.rectangle:I=F[z++],E=F[z++];const Y=F[z++],d=F[z++],Q=I+Y,pt=E+d;U.push("M",w(I),w(E),"L",w(Q),w(E),"L",w(Q),w(pt),"L",w(I),w(pt),"Z");break;case s.OPS.moveTo:I=F[z++],E=F[z++],U.push("M",w(I),w(E));break;case s.OPS.lineTo:I=F[z++],E=F[z++],U.push("L",w(I),w(E));break;case s.OPS.curveTo:I=F[z+4],E=F[z+5],U.push("C",w(F[z]),w(F[z+1]),w(F[z+2]),w(F[z+3]),w(I),w(E)),z+=6;break;case s.OPS.curveTo2:U.push("C",w(I),w(E),w(F[z]),w(F[z+1]),w(F[z+2]),w(F[z+3])),I=F[z+2],E=F[z+3],z+=4;break;case s.OPS.curveTo3:I=F[z+2],E=F[z+3],U.push("C",w(F[z]),w(F[z+1]),w(I),w(E),w(I),w(E)),z+=4;break;case s.OPS.closePath:U.push("Z");break}U=U.join(" "),B.path&&y.length>0&&y[0]!==s.OPS.rectangle&&y[0]!==s.OPS.moveTo?U=B.path.getAttributeNS(null,"d")+U:(B.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(B.path)),B.path.setAttributeNS(null,"d",U),B.path.setAttributeNS(null,"fill","none"),B.element=B.path,B.setCurrentPoint(I,E)}endPath(){const y=this.current;if(y.path=null,!this.pendingClip)return;if(!y.element){this.pendingClip=null;return}const F=`clippath${m++}`,B=this.svgFactory.createElement("svg:clipPath");B.setAttributeNS(null,"id",F),B.setAttributeNS(null,"transform",g(this.transformMatrix));const I=y.element.cloneNode(!0);if(this.pendingClip==="evenodd"?I.setAttributeNS(null,"clip-rule","evenodd"):I.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,B.append(I),this.defs.append(B),y.activeClipUrl){y.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;B.setAttributeNS(null,"clip-path",y.activeClipUrl)}y.activeClipUrl=`url(#${F})`,this.tgrp=null}clip(y){this.pendingClip=y}closePath(){const y=this.current;if(y.path){const F=`${y.path.getAttributeNS(null,"d")}Z`;y.path.setAttributeNS(null,"d",F)}}setLeading(y){this.current.leading=-y}setTextRise(y){this.current.textRise=y}setTextRenderingMode(y){this.current.textRenderingMode=y}setHScale(y){this.current.textHScale=y/100}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[F,B]of y)switch(F){case"LW":this.setLineWidth(B);break;case"LC":this.setLineCap(B);break;case"LJ":this.setLineJoin(B);break;case"ML":this.setMiterLimit(B);break;case"D":this.setDash(B[0],B[1]);break;case"RI":this.setRenderingIntent(B);break;case"FL":this.setFlatness(B);break;case"Font":this.setFont(B);break;case"CA":this.setStrokeAlpha(B);break;case"ca":this.setFillAlpha(B);break;default:(0,s.warn)(`Unimplemented graphic state operator ${F}`);break}}fill(){const y=this.current;y.element&&(y.element.setAttributeNS(null,"fill",y.fillColor),y.element.setAttributeNS(null,"fill-opacity",y.fillAlpha),this.endPath())}stroke(){const y=this.current;y.element&&(this._setStrokeAttributes(y.element),y.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(y,F=1){const B=this.current;let I=B.dashArray;F!==1&&I.length>0&&(I=I.map(function(E){return F*E})),y.setAttributeNS(null,"stroke",B.strokeColor),y.setAttributeNS(null,"stroke-opacity",B.strokeAlpha),y.setAttributeNS(null,"stroke-miterlimit",w(B.miterLimit)),y.setAttributeNS(null,"stroke-linecap",B.lineCap),y.setAttributeNS(null,"stroke-linejoin",B.lineJoin),y.setAttributeNS(null,"stroke-width",w(F*B.lineWidth)+"px"),y.setAttributeNS(null,"stroke-dasharray",I.map(w).join(" ")),y.setAttributeNS(null,"stroke-dashoffset",w(F*B.dashPhase)+"px")}eoFill(){var y;(y=this.current.element)==null||y.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var y;(y=this.current.element)==null||y.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x","0"),y.setAttributeNS(null,"y","0"),y.setAttributeNS(null,"width","1px"),y.setAttributeNS(null,"height","1px"),y.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(y)}paintImageXObject(y){const F=this.getObject(y);if(!F){(0,s.warn)(`Dependent image with object ID ${y} is not ready yet`);return}this.paintInlineImageXObject(F)}paintInlineImageXObject(y,F){const B=y.width,I=y.height,E=b(y,this.forceDataSchema,!!F),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x","0"),U.setAttributeNS(null,"y","0"),U.setAttributeNS(null,"width",w(B)),U.setAttributeNS(null,"height",w(I)),this.current.element=U,this.clip("nonzero");const z=this.svgFactory.createElement("svg:image");z.setAttributeNS(h,"xlink:href",E),z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y",w(-I)),z.setAttributeNS(null,"width",w(B)+"px"),z.setAttributeNS(null,"height",w(I)+"px"),z.setAttributeNS(null,"transform",`scale(${w(1/B)} ${w(-1/I)})`),F?F.append(z):this._ensureTransformGroup().append(z)}paintImageMaskXObject(y){const F=this.getObject(y.data,y);if(F.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const B=this.current,I=F.width,E=F.height,U=B.fillColor;B.maskId=`mask${_++}`;const z=this.svgFactory.createElement("svg:mask");z.setAttributeNS(null,"id",B.maskId);const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",w(I)),N.setAttributeNS(null,"height",w(E)),N.setAttributeNS(null,"fill",U),N.setAttributeNS(null,"mask",`url(#${B.maskId})`),this.defs.append(z),this._ensureTransformGroup().append(N),this.paintInlineImageXObject(F,z)}paintFormXObjectBegin(y,F){if(Array.isArray(y)&&y.length===6&&this.transform(y[0],y[1],y[2],y[3],y[4],y[5]),F){const B=F[2]-F[0],I=F[3]-F[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",F[0]),E.setAttributeNS(null,"y",F[1]),E.setAttributeNS(null,"width",w(B)),E.setAttributeNS(null,"height",w(I)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(y){const F=this.svgFactory.create(y.width,y.height),B=this.svgFactory.createElement("svg:defs");F.append(B),this.defs=B;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",g(y.transform)),F.append(I),this.svg=I,F}_ensureClipGroup(){if(!this.current.clipGroup){const y=this.svgFactory.createElement("svg:g");y.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(y),this.current.clipGroup=y}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=P},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(s){const r=[],a={items:r,styles:Object.create(null)};function h(c){var b;if(!c)return;let f=null;const l=c.name;if(l==="#text")f=c.value;else if(n.shouldBuildText(l))(b=c==null?void 0:c.attributes)!=null&&b.textContent?f=c.attributes.textContent:c.value&&(f=c.value);else return;if(f!==null&&r.push({str:f}),!!c.children)for(const S of c.children)h(S)}return h(s),a}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=g,e.updateTextLayer=m;var i=n(1),s=n(6);const r=1e5,a=30,h=.8,c=new Map;function f(_,x){let P;if(x&&i.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const R=document.createElement("canvas");R.width=R.height=_,P=R.getContext("2d",{alpha:!1})}return P}function l(_,x){const P=c.get(_);if(P)return P;const R=f(a,x);R.font=`${a}px ${_}`;const y=R.measureText("");let F=y.fontBoundingBoxAscent,B=Math.abs(y.fontBoundingBoxDescent);if(F){const E=F/(F+B);return c.set(_,E),R.canvas.width=R.canvas.height=0,E}R.strokeStyle="red",R.clearRect(0,0,a,a),R.strokeText("g",0,0);let I=R.getImageData(0,0,a,a).data;B=0;for(let E=I.length-1-3;E>=0;E-=4)if(I[E]>0){B=Math.ceil(E/4/a);break}R.clearRect(0,0,a,a),R.strokeText("A",0,a),I=R.getImageData(0,0,a,a).data,F=0;for(let E=0,U=I.length;E<U;E+=4)if(I[E]>0){F=a-Math.floor(E/4/a);break}if(R.canvas.width=R.canvas.height=0,F){const E=F/(F+B);return c.set(_,E),E}return c.set(_,h),h}function b(_,x,P){const R=document.createElement("span"),y={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};_._textDivs.push(R);const F=i.Util.transform(_._transform,x.transform);let B=Math.atan2(F[1],F[0]);const I=P[x.fontName];I.vertical&&(B+=Math.PI/2);const E=Math.hypot(F[2],F[3]),U=E*l(I.fontFamily,_._isOffscreenCanvasSupported);let z,N;B===0?(z=F[4],N=F[5]-U):(z=F[4]+U*Math.sin(B),N=F[5]-U*Math.cos(B));const Y="calc(var(--scale-factor)*",d=R.style;_._container===_._rootContainer?(d.left=`${(100*z/_._pageWidth).toFixed(2)}%`,d.top=`${(100*N/_._pageHeight).toFixed(2)}%`):(d.left=`${Y}${z.toFixed(2)}px)`,d.top=`${Y}${N.toFixed(2)}px)`),d.fontSize=`${Y}${E.toFixed(2)}px)`,d.fontFamily=I.fontFamily,y.fontSize=E,R.setAttribute("role","presentation"),R.textContent=x.str,R.dir=x.dir,_._fontInspectorEnabled&&(R.dataset.fontName=x.fontName),B!==0&&(y.angle=B*(180/Math.PI));let Q=!1;if(x.str.length>1)Q=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const pt=Math.abs(x.transform[0]),at=Math.abs(x.transform[3]);pt!==at&&Math.max(pt,at)/Math.min(pt,at)>1.5&&(Q=!0)}Q&&(y.canvasWidth=I.vertical?x.height:x.width),_._textDivProperties.set(R,y),_._isReadableStream&&_._layoutText(R)}function S(_){const{div:x,scale:P,properties:R,ctx:y,prevFontSize:F,prevFontFamily:B}=_,{style:I}=x;let E="";if(R.canvasWidth!==0&&R.hasText){const{fontFamily:U}=I,{canvasWidth:z,fontSize:N}=R;(F!==N||B!==U)&&(y.font=`${N*P}px ${U}`,_.prevFontSize=N,_.prevFontFamily=U);const{width:Y}=y.measureText(x.textContent);Y>0&&(E=`scaleX(${z*P/Y})`)}R.angle!==0&&(E=`rotate(${R.angle}deg) ${E}`),E.length>0&&(I.transform=E)}function u(_){if(_._canceled)return;const x=_._textDivs,P=_._capability;if(x.length>r){P.resolve();return}if(!_._isReadableStream)for(const y of x)_._layoutText(y);P.resolve()}class w{constructor({textContentSource:x,container:P,viewport:R,textDivs:y,textDivProperties:F,textContentItemsStr:B,isOffscreenCanvasSupported:I}){var Y;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=y||[],this._textContentItemsStr=B||[],this._isOffscreenCanvasSupported=I,this._fontInspectorEnabled=!!((Y=globalThis.FontInspector)!=null&&Y.enabled),this._reader=null,this._textDivProperties=F||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f(0,I)};const{pageWidth:E,pageHeight:U,pageX:z,pageY:N}=R.rawDims;this._transform=[1,0,0,-1,-z,N+U],this._pageWidth=E,this._pageHeight=U,(0,s.setLayerDimensions)(P,R),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(x,P){for(const R of x){if(R.str===void 0){if(R.type==="beginMarkedContentProps"||R.type==="beginMarkedContent"){const y=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R.id!==null&&this._container.setAttribute("id",`${R.id}`),y.append(this._container)}else R.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R.str),b(this,R,P)}}_layoutText(x){const P=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,S(this._layoutTextParams),P.hasText&&this._container.append(x),P.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),this._container.append(R)}}_render(){const x=new i.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const R=()=>{this._reader.read().then(({value:y,done:F})=>{if(F){x.resolve();return}Object.assign(P,y.styles),this._processItems(y.items,P),R()},x.reject)};this._reader=this._textContentSource.getReader(),R()}else if(this._textContentSource){const{items:R,styles:y}=this._textContentSource;this._processItems(R,y),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{P=null,u(this)},this._capability.reject)}}e.TextLayerRenderTask=w;function g(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:x,viewport:P}=_,R=getComputedStyle(x),y=R.getPropertyValue("visibility"),F=parseFloat(R.getPropertyValue("--scale-factor"));y==="visible"&&(!F||Math.abs(F-P.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const B=new w(_);return B._render(),B}function m({container:_,viewport:x,textDivs:P,textDivProperties:R,isOffscreenCanvasSupported:y,mustRotate:F=!0,mustRescale:B=!0}){if(F&&(0,s.setLayerDimensions)(_,{rotation:x.rotation}),B){const I=f(0,y),U={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:I};for(const z of P)U.properties=R.get(z),U.div=z,S(U)}}},(t,e,n)=>{var l,b,S,u,w,g,m,_,x,P,R,sn,F,Fe,I,rn,U,an;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=n(1),s=n(4),r=n(28),a=n(33),h=n(6),c=n(34);const N=class N{constructor({uiManager:d,pageIndex:Q,div:pt,accessibilityManager:at,annotationLayer:q,viewport:nt,l10n:ft}){dt(this,R);dt(this,F);dt(this,I);dt(this,U);dt(this,l,void 0);dt(this,b,!1);dt(this,S,null);dt(this,u,this.pointerup.bind(this));dt(this,w,this.pointerdown.bind(this));dt(this,g,new Map);dt(this,m,!1);dt(this,_,!1);dt(this,x,!1);dt(this,P,void 0);const lt=[r.FreeTextEditor,a.InkEditor,c.StampEditor];if(!N._initialized){N._initialized=!0;for(const rt of lt)rt.initialize(ft)}d.registerEditorTypes(lt),St(this,P,d),this.pageIndex=Q,this.div=pt,St(this,l,at),St(this,S,q),this.viewport=nt,A(this,P).addLayer(this)}get isEmpty(){return A(this,g).size===0}updateToolbar(d){A(this,P).updateToolbar(d)}updateMode(d=A(this,P).getMode()){bt(this,U,an).call(this),d===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),d!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",d===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",d===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",d===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(d){if(!d&&A(this,P).getMode()!==i.AnnotationEditorType.INK)return;if(!d){for(const pt of A(this,g).values())if(pt.isEmpty()){pt.setInBackground();return}}bt(this,F,Fe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(d){A(this,P).setEditingState(d)}addCommands(d){A(this,P).addCommands(d)}enable(){this.div.style.pointerEvents="auto";const d=new Set;for(const pt of A(this,g).values())pt.enableEditing(),pt.annotationElementId&&d.add(pt.annotationElementId);if(!A(this,S))return;const Q=A(this,S).getEditableAnnotations();for(const pt of Q){if(pt.hide(),A(this,P).isDeletedAnnotationElement(pt.data.id)||d.has(pt.data.id))continue;const at=this.deserialize(pt);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var Q;St(this,x,!0),this.div.style.pointerEvents="none";const d=new Set;for(const pt of A(this,g).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){d.add(pt.annotationElementId);continue}(Q=this.getEditableAnnotation(pt.annotationElementId))==null||Q.show(),pt.remove()}if(A(this,S)){const pt=A(this,S).getEditableAnnotations();for(const at of pt){const{id:q}=at.data;d.has(q)||A(this,P).isDeletedAnnotationElement(q)||at.show()}}bt(this,U,an).call(this),this.isEmpty&&(this.div.hidden=!0),St(this,x,!1)}getEditableAnnotation(d){var Q;return((Q=A(this,S))==null?void 0:Q.getEditableAnnotation(d))||null}setActiveEditor(d){A(this,P).getActive()!==d&&A(this,P).setActiveEditor(d)}enableClick(){this.div.addEventListener("pointerdown",A(this,w)),this.div.addEventListener("pointerup",A(this,u))}disableClick(){this.div.removeEventListener("pointerdown",A(this,w)),this.div.removeEventListener("pointerup",A(this,u))}attach(d){A(this,g).set(d.id,d);const{annotationElementId:Q}=d;Q&&A(this,P).isDeletedAnnotationElement(Q)&&A(this,P).removeDeletedAnnotationElement(d)}detach(d){var Q;A(this,g).delete(d.id),(Q=A(this,l))==null||Q.removePointerInTextLayer(d.contentDiv),!A(this,x)&&d.annotationElementId&&A(this,P).addDeletedAnnotationElement(d)}remove(d){this.detach(d),A(this,P).removeEditor(d),d.div.contains(document.activeElement)&&setTimeout(()=>{A(this,P).focusMainContainer()},0),d.div.remove(),d.isAttachedToDOM=!1,A(this,_)||this.addInkEditorIfNeeded(!1)}changeParent(d){var Q;d.parent!==this&&(d.annotationElementId&&(A(this,P).addDeletedAnnotationElement(d.annotationElementId),s.AnnotationEditor.deleteAnnotationElement(d),d.annotationElementId=null),this.attach(d),(Q=d.parent)==null||Q.detach(d),d.setParent(this),d.div&&d.isAttachedToDOM&&(d.div.remove(),this.div.append(d.div)))}add(d){if(this.changeParent(d),A(this,P).addEditor(d),this.attach(d),!d.isAttachedToDOM){const Q=d.render();this.div.append(Q),d.isAttachedToDOM=!0}d.fixAndSetPosition(),d.onceAdded(),A(this,P).addToAnnotationStorage(d)}moveEditorInDOM(d){var pt;if(!d.isAttachedToDOM)return;const{activeElement:Q}=document;d.div.contains(Q)&&(d._focusEventsAllowed=!1,setTimeout(()=>{d.div.contains(document.activeElement)?d._focusEventsAllowed=!0:(d.div.addEventListener("focusin",()=>{d._focusEventsAllowed=!0},{once:!0}),Q.focus())},0)),d._structTreeParentId=(pt=A(this,l))==null?void 0:pt.moveElementInDOM(this.div,d.div,d.contentDiv,!0)}addOrRebuild(d){d.needsToBeRebuilt()?d.rebuild():this.add(d)}addUndoableEditor(d){const Q=()=>d._uiManager.rebuild(d),pt=()=>{d.remove()};this.addCommands({cmd:Q,undo:pt,mustExec:!1})}getNextId(){return A(this,P).getId()}pasteEditor(d,Q){A(this,P).updateToolbar(d),A(this,P).updateMode(d);const{offsetX:pt,offsetY:at}=bt(this,I,rn).call(this),q=this.getNextId(),nt=bt(this,R,sn).call(this,{parent:this,id:q,x:pt,y:at,uiManager:A(this,P),isCentered:!0,...Q});nt&&this.add(nt)}deserialize(d){switch(d.annotationType??d.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize(d,this,A(this,P));case i.AnnotationEditorType.INK:return a.InkEditor.deserialize(d,this,A(this,P));case i.AnnotationEditorType.STAMP:return c.StampEditor.deserialize(d,this,A(this,P))}return null}addNewEditor(){bt(this,F,Fe).call(this,bt(this,I,rn).call(this),!0)}setSelected(d){A(this,P).setSelected(d)}toggleSelected(d){A(this,P).toggleSelected(d)}isSelected(d){return A(this,P).isSelected(d)}unselect(d){A(this,P).unselect(d)}pointerup(d){const{isMac:Q}=i.FeatureTest.platform;if(!(d.button!==0||d.ctrlKey&&Q)&&d.target===this.div&&A(this,m)){if(St(this,m,!1),!A(this,b)){St(this,b,!0);return}if(A(this,P).getMode()===i.AnnotationEditorType.STAMP){A(this,P).unselectAll();return}bt(this,F,Fe).call(this,d,!1)}}pointerdown(d){if(A(this,m)){St(this,m,!1);return}const{isMac:Q}=i.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&Q||d.target!==this.div)return;St(this,m,!0);const pt=A(this,P).getActive();St(this,b,!pt||pt.isEmpty())}findNewParent(d,Q,pt){const at=A(this,P).findParent(Q,pt);return at===null||at===this?!1:(at.changeParent(d),!0)}destroy(){var d,Q;((d=A(this,P).getActive())==null?void 0:d.parent)===this&&(A(this,P).commitOrRemove(),A(this,P).setActiveEditor(null));for(const pt of A(this,g).values())(Q=A(this,l))==null||Q.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,A(this,g).clear(),A(this,P).removeLayer(this)}render({viewport:d}){this.viewport=d,(0,h.setLayerDimensions)(this.div,d);for(const Q of A(this,P).getEditors(this.pageIndex))this.add(Q);this.updateMode()}update({viewport:d}){A(this,P).commitOrRemove(),this.viewport=d,(0,h.setLayerDimensions)(this.div,{rotation:d.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:d,pageHeight:Q}=this.viewport.rawDims;return[d,Q]}};l=new WeakMap,b=new WeakMap,S=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,x=new WeakMap,P=new WeakMap,R=new WeakSet,sn=function(d){switch(A(this,P).getMode()){case i.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor(d);case i.AnnotationEditorType.INK:return new a.InkEditor(d);case i.AnnotationEditorType.STAMP:return new c.StampEditor(d)}return null},F=new WeakSet,Fe=function(d,Q){const pt=this.getNextId(),at=bt(this,R,sn).call(this,{parent:this,id:pt,x:d.offsetX,y:d.offsetY,uiManager:A(this,P),isCentered:Q});return at&&this.add(at),at},I=new WeakSet,rn=function(){const{x:d,y:Q,width:pt,height:at}=this.div.getBoundingClientRect(),q=Math.max(0,d),nt=Math.max(0,Q),ft=Math.min(window.innerWidth,d+pt),lt=Math.min(window.innerHeight,Q+at),rt=(q+ft)/2-d,H=(nt+lt)/2-Q,[v,C]=this.viewport.rotation%180===0?[rt,H]:[H,rt];return{offsetX:v,offsetY:C}},U=new WeakSet,an=function(){St(this,_,!0);for(const d of A(this,g).values())d.isEmpty()&&d.remove();St(this,_,!1)},ie(N,"_initialized",!1);let f=N;e.AnnotationEditorLayer=f},(t,e,n)=>{var c,f,l,b,S,u,w,g,m,_,In,P,Mn,y,Dn,B,we,E,on,z,Ln,Y,ln;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=n(1),s=n(5),r=n(4),a=n(29);const Q=class Q extends r.AnnotationEditor{constructor(q){super({...q,name:"freeTextEditor"});dt(this,_);dt(this,P);dt(this,y);dt(this,B);dt(this,E);dt(this,z);dt(this,Y);dt(this,c,this.editorDivBlur.bind(this));dt(this,f,this.editorDivFocus.bind(this));dt(this,l,this.editorDivInput.bind(this));dt(this,b,this.editorDivKeydown.bind(this));dt(this,S,void 0);dt(this,u,"");dt(this,w,`${this.id}-editor`);dt(this,g,void 0);dt(this,m,null);St(this,S,q.color||Q._defaultColor||r.AnnotationEditor._defaultLineColor),St(this,g,q.fontSize||Q._defaultFontSize)}static get _keyboardManager(){const q=Q.prototype,nt=rt=>rt.isEmpty(),ft=s.AnnotationEditorUIManager.TRANSLATE_SMALL,lt=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],q.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],q.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],q._translateEmpty,{args:[-ft,0],checker:nt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],q._translateEmpty,{args:[-lt,0],checker:nt}],[["ArrowRight","mac+ArrowRight"],q._translateEmpty,{args:[ft,0],checker:nt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],q._translateEmpty,{args:[lt,0],checker:nt}],[["ArrowUp","mac+ArrowUp"],q._translateEmpty,{args:[0,-ft],checker:nt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],q._translateEmpty,{args:[0,-lt],checker:nt}],[["ArrowDown","mac+ArrowDown"],q._translateEmpty,{args:[0,ft],checker:nt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],q._translateEmpty,{args:[0,lt],checker:nt}]]))}static initialize(q){r.AnnotationEditor.initialize(q,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const nt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(nt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(q,nt){switch(q){case i.AnnotationEditorParamsType.FREETEXT_SIZE:Q._defaultFontSize=nt;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:Q._defaultColor=nt;break}}updateParams(q,nt){switch(q){case i.AnnotationEditorParamsType.FREETEXT_SIZE:bt(this,_,In).call(this,nt);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:bt(this,P,Mn).call(this,nt);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,Q._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,Q._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,A(this,g)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,A(this,S)]]}_translateEmpty(q,nt){this._uiManager.translateSelectedEditors(q,nt,!0)}getInitialTranslation(){const q=this.parentScale;return[-Q._internalPadding*q,-(Q._internalPadding+A(this,g))*q]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",A(this,b)),this.editorDiv.addEventListener("focus",A(this,f)),this.editorDiv.addEventListener("blur",A(this,c)),this.editorDiv.addEventListener("input",A(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",A(this,w)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",A(this,b)),this.editorDiv.removeEventListener("focus",A(this,f)),this.editorDiv.removeEventListener("blur",A(this,c)),this.editorDiv.removeEventListener("input",A(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(q){this._focusEventsAllowed&&(super.focusin(q),q.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var q;if(this.width){bt(this,Y,ln).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(q=this._initialOptions)!=null&&q.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const q=A(this,u),nt=St(this,u,bt(this,y,Dn).call(this).trimEnd());if(q===nt)return;const ft=lt=>{if(St(this,u,lt),!lt){this.remove();return}bt(this,E,on).call(this),this._uiManager.rebuild(this),bt(this,B,we).call(this)};this.addCommands({cmd:()=>{ft(nt)},undo:()=>{ft(q)},mustExec:!1}),bt(this,B,we).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(q){this.enterInEditMode()}keydown(q){q.target===this.div&&q.key==="Enter"&&(this.enterInEditMode(),q.preventDefault())}editorDivKeydown(q){Q._keyboardManager.exec(this,q)}editorDivFocus(q){this.isEditing=!0}editorDivBlur(q){this.isEditing=!1}editorDivInput(q){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let q,nt;this.width&&(q=this.x,nt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",A(this,w)),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(lt=>{var rt;return(rt=this.editorDiv)==null?void 0:rt.setAttribute("aria-label",lt)}),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(lt=>{var rt;return(rt=this.editorDiv)==null?void 0:rt.setAttribute("default-content",lt)}),this.editorDiv.contentEditable=!0;const{style:ft}=this.editorDiv;if(ft.fontSize=`calc(${A(this,g)}px * var(--scale-factor))`,ft.color=A(this,S),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[lt,rt]=this.parentDimensions;if(this.annotationElementId){const{position:H}=A(this,m);let[v,C]=this.getInitialTranslation();[v,C]=this.pageTranslationToScreen(v,C);const[k,M]=this.pageDimensions,[L,V]=this.pageTranslation;let et,ot;switch(this.rotation){case 0:et=q+(H[0]-L)/k,ot=nt+this.height-(H[1]-V)/M;break;case 90:et=q+(H[0]-L)/k,ot=nt-(H[1]-V)/M,[v,C]=[C,-v];break;case 180:et=q-this.width+(H[0]-L)/k,ot=nt-(H[1]-V)/M,[v,C]=[-v,-C];break;case 270:et=q+(H[0]-L-this.height*M)/k,ot=nt+(H[1]-V-this.width*k)/M,[v,C]=[-C,v];break}this.setAt(et*lt,ot*rt,v,C)}else this.setAt(q*lt,nt*rt,this.width*lt,this.height*rt);bt(this,E,on).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(q,nt,ft){let lt=null;if(q instanceof a.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:H,fontColor:v},rect:C,rotation:k,id:M},textContent:L,textPosition:V,parent:{page:{pageNumber:et}}}=q;if(!L||L.length===0)return null;lt=q={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(v),fontSize:H,value:L.join(`
`),position:V,pageIndex:et-1,rect:C,rotation:k,id:M,deleted:!1}}const rt=super.deserialize(q,nt,ft);return St(rt,g,q.fontSize),St(rt,S,i.Util.makeHexColor(...q.color)),St(rt,u,q.value),rt.annotationElementId=q.id||null,St(rt,m,lt),rt}serialize(q=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const nt=Q._internalPadding*this.parentScale,ft=this.getRect(nt,nt),lt=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:A(this,S)),rt={annotationType:i.AnnotationEditorType.FREETEXT,color:lt,fontSize:A(this,g),value:A(this,u),pageIndex:this.pageIndex,rect:ft,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return q?rt:this.annotationElementId&&!bt(this,z,Ln).call(this,rt)?null:(rt.id=this.annotationElementId,rt)}};c=new WeakMap,f=new WeakMap,l=new WeakMap,b=new WeakMap,S=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakSet,In=function(q){const nt=lt=>{this.editorDiv.style.fontSize=`calc(${lt}px * var(--scale-factor))`,this.translate(0,-(lt-A(this,g))*this.parentScale),St(this,g,lt),bt(this,B,we).call(this)},ft=A(this,g);this.addCommands({cmd:()=>{nt(q)},undo:()=>{nt(ft)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Mn=function(q){const nt=A(this,S);this.addCommands({cmd:()=>{St(this,S,this.editorDiv.style.color=q)},undo:()=>{St(this,S,this.editorDiv.style.color=nt)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,Dn=function(){const q=this.editorDiv.getElementsByTagName("div");if(q.length===0)return this.editorDiv.innerText;const nt=[];for(const ft of q)nt.push(ft.innerText.replace(/\r\n?|\n/,""));return nt.join(`
`)},B=new WeakSet,we=function(){const[q,nt]=this.parentDimensions;let ft;if(this.isAttachedToDOM)ft=this.div.getBoundingClientRect();else{const{currentLayer:lt,div:rt}=this,H=rt.style.display;rt.style.display="hidden",lt.div.append(this.div),ft=rt.getBoundingClientRect(),rt.remove(),rt.style.display=H}this.rotation%180===this.parentRotation%180?(this.width=ft.width/q,this.height=ft.height/nt):(this.width=ft.height/q,this.height=ft.width/nt),this.fixAndSetPosition()},E=new WeakSet,on=function(){if(this.editorDiv.replaceChildren(),!!A(this,u))for(const q of A(this,u).split(`
`)){const nt=document.createElement("div");nt.append(q?document.createTextNode(q):document.createElement("br")),this.editorDiv.append(nt)}},z=new WeakSet,Ln=function(q){const{value:nt,fontSize:ft,color:lt,rect:rt,pageIndex:H}=A(this,m);return q.value!==nt||q.fontSize!==ft||q.rect.some((v,C)=>Math.abs(v-rt[C])>=1)||q.color.some((v,C)=>v!==lt[C])||q.pageIndex!==H},Y=new WeakSet,ln=function(q=!1){if(!this.annotationElementId)return;if(bt(this,B,we).call(this),!q&&(this.width===0||this.height===0)){setTimeout(()=>bt(this,Y,ln).call(this,!0),0);return}const nt=Q._internalPadding*this.parentScale;A(this,m).rect=this.getRect(nt,nt)},ie(Q,"_freeTextDefaultContent",""),ie(Q,"_internalPadding",0),ie(Q,"_defaultColor",null),ie(Q,"_defaultFontSize",10),ie(Q,"_type","freetext");let h=Q;e.FreeTextEditor=h},(t,e,n)=>{var C,M,ue,V,Nn,ot,vt,j,o,$,X,O,D,Z,it,ut,W,K,J,st,At,Ct,Tt,Bn,zt,Oe,Vt,cn,Xt,hn,_t,gt,kt,Rt,ne,te,wt,un,Ht,Mt,Wt,Gt,jn,Ft,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var i=n(1),s=n(6),r=n(3),a=n(30),h=n(31),c=n(32);const f=1e3,l=9,b=new WeakSet;function S($t){return{width:$t[2]-$t[0],height:$t[3]-$t[1]}}class u{static create(ct){switch(ct.data.annotationType){case i.AnnotationType.LINK:return new g(ct);case i.AnnotationType.TEXT:return new m(ct);case i.AnnotationType.WIDGET:switch(ct.data.fieldType){case"Tx":return new x(ct);case"Btn":return ct.data.radioButton?new y(ct):ct.data.checkBox?new R(ct):new F(ct);case"Ch":return new B(ct);case"Sig":return new P(ct)}return new _(ct);case i.AnnotationType.POPUP:return new I(ct);case i.AnnotationType.FREETEXT:return new U(ct);case i.AnnotationType.LINE:return new z(ct);case i.AnnotationType.SQUARE:return new N(ct);case i.AnnotationType.CIRCLE:return new Y(ct);case i.AnnotationType.POLYLINE:return new d(ct);case i.AnnotationType.CARET:return new pt(ct);case i.AnnotationType.INK:return new at(ct);case i.AnnotationType.POLYGON:return new Q(ct);case i.AnnotationType.HIGHLIGHT:return new q(ct);case i.AnnotationType.UNDERLINE:return new nt(ct);case i.AnnotationType.SQUIGGLY:return new ft(ct);case i.AnnotationType.STRIKEOUT:return new lt(ct);case i.AnnotationType.STAMP:return new rt(ct);case i.AnnotationType.FILEATTACHMENT:return new H(ct);default:return new w(ct)}}}const k=class k{constructor(ct,{isRenderable:T=!1,ignoreBorder:G=!1,createQuadrilaterals:ht=!1}={}){dt(this,C,!1);this.isRenderable=T,this.data=ct.data,this.layer=ct.layer,this.linkService=ct.linkService,this.downloadManager=ct.downloadManager,this.imageResourcesPath=ct.imageResourcesPath,this.renderForms=ct.renderForms,this.svgFactory=ct.svgFactory,this.annotationStorage=ct.annotationStorage,this.enableScripting=ct.enableScripting,this.hasJSActions=ct.hasJSActions,this._fieldObjects=ct.fieldObjects,this.parent=ct.parent,T&&(this.container=this._createContainer(G)),ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:ct,contentsObj:T,richText:G}){return!!(ct!=null&&ct.str||T!=null&&T.str||G!=null&&G.str)}get hasPopupData(){return k._hasPopupData(this.data)}_createContainer(ct){const{data:T,parent:{page:G,viewport:ht}}=this,mt=document.createElement("section");mt.setAttribute("data-annotation-id",T.id),this instanceof _||(mt.tabIndex=f),mt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&mt.setAttribute("aria-haspopup","dialog"),T.noRotate&&mt.classList.add("norotate");const{pageWidth:yt,pageHeight:Et,pageX:Pt,pageY:Lt}=ht.rawDims;if(!T.rect||this instanceof I){const{rotation:qt}=T;return!T.hasOwnCanvas&&qt!==0&&this.setRotation(qt,mt),mt}const{width:Dt,height:Yt}=S(T.rect),Bt=i.Util.normalizeRect([T.rect[0],G.view[3]-T.rect[1]+G.view[1],T.rect[2],G.view[3]-T.rect[3]+G.view[1]]);if(!ct&&T.borderStyle.width>0){mt.style.borderWidth=`${T.borderStyle.width}px`;const qt=T.borderStyle.horizontalCornerRadius,Kt=T.borderStyle.verticalCornerRadius;if(qt>0||Kt>0){const ee=`calc(${qt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;mt.style.borderRadius=ee}else if(this instanceof y){const ee=`calc(${Dt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;mt.style.borderRadius=ee}switch(T.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:mt.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:mt.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:mt.style.borderBottomStyle="solid";break}const Zt=T.borderColor||null;Zt?(St(this,C,!0),mt.style.borderColor=i.Util.makeHexColor(Zt[0]|0,Zt[1]|0,Zt[2]|0)):mt.style.borderWidth=0}mt.style.left=`${100*(Bt[0]-Pt)/yt}%`,mt.style.top=`${100*(Bt[1]-Lt)/Et}%`;const{rotation:jt}=T;return T.hasOwnCanvas||jt===0?(mt.style.width=`${100*Dt/yt}%`,mt.style.height=`${100*Yt/Et}%`):this.setRotation(jt,mt),mt}setRotation(ct,T=this.container){if(!this.data.rect)return;const{pageWidth:G,pageHeight:ht}=this.parent.viewport.rawDims,{width:mt,height:yt}=S(this.data.rect);let Et,Pt;ct%180===0?(Et=100*mt/G,Pt=100*yt/ht):(Et=100*yt/G,Pt=100*mt/ht),T.style.width=`${Et}%`,T.style.height=`${Pt}%`,T.setAttribute("data-main-rotation",(360-ct)%360)}get _commonActions(){const ct=(T,G,ht)=>{const mt=ht.detail[T],yt=mt[0],Et=mt.slice(1);ht.target.style[G]=a.ColorConverters[`${yt}_HTML`](Et),this.annotationStorage.setValue(this.data.id,{[G]:a.ColorConverters[`${yt}_rgb`](Et)})};return(0,i.shadow)(this,"_commonActions",{display:T=>{const{display:G}=T.detail,ht=G%2===1;this.container.style.visibility=ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ht,noPrint:G===1||G===2})},print:T=>{this.annotationStorage.setValue(this.data.id,{noPrint:!T.detail.print})},hidden:T=>{const{hidden:G}=T.detail;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:G,noView:G})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.target.disabled=T.detail.readonly},required:T=>{this._setRequired(T.target,T.detail.required)},bgColor:T=>{ct("bgColor","backgroundColor",T)},fillColor:T=>{ct("fillColor","backgroundColor",T)},fgColor:T=>{ct("fgColor","color",T)},textColor:T=>{ct("textColor","color",T)},borderColor:T=>{ct("borderColor","borderColor",T)},strokeColor:T=>{ct("strokeColor","borderColor",T)},rotation:T=>{const G=T.detail.rotation;this.setRotation(G),this.annotationStorage.setValue(this.data.id,{rotation:G})}})}_dispatchEventFromSandbox(ct,T){const G=this._commonActions;for(const ht of Object.keys(T.detail)){const mt=ct[ht]||G[ht];mt==null||mt(T)}}_setDefaultPropertiesFromJS(ct){if(!this.enableScripting)return;const T=this.annotationStorage.getRawValue(this.data.id);if(!T)return;const G=this._commonActions;for(const[ht,mt]of Object.entries(T)){const yt=G[ht];if(yt){const Et={detail:{[ht]:mt},target:ct};yt(Et),delete T[ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:ct}=this.data;if(!ct)return;const[T,G,ht,mt]=this.data.rect;if(ct.length===1){const[,{x:Kt,y:Zt},{x:ee,y:re}]=ct[0];if(ht===Kt&&mt===Zt&&T===ee&&G===re)return}const{style:yt}=this.container;let Et;if(A(this,C)){const{borderColor:Kt,borderWidth:Zt}=yt;yt.borderWidth=0,Et=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Zt}">`],this.container.classList.add("hasBorder")}const Pt=ht-T,Lt=mt-G,{svgFactory:Dt}=this,Yt=Dt.createElement("svg");Yt.classList.add("quadrilateralsContainer"),Yt.setAttribute("width",0),Yt.setAttribute("height",0);const Bt=Dt.createElement("defs");Yt.append(Bt);const jt=Dt.createElement("clipPath"),qt=`clippath_${this.data.id}`;jt.setAttribute("id",qt),jt.setAttribute("clipPathUnits","objectBoundingBox"),Bt.append(jt);for(const[,{x:Kt,y:Zt},{x:ee,y:re}]of ct){const se=Dt.createElement("rect"),ae=(ee-T)/Pt,ce=(mt-Zt)/Lt,he=(Kt-ee)/Pt,An=(Zt-re)/Lt;se.setAttribute("x",ae),se.setAttribute("y",ce),se.setAttribute("width",he),se.setAttribute("height",An),jt.append(se),Et==null||Et.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${An}"/>`)}A(this,C)&&(Et.push("</g></svg>')"),yt.backgroundImage=Et.join("")),this.container.append(Yt),this.container.style.clipPath=`url(#${qt})`}_createPopup(){const{container:ct,data:T}=this;ct.setAttribute("aria-haspopup","dialog");const G=new I({data:{color:T.color,titleObj:T.titleObj,modificationDate:T.modificationDate,contentsObj:T.contentsObj,richText:T.richText,parentRect:T.rect,borderStyle:0,id:`popup_${T.id}`,rotation:T.rotation},parent:this.parent,elements:[this]});this.parent.div.append(G.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(ct,T=null){const G=[];if(this._fieldObjects){const ht=this._fieldObjects[ct];if(ht)for(const{page:mt,id:yt,exportValues:Et}of ht){if(mt===-1||yt===T)continue;const Pt=typeof Et=="string"?Et:null,Lt=document.querySelector(`[data-element-id="${yt}"]`);if(Lt&&!b.has(Lt)){(0,i.warn)(`_getElementsByName - element not allowed: ${yt}`);continue}G.push({id:yt,exportValue:Pt,domElement:Lt})}return G}for(const ht of document.getElementsByName(ct)){const{exportValue:mt}=ht,yt=ht.getAttribute("data-element-id");yt!==T&&b.has(ht)&&G.push({id:yt,exportValue:mt,domElement:ht})}return G}show(){var ct;this.container&&(this.container.hidden=!1),(ct=this.popup)==null||ct.maybeShow()}hide(){var ct;this.container&&(this.container.hidden=!0),(ct=this.popup)==null||ct.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const ct=this.getElementsToTriggerPopup();if(Array.isArray(ct))for(const T of ct)T.classList.add("highlightArea");else ct.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:ct,data:{id:T}}=this;this.container.addEventListener("dblclick",()=>{var G;(G=this.linkService.eventBus)==null||G.dispatch("switchannotationeditormode",{source:this,mode:ct,editId:T})})}};C=new WeakMap;let w=k;class g extends w{constructor(T,G=null){super(T,{isRenderable:!0,ignoreBorder:!!(G!=null&&G.ignoreBorder),createQuadrilaterals:!0});dt(this,M);dt(this,V);this.isTooltipOnly=T.data.isTooltipOnly}render(){const{data:T,linkService:G}=this,ht=document.createElement("a");ht.setAttribute("data-element-id",T.id);let mt=!1;return T.url?(G.addLinkAttributes(ht,T.url,T.newWindow),mt=!0):T.action?(this._bindNamedAction(ht,T.action),mt=!0):T.attachment?(this._bindAttachment(ht,T.attachment),mt=!0):T.setOCGState?(bt(this,V,Nn).call(this,ht,T.setOCGState),mt=!0):T.dest?(this._bindLink(ht,T.dest),mt=!0):(T.actions&&(T.actions.Action||T.actions["Mouse Up"]||T.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ht,T),mt=!0),T.resetForm?(this._bindResetFormAction(ht,T.resetForm),mt=!0):this.isTooltipOnly&&!mt&&(this._bindLink(ht,""),mt=!0)),this.container.classList.add("linkAnnotation"),mt&&this.container.append(ht),this.container}_bindLink(T,G){T.href=this.linkService.getDestinationHash(G),T.onclick=()=>(G&&this.linkService.goToDestination(G),!1),(G||G==="")&&bt(this,M,ue).call(this)}_bindNamedAction(T,G){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeNamedAction(G),!1),bt(this,M,ue).call(this)}_bindAttachment(T,G){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>{var ht;return(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,G.content,G.filename),!1},bt(this,M,ue).call(this)}_bindJSAction(T,G){T.href=this.linkService.getAnchorUrl("");const ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const mt of Object.keys(G.actions)){const yt=ht.get(mt);yt&&(T[yt]=()=>{var Et;return(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:G.id,name:mt}}),!1})}T.onclick||(T.onclick=()=>!1),bt(this,M,ue).call(this)}_bindResetFormAction(T,G){const ht=T.onclick;if(ht||(T.href=this.linkService.getAnchorUrl("")),bt(this,M,ue).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ht||(T.onclick=()=>!1);return}T.onclick=()=>{var Yt;ht==null||ht();const{fields:mt,refs:yt,include:Et}=G,Pt=[];if(mt.length!==0||yt.length!==0){const Bt=new Set(yt);for(const jt of mt){const qt=this._fieldObjects[jt]||[];for(const{id:Kt}of qt)Bt.add(Kt)}for(const jt of Object.values(this._fieldObjects))for(const qt of jt)Bt.has(qt.id)===Et&&Pt.push(qt)}else for(const Bt of Object.values(this._fieldObjects))Pt.push(...Bt);const Lt=this.annotationStorage,Dt=[];for(const Bt of Pt){const{id:jt}=Bt;switch(Dt.push(jt),Bt.type){case"text":{const Kt=Bt.defaultValue||"";Lt.setValue(jt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Bt.defaultValue===Bt.exportValues;Lt.setValue(jt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Bt.defaultValue||"";Lt.setValue(jt,{value:Kt});break}default:continue}const qt=document.querySelector(`[data-element-id="${jt}"]`);if(qt){if(!b.has(qt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Dt,name:"ResetForm"}})),!1}}}M=new WeakSet,ue=function(){this.container.setAttribute("data-internal-link","")},V=new WeakSet,Nn=function(T,G){T.href=this.linkService.getAnchorUrl(""),T.onclick=()=>(this.linkService.executeSetOCGState(G),!1),bt(this,M,ue).call(this)};class m extends w{constructor(ct){super(ct,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const ct=document.createElement("img");return ct.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ct.alt="[{{type}} Annotation]",ct.dataset.l10nId="text_annotation_type",ct.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(ct),this.container}}class _ extends w{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(ct){var T;this.data.hasOwnCanvas&&(((T=ct.previousSibling)==null?void 0:T.nodeName)==="CANVAS"&&(ct.previousSibling.hidden=!0),ct.hidden=!1)}_getKeyModifier(ct){const{isWin:T,isMac:G}=i.FeatureTest.platform;return T&&ct.ctrlKey||G&&ct.metaKey}_setEventListener(ct,T,G,ht,mt){G.includes("mouse")?ct.addEventListener(G,yt=>{var Et;(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:mt(yt),shift:yt.shiftKey,modifier:this._getKeyModifier(yt)}})}):ct.addEventListener(G,yt=>{var Et;if(G==="blur"){if(!T.focused||!yt.relatedTarget)return;T.focused=!1}else if(G==="focus"){if(T.focused)return;T.focused=!0}mt&&((Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:mt(yt)}}))})}_setEventListeners(ct,T,G,ht){var mt,yt,Et;for(const[Pt,Lt]of G)(Lt==="Action"||(mt=this.data.actions)!=null&&mt[Lt])&&((Lt==="Focus"||Lt==="Blur")&&(T||(T={focused:!1})),this._setEventListener(ct,T,Pt,Lt,ht),Lt==="Focus"&&!((yt=this.data.actions)!=null&&yt.Blur)?this._setEventListener(ct,T,"blur","Blur",null):Lt==="Blur"&&!((Et=this.data.actions)!=null&&Et.Focus)&&this._setEventListener(ct,T,"focus","Focus",null))}_setBackgroundColor(ct){const T=this.data.backgroundColor||null;ct.style.backgroundColor=T===null?"transparent":i.Util.makeHexColor(T[0],T[1],T[2])}_setTextStyle(ct){const T=["left","center","right"],{fontColor:G}=this.data.defaultAppearanceData,ht=this.data.defaultAppearanceData.fontSize||l,mt=ct.style;let yt;const Et=2,Pt=Lt=>Math.round(10*Lt)/10;if(this.data.multiLine){const Lt=Math.abs(this.data.rect[3]-this.data.rect[1]-Et),Dt=Math.round(Lt/(i.LINE_FACTOR*ht))||1,Yt=Lt/Dt;yt=Math.min(ht,Pt(Yt/i.LINE_FACTOR))}else{const Lt=Math.abs(this.data.rect[3]-this.data.rect[1]-Et);yt=Math.min(ht,Pt(Lt/i.LINE_FACTOR))}mt.fontSize=`calc(${yt}px * var(--scale-factor))`,mt.color=i.Util.makeHexColor(G[0],G[1],G[2]),this.data.textAlignment!==null&&(mt.textAlign=T[this.data.textAlignment])}_setRequired(ct,T){T?ct.setAttribute("required",!0):ct.removeAttribute("required"),ct.setAttribute("aria-required",T)}}class x extends _{constructor(ct){const T=ct.renderForms||!ct.data.hasAppearance&&!!ct.data.fieldValue;super(ct,{isRenderable:T})}setPropertyOnSiblings(ct,T,G,ht){const mt=this.annotationStorage;for(const yt of this._getElementsByName(ct.name,ct.id))yt.domElement&&(yt.domElement[T]=G),mt.setValue(yt.id,{[ht]:G})}render(){var ht,mt;const ct=this.annotationStorage,T=this.data.id;this.container.classList.add("textWidgetAnnotation");let G=null;if(this.renderForms){const yt=ct.getValue(T,{value:this.data.fieldValue});let Et=yt.value||"";const Pt=ct.getValue(T,{charLimit:this.data.maxLen}).charLimit;Pt&&Et.length>Pt&&(Et=Et.slice(0,Pt));let Lt=yt.formattedValue||((ht=this.data.textContent)==null?void 0:ht.join(`
`))||null;Lt&&this.data.comb&&(Lt=Lt.replaceAll(/\s+/g,""));const Dt={userValue:Et,formattedValue:Lt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(G=document.createElement("textarea"),G.textContent=Lt??Et,this.data.doNotScroll&&(G.style.overflowY="hidden")):(G=document.createElement("input"),G.type="text",G.setAttribute("value",Lt??Et),this.data.doNotScroll&&(G.style.overflowX="hidden")),this.data.hasOwnCanvas&&(G.hidden=!0),b.add(G),G.setAttribute("data-element-id",T),G.disabled=this.data.readOnly,G.name=this.data.fieldName,G.tabIndex=f,this._setRequired(G,this.data.required),Pt&&(G.maxLength=Pt),G.addEventListener("input",Bt=>{ct.setValue(T,{value:Bt.target.value}),this.setPropertyOnSiblings(G,"value",Bt.target.value,"value"),Dt.formattedValue=null}),G.addEventListener("resetform",Bt=>{const jt=this.data.defaultFieldValue??"";G.value=Dt.userValue=jt,Dt.formattedValue=null});let Yt=Bt=>{const{formattedValue:jt}=Dt;jt!=null&&(Bt.target.value=jt),Bt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){G.addEventListener("focus",jt=>{if(Dt.focused)return;const{target:qt}=jt;Dt.userValue&&(qt.value=Dt.userValue),Dt.lastCommittedValue=qt.value,Dt.commitKey=1,Dt.focused=!0}),G.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const qt={value(Kt){Dt.userValue=Kt.detail.value??"",ct.setValue(T,{value:Dt.userValue.toString()}),Kt.target.value=Dt.userValue},formattedValue(Kt){const{formattedValue:Zt}=Kt.detail;Dt.formattedValue=Zt,Zt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Zt),ct.setValue(T,{formattedValue:Zt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var se;const{charLimit:Zt}=Kt.detail,{target:ee}=Kt;if(Zt===0){ee.removeAttribute("maxLength");return}ee.setAttribute("maxLength",Zt);let re=Dt.userValue;!re||re.length<=Zt||(re=re.slice(0,Zt),ee.value=Dt.userValue=re,ct.setValue(T,{value:re}),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:ee.selectionStart,selEnd:ee.selectionEnd}}))}};this._dispatchEventFromSandbox(qt,jt)}),G.addEventListener("keydown",jt=>{var Zt;Dt.commitKey=1;let qt=-1;if(jt.key==="Escape"?qt=0:jt.key==="Enter"&&!this.data.multiLine?qt=2:jt.key==="Tab"&&(Dt.commitKey=3),qt===-1)return;const{value:Kt}=jt.target;Dt.lastCommittedValue!==Kt&&(Dt.lastCommittedValue=Kt,Dt.userValue=Kt,(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Kt,willCommit:!0,commitKey:qt,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const Bt=Yt;Yt=null,G.addEventListener("blur",jt=>{var Kt;if(!Dt.focused||!jt.relatedTarget)return;Dt.focused=!1;const{value:qt}=jt.target;Dt.userValue=qt,Dt.lastCommittedValue!==qt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:qt,willCommit:!0,commitKey:Dt.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}})),Bt(jt)}),(mt=this.data.actions)!=null&&mt.Keystroke&&G.addEventListener("beforeinput",jt=>{var ce;Dt.lastCommittedValue=null;const{data:qt,target:Kt}=jt,{value:Zt,selectionStart:ee,selectionEnd:re}=Kt;let se=ee,ae=re;switch(jt.inputType){case"deleteWordBackward":{const he=Zt.substring(0,ee).match(/\w*[^\w]*$/);he&&(se-=he[0].length);break}case"deleteWordForward":{const he=Zt.substring(ee).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":ee===re&&(se-=1);break;case"deleteContentForward":ee===re&&(ae+=1);break}jt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Zt,change:qt||"",willCommit:!1,selStart:se,selEnd:ae}})}),this._setEventListeners(G,Dt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(Yt&&G.addEventListener("blur",Yt),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/Pt;G.classList.add("comb"),G.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else G=document.createElement("div"),G.textContent=this.data.fieldValue,G.style.verticalAlign="middle",G.style.display="table-cell";return this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class P extends _{constructor(ct){super(ct,{isRenderable:!!ct.data.hasOwnCanvas})}}class R extends _{constructor(ct){super(ct,{isRenderable:ct.renderForms})}render(){const ct=this.annotationStorage,T=this.data,G=T.id;let ht=ct.getValue(G,{value:T.exportValue===T.fieldValue}).value;typeof ht=="string"&&(ht=ht!=="Off",ct.setValue(G,{value:ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const mt=document.createElement("input");return b.add(mt),mt.setAttribute("data-element-id",G),mt.disabled=T.readOnly,this._setRequired(mt,this.data.required),mt.type="checkbox",mt.name=T.fieldName,ht&&mt.setAttribute("checked",!0),mt.setAttribute("exportValue",T.exportValue),mt.tabIndex=f,mt.addEventListener("change",yt=>{const{name:Et,checked:Pt}=yt.target;for(const Lt of this._getElementsByName(Et,G)){const Dt=Pt&&Lt.exportValue===T.exportValue;Lt.domElement&&(Lt.domElement.checked=Dt),ct.setValue(Lt.id,{value:Dt})}ct.setValue(G,{value:Pt})}),mt.addEventListener("resetform",yt=>{const Et=T.defaultFieldValue||"Off";yt.target.checked=Et===T.exportValue}),this.enableScripting&&this.hasJSActions&&(mt.addEventListener("updatefromsandbox",yt=>{const Et={value(Pt){Pt.target.checked=Pt.detail.value!=="Off",ct.setValue(G,{value:Pt.target.checked})}};this._dispatchEventFromSandbox(Et,yt)}),this._setEventListeners(mt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yt=>yt.target.checked)),this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class y extends _{constructor(ct){super(ct,{isRenderable:ct.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const ct=this.annotationStorage,T=this.data,G=T.id;let ht=ct.getValue(G,{value:T.fieldValue===T.buttonValue}).value;typeof ht=="string"&&(ht=ht!==T.buttonValue,ct.setValue(G,{value:ht}));const mt=document.createElement("input");if(b.add(mt),mt.setAttribute("data-element-id",G),mt.disabled=T.readOnly,this._setRequired(mt,this.data.required),mt.type="radio",mt.name=T.fieldName,ht&&mt.setAttribute("checked",!0),mt.tabIndex=f,mt.addEventListener("change",yt=>{const{name:Et,checked:Pt}=yt.target;for(const Lt of this._getElementsByName(Et,G))ct.setValue(Lt.id,{value:!1});ct.setValue(G,{value:Pt})}),mt.addEventListener("resetform",yt=>{const Et=T.defaultFieldValue;yt.target.checked=Et!=null&&Et===T.buttonValue}),this.enableScripting&&this.hasJSActions){const yt=T.buttonValue;mt.addEventListener("updatefromsandbox",Et=>{const Pt={value:Lt=>{const Dt=yt===Lt.detail.value;for(const Yt of this._getElementsByName(Lt.target.name)){const Bt=Dt&&Yt.id===G;Yt.domElement&&(Yt.domElement.checked=Bt),ct.setValue(Yt.id,{value:Bt})}}};this._dispatchEventFromSandbox(Pt,Et)}),this._setEventListeners(mt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)}return this._setBackgroundColor(mt),this._setDefaultPropertiesFromJS(mt),this.container.append(mt),this.container}}class F extends g{constructor(ct){super(ct,{ignoreBorder:ct.data.hasAppearance})}render(){const ct=super.render();ct.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(ct.title=this.data.alternativeText);const T=ct.lastChild;return this.enableScripting&&this.hasJSActions&&T&&(this._setDefaultPropertiesFromJS(T),T.addEventListener("updatefromsandbox",G=>{this._dispatchEventFromSandbox({},G)})),ct}}class B extends _{constructor(ct){super(ct,{isRenderable:ct.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const ct=this.annotationStorage,T=this.data.id,G=ct.getValue(T,{value:this.data.fieldValue}),ht=document.createElement("select");b.add(ht),ht.setAttribute("data-element-id",T),ht.disabled=this.data.readOnly,this._setRequired(ht,this.data.required),ht.name=this.data.fieldName,ht.tabIndex=f;let mt=this.data.combo&&this.data.options.length>0;this.data.combo||(ht.size=this.data.options.length,this.data.multiSelect&&(ht.multiple=!0)),ht.addEventListener("resetform",Dt=>{const Yt=this.data.defaultFieldValue;for(const Bt of ht.options)Bt.selected=Bt.value===Yt});for(const Dt of this.data.options){const Yt=document.createElement("option");Yt.textContent=Dt.displayValue,Yt.value=Dt.exportValue,G.value.includes(Dt.exportValue)&&(Yt.setAttribute("selected",!0),mt=!1),ht.append(Yt)}let yt=null;if(mt){const Dt=document.createElement("option");Dt.value=" ",Dt.setAttribute("hidden",!0),Dt.setAttribute("selected",!0),ht.prepend(Dt),yt=()=>{Dt.remove(),ht.removeEventListener("input",yt),yt=null},ht.addEventListener("input",yt)}const Et=Dt=>{const Yt=Dt?"value":"textContent",{options:Bt,multiple:jt}=ht;return jt?Array.prototype.filter.call(Bt,qt=>qt.selected).map(qt=>qt[Yt]):Bt.selectedIndex===-1?null:Bt[Bt.selectedIndex][Yt]};let Pt=Et(!1);const Lt=Dt=>{const Yt=Dt.target.options;return Array.prototype.map.call(Yt,Bt=>({displayValue:Bt.textContent,exportValue:Bt.value}))};return this.enableScripting&&this.hasJSActions?(ht.addEventListener("updatefromsandbox",Dt=>{const Yt={value(Bt){yt==null||yt();const jt=Bt.detail.value,qt=new Set(Array.isArray(jt)?jt:[jt]);for(const Kt of ht.options)Kt.selected=qt.has(Kt.value);ct.setValue(T,{value:Et(!0)}),Pt=Et(!1)},multipleSelection(Bt){ht.multiple=!0},remove(Bt){const jt=ht.options,qt=Bt.detail.remove;jt[qt].selected=!1,ht.remove(qt),jt.length>0&&Array.prototype.findIndex.call(jt,Zt=>Zt.selected)===-1&&(jt[0].selected=!0),ct.setValue(T,{value:Et(!0),items:Lt(Bt)}),Pt=Et(!1)},clear(Bt){for(;ht.length!==0;)ht.remove(0);ct.setValue(T,{value:null,items:[]}),Pt=Et(!1)},insert(Bt){const{index:jt,displayValue:qt,exportValue:Kt}=Bt.detail.insert,Zt=ht.children[jt],ee=document.createElement("option");ee.textContent=qt,ee.value=Kt,Zt?Zt.before(ee):ht.append(ee),ct.setValue(T,{value:Et(!0),items:Lt(Bt)}),Pt=Et(!1)},items(Bt){const{items:jt}=Bt.detail;for(;ht.length!==0;)ht.remove(0);for(const qt of jt){const{displayValue:Kt,exportValue:Zt}=qt,ee=document.createElement("option");ee.textContent=Kt,ee.value=Zt,ht.append(ee)}ht.options.length>0&&(ht.options[0].selected=!0),ct.setValue(T,{value:Et(!0),items:Lt(Bt)}),Pt=Et(!1)},indices(Bt){const jt=new Set(Bt.detail.indices);for(const qt of Bt.target.options)qt.selected=jt.has(qt.index);ct.setValue(T,{value:Et(!0)}),Pt=Et(!1)},editable(Bt){Bt.target.disabled=!Bt.detail.editable}};this._dispatchEventFromSandbox(Yt,Dt)}),ht.addEventListener("input",Dt=>{var Bt;const Yt=Et(!0);ct.setValue(T,{value:Yt}),Dt.preventDefault(),(Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Pt,changeEx:Yt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Dt=>Dt.target.value)):ht.addEventListener("input",function(Dt){ct.setValue(T,{value:Et(!0)})}),this.data.combo&&this._setTextStyle(ht),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class I extends w{constructor(ct){const{data:T,elements:G}=ct;super(ct,{isRenderable:w._hasPopupData(T)}),this.elements=G}render(){this.container.classList.add("popupAnnotation");const ct=new E({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),T=[];for(const G of this.elements)G.popup=ct,T.push(G.data.id),G.addHighlightArea();return this.container.setAttribute("aria-controls",T.map(G=>`${i.AnnotationPrefix}${G}`).join(",")),this.container}}class E{constructor({container:ct,color:T,elements:G,titleObj:ht,modificationDate:mt,contentsObj:yt,richText:Et,parent:Pt,rect:Lt,parentRect:Dt,open:Yt}){dt(this,Tt);dt(this,zt);dt(this,Vt);dt(this,Xt);dt(this,ot,null);dt(this,vt,bt(this,Tt,Bn).bind(this));dt(this,j,bt(this,Xt,hn).bind(this));dt(this,o,bt(this,Vt,cn).bind(this));dt(this,$,bt(this,zt,Oe).bind(this));dt(this,X,null);dt(this,O,null);dt(this,D,null);dt(this,Z,null);dt(this,it,null);dt(this,ut,null);dt(this,W,!1);dt(this,K,null);dt(this,J,null);dt(this,st,null);dt(this,At,null);dt(this,Ct,!1);var jt;St(this,O,ct),St(this,At,ht),St(this,D,yt),St(this,st,Et),St(this,it,Pt),St(this,X,T),St(this,J,Lt),St(this,ut,Dt),St(this,Z,G);const Bt=s.PDFDateString.toDateObject(mt);Bt&&St(this,ot,Pt.l10n.get("annotation_date_string",{date:Bt.toLocaleDateString(),time:Bt.toLocaleTimeString()})),this.trigger=G.flatMap(qt=>qt.getElementsToTriggerPopup());for(const qt of this.trigger)qt.addEventListener("click",A(this,$)),qt.addEventListener("mouseenter",A(this,o)),qt.addEventListener("mouseleave",A(this,j)),qt.classList.add("popupTriggerArea");for(const qt of G)(jt=qt.container)==null||jt.addEventListener("keydown",A(this,vt));A(this,O).hidden=!0,Yt&&bt(this,zt,Oe).call(this)}render(){if(A(this,K))return;const{page:{view:ct},viewport:{rawDims:{pageWidth:T,pageHeight:G,pageX:ht,pageY:mt}}}=A(this,it),yt=St(this,K,document.createElement("div"));if(yt.className="popup",A(this,X)){const se=yt.style.outlineColor=i.Util.makeHexColor(...A(this,X));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?yt.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:yt.style.backgroundColor=i.Util.makeHexColor(...A(this,X).map(ce=>Math.floor(.7*(255-ce)+ce)))}const Et=document.createElement("span");Et.className="header";const Pt=document.createElement("h1");if(Et.append(Pt),{dir:Pt.dir,str:Pt.textContent}=A(this,At),yt.append(Et),A(this,ot)){const se=document.createElement("span");se.classList.add("popupDate"),A(this,ot).then(ae=>{se.textContent=ae}),Et.append(se)}const Lt=A(this,D),Dt=A(this,st);if(Dt!=null&&Dt.str&&(!(Lt!=null&&Lt.str)||Lt.str===Dt.str))c.XfaLayer.render({xfaHtml:Dt.html,intent:"richText",div:yt}),yt.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(Lt);yt.append(se)}let Yt=!!A(this,ut),Bt=Yt?A(this,ut):A(this,J);for(const se of A(this,Z))if(!Bt||i.Util.intersect(se.data.rect,Bt)!==null){Bt=se.data.rect,Yt=!0;break}const jt=i.Util.normalizeRect([Bt[0],ct[3]-Bt[1]+ct[1],Bt[2],ct[3]-Bt[3]+ct[1]]),qt=5,Kt=Yt?Bt[2]-Bt[0]+qt:0,Zt=jt[0]+Kt,ee=jt[1],{style:re}=A(this,O);re.left=`${100*(Zt-ht)/T}%`,re.top=`${100*(ee-mt)/G}%`,A(this,O).append(yt)}_formatContents({str:ct,dir:T}){const G=document.createElement("p");G.classList.add("popupContent"),G.dir=T;const ht=ct.split(/(?:\r\n?|\n)/);for(let mt=0,yt=ht.length;mt<yt;++mt){const Et=ht[mt];G.append(document.createTextNode(Et)),mt<yt-1&&G.append(document.createElement("br"))}return G}forceHide(){St(this,Ct,this.isVisible),A(this,Ct)&&(A(this,O).hidden=!0)}maybeShow(){A(this,Ct)&&(St(this,Ct,!1),A(this,O).hidden=!1)}get isVisible(){return A(this,O).hidden===!1}}ot=new WeakMap,vt=new WeakMap,j=new WeakMap,o=new WeakMap,$=new WeakMap,X=new WeakMap,O=new WeakMap,D=new WeakMap,Z=new WeakMap,it=new WeakMap,ut=new WeakMap,W=new WeakMap,K=new WeakMap,J=new WeakMap,st=new WeakMap,At=new WeakMap,Ct=new WeakMap,Tt=new WeakSet,Bn=function(ct){ct.altKey||ct.shiftKey||ct.ctrlKey||ct.metaKey||(ct.key==="Enter"||ct.key==="Escape"&&A(this,W))&&bt(this,zt,Oe).call(this)},zt=new WeakSet,Oe=function(){St(this,W,!A(this,W)),A(this,W)?(bt(this,Vt,cn).call(this),A(this,O).addEventListener("click",A(this,$)),A(this,O).addEventListener("keydown",A(this,vt))):(bt(this,Xt,hn).call(this),A(this,O).removeEventListener("click",A(this,$)),A(this,O).removeEventListener("keydown",A(this,vt)))},Vt=new WeakSet,cn=function(){A(this,K)||this.render(),this.isVisible?A(this,W)&&A(this,O).classList.add("focused"):(A(this,O).hidden=!1,A(this,O).style.zIndex=parseInt(A(this,O).style.zIndex)+1e3)},Xt=new WeakSet,hn=function(){A(this,O).classList.remove("focused"),!(A(this,W)||!this.isVisible)&&(A(this,O).hidden=!0,A(this,O).style.zIndex=parseInt(A(this,O).style.zIndex)-1e3)};class U extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0}),this.textContent=ct.data.textContent,this.textPosition=ct.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const ct=document.createElement("div");ct.classList.add("annotationTextContent"),ct.setAttribute("role","comment");for(const T of this.textContent){const G=document.createElement("span");G.textContent=T,ct.append(G)}this.container.append(ct)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=U;class z extends w{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});dt(this,_t,null)}render(){this.container.classList.add("lineAnnotation");const T=this.data,{width:G,height:ht}=S(T.rect),mt=this.svgFactory.create(G,ht,!0),yt=St(this,_t,this.svgFactory.createElement("svg:line"));return yt.setAttribute("x1",T.rect[2]-T.lineCoordinates[0]),yt.setAttribute("y1",T.rect[3]-T.lineCoordinates[1]),yt.setAttribute("x2",T.rect[2]-T.lineCoordinates[2]),yt.setAttribute("y2",T.rect[3]-T.lineCoordinates[3]),yt.setAttribute("stroke-width",T.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),mt.append(yt),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap;class N extends w{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});dt(this,gt,null)}render(){this.container.classList.add("squareAnnotation");const T=this.data,{width:G,height:ht}=S(T.rect),mt=this.svgFactory.create(G,ht,!0),yt=T.borderStyle.width,Et=St(this,gt,this.svgFactory.createElement("svg:rect"));return Et.setAttribute("x",yt/2),Et.setAttribute("y",yt/2),Et.setAttribute("width",G-yt),Et.setAttribute("height",ht-yt),Et.setAttribute("stroke-width",yt||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}gt=new WeakMap;class Y extends w{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});dt(this,kt,null)}render(){this.container.classList.add("circleAnnotation");const T=this.data,{width:G,height:ht}=S(T.rect),mt=this.svgFactory.create(G,ht,!0),yt=T.borderStyle.width,Et=St(this,kt,this.svgFactory.createElement("svg:ellipse"));return Et.setAttribute("cx",G/2),Et.setAttribute("cy",ht/2),Et.setAttribute("rx",G/2-yt/2),Et.setAttribute("ry",ht/2-yt/2),Et.setAttribute("stroke-width",yt||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,kt)}addHighlightArea(){this.container.classList.add("highlightArea")}}kt=new WeakMap;class d extends w{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});dt(this,Rt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:G,height:ht}=S(T.rect),mt=this.svgFactory.create(G,ht,!0);let yt=[];for(const Pt of T.vertices){const Lt=Pt.x-T.rect[0],Dt=T.rect[3]-Pt.y;yt.push(Lt+","+Dt)}yt=yt.join(" ");const Et=St(this,Rt,this.svgFactory.createElement(this.svgElementName));return Et.setAttribute("points",yt),Et.setAttribute("stroke-width",T.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),mt.append(Et),this.container.append(mt),!T.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,Rt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rt=new WeakMap;class Q extends d{constructor(ct){super(ct),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends w{constructor(T){super(T,{isRenderable:!0,ignoreBorder:!0});dt(this,ne,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const T=this.data,{width:G,height:ht}=S(T.rect),mt=this.svgFactory.create(G,ht,!0);for(const yt of T.inkLists){let Et=[];for(const Lt of yt){const Dt=Lt.x-T.rect[0],Yt=T.rect[3]-Lt.y;Et.push(`${Dt},${Yt}`)}Et=Et.join(" ");const Pt=this.svgFactory.createElement(this.svgElementName);A(this,ne).push(Pt),Pt.setAttribute("points",Et),Pt.setAttribute("stroke-width",T.borderStyle.width||1),Pt.setAttribute("stroke","transparent"),Pt.setAttribute("fill","transparent"),!T.popupRef&&this.hasPopupData&&this._createPopup(),mt.append(Pt)}return this.container.append(mt),this.container}getElementsToTriggerPopup(){return A(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,e.InkAnnotationElement=at;class q extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class nt extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ft extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class lt extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class rt extends w{constructor(ct){super(ct,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=rt;class H extends w{constructor(T){var mt;super(T,{isRenderable:!0});dt(this,wt);dt(this,te,null);const{filename:G,content:ht}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(G,!0),this.content=ht,(mt=this.linkService.eventBus)==null||mt.dispatch("fileattachmentannotation",{source:this,filename:G,content:ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:T,data:G}=this;let ht;G.hasAppearance||G.fillAlpha===0?ht=document.createElement("div"):(ht=document.createElement("img"),ht.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(G.name)?"paperclip":"pushpin"}.svg`,G.fillAlpha&&G.fillAlpha<1&&(ht.style=`filter: opacity(${Math.round(G.fillAlpha*100)}%);`)),ht.addEventListener("dblclick",bt(this,wt,un).bind(this)),St(this,te,ht);const{isMac:mt}=i.FeatureTest.platform;return T.addEventListener("keydown",yt=>{yt.key==="Enter"&&(mt?yt.metaKey:yt.ctrlKey)&&bt(this,wt,un).call(this)}),!G.popupRef&&this.hasPopupData?this._createPopup():ht.classList.add("popupTriggerArea"),T.append(ht),T}getElementsToTriggerPopup(){return A(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,wt=new WeakSet,un=function(){var T;(T=this.downloadManager)==null||T.openOrDownloadData(this.container,this.content,this.filename)};class v{constructor({div:ct,accessibilityManager:T,annotationCanvasMap:G,l10n:ht,page:mt,viewport:yt}){dt(this,Gt);dt(this,Ft);dt(this,Ht,null);dt(this,Mt,null);dt(this,Wt,new Map);this.div=ct,St(this,Ht,T),St(this,Mt,G),this.l10n=ht,this.page=mt,this.viewport=yt,this.zIndex=0,this.l10n||(this.l10n=h.NullL10n)}async render(ct){const{annotations:T}=ct,G=this.div;(0,s.setLayerDimensions)(G,this.viewport);const ht=new Map,mt={data:null,layer:G,linkService:ct.linkService,downloadManager:ct.downloadManager,imageResourcesPath:ct.imageResourcesPath||"",renderForms:ct.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:ct.annotationStorage||new r.AnnotationStorage,enableScripting:ct.enableScripting===!0,hasJSActions:ct.hasJSActions,fieldObjects:ct.fieldObjects,parent:this,elements:null};for(const yt of T){if(yt.noHTML)continue;const Et=yt.annotationType===i.AnnotationType.POPUP;if(Et){const Dt=ht.get(yt.id);if(!Dt)continue;mt.elements=Dt}else{const{width:Dt,height:Yt}=S(yt.rect);if(Dt<=0||Yt<=0)continue}mt.data=yt;const Pt=u.create(mt);if(!Pt.isRenderable)continue;if(!Et&&yt.popupRef){const Dt=ht.get(yt.popupRef);Dt?Dt.push(Pt):ht.set(yt.popupRef,[Pt])}Pt.annotationEditorType>0&&A(this,Wt).set(Pt.data.id,Pt);const Lt=Pt.render();yt.hidden&&(Lt.style.visibility="hidden"),bt(this,Gt,jn).call(this,Lt,yt.id)}bt(this,Ft,dn).call(this),await this.l10n.translate(G)}update({viewport:ct}){const T=this.div;this.viewport=ct,(0,s.setLayerDimensions)(T,{rotation:ct.rotation}),bt(this,Ft,dn).call(this),T.hidden=!1}getEditableAnnotations(){return Array.from(A(this,Wt).values())}getEditableAnnotation(ct){return A(this,Wt).get(ct)}}Ht=new WeakMap,Mt=new WeakMap,Wt=new WeakMap,Gt=new WeakSet,jn=function(ct,T){var ht;const G=ct.firstChild||ct;G.id=`${i.AnnotationPrefix}${T}`,this.div.append(ct),(ht=A(this,Ht))==null||ht.moveElementInDOM(this.div,ct,G,!1)},Ft=new WeakSet,dn=function(){if(!A(this,Mt))return;const ct=this.div;for(const[T,G]of A(this,Mt)){const ht=ct.querySelector(`[data-annotation-id="${T}"]`);if(!ht)continue;const{firstChild:mt}=ht;mt?mt.nodeName==="CANVAS"?mt.replaceWith(G):mt.before(G):ht.append(G)}A(this,Mt).clear()},e.AnnotationLayer=v},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function i(r){return Math.max(0,Math.min(255,255*r))}class s{static CMYK_G([a,h,c,f]){return["G",1-Math.min(1,.3*a+.59*c+.11*h+f)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_rgb([a]){return a=i(a),[a,a,a]}static G_HTML([a]){const h=n(a);return`#${h}${h}${h}`}static RGB_G([a,h,c]){return["G",.3*a+.59*h+.11*c]}static RGB_rgb(a){return a.map(i)}static RGB_HTML(a){return`#${a.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([a,h,c,f]){return["RGB",1-Math.min(1,a+f),1-Math.min(1,c+f),1-Math.min(1,h+f)]}static CMYK_rgb([a,h,c,f]){return[i(1-Math.min(1,a+f)),i(1-Math.min(1,c+f)),i(1-Math.min(1,h+f))]}static CMYK_HTML(a){const h=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(h)}static RGB_CMYK([a,h,c]){const f=1-a,l=1-h,b=1-c,S=Math.min(f,l,b);return["CMYK",f,l,b,S]}}e.ColorConverters=s},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=i;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function i(a,h){switch(a){case"find_match_count":a=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":a=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return n[a]||""}function s(a,h){return h?a.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(c,f)=>f in h?h[f]:"{{"+f+"}}"):a}const r={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(a,h=null,c=i(a,h)){return s(c,h)},async translate(a){}};e.NullL10n=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=n(25);class s{static setupStorage(a,h,c,f,l){const b=f.getValue(h,{value:null});switch(c.name){case"textarea":if(b.value!==null&&(a.textContent=b.value),l==="print")break;a.addEventListener("input",S=>{f.setValue(h,{value:S.target.value})});break;case"input":if(c.attributes.type==="radio"||c.attributes.type==="checkbox"){if(b.value===c.attributes.xfaOn?a.setAttribute("checked",!0):b.value===c.attributes.xfaOff&&a.removeAttribute("checked"),l==="print")break;a.addEventListener("change",S=>{f.setValue(h,{value:S.target.checked?S.target.getAttribute("xfaOn"):S.target.getAttribute("xfaOff")})})}else{if(b.value!==null&&a.setAttribute("value",b.value),l==="print")break;a.addEventListener("input",S=>{f.setValue(h,{value:S.target.value})})}break;case"select":if(b.value!==null){a.setAttribute("value",b.value);for(const S of c.children)S.attributes.value===b.value?S.attributes.selected=!0:S.attributes.hasOwnProperty("selected")&&delete S.attributes.selected}a.addEventListener("input",S=>{const u=S.target.options,w=u.selectedIndex===-1?"":u[u.selectedIndex].value;f.setValue(h,{value:w})});break}}static setAttributes({html:a,element:h,storage:c=null,intent:f,linkService:l}){const{attributes:b}=h,S=a instanceof HTMLAnchorElement;b.type==="radio"&&(b.name=`${b.name}-${f}`);for(const[u,w]of Object.entries(b))if(w!=null)switch(u){case"class":w.length&&a.setAttribute(u,w.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",w);break;case"style":Object.assign(a.style,w);break;case"textContent":a.textContent=w;break;default:(!S||u!=="href"&&u!=="newWindow")&&a.setAttribute(u,w)}S&&l.addLinkAttributes(a,b.href,b.newWindow),c&&b.dataId&&this.setupStorage(a,b.dataId,h,c)}static render(a){var g;const h=a.annotationStorage,c=a.linkService,f=a.xfaHtml,l=a.intent||"display",b=document.createElement(f.name);f.attributes&&this.setAttributes({html:b,element:f,intent:l,linkService:c});const S=[[f,-1,b]],u=a.div;if(u.append(b),a.viewport){const m=`matrix(${a.viewport.transform.join(",")})`;u.style.transform=m}l!=="richText"&&u.setAttribute("class","xfaLayer xfaFont");const w=[];for(;S.length>0;){const[m,_,x]=S.at(-1);if(_+1===m.children.length){S.pop();continue}const P=m.children[++S.at(-1)[1]];if(P===null)continue;const{name:R}=P;if(R==="#text"){const F=document.createTextNode(P.value);w.push(F),x.append(F);continue}const y=(g=P==null?void 0:P.attributes)!=null&&g.xmlns?document.createElementNS(P.attributes.xmlns,R):document.createElement(R);if(x.append(y),P.attributes&&this.setAttributes({html:y,element:P,storage:h,intent:l,linkService:c}),P.children&&P.children.length>0)S.push([P,-1,y]);else if(P.value){const F=document.createTextNode(P.value);i.XfaText.shouldBuildText(R)&&w.push(F),y.append(F)}}for(const m of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:w}}static update(a){const h=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=h,a.div.hidden=!1}}e.XfaLayer=s},(t,e,n)=>{var f,l,b,S,u,w,g,m,_,x,P,R,y,F,B,Un,E,zn,z,$n,Y,Hn,Q,fn,at,Wn,nt,pn,lt,Vn,H,Gn,C,qn,M,Xn,V,Yn,ot,le,j,gn,$,Ie,O,Me,Z,ge,ut,mn,K,De,st,Kn,Ct,_n,It,Jn,Ut,Zn,Nt,bn,xt,Le,gt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var i=n(1),s=n(4),r=n(29),a=n(6),h=n(5);const Rt=class Rt extends s.AnnotationEditor{constructor(wt){super({...wt,name:"inkEditor"});dt(this,B);dt(this,E);dt(this,z);dt(this,Y);dt(this,Q);dt(this,at);dt(this,nt);dt(this,lt);dt(this,H);dt(this,C);dt(this,M);dt(this,V);dt(this,ot);dt(this,j);dt(this,$);dt(this,O);dt(this,Z);dt(this,ut);dt(this,K);dt(this,Ut);dt(this,Nt);dt(this,xt);dt(this,gt);dt(this,f,0);dt(this,l,0);dt(this,b,this.canvasPointermove.bind(this));dt(this,S,this.canvasPointerleave.bind(this));dt(this,u,this.canvasPointerup.bind(this));dt(this,w,this.canvasPointerdown.bind(this));dt(this,g,new Path2D);dt(this,m,!1);dt(this,_,!1);dt(this,x,!1);dt(this,P,null);dt(this,R,0);dt(this,y,0);dt(this,F,null);this.color=wt.color||null,this.thickness=wt.thickness||null,this.opacity=wt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(wt){s.AnnotationEditor.initialize(wt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(wt,Ot){switch(wt){case i.AnnotationEditorParamsType.INK_THICKNESS:Rt._defaultThickness=Ot;break;case i.AnnotationEditorParamsType.INK_COLOR:Rt._defaultColor=Ot;break;case i.AnnotationEditorParamsType.INK_OPACITY:Rt._defaultOpacity=Ot/100;break}}updateParams(wt,Ot){switch(wt){case i.AnnotationEditorParamsType.INK_THICKNESS:bt(this,B,Un).call(this,Ot);break;case i.AnnotationEditorParamsType.INK_COLOR:bt(this,E,zn).call(this,Ot);break;case i.AnnotationEditorParamsType.INK_OPACITY:bt(this,z,$n).call(this,Ot);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Rt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Rt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Rt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Rt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Rt._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Rt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(bt(this,$,Ie).call(this),bt(this,O,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),bt(this,Z,ge).call(this)),bt(this,gt,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,A(this,P).disconnect(),St(this,P,null),super.remove())}setParent(wt){!this.parent&&wt?this._uiManager.removeShouldRescale(this):this.parent&&wt===null&&this._uiManager.addShouldRescale(this),super.setParent(wt)}onScaleChanging(){const[wt,Ot]=this.parentDimensions,Ht=this.width*wt,Mt=this.height*Ot;this.setDimensions(Ht,Mt)}enableEditMode(){A(this,m)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",A(this,w)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",A(this,w)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){A(this,m)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),St(this,m,!0),this.div.classList.add("disabled"),bt(this,gt,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(wt){this._focusEventsAllowed&&(super.focusin(wt),this.enableEditMode())}canvasPointerdown(wt){wt.button!==0||!this.isInEditMode()||A(this,m)||(this.setInForeground(),wt.preventDefault(),wt.type!=="mouse"&&this.div.focus(),bt(this,at,Wn).call(this,wt.offsetX,wt.offsetY))}canvasPointermove(wt){wt.preventDefault(),bt(this,nt,pn).call(this,wt.offsetX,wt.offsetY)}canvasPointerup(wt){wt.preventDefault(),bt(this,j,gn).call(this,wt)}canvasPointerleave(wt){bt(this,j,gn).call(this,wt)}get isResizable(){return!this.isEmpty()&&A(this,m)}render(){if(this.div)return this.div;let wt,Ot;this.width&&(wt=this.x,Ot=this.y),super.render(),s.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var Ft;return(Ft=this.div)==null?void 0:Ft.setAttribute("aria-label",Qt)});const[Ht,Mt,Wt,Gt]=bt(this,Y,Hn).call(this);if(this.setAt(Ht,Mt,0,0),this.setDims(Wt,Gt),bt(this,$,Ie).call(this),this.width){const[Qt,Ft]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*Ft),this.setAt(wt*Qt,Ot*Ft,this.width*Qt,this.height*Ft),St(this,x,!0),bt(this,Z,ge).call(this),this.setDims(this.width*Qt,this.height*Ft),bt(this,ot,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return bt(this,O,Me).call(this),this.div}setDimensions(wt,Ot){const Ht=Math.round(wt),Mt=Math.round(Ot);if(A(this,R)===Ht&&A(this,y)===Mt)return;St(this,R,Ht),St(this,y,Mt),this.canvas.style.visibility="hidden";const[Wt,Gt]=this.parentDimensions;this.width=wt/Wt,this.height=Ot/Gt,this.fixAndSetPosition(),A(this,m)&&bt(this,ut,mn).call(this,wt,Ot),bt(this,Z,ge).call(this),bt(this,ot,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(wt,Ot,Ht){var mt,yt,Et;if(wt instanceof r.InkAnnotationElement)return null;const Mt=super.deserialize(wt,Ot,Ht);Mt.thickness=wt.thickness,Mt.color=i.Util.makeHexColor(...wt.color),Mt.opacity=wt.opacity;const[Wt,Gt]=Mt.pageDimensions,Qt=Mt.width*Wt,Ft=Mt.height*Gt,Jt=Mt.parentScale,$t=wt.thickness/2;St(Mt,m,!0),St(Mt,R,Math.round(Qt)),St(Mt,y,Math.round(Ft));const{paths:ct,rect:T,rotation:G}=wt;for(let{bezier:Pt}of ct){Pt=bt(mt=Rt,It,Jn).call(mt,Pt,T,G);const Lt=[];Mt.paths.push(Lt);let Dt=Jt*(Pt[0]-$t),Yt=Jt*(Pt[1]-$t);for(let jt=2,qt=Pt.length;jt<qt;jt+=6){const Kt=Jt*(Pt[jt]-$t),Zt=Jt*(Pt[jt+1]-$t),ee=Jt*(Pt[jt+2]-$t),re=Jt*(Pt[jt+3]-$t),se=Jt*(Pt[jt+4]-$t),ae=Jt*(Pt[jt+5]-$t);Lt.push([[Dt,Yt],[Kt,Zt],[ee,re],[se,ae]]),Dt=se,Yt=ae}const Bt=bt(this,st,Kn).call(this,Lt);Mt.bezierPath2D.push(Bt)}const ht=bt(yt=Mt,Nt,bn).call(yt);return St(Mt,l,Math.max(s.AnnotationEditor.MIN_SIZE,ht[2]-ht[0])),St(Mt,f,Math.max(s.AnnotationEditor.MIN_SIZE,ht[3]-ht[1])),bt(Et=Mt,ut,mn).call(Et,Qt,Ft),Mt}serialize(){if(this.isEmpty())return null;const wt=this.getRect(0,0),Ot=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:Ot,thickness:this.thickness,opacity:this.opacity,paths:bt(this,Ut,Zn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,wt),pageIndex:this.pageIndex,rect:wt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};f=new WeakMap,l=new WeakMap,b=new WeakMap,S=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,x=new WeakMap,P=new WeakMap,R=new WeakMap,y=new WeakMap,F=new WeakMap,B=new WeakSet,Un=function(wt){const Ot=this.thickness;this.addCommands({cmd:()=>{this.thickness=wt,bt(this,gt,me).call(this)},undo:()=>{this.thickness=Ot,bt(this,gt,me).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,zn=function(wt){const Ot=this.color;this.addCommands({cmd:()=>{this.color=wt,bt(this,ot,le).call(this)},undo:()=>{this.color=Ot,bt(this,ot,le).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},z=new WeakSet,$n=function(wt){wt/=100;const Ot=this.opacity;this.addCommands({cmd:()=>{this.opacity=wt,bt(this,ot,le).call(this)},undo:()=>{this.opacity=Ot,bt(this,ot,le).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,Hn=function(){const{parentRotation:wt,parentDimensions:[Ot,Ht]}=this;switch(wt){case 90:return[0,Ht,Ht,Ot];case 180:return[Ot,Ht,Ot,Ht];case 270:return[Ot,0,Ht,Ot];default:return[0,0,Ot,Ht]}},Q=new WeakSet,fn=function(){const{ctx:wt,color:Ot,opacity:Ht,thickness:Mt,parentScale:Wt,scaleFactor:Gt}=this;wt.lineWidth=Mt*Wt/Gt,wt.lineCap="round",wt.lineJoin="round",wt.miterLimit=10,wt.strokeStyle=`${Ot}${(0,h.opacityToHex)(Ht)}`},at=new WeakSet,Wn=function(wt,Ot){this.canvas.addEventListener("contextmenu",a.noContextMenu),this.canvas.addEventListener("pointerleave",A(this,S)),this.canvas.addEventListener("pointermove",A(this,b)),this.canvas.addEventListener("pointerup",A(this,u)),this.canvas.removeEventListener("pointerdown",A(this,w)),this.isEditing=!0,A(this,x)||(St(this,x,!0),bt(this,Z,ge).call(this),this.thickness||(this.thickness=Rt._defaultThickness),this.color||(this.color=Rt._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Rt._defaultOpacity)),this.currentPath.push([wt,Ot]),St(this,_,!1),bt(this,Q,fn).call(this),St(this,F,()=>{bt(this,C,qn).call(this),A(this,F)&&window.requestAnimationFrame(A(this,F))}),window.requestAnimationFrame(A(this,F))},nt=new WeakSet,pn=function(wt,Ot){const[Ht,Mt]=this.currentPath.at(-1);if(this.currentPath.length>1&&wt===Ht&&Ot===Mt)return;const Wt=this.currentPath;let Gt=A(this,g);if(Wt.push([wt,Ot]),St(this,_,!0),Wt.length<=2){Gt.moveTo(...Wt[0]),Gt.lineTo(wt,Ot);return}Wt.length===3&&(St(this,g,Gt=new Path2D),Gt.moveTo(...Wt[0])),bt(this,M,Xn).call(this,Gt,...Wt.at(-3),...Wt.at(-2),wt,Ot)},lt=new WeakSet,Vn=function(){if(this.currentPath.length===0)return;const wt=this.currentPath.at(-1);A(this,g).lineTo(...wt)},H=new WeakSet,Gn=function(wt,Ot){St(this,F,null),wt=Math.min(Math.max(wt,0),this.canvas.width),Ot=Math.min(Math.max(Ot,0),this.canvas.height),bt(this,nt,pn).call(this,wt,Ot),bt(this,lt,Vn).call(this);let Ht;if(this.currentPath.length!==1)Ht=bt(this,V,Yn).call(this);else{const Ft=[wt,Ot];Ht=[[Ft,Ft.slice(),Ft.slice(),Ft]]}const Mt=A(this,g),Wt=this.currentPath;this.currentPath=[],St(this,g,new Path2D);const Gt=()=>{this.allRawPaths.push(Wt),this.paths.push(Ht),this.bezierPath2D.push(Mt),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(bt(this,$,Ie).call(this),bt(this,O,Me).call(this)),bt(this,gt,me).call(this))};this.addCommands({cmd:Gt,undo:Qt,mustExec:!0})},C=new WeakSet,qn=function(){if(!A(this,_))return;St(this,_,!1);const wt=Math.ceil(this.thickness*this.parentScale),Ot=this.currentPath.slice(-3),Ht=Ot.map(Gt=>Gt[0]),Mt=Ot.map(Gt=>Gt[1]);Math.min(...Ht)-wt,Math.max(...Ht)+wt,Math.min(...Mt)-wt,Math.max(...Mt)+wt;const{ctx:Wt}=this;Wt.save(),Wt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Gt of this.bezierPath2D)Wt.stroke(Gt);Wt.stroke(A(this,g)),Wt.restore()},M=new WeakSet,Xn=function(wt,Ot,Ht,Mt,Wt,Gt,Qt){const Ft=(Ot+Mt)/2,Jt=(Ht+Wt)/2,$t=(Mt+Gt)/2,ct=(Wt+Qt)/2;wt.bezierCurveTo(Ft+2*(Mt-Ft)/3,Jt+2*(Wt-Jt)/3,$t+2*(Mt-$t)/3,ct+2*(Wt-ct)/3,$t,ct)},V=new WeakSet,Yn=function(){const wt=this.currentPath;if(wt.length<=2)return[[wt[0],wt[0],wt.at(-1),wt.at(-1)]];const Ot=[];let Ht,[Mt,Wt]=wt[0];for(Ht=1;Ht<wt.length-2;Ht++){const[T,G]=wt[Ht],[ht,mt]=wt[Ht+1],yt=(T+ht)/2,Et=(G+mt)/2,Pt=[Mt+2*(T-Mt)/3,Wt+2*(G-Wt)/3],Lt=[yt+2*(T-yt)/3,Et+2*(G-Et)/3];Ot.push([[Mt,Wt],Pt,Lt,[yt,Et]]),[Mt,Wt]=[yt,Et]}const[Gt,Qt]=wt[Ht],[Ft,Jt]=wt[Ht+1],$t=[Mt+2*(Gt-Mt)/3,Wt+2*(Qt-Wt)/3],ct=[Ft+2*(Gt-Ft)/3,Jt+2*(Qt-Jt)/3];return Ot.push([[Mt,Wt],$t,ct,[Ft,Jt]]),Ot},ot=new WeakSet,le=function(){if(this.isEmpty()){bt(this,K,De).call(this);return}bt(this,Q,fn).call(this);const{canvas:wt,ctx:Ot}=this;Ot.setTransform(1,0,0,1,0,0),Ot.clearRect(0,0,wt.width,wt.height),bt(this,K,De).call(this);for(const Ht of this.bezierPath2D)Ot.stroke(Ht)},j=new WeakSet,gn=function(wt){this.canvas.removeEventListener("pointerleave",A(this,S)),this.canvas.removeEventListener("pointermove",A(this,b)),this.canvas.removeEventListener("pointerup",A(this,u)),this.canvas.addEventListener("pointerdown",A(this,w)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",a.noContextMenu)},10),bt(this,H,Gn).call(this,wt.offsetX,wt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},$=new WeakSet,Ie=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(wt=>{var Ot;return(Ot=this.canvas)==null?void 0:Ot.setAttribute("aria-label",wt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},O=new WeakSet,Me=function(){St(this,P,new ResizeObserver(wt=>{const Ot=wt[0].contentRect;Ot.width&&Ot.height&&this.setDimensions(Ot.width,Ot.height)})),A(this,P).observe(this.div)},Z=new WeakSet,ge=function(){if(!A(this,x))return;const[wt,Ot]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*wt),this.canvas.height=Math.ceil(this.height*Ot),bt(this,K,De).call(this)},ut=new WeakSet,mn=function(wt,Ot){const Ht=bt(this,xt,Le).call(this),Mt=(wt-Ht)/A(this,l),Wt=(Ot-Ht)/A(this,f);this.scaleFactor=Math.min(Mt,Wt)},K=new WeakSet,De=function(){const wt=bt(this,xt,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+wt,this.translationY*this.scaleFactor+wt)},st=new WeakSet,Kn=function(wt){const Ot=new Path2D;for(let Ht=0,Mt=wt.length;Ht<Mt;Ht++){const[Wt,Gt,Qt,Ft]=wt[Ht];Ht===0&&Ot.moveTo(...Wt),Ot.bezierCurveTo(Gt[0],Gt[1],Qt[0],Qt[1],Ft[0],Ft[1])}return Ot},Ct=new WeakSet,_n=function(wt,Ot,Ht){const[Mt,Wt,Gt,Qt]=Ot;switch(Ht){case 0:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2)wt[Ft]+=Mt,wt[Ft+1]=Qt-wt[Ft+1];break;case 90:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2){const $t=wt[Ft];wt[Ft]=wt[Ft+1]+Mt,wt[Ft+1]=$t+Wt}break;case 180:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2)wt[Ft]=Gt-wt[Ft],wt[Ft+1]+=Wt;break;case 270:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2){const $t=wt[Ft];wt[Ft]=Gt-wt[Ft+1],wt[Ft+1]=Qt-$t}break;default:throw new Error("Invalid rotation")}return wt},It=new WeakSet,Jn=function(wt,Ot,Ht){const[Mt,Wt,Gt,Qt]=Ot;switch(Ht){case 0:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2)wt[Ft]-=Mt,wt[Ft+1]=Qt-wt[Ft+1];break;case 90:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2){const $t=wt[Ft];wt[Ft]=wt[Ft+1]-Wt,wt[Ft+1]=$t-Mt}break;case 180:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2)wt[Ft]=Gt-wt[Ft],wt[Ft+1]-=Wt;break;case 270:for(let Ft=0,Jt=wt.length;Ft<Jt;Ft+=2){const $t=wt[Ft];wt[Ft]=Qt-wt[Ft+1],wt[Ft+1]=Gt-$t}break;default:throw new Error("Invalid rotation")}return wt},Ut=new WeakSet,Zn=function(wt,Ot,Ht,Mt){var Jt,$t;const Wt=[],Gt=this.thickness/2,Qt=wt*Ot+Gt,Ft=wt*Ht+Gt;for(const ct of this.paths){const T=[],G=[];for(let ht=0,mt=ct.length;ht<mt;ht++){const[yt,Et,Pt,Lt]=ct[ht],Dt=wt*yt[0]+Qt,Yt=wt*yt[1]+Ft,Bt=wt*Et[0]+Qt,jt=wt*Et[1]+Ft,qt=wt*Pt[0]+Qt,Kt=wt*Pt[1]+Ft,Zt=wt*Lt[0]+Qt,ee=wt*Lt[1]+Ft;ht===0&&(T.push(Dt,Yt),G.push(Dt,Yt)),T.push(Bt,jt,qt,Kt,Zt,ee),G.push(Bt,jt),ht===mt-1&&G.push(Zt,ee)}Wt.push({bezier:bt(Jt=Rt,Ct,_n).call(Jt,T,Mt,this.rotation),points:bt($t=Rt,Ct,_n).call($t,G,Mt,this.rotation)})}return Wt},Nt=new WeakSet,bn=function(){let wt=1/0,Ot=-1/0,Ht=1/0,Mt=-1/0;for(const Wt of this.paths)for(const[Gt,Qt,Ft,Jt]of Wt){const $t=i.Util.bezierBoundingBox(...Gt,...Qt,...Ft,...Jt);wt=Math.min(wt,$t[0]),Ht=Math.min(Ht,$t[1]),Ot=Math.max(Ot,$t[2]),Mt=Math.max(Mt,$t[3])}return[wt,Ht,Ot,Mt]},xt=new WeakSet,Le=function(){return A(this,m)?Math.ceil(this.thickness*this.parentScale):0},gt=new WeakSet,me=function(wt=!1){if(this.isEmpty())return;if(!A(this,m)){bt(this,ot,le).call(this);return}const Ot=bt(this,Nt,bn).call(this),Ht=bt(this,xt,Le).call(this);St(this,l,Math.max(s.AnnotationEditor.MIN_SIZE,Ot[2]-Ot[0])),St(this,f,Math.max(s.AnnotationEditor.MIN_SIZE,Ot[3]-Ot[1]));const Mt=Math.ceil(Ht+A(this,l)*this.scaleFactor),Wt=Math.ceil(Ht+A(this,f)*this.scaleFactor),[Gt,Qt]=this.parentDimensions;this.width=Mt/Gt,this.height=Wt/Qt,this.setAspectRatio(Mt,Wt);const Ft=this.translationX,Jt=this.translationY;this.translationX=-Ot[0],this.translationY=-Ot[1],bt(this,Z,ge).call(this),bt(this,ot,le).call(this),St(this,R,Mt),St(this,y,Wt),this.setDims(Mt,Wt);const $t=wt?Ht/this.scaleFactor/2:0;this.translate(Ft-this.translationX-$t,Jt-this.translationY-$t)},dt(Rt,st),dt(Rt,Ct),dt(Rt,It),ie(Rt,"_defaultColor",null),ie(Rt,"_defaultOpacity",1),ie(Rt,"_defaultThickness",1),ie(Rt,"_type","ink");let c=Rt;e.InkEditor=c},(t,e,n)=>{var c,f,l,b,S,u,w,g,m,_,x,Se,R,Ee,F,Ne,I,yn,U,Qn,N,ti,d,vn,pt,Be,q,ei;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var i=n(1),s=n(4),r=n(6),a=n(29);const ft=class ft extends s.AnnotationEditor{constructor(H){super({...H,name:"stampEditor"});dt(this,x);dt(this,R);dt(this,F);dt(this,I);dt(this,U);dt(this,N);dt(this,d);dt(this,pt);dt(this,q);dt(this,c,null);dt(this,f,null);dt(this,l,null);dt(this,b,null);dt(this,S,null);dt(this,u,null);dt(this,w,null);dt(this,g,null);dt(this,m,!1);dt(this,_,!1);St(this,b,H.bitmapUrl),St(this,S,H.bitmapFile)}static initialize(H){s.AnnotationEditor.initialize(H)}static get supportedTypes(){const H=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",H.map(v=>`image/${v}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(H){return this.supportedTypes.includes(H)}static paste(H,v){v.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:H.getAsFile()})}remove(){var H,v;A(this,f)&&(St(this,c,null),this._uiManager.imageManager.deleteId(A(this,f)),(H=A(this,u))==null||H.remove(),St(this,u,null),(v=A(this,w))==null||v.disconnect(),St(this,w,null)),super.remove()}rebuild(){if(!this.parent){A(this,f)&&bt(this,F,Ne).call(this);return}super.rebuild(),this.div!==null&&(A(this,f)&&bt(this,F,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(A(this,l)||A(this,c)||A(this,b)||A(this,S))}get isResizable(){return!0}render(){if(this.div)return this.div;let H,v;if(this.width&&(H=this.x,v=this.y),super.render(),this.div.hidden=!0,A(this,c)?bt(this,I,yn).call(this):bt(this,F,Ne).call(this),this.width){const[C,k]=this.parentDimensions;this.setAt(H*C,v*k,this.width*C,this.height*k)}return this.div}static deserialize(H,v,C){if(H instanceof a.StampAnnotationElement)return null;const k=super.deserialize(H,v,C),{rect:M,bitmapUrl:L,bitmapId:V,isSvg:et,accessibilityData:ot}=H;V&&C.imageManager.isValidId(V)?St(k,f,V):St(k,b,L),St(k,m,et);const[vt,j]=k.pageDimensions;return k.width=(M[2]-M[0])/vt,k.height=(M[3]-M[1])/j,ot&&(k.altTextData=ot),k}serialize(H=!1,v=null){if(this.isEmpty())return null;const C={annotationType:i.AnnotationEditorType.STAMP,bitmapId:A(this,f),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:A(this,m),structTreeParentId:this._structTreeParentId};if(H)return C.bitmapUrl=bt(this,pt,Be).call(this,!0),C.accessibilityData=this.altTextData,C;const{decorative:k,altText:M}=this.altTextData;if(!k&&M&&(C.accessibilityData={type:"Figure",alt:M}),v===null)return C;v.stamps||(v.stamps=new Map);const L=A(this,m)?(C.rect[2]-C.rect[0])*(C.rect[3]-C.rect[1]):null;if(!v.stamps.has(A(this,f)))v.stamps.set(A(this,f),{area:L,serialized:C}),C.bitmap=bt(this,pt,Be).call(this,!1);else if(A(this,m)){const V=v.stamps.get(A(this,f));L>V.area&&(V.area=L,V.serialized.bitmap.close(),V.serialized.bitmap=bt(this,pt,Be).call(this,!1))}return C}};c=new WeakMap,f=new WeakMap,l=new WeakMap,b=new WeakMap,S=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,x=new WeakSet,Se=function(H,v=!1){if(!H){this.remove();return}St(this,c,H.bitmap),v||(St(this,f,H.id),St(this,m,H.isSvg)),bt(this,I,yn).call(this)},R=new WeakSet,Ee=function(){St(this,l,null),this._uiManager.enableWaiting(!1),A(this,u)&&this.div.focus()},F=new WeakSet,Ne=function(){if(A(this,f)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(A(this,f)).then(v=>bt(this,x,Se).call(this,v,!0)).finally(()=>bt(this,R,Ee).call(this));return}if(A(this,b)){const v=A(this,b);St(this,b,null),this._uiManager.enableWaiting(!0),St(this,l,this._uiManager.imageManager.getFromUrl(v).then(C=>bt(this,x,Se).call(this,C)).finally(()=>bt(this,R,Ee).call(this)));return}if(A(this,S)){const v=A(this,S);St(this,S,null),this._uiManager.enableWaiting(!0),St(this,l,this._uiManager.imageManager.getFromFile(v).then(C=>bt(this,x,Se).call(this,C)).finally(()=>bt(this,R,Ee).call(this)));return}const H=document.createElement("input");H.type="file",H.accept=ft.supportedTypesStr,St(this,l,new Promise(v=>{H.addEventListener("change",async()=>{if(!H.files||H.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const C=await this._uiManager.imageManager.getFromFile(H.files[0]);bt(this,x,Se).call(this,C)}v()}),H.addEventListener("cancel",()=>{this.remove(),v()})}).finally(()=>bt(this,R,Ee).call(this))),H.click()},I=new WeakSet,yn=function(){const{div:H}=this;let{width:v,height:C}=A(this,c);const[k,M]=this.pageDimensions,L=.75;if(this.width)v=this.width*k,C=this.height*M;else if(v>L*k||C>L*M){const vt=Math.min(L*k/v,L*M/C);v*=vt,C*=vt}const[V,et]=this.parentDimensions;this.setDims(v*V/k,C*et/M),this._uiManager.enableWaiting(!1);const ot=St(this,u,document.createElement("canvas"));H.append(ot),H.hidden=!1,bt(this,d,vn).call(this,v,C),bt(this,q,ei).call(this),A(this,_)||(this.parent.addUndoableEditor(this),St(this,_,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},U=new WeakSet,Qn=function(H,v){var L;const[C,k]=this.parentDimensions;this.width=H/C,this.height=v/k,this.setDims(H,v),(L=this._initialOptions)!=null&&L.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,A(this,g)!==null&&clearTimeout(A(this,g)),St(this,g,setTimeout(()=>{St(this,g,null),bt(this,d,vn).call(this,H,v)},200))},N=new WeakSet,ti=function(H,v){const{width:C,height:k}=A(this,c);let M=C,L=k,V=A(this,c);for(;M>2*H||L>2*v;){const et=M,ot=L;M>2*H&&(M=M>=16384?Math.floor(M/2)-1:Math.ceil(M/2)),L>2*v&&(L=L>=16384?Math.floor(L/2)-1:Math.ceil(L/2));const vt=new OffscreenCanvas(M,L);vt.getContext("2d").drawImage(V,0,0,et,ot,0,0,M,L),V=vt.transferToImageBitmap()}return V},d=new WeakSet,vn=function(H,v){H=Math.ceil(H),v=Math.ceil(v);const C=A(this,u);if(!C||C.width===H&&C.height===v)return;C.width=H,C.height=v;const k=A(this,m)?A(this,c):bt(this,N,ti).call(this,H,v),M=C.getContext("2d");M.filter=this._uiManager.hcmFilter,M.drawImage(k,0,0,k.width,k.height,0,0,H,v)},pt=new WeakSet,Be=function(H){if(H){if(A(this,m)){const k=this._uiManager.imageManager.getSvgUrl(A(this,f));if(k)return k}const v=document.createElement("canvas");return{width:v.width,height:v.height}=A(this,c),v.getContext("2d").drawImage(A(this,c),0,0),v.toDataURL()}if(A(this,m)){const[v,C]=this.pageDimensions,k=Math.round(this.width*v*r.PixelsPerInch.PDF_TO_CSS_UNITS),M=Math.round(this.height*C*r.PixelsPerInch.PDF_TO_CSS_UNITS),L=new OffscreenCanvas(k,M);return L.getContext("2d").drawImage(A(this,c),0,0,A(this,c).width,A(this,c).height,0,0,k,M),L.transferToImageBitmap()}return structuredClone(A(this,c))},q=new WeakSet,ei=function(){St(this,w,new ResizeObserver(H=>{const v=H[0].contentRect;v.width&&v.height&&bt(this,U,Qn).call(this,v.width,v.height)})),A(this,w).observe(this.div)},ie(ft,"_type","stamp");let h=ft;e.StampEditor=h}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return h.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return c.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),r=__w_pdfjs_require__(27),a=__w_pdfjs_require__(5),h=__w_pdfjs_require__(29),c=__w_pdfjs_require__(14),f=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(t,e){(function(n,i){i()})(commonjsGlobal,function(){function n(f,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function i(f,l,b){var S=new XMLHttpRequest;S.open("GET",f),S.responseType="blob",S.onload=function(){c(S.response,l,b)},S.onerror=function(){console.error("could not download file")},S.send()}function s(f){var l=new XMLHttpRequest;l.open("HEAD",f,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,h=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(f,l,b){var S=a.URL||a.webkitURL,u=document.createElement("a");l=l||f.name||"download",u.download=l,u.rel="noopener",typeof f=="string"?(u.href=f,u.origin===location.origin?r(u):s(u.href)?i(f,l,b):r(u,u.target="_blank")):(u.href=S.createObjectURL(f),setTimeout(function(){S.revokeObjectURL(u.href)},4e4),setTimeout(function(){r(u)},0))}:"msSaveOrOpenBlob"in navigator?function(f,l,b){if(l=l||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,b),l);else if(s(f))i(f,l,b);else{var S=document.createElement("a");S.href=f,S.target="_blank",setTimeout(function(){r(S)})}}:function(f,l,b,S){if(S=S||open("","_blank"),S&&(S.document.title=S.document.body.innerText="downloading..."),typeof f=="string")return i(f,l,b);var u=f.type==="application/octet-stream",w=/constructor/i.test(a.HTMLElement)||a.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||u&&w||h)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var P=m.result;P=g?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),S?S.location.href=P:location=P,S=null},m.readAsDataURL(f)}else{var _=a.URL||a.webkitURL,x=_.createObjectURL(f);S?S.location=x:location.href=x,S=null,setTimeout(function(){_.revokeObjectURL(x)},4e4)}});a.saveAs=c.saveAs=c,t.exports=c})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function generateCanvas(t,e,n){const{width:i,height:s,words:r,compression:a}=t,h=document.createElement("canvas"),c=h.getContext("2d");return h.width=n?e.width:i,h.height=n?e.height:s,c.drawImage(e,0,0,h.width,h.height),r.trim().length>0&&addWaterMark(t,c),{src:h.toDataURL("image/jpeg",a),newCanvas:h}}function addWaterMark(t,e){const{width:n,height:i,words:s,fontSize:r,color:a,rotate:h,row:c,col:f,startX:l,startY:b,offsetX:S,offsetY:u,fontFamily:w}=t;e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(0,0,n,i),e.rotate(parseInt(h.toString())*Math.PI/180),e.fillStyle=a,e.font=`normal ${r}px ${w}`,Array.from({length:c}).forEach((g,m)=>{Array.from({length:f}).forEach((_,x)=>{if(s.includes(`
`))multipleWords(e,m,x,s,r,l.toString(),b.toString(),S,u);else{const P=+l+x*(s.length*r+S),R=+b+m*(u+r);e.fillText(s,P,R)}})})}function multipleWords(t,e,n,i,s,r,a,h,c){const f=i.split(`
`),l=f.length,b=Math.max(...f.map(S=>S.length));for(let S=0;S<l;S++){const u=+r+n*(b*s+h)+(b-f[S].length)/2*s,w=+a+e*c+s*1.3*(S+l*e);t.fillText(f[S],u,w)}}function downloadImage(t,e,n){const i=new Image;i.src=t,i.onload=()=>{const s=document.createElement("canvas");s.width=+e.width,s.height=+e.height;const r=s.getContext("2d");r==null||r.drawImage(i,0,0);const a=s.toDataURL("image/png"),h=dataURLToBlob(a),c=document.createElement("a");c.href=URL.createObjectURL(h),c.download=n,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}function dataURLToBlob(t){const e=t.split(";base64,"),n=e[0].split(":")[1],i=window.atob(e[1]),s=i.length,r=new Uint8Array(s);for(let a=0;a<s;++a)r[a]=i.charCodeAt(a);return new Blob([r],{type:n})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(t,e,n,i,s){const r=pdfExports.getDocument({url:t,disableRange:!0});imgData.length=0,r.promise.then(a=>{n.value&&(n.value.innerHTML="");const h=a.numPages;for(let c=1;c<=h;c++)a.getPage(c).then(f=>{const l=document.createElement("canvas"),b=l.getContext("2d"),S=f.getViewport({scale:1});l.width=S.width,l.height=S.height,e.width=l.width,e.height=l.height;const u={canvasContext:b,viewport:S};f.render(u).promise.then(function(){const{newCanvas:g,src:m}=generateCanvas(e,l,s);n.value.appendChild(g),imgData.push({src:m,width:l.width,height:l.height}),imgData.length===h&&(i.value=!1)})})})}function img2Pdf(t,e){const n={autoFirstPage:!1,compress:!1},i=new PDFDocument(n),s=i.pipe(blobStream());for(let r=0;r<imgData.length;r++){const{src:a,width:h,height:c}=imgData[r];i.addPage({size:[h,c]}),i.image(a,0,0)}i.end(),s.on("finish",function(){var r=s.toBlob("application/pdf");FileSaver_minExports.saveAs(r,t),e.value=!1})}const zhTranslations={title:"水印工具",description:"为图片/PDF添加水印",noServerSafe:"文件不会上传，安全可靠",load:"加载文件",loadBatch:"批量加载",download:"下载",downloadAll:"批量下载",words:"水印文字",fontFamily:"字体",width:"图片宽度",height:"图片高度",fontSize:"字体大小",color:"颜色",rotate:"旋转角度",row:"行数",col:"列数",startX:"起始X坐标",startY:"起始Y坐标",offsetX:"X轴偏移",offsetY:"Y轴偏移",compression:"压缩质量",saveConfig:"保存配置",tooltips:{words:"水印文字内容，使用回车键换行",fontFamily:"水印字体",width:"图片宽度，对PDF无效",height:"图片高度，对PDF无效",fontSize:"水印字体大小",color:"水印颜色，rgba格式，最后一个参数是透明度",rotate:"水印旋转角度",row:"水印行数",col:"水印列数",startX:"第一个水印的X轴位置",startY:"第一个水印的Y轴位置",offsetX:"水印之间的X轴偏移量",offsetY:"水印之间的Y轴偏移量",compression:"压缩级别",saveConfig:"保存配置供下次使用"},compressionTitle:"数值越低，压缩越高",opacity:"透明度",originalProject:"原始项目",forkWithEnhancements:"新增功能的分叉",clear:"清空",processing:"处理中...",pages:"页",pdfDocument:"PDF 文档",batchEmptyHint:'点击"{loadBatch}"选择多张图片或PDF文件进行批量处理'},enTranslations={title:"Watermark",description:"Add watermark to image/pdf",noServerSafe:"No server, so safe",load:"Load",loadBatch:"Batch Load",download:"Download",downloadAll:"Download All",words:"Words",fontFamily:"Font",width:"Width",height:"Height",fontSize:"Font Size",color:"Color",rotate:"Rotate",row:"Row",col:"Col",startX:"Start X",startY:"Start Y",offsetX:"Offset X",offsetY:"Offset Y",compression:"Compression",saveConfig:"Save Config",tooltips:{words:"The words of watermark, use enter key to wrap lines",fontFamily:"The font family for the watermark text",width:"The width of image, pdf is not useful",height:"The height of image, pdf is not useful",fontSize:"The font size of the watermark",color:"The color of the watermark, rgba is three-primary color, last parameter is opacity",rotate:"The rotation angle of watermark",row:"The rows of watermarks",col:"The columns of watermarks",startX:"The position along the X axis of first watermark",startY:"The position along the Y axis of first watermark",offsetX:"The offset along the X axis between two watermarks",offsetY:"The offset along the Y axis between two watermarks",compression:"The level for compression",saveConfig:"Save the config for next use"},compressionTitle:"Lower the Value, Better the Compression",opacity:"Opacity",originalProject:"Original Project",forkWithEnhancements:"Fork with Enhancements",clear:"Clear",processing:"Processing...",pages:"pages",pdfDocument:"PDF Document",batchEmptyHint:'Click "{loadBatch}" to select multiple images or PDF files for batch processing'},currentLocale=ref("zh"),translations=ref(zhTranslations);function detectBrowserLanguage(){var e;return(navigator.language||((e=navigator.languages)==null?void 0:e[0])||"en").startsWith("zh")?"zh":"en"}const detectedLang=detectBrowserLanguage();currentLocale.value=detectedLang;translations.value=detectedLang==="zh"?zhTranslations:enTranslations;function useI18n(){return{t:computed(()=>translations.value),locale:computed(()=>currentLocale.value)}}var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(i,s,r){function a(f,l){if(!s[f]){if(!i[f]){var b=typeof commonjsRequire=="function"&&commonjsRequire;if(!l&&b)return b(f,!0);if(h)return h(f,!0);var S=new Error("Cannot find module '"+f+"'");throw S.code="MODULE_NOT_FOUND",S}var u=s[f]={exports:{}};i[f][0].call(u.exports,function(w){var g=i[f][1][w];return a(g||w)},u,u.exports,n,i,s,r)}return s[f].exports}for(var h=typeof commonjsRequire=="function"&&commonjsRequire,c=0;c<r.length;c++)a(r[c]);return a}({1:[function(n,i,s){var r=n("./utils"),a=n("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var f,l,b,S,u,w,g,m=[],_=0,x=c.length,P=x,R=r.getTypeOf(c)!=="string";_<c.length;)P=x-_,b=R?(f=c[_++],l=_<x?c[_++]:0,_<x?c[_++]:0):(f=c.charCodeAt(_++),l=_<x?c.charCodeAt(_++):0,_<x?c.charCodeAt(_++):0),S=f>>2,u=(3&f)<<4|l>>4,w=1<P?(15&l)<<2|b>>6:64,g=2<P?63&b:64,m.push(h.charAt(S)+h.charAt(u)+h.charAt(w)+h.charAt(g));return m.join("")},s.decode=function(c){var f,l,b,S,u,w,g=0,m=0,_="data:";if(c.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var x,P=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===h.charAt(64)&&P--,c.charAt(c.length-2)===h.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=a.uint8array?new Uint8Array(0|P):new Array(0|P);g<c.length;)f=h.indexOf(c.charAt(g++))<<2|(S=h.indexOf(c.charAt(g++)))>>4,l=(15&S)<<4|(u=h.indexOf(c.charAt(g++)))>>2,b=(3&u)<<6|(w=h.indexOf(c.charAt(g++))),x[m++]=f,u!==64&&(x[m++]=l),w!==64&&(x[m++]=b);return x}},{"./support":30,"./utils":32}],2:[function(n,i,s){var r=n("./external"),a=n("./stream/DataWorker"),h=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function f(l,b,S,u,w){this.compressedSize=l,this.uncompressedSize=b,this.crc32=S,this.compression=u,this.compressedContent=w}f.prototype={getContentWorker:function(){var l=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),b=this;return l.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(l,b,S){return l.pipe(new h).pipe(new c("uncompressedSize")).pipe(b.compressWorker(S)).pipe(new c("compressedSize")).withStreamInfo("compression",b)},i.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,s){var r=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,s){var r=n("./utils"),a=function(){for(var h,c=[],f=0;f<256;f++){h=f;for(var l=0;l<8;l++)h=1&h?3988292384^h>>>1:h>>>1;c[f]=h}return c}();i.exports=function(h,c){return h!==void 0&&h.length?r.getTypeOf(h)!=="string"?function(f,l,b,S){var u=a,w=S+b;f^=-1;for(var g=S;g<w;g++)f=f>>>8^u[255&(f^l[g])];return-1^f}(0|c,h,h.length,0):function(f,l,b,S){var u=a,w=S+b;f^=-1;for(var g=S;g<w;g++)f=f>>>8^u[255&(f^l.charCodeAt(g))];return-1^f}(0|c,h,h.length,0):0}},{"./utils":32}],5:[function(n,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,i,s){var r=null;r=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:r}},{lie:37}],7:[function(n,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),h=n("./utils"),c=n("./stream/GenericWorker"),f=r?"uint8array":"array";function l(b,S){c.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=S,this.meta={}}s.magic="\b\0",h.inherits(l,c),l.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(f,b.data),!1)},l.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(S){b.push({data:S,meta:b.meta})}},s.compressWorker=function(b){return new l("Deflate",b)},s.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,s){function r(u,w){var g,m="";for(g=0;g<w;g++)m+=String.fromCharCode(255&u),u>>>=8;return m}function a(u,w,g,m,_,x){var P,R,y=u.file,F=u.compression,B=x!==f.utf8encode,I=h.transformTo("string",x(y.name)),E=h.transformTo("string",f.utf8encode(y.name)),U=y.comment,z=h.transformTo("string",x(U)),N=h.transformTo("string",f.utf8encode(U)),Y=E.length!==y.name.length,d=N.length!==U.length,Q="",pt="",at="",q=y.dir,nt=y.date,ft={crc32:0,compressedSize:0,uncompressedSize:0};w&&!g||(ft.crc32=u.crc32,ft.compressedSize=u.compressedSize,ft.uncompressedSize=u.uncompressedSize);var lt=0;w&&(lt|=8),B||!Y&&!d||(lt|=2048);var rt=0,H=0;q&&(rt|=16),_==="UNIX"?(H=798,rt|=function(C,k){var M=C;return C||(M=k?16893:33204),(65535&M)<<16}(y.unixPermissions,q)):(H=20,rt|=function(C){return 63&(C||0)}(y.dosPermissions)),P=nt.getUTCHours(),P<<=6,P|=nt.getUTCMinutes(),P<<=5,P|=nt.getUTCSeconds()/2,R=nt.getUTCFullYear()-1980,R<<=4,R|=nt.getUTCMonth()+1,R<<=5,R|=nt.getUTCDate(),Y&&(pt=r(1,1)+r(l(I),4)+E,Q+="up"+r(pt.length,2)+pt),d&&(at=r(1,1)+r(l(z),4)+N,Q+="uc"+r(at.length,2)+at);var v="";return v+=`
\0`,v+=r(lt,2),v+=F.magic,v+=r(P,2),v+=r(R,2),v+=r(ft.crc32,4),v+=r(ft.compressedSize,4),v+=r(ft.uncompressedSize,4),v+=r(I.length,2),v+=r(Q.length,2),{fileRecord:b.LOCAL_FILE_HEADER+v+I+Q,dirRecord:b.CENTRAL_FILE_HEADER+r(H,2)+v+r(z.length,2)+"\0\0\0\0"+r(rt,4)+r(m,4)+I+Q+z}}var h=n("../utils"),c=n("../stream/GenericWorker"),f=n("../utf8"),l=n("../crc32"),b=n("../signature");function S(u,w,g,m){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=g,this.encodeFileName=m,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(S,c),S.prototype.push=function(u){var w=u.meta.percent||0,g=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,c.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:g?(w+100*(g-m-1))/g:100}}))},S.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var w=this.streamFiles&&!u.file.dir;if(w){var g=a(u,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},S.prototype.closedSource=function(u){this.accumulate=!1;var w=this.streamFiles&&!u.file.dir,g=a(u,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),w)this.push({data:function(m){return b.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},S.prototype.flush=function(){for(var u=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var g=this.bytesWritten-u,m=function(_,x,P,R,y){var F=h.transformTo("string",y(R));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(_,2)+r(_,2)+r(x,4)+r(P,4)+r(F.length,2)+F}(this.dirRecords.length,g,u,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},S.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},S.prototype.registerPrevious=function(u){this._sources.push(u);var w=this;return u.on("data",function(g){w.processChunk(g)}),u.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),u.on("error",function(g){w.error(g)}),this},S.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},S.prototype.error=function(u){var w=this._sources;if(!c.prototype.error.call(this,u))return!1;for(var g=0;g<w.length;g++)try{w[g].error(u)}catch{}return!0},S.prototype.lock=function(){c.prototype.lock.call(this);for(var u=this._sources,w=0;w<u.length;w++)u[w].lock()},i.exports=S},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,s){var r=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(h,c,f){var l=new a(c.streamFiles,f,c.platform,c.encodeFileName),b=0;try{h.forEach(function(S,u){b++;var w=function(x,P){var R=x||P,y=r[R];if(!y)throw new Error(R+" is not a valid compression method !");return y}(u.options.compression,c.compression),g=u.options.compressionOptions||c.compressionOptions||{},m=u.dir,_=u.date;u._compressWorker(w,g).withStreamInfo("file",{name:S,dir:m,date:_,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(l)}),l.entriesCount=b}catch(S){l.error(S)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,s){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new r;for(var h in this)typeof this[h]!="function"&&(a[h]=this[h]);return a}}(r.prototype=n("./object")).loadAsync=n("./load"),r.support=n("./support"),r.defaults=n("./defaults"),r.version="3.10.1",r.loadAsync=function(a,h){return new r().loadAsync(a,h)},r.external=n("./external"),i.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,s){var r=n("./utils"),a=n("./external"),h=n("./utf8"),c=n("./zipEntries"),f=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function b(S){return new a.Promise(function(u,w){var g=S.decompressed.getContentWorker().pipe(new f);g.on("error",function(m){w(m)}).on("end",function(){g.streamInfo.crc32!==S.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}i.exports=function(S,u){var w=this;return u=r.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),l.isNode&&l.isStream(S)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",S,!0,u.optimizedBinaryString,u.base64).then(function(g){var m=new c(u);return m.load(g),m}).then(function(g){var m=[a.Promise.resolve(g)],_=g.files;if(u.checkCRC32)for(var x=0;x<_.length;x++)m.push(b(_[x]));return a.Promise.all(m)}).then(function(g){for(var m=g.shift(),_=m.files,x=0;x<_.length;x++){var P=_[x],R=P.fileNameStr,y=r.resolve(P.fileNameStr);w.file(y,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:u.createFolders}),P.dir||(w.file(y).unsafeOriginalName=R)}return m.zipComment.length&&(w.comment=m.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,s){var r=n("../utils"),a=n("../stream/GenericWorker");function h(c,f){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}r.inherits(h,a),h.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(l){f.push({data:l,meta:{percent:0}})}).on("error",function(l){f.isPaused?this.generatedError=l:f.error(l)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},h.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,s){var r=n("readable-stream").Readable;function a(h,c,f){r.call(this,c),this._helper=h;var l=this;h.on("data",function(b,S){l.push(b)||l._helper.pause(),f&&f(S)}).on("error",function(b){l.emit("error",b)}).on("end",function(){l.push(null)})}n("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,a);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,a)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var a=new Buffer(r);return a.fill(0),a},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(n,i,s){function r(y,F,B){var I,E=h.getTypeOf(F),U=h.extend(B||{},l);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(y=_(y)),U.createFolders&&(I=m(y))&&x.call(this,I,!0);var z=E==="string"&&U.binary===!1&&U.base64===!1;B&&B.binary!==void 0||(U.binary=!z),(F instanceof b&&F.uncompressedSize===0||U.dir||!F||F.length===0)&&(U.base64=!1,U.binary=!0,F="",U.compression="STORE",E="string");var N=null;N=F instanceof b||F instanceof c?F:w.isNode&&w.isStream(F)?new g(y,F):h.prepareContent(y,F,U.binary,U.optimizedBinaryString,U.base64);var Y=new S(y,N,U);this.files[y]=Y}var a=n("./utf8"),h=n("./utils"),c=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),l=n("./defaults"),b=n("./compressedObject"),S=n("./zipObject"),u=n("./generate"),w=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),m=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var F=y.lastIndexOf("/");return 0<F?y.substring(0,F):""},_=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},x=function(y,F){return F=F!==void 0?F:l.createFolders,y=_(y),this.files[y]||r.call(this,y,null,{dir:!0,createFolders:F}),this.files[y]};function P(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var F,B,I;for(F in this.files)I=this.files[F],(B=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&y(B,I)},filter:function(y){var F=[];return this.forEach(function(B,I){y(B,I)&&F.push(I)}),F},file:function(y,F,B){if(arguments.length!==1)return y=this.root+y,r.call(this,y,F,B),this;if(P(y)){var I=y;return this.filter(function(U,z){return!z.dir&&I.test(U)})}var E=this.files[this.root+y];return E&&!E.dir?E:null},folder:function(y){if(!y)return this;if(P(y))return this.filter(function(E,U){return U.dir&&y.test(E)});var F=this.root+y,B=x.call(this,F),I=this.clone();return I.root=B.name,I},remove:function(y){y=this.root+y;var F=this.files[y];if(F||(y.slice(-1)!=="/"&&(y+="/"),F=this.files[y]),F&&!F.dir)delete this.files[y];else for(var B=this.filter(function(E,U){return U.name.slice(0,y.length)===y}),I=0;I<B.length;I++)delete this.files[B[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var F,B={};try{if((B=h.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");h.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var I=B.comment||this.comment||"";F=u.generateWorker(this,B,I)}catch(E){(F=new c("error")).error(E)}return new f(F,B.type||"string",B.mimeType)},generateAsync:function(y,F){return this.generateInternalStream(y).accumulate(F)},generateNodeStream:function(y,F){return(y=y||{}).type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(F)}};i.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,s){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,s){var r=n("./DataReader");function a(h){r.call(this,h);for(var c=0;c<this.data.length;c++)h[c]=255&h[c]}n("../utils").inherits(a,r),a.prototype.byteAt=function(h){return this.data[this.zero+h]},a.prototype.lastIndexOfSignature=function(h){for(var c=h.charCodeAt(0),f=h.charCodeAt(1),l=h.charCodeAt(2),b=h.charCodeAt(3),S=this.length-4;0<=S;--S)if(this.data[S]===c&&this.data[S+1]===f&&this.data[S+2]===l&&this.data[S+3]===b)return S-this.zero;return-1},a.prototype.readAndCheckSignature=function(h){var c=h.charCodeAt(0),f=h.charCodeAt(1),l=h.charCodeAt(2),b=h.charCodeAt(3),S=this.readData(4);return c===S[0]&&f===S[1]&&l===S[2]&&b===S[3]},a.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,i,s){var r=n("../utils");function a(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var c,f=0;for(this.checkOffset(h),c=this.index+h-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=h,f},readString:function(h){return r.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},i.exports=a},{"../utils":32}],19:[function(n,i,s){var r=n("./Uint8ArrayReader");function a(h){r.call(this,h)}n("../utils").inherits(a,r),a.prototype.readData=function(h){this.checkOffset(h);var c=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,s){var r=n("./DataReader");function a(h){r.call(this,h)}n("../utils").inherits(a,r),a.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},a.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},a.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},a.prototype.readData=function(h){this.checkOffset(h);var c=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,i,s){var r=n("./ArrayReader");function a(h){r.call(this,h)}n("../utils").inherits(a,r),a.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,c},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,s){var r=n("../utils"),a=n("../support"),h=n("./ArrayReader"),c=n("./StringReader"),f=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");i.exports=function(b){var S=r.getTypeOf(b);return r.checkSupport(S),S!=="string"||a.uint8array?S==="nodebuffer"?new f(b):a.uint8array?new l(r.transformTo("uint8array",b)):new h(r.transformTo("array",b)):new c(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,s){var r=n("./GenericWorker"),a=n("../utils");function h(c){r.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(h,r),h.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},i.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,s){var r=n("./GenericWorker"),a=n("../crc32");function h(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(h,r),h.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},i.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,s){var r=n("../utils"),a=n("./GenericWorker");function h(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}r.inherits(h,a),h.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}a.prototype.processChunk.call(this,c)},i.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,s){var r=n("../utils"),a=n("./GenericWorker");function h(c){a.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(l){f.dataIsReady=!0,f.data=l,f.max=l&&l.length||0,f.type=r.getTypeOf(l),f.isPaused||f._tickAndRepeat()},function(l){f.error(l)})}r.inherits(h,a),h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,s){function r(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,h){return this._listeners[a].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,h){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,h)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var h=this;return a.on("data",function(c){h.processChunk(c)}),a.on("end",function(){h.end()}),a.on("error",function(c){h.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,h){return this.extraStreamInfo[a]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=r},{}],29:[function(n,i,s){var r=n("../utils"),a=n("./ConvertWorker"),h=n("./GenericWorker"),c=n("../base64"),f=n("../support"),l=n("../external"),b=null;if(f.nodestream)try{b=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(w,g){return new l.Promise(function(m,_){var x=[],P=w._internalType,R=w._outputType,y=w._mimeType;w.on("data",function(F,B){x.push(F),g&&g(B)}).on("error",function(F){x=[],_(F)}).on("end",function(){try{var F=function(B,I,E){switch(B){case"blob":return r.newBlob(r.transformTo("arraybuffer",I),E);case"base64":return c.encode(I);default:return r.transformTo(B,I)}}(R,function(B,I){var E,U=0,z=null,N=0;for(E=0;E<I.length;E++)N+=I[E].length;switch(B){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(z=new Uint8Array(N),E=0;E<I.length;E++)z.set(I[E],U),U+=I[E].length;return z;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+B+"'")}}(P,x),y);m(F)}catch(B){_(B)}x=[]}).resume()})}function u(w,g,m){var _=g;switch(g){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=g,this._mimeType=m,r.checkSupport(_),this._worker=w.pipe(new a(_)),w.lock()}catch(x){this._worker=new h("error"),this._worker.error(x)}}u.prototype={accumulate:function(w){return S(this,w)},on:function(w,g){var m=this;return w==="data"?this._worker.on(w,function(_){g.call(m,_.data,_.meta)}):this._worker.on(w,function(){r.delay(g,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var r=new ArrayBuffer(0);try{s.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,s){for(var r=n("./utils"),a=n("./support"),h=n("./nodejsUtils"),c=n("./stream/GenericWorker"),f=new Array(256),l=0;l<256;l++)f[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;f[254]=f[254]=1;function b(){c.call(this,"utf-8 decode"),this.leftOver=null}function S(){c.call(this,"utf-8 encode")}s.utf8encode=function(u){return a.nodebuffer?h.newBufferFrom(u,"utf-8"):function(w){var g,m,_,x,P,R=w.length,y=0;for(x=0;x<R;x++)(64512&(m=w.charCodeAt(x)))==55296&&x+1<R&&(64512&(_=w.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),x++),y+=m<128?1:m<2048?2:m<65536?3:4;for(g=a.uint8array?new Uint8Array(y):new Array(y),x=P=0;P<y;x++)(64512&(m=w.charCodeAt(x)))==55296&&x+1<R&&(64512&(_=w.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),x++),m<128?g[P++]=m:(m<2048?g[P++]=192|m>>>6:(m<65536?g[P++]=224|m>>>12:(g[P++]=240|m>>>18,g[P++]=128|m>>>12&63),g[P++]=128|m>>>6&63),g[P++]=128|63&m);return g}(u)},s.utf8decode=function(u){return a.nodebuffer?r.transformTo("nodebuffer",u).toString("utf-8"):function(w){var g,m,_,x,P=w.length,R=new Array(2*P);for(g=m=0;g<P;)if((_=w[g++])<128)R[m++]=_;else if(4<(x=f[_]))R[m++]=65533,g+=x-1;else{for(_&=x===2?31:x===3?15:7;1<x&&g<P;)_=_<<6|63&w[g++],x--;1<x?R[m++]=65533:_<65536?R[m++]=_:(_-=65536,R[m++]=55296|_>>10&1023,R[m++]=56320|1023&_)}return R.length!==m&&(R.subarray?R=R.subarray(0,m):R.length=m),r.applyFromCharCode(R)}(u=r.transformTo(a.uint8array?"uint8array":"array",u))},r.inherits(b,c),b.prototype.processChunk=function(u){var w=r.transformTo(a.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var g=w;(w=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),w.set(g,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var m=function(x,P){var R;for((P=P||x.length)>x.length&&(P=x.length),R=P-1;0<=R&&(192&x[R])==128;)R--;return R<0||R===0?P:R+f[x[R]]>P?R:P}(w),_=w;m!==w.length&&(a.uint8array?(_=w.subarray(0,m),this.leftOver=w.subarray(m,w.length)):(_=w.slice(0,m),this.leftOver=w.slice(m,w.length))),this.push({data:s.utf8decode(_),meta:u.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=b,r.inherits(S,c),S.prototype.processChunk=function(u){this.push({data:s.utf8encode(u.data),meta:u.meta})},s.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,s){var r=n("./support"),a=n("./base64"),h=n("./nodejsUtils"),c=n("./external");function f(g){return g}function l(g,m){for(var _=0;_<g.length;++_)m[_]=255&g.charCodeAt(_);return m}n("setimmediate"),s.newBlob=function(g,m){s.checkSupport("blob");try{return new Blob([g],{type:m})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(g),_.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(g,m,_){var x=[],P=0,R=g.length;if(R<=_)return String.fromCharCode.apply(null,g);for(;P<R;)m==="array"||m==="nodebuffer"?x.push(String.fromCharCode.apply(null,g.slice(P,Math.min(P+_,R)))):x.push(String.fromCharCode.apply(null,g.subarray(P,Math.min(P+_,R)))),P+=_;return x.join("")},stringifyByChar:function(g){for(var m="",_=0;_<g.length;_++)m+=String.fromCharCode(g[_]);return m},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function S(g){var m=65536,_=s.getTypeOf(g),x=!0;if(_==="uint8array"?x=b.applyCanBeUsed.uint8array:_==="nodebuffer"&&(x=b.applyCanBeUsed.nodebuffer),x)for(;1<m;)try{return b.stringifyByChunk(g,_,m)}catch{m=Math.floor(m/2)}return b.stringifyByChar(g)}function u(g,m){for(var _=0;_<g.length;_++)m[_]=g[_];return m}s.applyFromCharCode=S;var w={};w.string={string:f,array:function(g){return l(g,new Array(g.length))},arraybuffer:function(g){return w.string.uint8array(g).buffer},uint8array:function(g){return l(g,new Uint8Array(g.length))},nodebuffer:function(g){return l(g,h.allocBuffer(g.length))}},w.array={string:S,array:f,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return h.newBufferFrom(g)}},w.arraybuffer={string:function(g){return S(new Uint8Array(g))},array:function(g){return u(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:f,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return h.newBufferFrom(new Uint8Array(g))}},w.uint8array={string:S,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:f,nodebuffer:function(g){return h.newBufferFrom(g)}},w.nodebuffer={string:S,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return w.nodebuffer.uint8array(g).buffer},uint8array:function(g){return u(g,new Uint8Array(g.length))},nodebuffer:f},s.transformTo=function(g,m){if(m=m||"",!g)return m;s.checkSupport(g);var _=s.getTypeOf(m);return w[_][g](m)},s.resolve=function(g){for(var m=g.split("/"),_=[],x=0;x<m.length;x++){var P=m[x];P==="."||P===""&&x!==0&&x!==m.length-1||(P===".."?_.pop():_.push(P))}return _.join("/")},s.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":r.nodebuffer&&h.isBuffer(g)?"nodebuffer":r.uint8array&&g instanceof Uint8Array?"uint8array":r.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(g){if(!r[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(g){var m,_,x="";for(_=0;_<(g||"").length;_++)x+="\\x"+((m=g.charCodeAt(_))<16?"0":"")+m.toString(16).toUpperCase();return x},s.delay=function(g,m,_){setImmediate(function(){g.apply(_||null,m||[])})},s.inherits=function(g,m){function _(){}_.prototype=m.prototype,g.prototype=new _},s.extend=function(){var g,m,_={};for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&_[m]===void 0&&(_[m]=arguments[g][m]);return _},s.prepareContent=function(g,m,_,x,P){return c.Promise.resolve(m).then(function(R){return r.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new c.Promise(function(y,F){var B=new FileReader;B.onload=function(I){y(I.target.result)},B.onerror=function(I){F(I.target.error)},B.readAsArrayBuffer(R)}):R}).then(function(R){var y=s.getTypeOf(R);return y?(y==="arraybuffer"?R=s.transformTo("uint8array",R):y==="string"&&(P?R=a.decode(R):_&&x!==!0&&(R=function(F){return l(F,r.uint8array?new Uint8Array(F.length):new Array(F.length))}(R))),R):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,s){var r=n("./reader/readerFor"),a=n("./utils"),h=n("./signature"),c=n("./zipEntry"),f=n("./support");function l(b){this.files=[],this.loadOptions=b}l.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(S)+", expected "+a.pretty(b)+")")}},isSignature:function(b,S){var u=this.reader.index;this.reader.setIndex(b);var w=this.reader.readString(4)===S;return this.reader.setIndex(u),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),S=f.uint8array?"uint8array":"array",u=a.transformTo(S,b);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,S,u,w=this.zip64EndOfCentralSize-44;0<w;)b=this.reader.readInt(2),S=this.reader.readInt(4),u=this.reader.readData(S),this.zip64ExtensibleData[b]={id:b,length:S,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,S;for(b=0;b<this.files.length;b++)S=this.files[b],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(b=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var S=b;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var w=S-u;if(0<w)this.isSignature(S,h.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(b){this.reader=r(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,s){var r=n("./reader/readerFor"),a=n("./utils"),h=n("./compressedObject"),c=n("./crc32"),f=n("./utf8"),l=n("./compressions"),b=n("./support");function S(u,w){this.options=u,this.loadOptions=w}S.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var w,g;if(u.skip(22),this.fileNameLength=u.readInt(2),g=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(m){for(var _ in l)if(Object.prototype.hasOwnProperty.call(l,_)&&l[_].magic===m)return l[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,w,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var w=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(w),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var w,g,m,_=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<_;)w=u.readInt(2),g=u.readInt(2),m=u.readData(g),this.extraFields[w]={id:w,length:g,value:m};u.setIndex(_)},handleUTF8:function(){var u=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var g=a.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var _=a.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var w=r(u.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var w=r(u.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(u.length-5))}return null}},i.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,s){function r(w,g,m){this.name=w,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=g,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var a=n("./stream/StreamHelper"),h=n("./stream/DataWorker"),c=n("./utf8"),f=n("./compressedObject"),l=n("./stream/GenericWorker");r.prototype={internalStream:function(w){var g=null,m="string";try{if(!w)throw new Error("No output type specified.");var _=(m=w.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),g=this._decompressWorker();var x=!this._dataBinary;x&&!_&&(g=g.pipe(new c.Utf8EncodeWorker)),!x&&_&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(P){(g=new l("error")).error(P)}return new a(g,m,"")},async:function(w,g){return this.internalStream(w).accumulate(g)},nodeStream:function(w,g){return this.internalStream(w||"nodebuffer").toNodejsStream(g)},_compressWorker:function(w,g){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(m,w,g)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof l?this._data:new h(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],S=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<b.length;u++)r.prototype[b[u]]=S;i.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,s){(function(r){var a,h,c=r.MutationObserver||r.WebKitMutationObserver;if(c){var f=0,l=new c(w),b=r.document.createTextNode("");l.observe(b,{characterData:!0}),a=function(){b.data=f=++f%2}}else if(r.setImmediate||r.MessageChannel===void 0)a="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var g=r.document.createElement("script");g.onreadystatechange=function(){w(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:function(){setTimeout(w,0)};else{var S=new r.MessageChannel;S.port1.onmessage=w,a=function(){S.port2.postMessage(0)}}var u=[];function w(){var g,m;h=!0;for(var _=u.length;_;){for(m=u,u=[],g=-1;++g<_;)m[g]();_=u.length}h=!1}i.exports=function(g){u.push(g)!==1||h||a()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,s){var r=n("immediate");function a(){}var h={},c=["REJECTED"],f=["FULFILLED"],l=["PENDING"];function b(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,_!==a&&g(this,_)}function S(_,x,P){this.promise=_,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function u(_,x,P){r(function(){var R;try{R=x(P)}catch(y){return h.reject(_,y)}R===_?h.reject(_,new TypeError("Cannot resolve promise with itself")):h.resolve(_,R)})}function w(_){var x=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof x=="function")return function(){x.apply(_,arguments)}}function g(_,x){var P=!1;function R(B){P||(P=!0,h.reject(_,B))}function y(B){P||(P=!0,h.resolve(_,B))}var F=m(function(){x(y,R)});F.status==="error"&&R(F.value)}function m(_,x){var P={};try{P.value=_(x),P.status="success"}catch(R){P.status="error",P.value=R}return P}(i.exports=b).prototype.finally=function(_){if(typeof _!="function")return this;var x=this.constructor;return this.then(function(P){return x.resolve(_()).then(function(){return P})},function(P){return x.resolve(_()).then(function(){throw P})})},b.prototype.catch=function(_){return this.then(null,_)},b.prototype.then=function(_,x){if(typeof _!="function"&&this.state===f||typeof x!="function"&&this.state===c)return this;var P=new this.constructor(a);return this.state!==l?u(P,this.state===f?_:x,this.outcome):this.queue.push(new S(P,_,x)),P},S.prototype.callFulfilled=function(_){h.resolve(this.promise,_)},S.prototype.otherCallFulfilled=function(_){u(this.promise,this.onFulfilled,_)},S.prototype.callRejected=function(_){h.reject(this.promise,_)},S.prototype.otherCallRejected=function(_){u(this.promise,this.onRejected,_)},h.resolve=function(_,x){var P=m(w,x);if(P.status==="error")return h.reject(_,P.value);var R=P.value;if(R)g(_,R);else{_.state=f,_.outcome=x;for(var y=-1,F=_.queue.length;++y<F;)_.queue[y].callFulfilled(x)}return _},h.reject=function(_,x){_.state=c,_.outcome=x;for(var P=-1,R=_.queue.length;++P<R;)_.queue[P].callRejected(x);return _},b.resolve=function(_){return _ instanceof this?_:h.resolve(new this(a),_)},b.reject=function(_){var x=new this(a);return h.reject(x,_)},b.all=function(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=_.length,R=!1;if(!P)return this.resolve([]);for(var y=new Array(P),F=0,B=-1,I=new this(a);++B<P;)E(_[B],B);return I;function E(U,z){x.resolve(U).then(function(N){y[z]=N,++F!==P||R||(R=!0,h.resolve(I,y))},function(N){R||(R=!0,h.reject(I,N))})}},b.race=function(_){var x=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=_.length,R=!1;if(!P)return this.resolve([]);for(var y=-1,F=new this(a);++y<P;)B=_[y],x.resolve(B).then(function(I){R||(R=!0,h.resolve(F,I))},function(I){R||(R=!0,h.reject(F,I))});var B;return F}},{immediate:36}],38:[function(n,i,s){var r={};(0,n("./lib/utils/common").assign)(r,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,s){var r=n("./zlib/deflate"),a=n("./utils/common"),h=n("./utils/strings"),c=n("./zlib/messages"),f=n("./zlib/zstream"),l=Object.prototype.toString,b=0,S=-1,u=0,w=8;function g(_){if(!(this instanceof g))return new g(_);this.options=a.assign({level:S,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},_||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var P=r.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(P!==b)throw new Error(c[P]);if(x.header&&r.deflateSetHeader(this.strm,x.header),x.dictionary){var R;if(R=typeof x.dictionary=="string"?h.string2buf(x.dictionary):l.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(P=r.deflateSetDictionary(this.strm,R))!==b)throw new Error(c[P]);this._dict_set=!0}}function m(_,x){var P=new g(x);if(P.push(_,!0),P.err)throw P.msg||c[P.err];return P.result}g.prototype.push=function(_,x){var P,R,y=this.strm,F=this.options.chunkSize;if(this.ended)return!1;R=x===~~x?x:x===!0?4:0,typeof _=="string"?y.input=h.string2buf(_):l.call(_)==="[object ArrayBuffer]"?y.input=new Uint8Array(_):y.input=_,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new a.Buf8(F),y.next_out=0,y.avail_out=F),(P=r.deflate(y,R))!==1&&P!==b)return this.onEnd(P),!(this.ended=!0);y.avail_out!==0&&(y.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(a.shrinkBuf(y.output,y.next_out))):this.onData(a.shrinkBuf(y.output,y.next_out)))}while((0<y.avail_in||y.avail_out===0)&&P!==1);return R===4?(P=r.deflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===b):R!==2||(this.onEnd(b),!(y.avail_out=0))},g.prototype.onData=function(_){this.chunks.push(_)},g.prototype.onEnd=function(_){_===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},s.Deflate=g,s.deflate=m,s.deflateRaw=function(_,x){return(x=x||{}).raw=!0,m(_,x)},s.gzip=function(_,x){return(x=x||{}).gzip=!0,m(_,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,s){var r=n("./zlib/inflate"),a=n("./utils/common"),h=n("./utils/strings"),c=n("./zlib/constants"),f=n("./zlib/messages"),l=n("./zlib/zstream"),b=n("./zlib/gzheader"),S=Object.prototype.toString;function u(g){if(!(this instanceof u))return new u(g);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},g||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||g&&g.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var _=r.inflateInit2(this.strm,m.windowBits);if(_!==c.Z_OK)throw new Error(f[_]);this.header=new b,r.inflateGetHeader(this.strm,this.header)}function w(g,m){var _=new u(m);if(_.push(g,!0),_.err)throw _.msg||f[_.err];return _.result}u.prototype.push=function(g,m){var _,x,P,R,y,F,B=this.strm,I=this.options.chunkSize,E=this.options.dictionary,U=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?B.input=h.binstring2buf(g):S.call(g)==="[object ArrayBuffer]"?B.input=new Uint8Array(g):B.input=g,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new a.Buf8(I),B.next_out=0,B.avail_out=I),(_=r.inflate(B,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&E&&(F=typeof E=="string"?h.string2buf(E):S.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,_=r.inflateSetDictionary(this.strm,F)),_===c.Z_BUF_ERROR&&U===!0&&(_=c.Z_OK,U=!1),_!==c.Z_STREAM_END&&_!==c.Z_OK)return this.onEnd(_),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&_!==c.Z_STREAM_END&&(B.avail_in!==0||x!==c.Z_FINISH&&x!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=h.utf8border(B.output,B.next_out),R=B.next_out-P,y=h.buf2string(B.output,P),B.next_out=R,B.avail_out=I-R,R&&a.arraySet(B.output,B.output,P,R,0),this.onData(y)):this.onData(a.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(U=!0)}while((0<B.avail_in||B.avail_out===0)&&_!==c.Z_STREAM_END);return _===c.Z_STREAM_END&&(x=c.Z_FINISH),x===c.Z_FINISH?(_=r.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===c.Z_OK):x!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(B.avail_out=0))},u.prototype.onData=function(g){this.chunks.push(g)},u.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=u,s.inflate=w,s.inflateRaw=function(g,m){return(m=m||{}).raw=!0,w(g,m)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var l=f.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var b in l)l.hasOwnProperty(b)&&(c[b]=l[b])}}return c},s.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var a={arraySet:function(c,f,l,b,S){if(f.subarray&&c.subarray)c.set(f.subarray(l,l+b),S);else for(var u=0;u<b;u++)c[S+u]=f[l+u]},flattenChunks:function(c){var f,l,b,S,u,w;for(f=b=0,l=c.length;f<l;f++)b+=c[f].length;for(w=new Uint8Array(b),f=S=0,l=c.length;f<l;f++)u=c[f],w.set(u,S),S+=u.length;return w}},h={arraySet:function(c,f,l,b,S){for(var u=0;u<b;u++)c[S+u]=f[l+u]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,h))},s.setTyped(r)},{}],42:[function(n,i,s){var r=n("./common"),a=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var c=new r.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function l(b,S){if(S<65537&&(b.subarray&&h||!b.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(b,S));for(var u="",w=0;w<S;w++)u+=String.fromCharCode(b[w]);return u}c[254]=c[254]=1,s.string2buf=function(b){var S,u,w,g,m,_=b.length,x=0;for(g=0;g<_;g++)(64512&(u=b.charCodeAt(g)))==55296&&g+1<_&&(64512&(w=b.charCodeAt(g+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),g++),x+=u<128?1:u<2048?2:u<65536?3:4;for(S=new r.Buf8(x),g=m=0;m<x;g++)(64512&(u=b.charCodeAt(g)))==55296&&g+1<_&&(64512&(w=b.charCodeAt(g+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),g++),u<128?S[m++]=u:(u<2048?S[m++]=192|u>>>6:(u<65536?S[m++]=224|u>>>12:(S[m++]=240|u>>>18,S[m++]=128|u>>>12&63),S[m++]=128|u>>>6&63),S[m++]=128|63&u);return S},s.buf2binstring=function(b){return l(b,b.length)},s.binstring2buf=function(b){for(var S=new r.Buf8(b.length),u=0,w=S.length;u<w;u++)S[u]=b.charCodeAt(u);return S},s.buf2string=function(b,S){var u,w,g,m,_=S||b.length,x=new Array(2*_);for(u=w=0;u<_;)if((g=b[u++])<128)x[w++]=g;else if(4<(m=c[g]))x[w++]=65533,u+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&u<_;)g=g<<6|63&b[u++],m--;1<m?x[w++]=65533:g<65536?x[w++]=g:(g-=65536,x[w++]=55296|g>>10&1023,x[w++]=56320|1023&g)}return l(x,w)},s.utf8border=function(b,S){var u;for((S=S||b.length)>b.length&&(S=b.length),u=S-1;0<=u&&(192&b[u])==128;)u--;return u<0||u===0?S:u+c[b[u]]>S?u:S}},{"./common":41}],43:[function(n,i,s){i.exports=function(r,a,h,c){for(var f=65535&r|0,l=r>>>16&65535|0,b=0;h!==0;){for(h-=b=2e3<h?2e3:h;l=l+(f=f+a[c++]|0)|0,--b;);f%=65521,l%=65521}return f|l<<16|0}},{}],44:[function(n,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,s){var r=function(){for(var a,h=[],c=0;c<256;c++){a=c;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;h[c]=a}return h}();i.exports=function(a,h,c,f){var l=r,b=f+c;a^=-1;for(var S=f;S<b;S++)a=a>>>8^l[255&(a^h[S])];return-1^a}},{}],46:[function(n,i,s){var r,a=n("../utils/common"),h=n("./trees"),c=n("./adler32"),f=n("./crc32"),l=n("./messages"),b=0,S=4,u=0,w=-2,g=-1,m=4,_=2,x=8,P=9,R=286,y=30,F=19,B=2*R+1,I=15,E=3,U=258,z=U+E+1,N=42,Y=113,d=1,Q=2,pt=3,at=4;function q(o,$){return o.msg=l[$],$}function nt(o){return(o<<1)-(4<o?9:0)}function ft(o){for(var $=o.length;0<=--$;)o[$]=0}function lt(o){var $=o.state,X=$.pending;X>o.avail_out&&(X=o.avail_out),X!==0&&(a.arraySet(o.output,$.pending_buf,$.pending_out,X,o.next_out),o.next_out+=X,$.pending_out+=X,o.total_out+=X,o.avail_out-=X,$.pending-=X,$.pending===0&&($.pending_out=0))}function rt(o,$){h._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,$),o.block_start=o.strstart,lt(o.strm)}function H(o,$){o.pending_buf[o.pending++]=$}function v(o,$){o.pending_buf[o.pending++]=$>>>8&255,o.pending_buf[o.pending++]=255&$}function C(o,$){var X,O,D=o.max_chain_length,Z=o.strstart,it=o.prev_length,ut=o.nice_match,W=o.strstart>o.w_size-z?o.strstart-(o.w_size-z):0,K=o.window,J=o.w_mask,st=o.prev,At=o.strstart+U,Ct=K[Z+it-1],Tt=K[Z+it];o.prev_length>=o.good_match&&(D>>=2),ut>o.lookahead&&(ut=o.lookahead);do if(K[(X=$)+it]===Tt&&K[X+it-1]===Ct&&K[X]===K[Z]&&K[++X]===K[Z+1]){Z+=2,X++;do;while(K[++Z]===K[++X]&&K[++Z]===K[++X]&&K[++Z]===K[++X]&&K[++Z]===K[++X]&&K[++Z]===K[++X]&&K[++Z]===K[++X]&&K[++Z]===K[++X]&&K[++Z]===K[++X]&&Z<At);if(O=U-(At-Z),Z=At-U,it<O){if(o.match_start=$,ut<=(it=O))break;Ct=K[Z+it-1],Tt=K[Z+it]}}while(($=st[$&J])>W&&--D!=0);return it<=o.lookahead?it:o.lookahead}function k(o){var $,X,O,D,Z,it,ut,W,K,J,st=o.w_size;do{if(D=o.window_size-o.lookahead-o.strstart,o.strstart>=st+(st-z)){for(a.arraySet(o.window,o.window,st,st,0),o.match_start-=st,o.strstart-=st,o.block_start-=st,$=X=o.hash_size;O=o.head[--$],o.head[$]=st<=O?O-st:0,--X;);for($=X=st;O=o.prev[--$],o.prev[$]=st<=O?O-st:0,--X;);D+=st}if(o.strm.avail_in===0)break;if(it=o.strm,ut=o.window,W=o.strstart+o.lookahead,K=D,J=void 0,J=it.avail_in,K<J&&(J=K),X=J===0?0:(it.avail_in-=J,a.arraySet(ut,it.input,it.next_in,J,W),it.state.wrap===1?it.adler=c(it.adler,ut,J,W):it.state.wrap===2&&(it.adler=f(it.adler,ut,J,W)),it.next_in+=J,it.total_in+=J,J),o.lookahead+=X,o.lookahead+o.insert>=E)for(Z=o.strstart-o.insert,o.ins_h=o.window[Z],o.ins_h=(o.ins_h<<o.hash_shift^o.window[Z+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[Z+E-1])&o.hash_mask,o.prev[Z&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=Z,Z++,o.insert--,!(o.lookahead+o.insert<E)););}while(o.lookahead<z&&o.strm.avail_in!==0)}function M(o,$){for(var X,O;;){if(o.lookahead<z){if(k(o),o.lookahead<z&&$===b)return d;if(o.lookahead===0)break}if(X=0,o.lookahead>=E&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+E-1])&o.hash_mask,X=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),X!==0&&o.strstart-X<=o.w_size-z&&(o.match_length=C(o,X)),o.match_length>=E)if(O=h._tr_tally(o,o.strstart-o.match_start,o.match_length-E),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=E){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+E-1])&o.hash_mask,X=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else O=h._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(O&&(rt(o,!1),o.strm.avail_out===0))return d}return o.insert=o.strstart<E-1?o.strstart:E-1,$===S?(rt(o,!0),o.strm.avail_out===0?pt:at):o.last_lit&&(rt(o,!1),o.strm.avail_out===0)?d:Q}function L(o,$){for(var X,O,D;;){if(o.lookahead<z){if(k(o),o.lookahead<z&&$===b)return d;if(o.lookahead===0)break}if(X=0,o.lookahead>=E&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+E-1])&o.hash_mask,X=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=E-1,X!==0&&o.prev_length<o.max_lazy_match&&o.strstart-X<=o.w_size-z&&(o.match_length=C(o,X),o.match_length<=5&&(o.strategy===1||o.match_length===E&&4096<o.strstart-o.match_start)&&(o.match_length=E-1)),o.prev_length>=E&&o.match_length<=o.prev_length){for(D=o.strstart+o.lookahead-E,O=h._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-E),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=D&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+E-1])&o.hash_mask,X=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=E-1,o.strstart++,O&&(rt(o,!1),o.strm.avail_out===0))return d}else if(o.match_available){if((O=h._tr_tally(o,0,o.window[o.strstart-1]))&&rt(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return d}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(O=h._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<E-1?o.strstart:E-1,$===S?(rt(o,!0),o.strm.avail_out===0?pt:at):o.last_lit&&(rt(o,!1),o.strm.avail_out===0)?d:Q}function V(o,$,X,O,D){this.good_length=o,this.max_lazy=$,this.nice_length=X,this.max_chain=O,this.func=D}function et(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*B),this.dyn_dtree=new a.Buf16(2*(2*y+1)),this.bl_tree=new a.Buf16(2*(2*F+1)),ft(this.dyn_ltree),ft(this.dyn_dtree),ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(I+1),this.heap=new a.Buf16(2*R+1),ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*R+1),ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ot(o){var $;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=_,($=o.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?N:Y,o.adler=$.wrap===2?0:1,$.last_flush=b,h._tr_init($),u):q(o,w)}function vt(o){var $=ot(o);return $===u&&function(X){X.window_size=2*X.w_size,ft(X.head),X.max_lazy_match=r[X.level].max_lazy,X.good_match=r[X.level].good_length,X.nice_match=r[X.level].nice_length,X.max_chain_length=r[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=E-1,X.match_available=0,X.ins_h=0}(o.state),$}function j(o,$,X,O,D,Z){if(!o)return w;var it=1;if($===g&&($=6),O<0?(it=0,O=-O):15<O&&(it=2,O-=16),D<1||P<D||X!==x||O<8||15<O||$<0||9<$||Z<0||m<Z)return q(o,w);O===8&&(O=9);var ut=new et;return(o.state=ut).strm=o,ut.wrap=it,ut.gzhead=null,ut.w_bits=O,ut.w_size=1<<ut.w_bits,ut.w_mask=ut.w_size-1,ut.hash_bits=D+7,ut.hash_size=1<<ut.hash_bits,ut.hash_mask=ut.hash_size-1,ut.hash_shift=~~((ut.hash_bits+E-1)/E),ut.window=new a.Buf8(2*ut.w_size),ut.head=new a.Buf16(ut.hash_size),ut.prev=new a.Buf16(ut.w_size),ut.lit_bufsize=1<<D+6,ut.pending_buf_size=4*ut.lit_bufsize,ut.pending_buf=new a.Buf8(ut.pending_buf_size),ut.d_buf=1*ut.lit_bufsize,ut.l_buf=3*ut.lit_bufsize,ut.level=$,ut.strategy=Z,ut.method=X,vt(o)}r=[new V(0,0,0,0,function(o,$){var X=65535;for(X>o.pending_buf_size-5&&(X=o.pending_buf_size-5);;){if(o.lookahead<=1){if(k(o),o.lookahead===0&&$===b)return d;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var O=o.block_start+X;if((o.strstart===0||o.strstart>=O)&&(o.lookahead=o.strstart-O,o.strstart=O,rt(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-z&&(rt(o,!1),o.strm.avail_out===0))return d}return o.insert=0,$===S?(rt(o,!0),o.strm.avail_out===0?pt:at):(o.strstart>o.block_start&&(rt(o,!1),o.strm.avail_out),d)}),new V(4,4,8,4,M),new V(4,5,16,8,M),new V(4,6,32,32,M),new V(4,4,16,16,L),new V(8,16,32,32,L),new V(8,16,128,128,L),new V(8,32,128,256,L),new V(32,128,258,1024,L),new V(32,258,258,4096,L)],s.deflateInit=function(o,$){return j(o,$,x,15,8,0)},s.deflateInit2=j,s.deflateReset=vt,s.deflateResetKeep=ot,s.deflateSetHeader=function(o,$){return o&&o.state?o.state.wrap!==2?w:(o.state.gzhead=$,u):w},s.deflate=function(o,$){var X,O,D,Z;if(!o||!o.state||5<$||$<0)return o?q(o,w):w;if(O=o.state,!o.output||!o.input&&o.avail_in!==0||O.status===666&&$!==S)return q(o,o.avail_out===0?-5:w);if(O.strm=o,X=O.last_flush,O.last_flush=$,O.status===N)if(O.wrap===2)o.adler=0,H(O,31),H(O,139),H(O,8),O.gzhead?(H(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),H(O,255&O.gzhead.time),H(O,O.gzhead.time>>8&255),H(O,O.gzhead.time>>16&255),H(O,O.gzhead.time>>24&255),H(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),H(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(H(O,255&O.gzhead.extra.length),H(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(o.adler=f(o.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(H(O,0),H(O,0),H(O,0),H(O,0),H(O,0),H(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),H(O,3),O.status=Y);else{var it=x+(O.w_bits-8<<4)<<8;it|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(it|=32),it+=31-it%31,O.status=Y,v(O,it),O.strstart!==0&&(v(O,o.adler>>>16),v(O,65535&o.adler)),o.adler=1}if(O.status===69)if(O.gzhead.extra){for(D=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>D&&(o.adler=f(o.adler,O.pending_buf,O.pending-D,D)),lt(o),D=O.pending,O.pending!==O.pending_buf_size));)H(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>D&&(o.adler=f(o.adler,O.pending_buf,O.pending-D,D)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){D=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>D&&(o.adler=f(o.adler,O.pending_buf,O.pending-D,D)),lt(o),D=O.pending,O.pending===O.pending_buf_size)){Z=1;break}Z=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,H(O,Z)}while(Z!==0);O.gzhead.hcrc&&O.pending>D&&(o.adler=f(o.adler,O.pending_buf,O.pending-D,D)),Z===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){D=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>D&&(o.adler=f(o.adler,O.pending_buf,O.pending-D,D)),lt(o),D=O.pending,O.pending===O.pending_buf_size)){Z=1;break}Z=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,H(O,Z)}while(Z!==0);O.gzhead.hcrc&&O.pending>D&&(o.adler=f(o.adler,O.pending_buf,O.pending-D,D)),Z===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&lt(o),O.pending+2<=O.pending_buf_size&&(H(O,255&o.adler),H(O,o.adler>>8&255),o.adler=0,O.status=Y)):O.status=Y),O.pending!==0){if(lt(o),o.avail_out===0)return O.last_flush=-1,u}else if(o.avail_in===0&&nt($)<=nt(X)&&$!==S)return q(o,-5);if(O.status===666&&o.avail_in!==0)return q(o,-5);if(o.avail_in!==0||O.lookahead!==0||$!==b&&O.status!==666){var ut=O.strategy===2?function(W,K){for(var J;;){if(W.lookahead===0&&(k(W),W.lookahead===0)){if(K===b)return d;break}if(W.match_length=0,J=h._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,J&&(rt(W,!1),W.strm.avail_out===0))return d}return W.insert=0,K===S?(rt(W,!0),W.strm.avail_out===0?pt:at):W.last_lit&&(rt(W,!1),W.strm.avail_out===0)?d:Q}(O,$):O.strategy===3?function(W,K){for(var J,st,At,Ct,Tt=W.window;;){if(W.lookahead<=U){if(k(W),W.lookahead<=U&&K===b)return d;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=E&&0<W.strstart&&(st=Tt[At=W.strstart-1])===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]){Ct=W.strstart+U;do;while(st===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]&&st===Tt[++At]&&At<Ct);W.match_length=U-(Ct-At),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=E?(J=h._tr_tally(W,1,W.match_length-E),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(J=h._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),J&&(rt(W,!1),W.strm.avail_out===0))return d}return W.insert=0,K===S?(rt(W,!0),W.strm.avail_out===0?pt:at):W.last_lit&&(rt(W,!1),W.strm.avail_out===0)?d:Q}(O,$):r[O.level].func(O,$);if(ut!==pt&&ut!==at||(O.status=666),ut===d||ut===pt)return o.avail_out===0&&(O.last_flush=-1),u;if(ut===Q&&($===1?h._tr_align(O):$!==5&&(h._tr_stored_block(O,0,0,!1),$===3&&(ft(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),lt(o),o.avail_out===0))return O.last_flush=-1,u}return $!==S?u:O.wrap<=0?1:(O.wrap===2?(H(O,255&o.adler),H(O,o.adler>>8&255),H(O,o.adler>>16&255),H(O,o.adler>>24&255),H(O,255&o.total_in),H(O,o.total_in>>8&255),H(O,o.total_in>>16&255),H(O,o.total_in>>24&255)):(v(O,o.adler>>>16),v(O,65535&o.adler)),lt(o),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?u:1)},s.deflateEnd=function(o){var $;return o&&o.state?($=o.state.status)!==N&&$!==69&&$!==73&&$!==91&&$!==103&&$!==Y&&$!==666?q(o,w):(o.state=null,$===Y?q(o,-3):u):w},s.deflateSetDictionary=function(o,$){var X,O,D,Z,it,ut,W,K,J=$.length;if(!o||!o.state||(Z=(X=o.state).wrap)===2||Z===1&&X.status!==N||X.lookahead)return w;for(Z===1&&(o.adler=c(o.adler,$,J,0)),X.wrap=0,J>=X.w_size&&(Z===0&&(ft(X.head),X.strstart=0,X.block_start=0,X.insert=0),K=new a.Buf8(X.w_size),a.arraySet(K,$,J-X.w_size,X.w_size,0),$=K,J=X.w_size),it=o.avail_in,ut=o.next_in,W=o.input,o.avail_in=J,o.next_in=0,o.input=$,k(X);X.lookahead>=E;){for(O=X.strstart,D=X.lookahead-(E-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[O+E-1])&X.hash_mask,X.prev[O&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=O,O++,--D;);X.strstart=O,X.lookahead=E-1,k(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=E-1,X.match_available=0,o.next_in=ut,o.input=W,o.avail_in=it,X.wrap=Z,u},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,s){i.exports=function(r,a){var h,c,f,l,b,S,u,w,g,m,_,x,P,R,y,F,B,I,E,U,z,N,Y,d,Q;h=r.state,c=r.next_in,d=r.input,f=c+(r.avail_in-5),l=r.next_out,Q=r.output,b=l-(a-r.avail_out),S=l+(r.avail_out-257),u=h.dmax,w=h.wsize,g=h.whave,m=h.wnext,_=h.window,x=h.hold,P=h.bits,R=h.lencode,y=h.distcode,F=(1<<h.lenbits)-1,B=(1<<h.distbits)-1;t:do{P<15&&(x+=d[c++]<<P,P+=8,x+=d[c++]<<P,P+=8),I=R[x&F];e:for(;;){if(x>>>=E=I>>>24,P-=E,(E=I>>>16&255)===0)Q[l++]=65535&I;else{if(!(16&E)){if(!(64&E)){I=R[(65535&I)+(x&(1<<E)-1)];continue e}if(32&E){h.mode=12;break t}r.msg="invalid literal/length code",h.mode=30;break t}U=65535&I,(E&=15)&&(P<E&&(x+=d[c++]<<P,P+=8),U+=x&(1<<E)-1,x>>>=E,P-=E),P<15&&(x+=d[c++]<<P,P+=8,x+=d[c++]<<P,P+=8),I=y[x&B];n:for(;;){if(x>>>=E=I>>>24,P-=E,!(16&(E=I>>>16&255))){if(!(64&E)){I=y[(65535&I)+(x&(1<<E)-1)];continue n}r.msg="invalid distance code",h.mode=30;break t}if(z=65535&I,P<(E&=15)&&(x+=d[c++]<<P,(P+=8)<E&&(x+=d[c++]<<P,P+=8)),u<(z+=x&(1<<E)-1)){r.msg="invalid distance too far back",h.mode=30;break t}if(x>>>=E,P-=E,(E=l-b)<z){if(g<(E=z-E)&&h.sane){r.msg="invalid distance too far back",h.mode=30;break t}if(Y=_,(N=0)===m){if(N+=w-E,E<U){for(U-=E;Q[l++]=_[N++],--E;);N=l-z,Y=Q}}else if(m<E){if(N+=w+m-E,(E-=m)<U){for(U-=E;Q[l++]=_[N++],--E;);if(N=0,m<U){for(U-=E=m;Q[l++]=_[N++],--E;);N=l-z,Y=Q}}}else if(N+=m-E,E<U){for(U-=E;Q[l++]=_[N++],--E;);N=l-z,Y=Q}for(;2<U;)Q[l++]=Y[N++],Q[l++]=Y[N++],Q[l++]=Y[N++],U-=3;U&&(Q[l++]=Y[N++],1<U&&(Q[l++]=Y[N++]))}else{for(N=l-z;Q[l++]=Q[N++],Q[l++]=Q[N++],Q[l++]=Q[N++],2<(U-=3););U&&(Q[l++]=Q[N++],1<U&&(Q[l++]=Q[N++]))}break}}break}}while(c<f&&l<S);c-=U=P>>3,x&=(1<<(P-=U<<3))-1,r.next_in=c,r.next_out=l,r.avail_in=c<f?f-c+5:5-(c-f),r.avail_out=l<S?S-l+257:257-(l-S),h.hold=x,h.bits=P}},{}],49:[function(n,i,s){var r=n("../utils/common"),a=n("./adler32"),h=n("./crc32"),c=n("./inffast"),f=n("./inftrees"),l=1,b=2,S=0,u=-2,w=1,g=852,m=592;function _(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function P(N){var Y;return N&&N.state?(Y=N.state,N.total_in=N.total_out=Y.total=0,N.msg="",Y.wrap&&(N.adler=1&Y.wrap),Y.mode=w,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new r.Buf32(g),Y.distcode=Y.distdyn=new r.Buf32(m),Y.sane=1,Y.back=-1,S):u}function R(N){var Y;return N&&N.state?((Y=N.state).wsize=0,Y.whave=0,Y.wnext=0,P(N)):u}function y(N,Y){var d,Q;return N&&N.state?(Q=N.state,Y<0?(d=0,Y=-Y):(d=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||15<Y)?u:(Q.window!==null&&Q.wbits!==Y&&(Q.window=null),Q.wrap=d,Q.wbits=Y,R(N))):u}function F(N,Y){var d,Q;return N?(Q=new x,(N.state=Q).window=null,(d=y(N,Y))!==S&&(N.state=null),d):u}var B,I,E=!0;function U(N){if(E){var Y;for(B=new r.Buf32(512),I=new r.Buf32(32),Y=0;Y<144;)N.lens[Y++]=8;for(;Y<256;)N.lens[Y++]=9;for(;Y<280;)N.lens[Y++]=7;for(;Y<288;)N.lens[Y++]=8;for(f(l,N.lens,0,288,B,0,N.work,{bits:9}),Y=0;Y<32;)N.lens[Y++]=5;f(b,N.lens,0,32,I,0,N.work,{bits:5}),E=!1}N.lencode=B,N.lenbits=9,N.distcode=I,N.distbits=5}function z(N,Y,d,Q){var pt,at=N.state;return at.window===null&&(at.wsize=1<<at.wbits,at.wnext=0,at.whave=0,at.window=new r.Buf8(at.wsize)),Q>=at.wsize?(r.arraySet(at.window,Y,d-at.wsize,at.wsize,0),at.wnext=0,at.whave=at.wsize):(Q<(pt=at.wsize-at.wnext)&&(pt=Q),r.arraySet(at.window,Y,d-Q,pt,at.wnext),(Q-=pt)?(r.arraySet(at.window,Y,d-Q,Q,0),at.wnext=Q,at.whave=at.wsize):(at.wnext+=pt,at.wnext===at.wsize&&(at.wnext=0),at.whave<at.wsize&&(at.whave+=pt))),0}s.inflateReset=R,s.inflateReset2=y,s.inflateResetKeep=P,s.inflateInit=function(N){return F(N,15)},s.inflateInit2=F,s.inflate=function(N,Y){var d,Q,pt,at,q,nt,ft,lt,rt,H,v,C,k,M,L,V,et,ot,vt,j,o,$,X,O,D=0,Z=new r.Buf8(4),it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return u;(d=N.state).mode===12&&(d.mode=13),q=N.next_out,pt=N.output,ft=N.avail_out,at=N.next_in,Q=N.input,nt=N.avail_in,lt=d.hold,rt=d.bits,H=nt,v=ft,$=S;t:for(;;)switch(d.mode){case w:if(d.wrap===0){d.mode=13;break}for(;rt<16;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(2&d.wrap&&lt===35615){Z[d.check=0]=255&lt,Z[1]=lt>>>8&255,d.check=h(d.check,Z,2,0),rt=lt=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&lt)<<8)+(lt>>8))%31){N.msg="incorrect header check",d.mode=30;break}if((15&lt)!=8){N.msg="unknown compression method",d.mode=30;break}if(rt-=4,o=8+(15&(lt>>>=4)),d.wbits===0)d.wbits=o;else if(o>d.wbits){N.msg="invalid window size",d.mode=30;break}d.dmax=1<<o,N.adler=d.check=1,d.mode=512&lt?10:12,rt=lt=0;break;case 2:for(;rt<16;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(d.flags=lt,(255&d.flags)!=8){N.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){N.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=lt>>8&1),512&d.flags&&(Z[0]=255&lt,Z[1]=lt>>>8&255,d.check=h(d.check,Z,2,0)),rt=lt=0,d.mode=3;case 3:for(;rt<32;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}d.head&&(d.head.time=lt),512&d.flags&&(Z[0]=255&lt,Z[1]=lt>>>8&255,Z[2]=lt>>>16&255,Z[3]=lt>>>24&255,d.check=h(d.check,Z,4,0)),rt=lt=0,d.mode=4;case 4:for(;rt<16;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}d.head&&(d.head.xflags=255&lt,d.head.os=lt>>8),512&d.flags&&(Z[0]=255&lt,Z[1]=lt>>>8&255,d.check=h(d.check,Z,2,0)),rt=lt=0,d.mode=5;case 5:if(1024&d.flags){for(;rt<16;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}d.length=lt,d.head&&(d.head.extra_len=lt),512&d.flags&&(Z[0]=255&lt,Z[1]=lt>>>8&255,d.check=h(d.check,Z,2,0)),rt=lt=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(nt<(C=d.length)&&(C=nt),C&&(d.head&&(o=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),r.arraySet(d.head.extra,Q,at,C,o)),512&d.flags&&(d.check=h(d.check,Q,C,at)),nt-=C,at+=C,d.length-=C),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(nt===0)break t;for(C=0;o=Q[at+C++],d.head&&o&&d.length<65536&&(d.head.name+=String.fromCharCode(o)),o&&C<nt;);if(512&d.flags&&(d.check=h(d.check,Q,C,at)),nt-=C,at+=C,o)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(nt===0)break t;for(C=0;o=Q[at+C++],d.head&&o&&d.length<65536&&(d.head.comment+=String.fromCharCode(o)),o&&C<nt;);if(512&d.flags&&(d.check=h(d.check,Q,C,at)),nt-=C,at+=C,o)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;rt<16;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(lt!==(65535&d.check)){N.msg="header crc mismatch",d.mode=30;break}rt=lt=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),N.adler=d.check=0,d.mode=12;break;case 10:for(;rt<32;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}N.adler=d.check=_(lt),rt=lt=0,d.mode=11;case 11:if(d.havedict===0)return N.next_out=q,N.avail_out=ft,N.next_in=at,N.avail_in=nt,d.hold=lt,d.bits=rt,2;N.adler=d.check=1,d.mode=12;case 12:if(Y===5||Y===6)break t;case 13:if(d.last){lt>>>=7&rt,rt-=7&rt,d.mode=27;break}for(;rt<3;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}switch(d.last=1&lt,rt-=1,3&(lt>>>=1)){case 0:d.mode=14;break;case 1:if(U(d),d.mode=20,Y!==6)break;lt>>>=2,rt-=2;break t;case 2:d.mode=17;break;case 3:N.msg="invalid block type",d.mode=30}lt>>>=2,rt-=2;break;case 14:for(lt>>>=7&rt,rt-=7&rt;rt<32;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if((65535&lt)!=(lt>>>16^65535)){N.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&lt,rt=lt=0,d.mode=15,Y===6)break t;case 15:d.mode=16;case 16:if(C=d.length){if(nt<C&&(C=nt),ft<C&&(C=ft),C===0)break t;r.arraySet(pt,Q,at,C,q),nt-=C,at+=C,ft-=C,q+=C,d.length-=C;break}d.mode=12;break;case 17:for(;rt<14;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(d.nlen=257+(31&lt),lt>>>=5,rt-=5,d.ndist=1+(31&lt),lt>>>=5,rt-=5,d.ncode=4+(15&lt),lt>>>=4,rt-=4,286<d.nlen||30<d.ndist){N.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;rt<3;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}d.lens[it[d.have++]]=7&lt,lt>>>=3,rt-=3}for(;d.have<19;)d.lens[it[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,X={bits:d.lenbits},$=f(0,d.lens,0,19,d.lencode,0,d.work,X),d.lenbits=X.bits,$){N.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;V=(D=d.lencode[lt&(1<<d.lenbits)-1])>>>16&255,et=65535&D,!((L=D>>>24)<=rt);){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(et<16)lt>>>=L,rt-=L,d.lens[d.have++]=et;else{if(et===16){for(O=L+2;rt<O;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(lt>>>=L,rt-=L,d.have===0){N.msg="invalid bit length repeat",d.mode=30;break}o=d.lens[d.have-1],C=3+(3&lt),lt>>>=2,rt-=2}else if(et===17){for(O=L+3;rt<O;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}rt-=L,o=0,C=3+(7&(lt>>>=L)),lt>>>=3,rt-=3}else{for(O=L+7;rt<O;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}rt-=L,o=0,C=11+(127&(lt>>>=L)),lt>>>=7,rt-=7}if(d.have+C>d.nlen+d.ndist){N.msg="invalid bit length repeat",d.mode=30;break}for(;C--;)d.lens[d.have++]=o}}if(d.mode===30)break;if(d.lens[256]===0){N.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,X={bits:d.lenbits},$=f(l,d.lens,0,d.nlen,d.lencode,0,d.work,X),d.lenbits=X.bits,$){N.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,X={bits:d.distbits},$=f(b,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,X),d.distbits=X.bits,$){N.msg="invalid distances set",d.mode=30;break}if(d.mode=20,Y===6)break t;case 20:d.mode=21;case 21:if(6<=nt&&258<=ft){N.next_out=q,N.avail_out=ft,N.next_in=at,N.avail_in=nt,d.hold=lt,d.bits=rt,c(N,v),q=N.next_out,pt=N.output,ft=N.avail_out,at=N.next_in,Q=N.input,nt=N.avail_in,lt=d.hold,rt=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;V=(D=d.lencode[lt&(1<<d.lenbits)-1])>>>16&255,et=65535&D,!((L=D>>>24)<=rt);){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(V&&!(240&V)){for(ot=L,vt=V,j=et;V=(D=d.lencode[j+((lt&(1<<ot+vt)-1)>>ot)])>>>16&255,et=65535&D,!(ot+(L=D>>>24)<=rt);){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}lt>>>=ot,rt-=ot,d.back+=ot}if(lt>>>=L,rt-=L,d.back+=L,d.length=et,V===0){d.mode=26;break}if(32&V){d.back=-1,d.mode=12;break}if(64&V){N.msg="invalid literal/length code",d.mode=30;break}d.extra=15&V,d.mode=22;case 22:if(d.extra){for(O=d.extra;rt<O;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}d.length+=lt&(1<<d.extra)-1,lt>>>=d.extra,rt-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;V=(D=d.distcode[lt&(1<<d.distbits)-1])>>>16&255,et=65535&D,!((L=D>>>24)<=rt);){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(!(240&V)){for(ot=L,vt=V,j=et;V=(D=d.distcode[j+((lt&(1<<ot+vt)-1)>>ot)])>>>16&255,et=65535&D,!(ot+(L=D>>>24)<=rt);){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}lt>>>=ot,rt-=ot,d.back+=ot}if(lt>>>=L,rt-=L,d.back+=L,64&V){N.msg="invalid distance code",d.mode=30;break}d.offset=et,d.extra=15&V,d.mode=24;case 24:if(d.extra){for(O=d.extra;rt<O;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}d.offset+=lt&(1<<d.extra)-1,lt>>>=d.extra,rt-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){N.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(ft===0)break t;if(C=v-ft,d.offset>C){if((C=d.offset-C)>d.whave&&d.sane){N.msg="invalid distance too far back",d.mode=30;break}k=C>d.wnext?(C-=d.wnext,d.wsize-C):d.wnext-C,C>d.length&&(C=d.length),M=d.window}else M=pt,k=q-d.offset,C=d.length;for(ft<C&&(C=ft),ft-=C,d.length-=C;pt[q++]=M[k++],--C;);d.length===0&&(d.mode=21);break;case 26:if(ft===0)break t;pt[q++]=d.length,ft--,d.mode=21;break;case 27:if(d.wrap){for(;rt<32;){if(nt===0)break t;nt--,lt|=Q[at++]<<rt,rt+=8}if(v-=ft,N.total_out+=v,d.total+=v,v&&(N.adler=d.check=d.flags?h(d.check,pt,v,q-v):a(d.check,pt,v,q-v)),v=ft,(d.flags?lt:_(lt))!==d.check){N.msg="incorrect data check",d.mode=30;break}rt=lt=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;rt<32;){if(nt===0)break t;nt--,lt+=Q[at++]<<rt,rt+=8}if(lt!==(4294967295&d.total)){N.msg="incorrect length check",d.mode=30;break}rt=lt=0}d.mode=29;case 29:$=1;break t;case 30:$=-3;break t;case 31:return-4;case 32:default:return u}return N.next_out=q,N.avail_out=ft,N.next_in=at,N.avail_in=nt,d.hold=lt,d.bits=rt,(d.wsize||v!==N.avail_out&&d.mode<30&&(d.mode<27||Y!==4))&&z(N,N.output,N.next_out,v-N.avail_out)?(d.mode=31,-4):(H-=N.avail_in,v-=N.avail_out,N.total_in+=H,N.total_out+=v,d.total+=v,d.wrap&&v&&(N.adler=d.check=d.flags?h(d.check,pt,v,N.next_out-v):a(d.check,pt,v,N.next_out-v)),N.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(H==0&&v===0||Y===4)&&$===S&&($=-5),$)},s.inflateEnd=function(N){if(!N||!N.state)return u;var Y=N.state;return Y.window&&(Y.window=null),N.state=null,S},s.inflateGetHeader=function(N,Y){var d;return N&&N.state&&2&(d=N.state).wrap?((d.head=Y).done=!1,S):u},s.inflateSetDictionary=function(N,Y){var d,Q=Y.length;return N&&N.state?(d=N.state).wrap!==0&&d.mode!==11?u:d.mode===11&&a(1,Y,Q,0)!==d.check?-3:z(N,Y,Q,Q)?(d.mode=31,-4):(d.havedict=1,S):u},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,s){var r=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(l,b,S,u,w,g,m,_){var x,P,R,y,F,B,I,E,U,z=_.bits,N=0,Y=0,d=0,Q=0,pt=0,at=0,q=0,nt=0,ft=0,lt=0,rt=null,H=0,v=new r.Buf16(16),C=new r.Buf16(16),k=null,M=0;for(N=0;N<=15;N++)v[N]=0;for(Y=0;Y<u;Y++)v[b[S+Y]]++;for(pt=z,Q=15;1<=Q&&v[Q]===0;Q--);if(Q<pt&&(pt=Q),Q===0)return w[g++]=20971520,w[g++]=20971520,_.bits=1,0;for(d=1;d<Q&&v[d]===0;d++);for(pt<d&&(pt=d),N=nt=1;N<=15;N++)if(nt<<=1,(nt-=v[N])<0)return-1;if(0<nt&&(l===0||Q!==1))return-1;for(C[1]=0,N=1;N<15;N++)C[N+1]=C[N]+v[N];for(Y=0;Y<u;Y++)b[S+Y]!==0&&(m[C[b[S+Y]]++]=Y);if(B=l===0?(rt=k=m,19):l===1?(rt=a,H-=257,k=h,M-=257,256):(rt=c,k=f,-1),N=d,F=g,q=Y=lt=0,R=-1,y=(ft=1<<(at=pt))-1,l===1&&852<ft||l===2&&592<ft)return 1;for(;;){for(I=N-q,U=m[Y]<B?(E=0,m[Y]):m[Y]>B?(E=k[M+m[Y]],rt[H+m[Y]]):(E=96,0),x=1<<N-q,d=P=1<<at;w[F+(lt>>q)+(P-=x)]=I<<24|E<<16|U|0,P!==0;);for(x=1<<N-1;lt&x;)x>>=1;if(x!==0?(lt&=x-1,lt+=x):lt=0,Y++,--v[N]==0){if(N===Q)break;N=b[S+m[Y]]}if(pt<N&&(lt&y)!==R){for(q===0&&(q=pt),F+=d,nt=1<<(at=N-q);at+q<Q&&!((nt-=v[at+q])<=0);)at++,nt<<=1;if(ft+=1<<at,l===1&&852<ft||l===2&&592<ft)return 1;w[R=lt&y]=pt<<24|at<<16|F-g|0}}return lt!==0&&(w[F+lt]=N-q<<24|64<<16|0),_.bits=pt,0}},{"../utils/common":41}],51:[function(n,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,s){var r=n("../utils/common"),a=0,h=1;function c(D){for(var Z=D.length;0<=--Z;)D[Z]=0}var f=0,l=29,b=256,S=b+1+l,u=30,w=19,g=2*S+1,m=15,_=16,x=7,P=256,R=16,y=17,F=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(S+2));c(z);var N=new Array(2*u);c(N);var Y=new Array(512);c(Y);var d=new Array(256);c(d);var Q=new Array(l);c(Q);var pt,at,q,nt=new Array(u);function ft(D,Z,it,ut,W){this.static_tree=D,this.extra_bits=Z,this.extra_base=it,this.elems=ut,this.max_length=W,this.has_stree=D&&D.length}function lt(D,Z){this.dyn_tree=D,this.max_code=0,this.stat_desc=Z}function rt(D){return D<256?Y[D]:Y[256+(D>>>7)]}function H(D,Z){D.pending_buf[D.pending++]=255&Z,D.pending_buf[D.pending++]=Z>>>8&255}function v(D,Z,it){D.bi_valid>_-it?(D.bi_buf|=Z<<D.bi_valid&65535,H(D,D.bi_buf),D.bi_buf=Z>>_-D.bi_valid,D.bi_valid+=it-_):(D.bi_buf|=Z<<D.bi_valid&65535,D.bi_valid+=it)}function C(D,Z,it){v(D,it[2*Z],it[2*Z+1])}function k(D,Z){for(var it=0;it|=1&D,D>>>=1,it<<=1,0<--Z;);return it>>>1}function M(D,Z,it){var ut,W,K=new Array(m+1),J=0;for(ut=1;ut<=m;ut++)K[ut]=J=J+it[ut-1]<<1;for(W=0;W<=Z;W++){var st=D[2*W+1];st!==0&&(D[2*W]=k(K[st]++,st))}}function L(D){var Z;for(Z=0;Z<S;Z++)D.dyn_ltree[2*Z]=0;for(Z=0;Z<u;Z++)D.dyn_dtree[2*Z]=0;for(Z=0;Z<w;Z++)D.bl_tree[2*Z]=0;D.dyn_ltree[2*P]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function V(D){8<D.bi_valid?H(D,D.bi_buf):0<D.bi_valid&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function et(D,Z,it,ut){var W=2*Z,K=2*it;return D[W]<D[K]||D[W]===D[K]&&ut[Z]<=ut[it]}function ot(D,Z,it){for(var ut=D.heap[it],W=it<<1;W<=D.heap_len&&(W<D.heap_len&&et(Z,D.heap[W+1],D.heap[W],D.depth)&&W++,!et(Z,ut,D.heap[W],D.depth));)D.heap[it]=D.heap[W],it=W,W<<=1;D.heap[it]=ut}function vt(D,Z,it){var ut,W,K,J,st=0;if(D.last_lit!==0)for(;ut=D.pending_buf[D.d_buf+2*st]<<8|D.pending_buf[D.d_buf+2*st+1],W=D.pending_buf[D.l_buf+st],st++,ut===0?C(D,W,Z):(C(D,(K=d[W])+b+1,Z),(J=B[K])!==0&&v(D,W-=Q[K],J),C(D,K=rt(--ut),it),(J=I[K])!==0&&v(D,ut-=nt[K],J)),st<D.last_lit;);C(D,P,Z)}function j(D,Z){var it,ut,W,K=Z.dyn_tree,J=Z.stat_desc.static_tree,st=Z.stat_desc.has_stree,At=Z.stat_desc.elems,Ct=-1;for(D.heap_len=0,D.heap_max=g,it=0;it<At;it++)K[2*it]!==0?(D.heap[++D.heap_len]=Ct=it,D.depth[it]=0):K[2*it+1]=0;for(;D.heap_len<2;)K[2*(W=D.heap[++D.heap_len]=Ct<2?++Ct:0)]=1,D.depth[W]=0,D.opt_len--,st&&(D.static_len-=J[2*W+1]);for(Z.max_code=Ct,it=D.heap_len>>1;1<=it;it--)ot(D,K,it);for(W=At;it=D.heap[1],D.heap[1]=D.heap[D.heap_len--],ot(D,K,1),ut=D.heap[1],D.heap[--D.heap_max]=it,D.heap[--D.heap_max]=ut,K[2*W]=K[2*it]+K[2*ut],D.depth[W]=(D.depth[it]>=D.depth[ut]?D.depth[it]:D.depth[ut])+1,K[2*it+1]=K[2*ut+1]=W,D.heap[1]=W++,ot(D,K,1),2<=D.heap_len;);D.heap[--D.heap_max]=D.heap[1],function(Tt,It){var zt,Ut,Vt,Nt,Xt,xt,_t=It.dyn_tree,gt=It.max_code,kt=It.stat_desc.static_tree,Rt=It.stat_desc.has_stree,ne=It.stat_desc.extra_bits,te=It.stat_desc.extra_base,wt=It.stat_desc.max_length,Ot=0;for(Nt=0;Nt<=m;Nt++)Tt.bl_count[Nt]=0;for(_t[2*Tt.heap[Tt.heap_max]+1]=0,zt=Tt.heap_max+1;zt<g;zt++)wt<(Nt=_t[2*_t[2*(Ut=Tt.heap[zt])+1]+1]+1)&&(Nt=wt,Ot++),_t[2*Ut+1]=Nt,gt<Ut||(Tt.bl_count[Nt]++,Xt=0,te<=Ut&&(Xt=ne[Ut-te]),xt=_t[2*Ut],Tt.opt_len+=xt*(Nt+Xt),Rt&&(Tt.static_len+=xt*(kt[2*Ut+1]+Xt)));if(Ot!==0){do{for(Nt=wt-1;Tt.bl_count[Nt]===0;)Nt--;Tt.bl_count[Nt]--,Tt.bl_count[Nt+1]+=2,Tt.bl_count[wt]--,Ot-=2}while(0<Ot);for(Nt=wt;Nt!==0;Nt--)for(Ut=Tt.bl_count[Nt];Ut!==0;)gt<(Vt=Tt.heap[--zt])||(_t[2*Vt+1]!==Nt&&(Tt.opt_len+=(Nt-_t[2*Vt+1])*_t[2*Vt],_t[2*Vt+1]=Nt),Ut--)}}(D,Z),M(K,Ct,D.bl_count)}function o(D,Z,it){var ut,W,K=-1,J=Z[1],st=0,At=7,Ct=4;for(J===0&&(At=138,Ct=3),Z[2*(it+1)+1]=65535,ut=0;ut<=it;ut++)W=J,J=Z[2*(ut+1)+1],++st<At&&W===J||(st<Ct?D.bl_tree[2*W]+=st:W!==0?(W!==K&&D.bl_tree[2*W]++,D.bl_tree[2*R]++):st<=10?D.bl_tree[2*y]++:D.bl_tree[2*F]++,K=W,Ct=(st=0)===J?(At=138,3):W===J?(At=6,3):(At=7,4))}function $(D,Z,it){var ut,W,K=-1,J=Z[1],st=0,At=7,Ct=4;for(J===0&&(At=138,Ct=3),ut=0;ut<=it;ut++)if(W=J,J=Z[2*(ut+1)+1],!(++st<At&&W===J)){if(st<Ct)for(;C(D,W,D.bl_tree),--st!=0;);else W!==0?(W!==K&&(C(D,W,D.bl_tree),st--),C(D,R,D.bl_tree),v(D,st-3,2)):st<=10?(C(D,y,D.bl_tree),v(D,st-3,3)):(C(D,F,D.bl_tree),v(D,st-11,7));K=W,Ct=(st=0)===J?(At=138,3):W===J?(At=6,3):(At=7,4)}}c(nt);var X=!1;function O(D,Z,it,ut){v(D,(f<<1)+(ut?1:0),3),function(W,K,J,st){V(W),st&&(H(W,J),H(W,~J)),r.arraySet(W.pending_buf,W.window,K,J,W.pending),W.pending+=J}(D,Z,it,!0)}s._tr_init=function(D){X||(function(){var Z,it,ut,W,K,J=new Array(m+1);for(W=ut=0;W<l-1;W++)for(Q[W]=ut,Z=0;Z<1<<B[W];Z++)d[ut++]=W;for(d[ut-1]=W,W=K=0;W<16;W++)for(nt[W]=K,Z=0;Z<1<<I[W];Z++)Y[K++]=W;for(K>>=7;W<u;W++)for(nt[W]=K<<7,Z=0;Z<1<<I[W]-7;Z++)Y[256+K++]=W;for(it=0;it<=m;it++)J[it]=0;for(Z=0;Z<=143;)z[2*Z+1]=8,Z++,J[8]++;for(;Z<=255;)z[2*Z+1]=9,Z++,J[9]++;for(;Z<=279;)z[2*Z+1]=7,Z++,J[7]++;for(;Z<=287;)z[2*Z+1]=8,Z++,J[8]++;for(M(z,S+1,J),Z=0;Z<u;Z++)N[2*Z+1]=5,N[2*Z]=k(Z,5);pt=new ft(z,B,b+1,S,m),at=new ft(N,I,0,u,m),q=new ft(new Array(0),E,0,w,x)}(),X=!0),D.l_desc=new lt(D.dyn_ltree,pt),D.d_desc=new lt(D.dyn_dtree,at),D.bl_desc=new lt(D.bl_tree,q),D.bi_buf=0,D.bi_valid=0,L(D)},s._tr_stored_block=O,s._tr_flush_block=function(D,Z,it,ut){var W,K,J=0;0<D.level?(D.strm.data_type===2&&(D.strm.data_type=function(st){var At,Ct=4093624447;for(At=0;At<=31;At++,Ct>>>=1)if(1&Ct&&st.dyn_ltree[2*At]!==0)return a;if(st.dyn_ltree[18]!==0||st.dyn_ltree[20]!==0||st.dyn_ltree[26]!==0)return h;for(At=32;At<b;At++)if(st.dyn_ltree[2*At]!==0)return h;return a}(D)),j(D,D.l_desc),j(D,D.d_desc),J=function(st){var At;for(o(st,st.dyn_ltree,st.l_desc.max_code),o(st,st.dyn_dtree,st.d_desc.max_code),j(st,st.bl_desc),At=w-1;3<=At&&st.bl_tree[2*U[At]+1]===0;At--);return st.opt_len+=3*(At+1)+5+5+4,At}(D),W=D.opt_len+3+7>>>3,(K=D.static_len+3+7>>>3)<=W&&(W=K)):W=K=it+5,it+4<=W&&Z!==-1?O(D,Z,it,ut):D.strategy===4||K===W?(v(D,2+(ut?1:0),3),vt(D,z,N)):(v(D,4+(ut?1:0),3),function(st,At,Ct,Tt){var It;for(v(st,At-257,5),v(st,Ct-1,5),v(st,Tt-4,4),It=0;It<Tt;It++)v(st,st.bl_tree[2*U[It]+1],3);$(st,st.dyn_ltree,At-1),$(st,st.dyn_dtree,Ct-1)}(D,D.l_desc.max_code+1,D.d_desc.max_code+1,J+1),vt(D,D.dyn_ltree,D.dyn_dtree)),L(D),ut&&V(D)},s._tr_tally=function(D,Z,it){return D.pending_buf[D.d_buf+2*D.last_lit]=Z>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&Z,D.pending_buf[D.l_buf+D.last_lit]=255&it,D.last_lit++,Z===0?D.dyn_ltree[2*it]++:(D.matches++,Z--,D.dyn_ltree[2*(d[it]+b+1)]++,D.dyn_dtree[2*rt(Z)]++),D.last_lit===D.lit_bufsize-1},s._tr_align=function(D){v(D,2,3),C(D,P,z),function(Z){Z.bi_valid===16?(H(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)}(D)}},{"../utils/common":41}],53:[function(n,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,s){(function(r){(function(a,h){if(!a.setImmediate){var c,f,l,b,S=1,u={},w=!1,g=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,c={}.toString.call(a.process)==="[object process]"?function(R){process.nextTick(function(){x(R)})}:function(){if(a.postMessage&&!a.importScripts){var R=!0,y=a.onmessage;return a.onmessage=function(){R=!1},a.postMessage("","*"),a.onmessage=y,R}}()?(b="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",P,!1):a.attachEvent("onmessage",P),function(R){a.postMessage(b+R,"*")}):a.MessageChannel?((l=new MessageChannel).port1.onmessage=function(R){x(R.data)},function(R){l.port2.postMessage(R)}):g&&"onreadystatechange"in g.createElement("script")?(f=g.documentElement,function(R){var y=g.createElement("script");y.onreadystatechange=function(){x(R),y.onreadystatechange=null,f.removeChild(y),y=null},f.appendChild(y)}):function(R){setTimeout(x,0,R)},m.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var y=new Array(arguments.length-1),F=0;F<y.length;F++)y[F]=arguments[F+1];var B={callback:R,args:y};return u[S]=B,c(S),S++},m.clearImmediate=_}function _(R){delete u[R]}function x(R){if(w)setTimeout(x,0,R);else{var y=u[R];if(y){w=!0;try{(function(F){var B=F.callback,I=F.args;switch(I.length){case 0:B();break;case 1:B(I[0]);break;case 2:B(I[0],I[1]);break;case 3:B(I[0],I[1],I[2]);break;default:B.apply(h,I)}})(y)}finally{_(R),w=!1}}}}function P(R){R.source===a&&typeof R.data=="string"&&R.data.indexOf(b)===0&&x(+R.data.slice(b.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),_hoisted_1$5={"pl-100":""},_hoisted_2$4={relative:"","h-10":""},_hoisted_3$4={absolute:"","left-0":"",for:"load"},_hoisted_4$4={class:"m-3 text-sm btn"},_hoisted_5$1=["disabled"],_hoisted_6$1=["disabled"],_hoisted_7$1={key:0,"mb-4":""},_hoisted_8$1={"text-sm":"","text-gray-600":"","mb-2":""},_hoisted_9$1={class:"progress-bar","w-full":"","h-2":"","bg-gray-200":"",rounded:""},_hoisted_10$1={key:1},_hoisted_11$1={"m-3":"","w-fit":"","border-1":"","border-rd":"","p-3":"","mr-5":""},_hoisted_12$1={key:0},_hoisted_13$1=["src"],_hoisted_14$1={key:1},_hoisted_15$1={key:2,"w-200":"","h-168":"",flex:"","justify-center":"","flex-items-center":""},_hoisted_16$1={key:2,class:"file-grid",grid:"","grid-cols-2":"","md:grid-cols-3":"","lg:grid-cols-4":"","gap-4":"","m-3":""},_hoisted_17=["onClick"],_hoisted_18={key:0,class:"preview-container"},_hoisted_19=["src","alt"],_hoisted_20={key:1,class:"preview-container"},_hoisted_21={class:"pdf-preview","w-full":"","h-32":"","bg-gray-100":"",rounded:"","mb-2":"",flex:"","items-center":"","justify-center":""},_hoisted_22={"text-center":""},_hoisted_23={key:0,"text-xs":"","text-gray-600":""},_hoisted_24={"text-xs":"","text-gray-600":"","mb-2":""},_hoisted_25=["title"],_hoisted_26={key:0},_hoisted_27={key:1},_hoisted_28=["onClick","disabled"],_hoisted_29={key:3,class:"empty-state","text-center":"","py-8":"","text-gray-500":"","m-3":""},_hoisted_30={position:"fixed","left-0":"","top-0":"","right-0":"","bottom-0":"",flex:"","items-center":"","justify-center":"","bg-teal-100":""},_sfc_main$7=defineComponent({__name:"TheMain",props:{config:null},setup(t){const{t:e}=useI18n();let n=!1,i="",s="",r;const a=ref(),h=ref(),c=ref(""),f=ref(""),l=ref(!1),b=ref(),S=ref([]),u=ref(0),w=computed(()=>S.value.length>1),g=computed(()=>S.value.length>0||c.value!==""||f.value!=="");let m=null;watch(t.config,_);function _(){n=!1,r&&(h.value.src=generateCanvas(t.config,r,n).src),f.value&&loadPdf(f.value,t.config,b,l,n),S.value.length>0&&(m&&clearTimeout(m),m=setTimeout(()=>{z()},300))}function x(q){const nt=q.target.files;!nt||nt.length===0||(y(),S.value=[],nt.length===1?P(nt[0]):R(nt))}function P(q){n=!0,i=q.type,s=q.name,i.startsWith("image/")&&F(q),i==="application/pdf"&&(l.value=!0,B(q))}function R(q){l.value=!0,u.value=0;const nt=Array.from(q).filter(ft=>ft.type.startsWith("image/")||ft.type==="application/pdf");Promise.all(nt.map(I)).then(ft=>{S.value=ft.filter(lt=>lt!==null),l.value=!1}).catch(ft=>{console.error("批量处理失败:",ft),l.value=!1})}function y(){r&&(r=null),c.value&&(c.value=""),f.value&&(f.value=""),b.value&&(b.value.innerHTML="")}function F(q){const nt=new FileReader;nt.readAsDataURL(q),nt.onload=()=>{const ft=new Image;ft.src=nt.result,r=ft,ft.onload=()=>{t.config.width=ft.width,t.config.height=ft.height,h.value.src=generateCanvas(t.config,ft,n).src}},nt.onloadend=()=>{c.value=nt.result}}function B(q){const nt=new FileReader;nt.readAsDataURL(q),nt.onloadend=()=>{f.value=nt.result,loadPdf(f.value,t.config,b,l,n)}}function I(q){return q.type.startsWith("image/")?E(q):q.type==="application/pdf"?U(q):Promise.resolve(null)}function E(q){return new Promise(nt=>{const ft=new FileReader;ft.onload=()=>{const lt=new Image;lt.onload=()=>{try{const rt=generateCanvas(t.config,lt,!0),H={id:Math.random().toString(36).substr(2,9),name:q.name,originalFile:q,type:"image",originalImage:lt,processedDataUrl:rt.src,width:lt.width,height:lt.height};nt(H),u.value+=1}catch(rt){console.error(`处理图片 ${q.name} 失败:`,rt),nt(null)}},lt.onerror=()=>{console.error(`加载图片 ${q.name} 失败`),nt(null)},lt.src=ft.result},ft.onerror=()=>{console.error(`读取文件 ${q.name} 失败`),nt(null)},ft.readAsDataURL(q)})}function U(q){return new Promise(nt=>{const ft=new FileReader;ft.onload=async()=>{try{const rt=await pdfExports.getDocument({data:ft.result,disableRange:!0}).promise,H=rt.numPages,v=[];for(let k=1;k<=H;k++){const M=await rt.getPage(k),L=document.createElement("canvas"),V=L.getContext("2d"),et=M.getViewport({scale:1});L.width=et.width,L.height=et.height,await M.render({canvasContext:V,viewport:et}).promise;const ot=generateCanvas(t.config,L,!0);v.push(ot.src)}const C={id:Math.random().toString(36).substr(2,9),name:q.name,originalFile:q,type:"pdf",pdfPages:v,width:0,height:0};nt(C),u.value+=1}catch(lt){console.error(`处理PDF ${q.name} 失败:`,lt),nt(null)}},ft.onerror=()=>{console.error(`读取PDF文件 ${q.name} 失败`),nt(null)},ft.readAsArrayBuffer(q)})}function z(){if(S.value.length===0)return;const q=S.value.every(ft=>ft.type==="image");q||(l.value=!0,u.value=0);const nt=S.value.map(async(ft,lt)=>{try{if(ft.type==="image"&&ft.originalImage){const rt=generateCanvas(t.config,ft.originalImage,!0);return ft.processedDataUrl=rt.src,q||(u.value+=1),Promise.resolve()}else if(ft.type==="pdf")return new Promise(rt=>{const H=new FileReader;H.onload=async()=>{try{const C=await pdfExports.getDocument({data:H.result,disableRange:!0}).promise,k=C.numPages,M=[];for(let L=1;L<=k;L++){const V=await C.getPage(L),et=document.createElement("canvas"),ot=et.getContext("2d"),vt=V.getViewport({scale:1});et.width=vt.width,et.height=vt.height,await V.render({canvasContext:ot,viewport:vt}).promise;const j=generateCanvas(t.config,et,!0);M.push(j.src)}ft.pdfPages=M,u.value+=1,rt()}catch(v){console.error(`重新处理PDF ${ft.name} 失败:`,v),rt()}},H.onerror=()=>{console.error(`读取PDF文件 ${ft.name} 失败`),rt()},H.readAsArrayBuffer(ft.originalFile)})}catch(rt){return console.error(`重新处理文件 ${ft.name} 失败:`,rt),Promise.resolve()}});Promise.all(nt).then(()=>{l.value=!1}).catch(ft=>{console.error("批量重新处理失败:",ft),l.value=!1})}function N(){w.value?d():Y()}function Y(){if(!(c.value===""&&f.value==="")){if(i.startsWith("image/")&&r){const q=generateCanvas(t.config,r,n).src;downloadImage(q,t.config,s)}i==="application/pdf"&&img2Pdf(s,l)}}async function d(){if(S.value.length!==0){l.value=!0;try{const q=new JSZip;for(const ft of S.value)if(ft.type==="image"&&ft.processedDataUrl){const rt=ft.processedDataUrl.split(","),H=rt[0].match(/:(.*?);/)[1],v=atob(rt[1]);let C=v.length;const k=new Uint8Array(C);for(;C--;)k[C]=v.charCodeAt(C);const M=new Blob([k],{type:H}),L=ft.name.replace(/\.[^/.]+$/,"")+"_watermarked.png";q.file(L,M)}else if(ft.type==="pdf"&&ft.pdfPages)try{const{PDFDocument:lt}=await __vitePreload(()=>import("./index-a9bfd821.js"),[],import.meta.url),rt=await lt.create();for(const k of ft.pdfPages){const M=await rt.embedPng(k);rt.addPage([M.width,M.height]).drawImage(M,{x:0,y:0,width:M.width,height:M.height})}const H=await rt.save(),v=new Blob([H],{type:"application/pdf"}),C=ft.name.replace(/\.[^/.]+$/,"")+"_watermarked.pdf";q.file(C,v)}catch(lt){console.error(`处理PDF ${ft.name} 失败:`,lt)}const nt=await q.generateAsync({type:"blob"});FileSaver_minExports.saveAs(nt,"watermarked_files.zip")}catch(q){console.error("批量下载失败:",q)}finally{l.value=!1}}}async function Q(q){l.value=!0;try{if(q.type==="image"&&q.processedDataUrl){const ft=q.processedDataUrl.split(","),lt=ft[0].match(/:(.*?);/)[1],rt=atob(ft[1]);let H=rt.length;const v=new Uint8Array(H);for(;H--;)v[H]=rt.charCodeAt(H);const C=new Blob([v],{type:lt}),k=q.name.replace(/\.[^/.]+$/,"")+"_watermarked.png";FileSaver_minExports.saveAs(C,k)}else if(q.type==="pdf"&&q.pdfPages){const{PDFDocument:nt}=await __vitePreload(()=>import("./index-a9bfd821.js"),[],import.meta.url),ft=await nt.create();for(const v of q.pdfPages){const C=await ft.embedPng(v);ft.addPage([C.width,C.height]).drawImage(C,{x:0,y:0,width:C.width,height:C.height})}const lt=await ft.save(),rt=new Blob([lt],{type:"application/pdf"}),H=q.name.replace(/\.[^/.]+$/,"")+"_watermarked.pdf";FileSaver_minExports.saveAs(rt,H)}}catch(nt){console.error("下载失败:",nt)}finally{l.value=!1}}function pt(q){if(S.value=S.value.filter(nt=>nt.id!==q),S.value.length===1){const nt=S.value[0];P(nt.originalFile),S.value=[]}}function at(){S.value=[],y()}return(q,nt)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("input",{id:"load",absolute:"","left-0":"","m-3":"","w-16":"","opacity-0":"",type:"file",accept:"image/*, application/pdf",multiple:"",onChange:x},null,32),createBaseVNode("label",_hoisted_3$4,[createBaseVNode("span",_hoisted_4$4,toDisplayString(unref(w)?unref(e).loadBatch:unref(e).load),1)]),createBaseVNode("button",{absolute:"","left-25":"",class:"m-3 text-sm btn",disabled:!unref(g),onClick:N},toDisplayString(unref(w)?unref(e).downloadAll:unref(e).download),9,_hoisted_5$1),unref(w)?(openBlock(),createElementBlock("button",{key:0,absolute:"","left-50":"",class:"m-3 text-sm btn bg-red-500 hover:bg-red-600",onClick:at,disabled:unref(l)},toDisplayString(unref(e).clear),9,_hoisted_6$1)):createCommentVNode("",!0)]),unref(l)&&unref(w)?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,toDisplayString(unref(e).processing)+" "+toDisplayString(unref(u))+" / "+toDisplayString(unref(S).length),1),createBaseVNode("div",_hoisted_9$1,[createBaseVNode("div",{class:"progress-fill","h-full":"","bg-blue-500":"",rounded:"","transition-all":"",style:normalizeStyle({width:unref(S).length>0?unref(u)/unref(S).length*100+"%":"0%"})},null,4)])])):createCommentVNode("",!0),unref(w)?unref(g)?(openBlock(),createElementBlock("div",_hoisted_16$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(S),ft=>(openBlock(),createElementBlock("div",{key:ft.id,class:"file-item",border:"1 solid gray-200",rounded:"","p-2":"",relative:""},[createBaseVNode("button",{onClick:lt=>pt(ft.id),class:"delete-btn",absolute:"","top-1":"","right-1":"","w-6":"","h-6":"","bg-red-500":"","text-white":"","rounded-full":"","hover:bg-red-600":"","transition-colors":"","text-xs":""}," × ",8,_hoisted_17),ft.type==="image"?(openBlock(),createElementBlock("div",_hoisted_18,[createBaseVNode("img",{src:ft.processedDataUrl,alt:ft.name,class:"preview-image","w-full":"","h-32":"","object-cover":"",rounded:"","mb-2":""},null,8,_hoisted_19)])):ft.type==="pdf"?(openBlock(),createElementBlock("div",_hoisted_20,[createBaseVNode("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[nt[1]||(nt[1]=createBaseVNode("div",{"text-2xl":"","mb-1":""},"📄",-1)),nt[2]||(nt[2]=createBaseVNode("div",{"text-xs":"","text-gray-600":""},"PDF",-1)),ft.pdfPages?(openBlock(),createElementBlock("div",_hoisted_23,toDisplayString(ft.pdfPages.length)+" "+toDisplayString(unref(e).pages),1)):createCommentVNode("",!0)])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_24,[createBaseVNode("div",{truncate:"",title:ft.name},toDisplayString(ft.name),9,_hoisted_25),ft.type==="image"?(openBlock(),createElementBlock("div",_hoisted_26,toDisplayString(ft.width)+" × "+toDisplayString(ft.height),1)):ft.type==="pdf"?(openBlock(),createElementBlock("div",_hoisted_27,toDisplayString(unref(e).pdfDocument),1)):createCommentVNode("",!0)]),createBaseVNode("button",{onClick:lt=>Q(ft),class:"download-btn btn text-xs w-full",disabled:unref(l)},toDisplayString(unref(e).download),9,_hoisted_28)]))),128))])):unref(w)&&!unref(l)?(openBlock(),createElementBlock("div",_hoisted_29,[nt[3]||(nt[3]=createBaseVNode("div",{"text-4xl":"","mb-2":""},"📁",-1)),createBaseVNode("div",null,toDisplayString(unref(e).batchEmptyHint.replace("{loadBatch}",unref(e).loadBatch)),1)])):createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_10$1,[createBaseVNode("div",_hoisted_11$1,[unref(c)?(openBlock(),createElementBlock("div",_hoisted_12$1,[createBaseVNode("img",{ref_key:"preview",ref:h,src:unref(c),style:normalizeStyle(`width: ${t.config.width}px;height: ${t.config.height}px;max-width: unset;`)},null,12,_hoisted_13$1),createBaseVNode("canvas",{ref_key:"canvas",ref:a,"display-none":""},null,512)])):unref(f)?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("div",{ref_key:"wrap",ref:b},null,512)])):(openBlock(),createElementBlock("div",_hoisted_15$1,nt[0]||(nt[0]=[createBaseVNode("label",{for:"load","border-1":"","border-dashed":""},[createBaseVNode("span",{"icon-btn":"","text-10":"","display-block":"","i-carbon:task-add":""})],-1)])))])])),withDirectives(createBaseVNode("div",_hoisted_30,nt[4]||(nt[4]=[createBaseVNode("span",{class:"loading btn","i-carbon-3rd-party-connected":"","text-4xl":""},null,-1)]),512),[[vShow,unref(l)]])]))}}),TheMain_vue_vue_type_style_index_0_scoped_10e76939_lang="",_export_sfc=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},__unplugin_components_1=_export_sfc(_sfc_main$7,[["__scopeId","data-v-10e76939"]]);var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",noop=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,e){function n(...i){return new Promise((s,r)=>{Promise.resolve(t(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(r)})}return n}const bypassFilter=t=>t();function pausableFilter(t=bypassFilter){const e=ref(!0);function n(){e.value=!1}function i(){e.value=!0}const s=(...r)=>{e.value&&t(...r)};return{isActive:readonly(e),pause:n,resume:i,eventFilter:s}}function identity(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function resolveRef(t){return typeof t=="function"?computed(t):ref(t)}function tryOnMounted(t,e=!0){getCurrentInstance()?onMounted(t):e?t():nextTick(t)}function useToggle(t=!1,e={}){const{truthyValue:n=!0,falsyValue:i=!1}=e,s=isRef(t),r=ref(t);function a(h){if(arguments.length)return r.value=h,r.value;{const c=resolveUnref(n);return r.value=r.value===c?resolveUnref(i):c,r.value}}return s?a:[r,a]}var __getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__objRest$5=(t,e)=>{var n={};for(var i in t)__hasOwnProp$6.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&__getOwnPropSymbols$6)for(var i of __getOwnPropSymbols$6(t))e.indexOf(i)<0&&__propIsEnum$6.call(t,i)&&(n[i]=t[i]);return n};function watchWithFilter(t,e,n={}){const i=n,{eventFilter:s=bypassFilter}=i,r=__objRest$5(i,["eventFilter"]);return watch(t,createFilterWrapper(s,e),r)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(t,e,n)=>e in t?__defProp$2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$2=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$2.call(e,n)&&__defNormalProp$2(t,n,e[n]);if(__getOwnPropSymbols$2)for(var n of __getOwnPropSymbols$2(e))__propIsEnum$2.call(e,n)&&__defNormalProp$2(t,n,e[n]);return t},__spreadProps$2=(t,e)=>__defProps$2(t,__getOwnPropDescs$2(e)),__objRest$1=(t,e)=>{var n={};for(var i in t)__hasOwnProp$2.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&__getOwnPropSymbols$2)for(var i of __getOwnPropSymbols$2(t))e.indexOf(i)<0&&__propIsEnum$2.call(t,i)&&(n[i]=t[i]);return n};function watchPausable(t,e,n={}){const i=n,{eventFilter:s}=i,r=__objRest$1(i,["eventFilter"]),{eventFilter:a,pause:h,resume:c,isActive:f}=pausableFilter(s);return{stop:watchWithFilter(t,e,__spreadProps$2(__spreadValues$2({},r),{eventFilter:a})),pause:h,resume:c,isActive:f}}function unrefElement(t){var e;const n=resolveUnref(t);return(e=n==null?void 0:n.$el)!=null?e:n}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let e,n,i,s;if(isString(t[0])||Array.isArray(t[0])?([n,i,s]=t,e=defaultWindow):[e,n,i,s]=t,!e)return noop;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const r=[],a=()=>{r.forEach(l=>l()),r.length=0},h=(l,b,S,u)=>(l.addEventListener(b,S,u),()=>l.removeEventListener(b,S,u)),c=watch(()=>[unrefElement(e),resolveUnref(s)],([l,b])=>{a(),l&&r.push(...n.flatMap(S=>i.map(u=>h(l,S,u,b))))},{immediate:!0,flush:"post"}),f=()=>{c(),a()};return tryOnScopeDispose(f),f}function useSupported(t,e=!1){const n=ref(),i=()=>n.value=!!t();return i(),tryOnMounted(i,e),n}function useMediaQuery(t,e={}){const{window:n=defaultWindow}=e,i=useSupported(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const r=ref(!1),a=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",h):s.removeListener(h))},h=()=>{i.value&&(a(),s=n.matchMedia(resolveRef(t).value),r.value=s.matches,"addEventListener"in s?s.addEventListener("change",h):s.addListener(h))};return watchEffect(h),tryOnScopeDispose(()=>a()),r}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers=_global[globalKey];function getSSRHandler(t,e){return handlers[t]||e}function guessSerializerType(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}var __defProp$k=Object.defineProperty,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(t,e,n)=>e in t?__defProp$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$k=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$m.call(e,n)&&__defNormalProp$k(t,n,e[n]);if(__getOwnPropSymbols$m)for(var n of __getOwnPropSymbols$m(e))__propIsEnum$m.call(e,n)&&__defNormalProp$k(t,n,e[n]);return t};const StorageSerializers={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(t,e,n,i={}){var s;const{flush:r="pre",deep:a=!0,listenToStorageChanges:h=!0,writeDefaults:c=!0,mergeDefaults:f=!1,shallow:l,window:b=defaultWindow,eventFilter:S,onError:u=I=>{console.error(I)}}=i,w=(l?shallowRef:ref)(e);if(!n)try{n=getSSRHandler("getDefaultStorage",()=>{var I;return(I=defaultWindow)==null?void 0:I.localStorage})()}catch(I){u(I)}if(!n)return w;const g=resolveUnref(e),m=guessSerializerType(g),_=(s=i.serializer)!=null?s:StorageSerializers[m],{pause:x,resume:P}=watchPausable(w,()=>R(w.value),{flush:r,deep:a,eventFilter:S});return b&&h&&(useEventListener(b,"storage",B),useEventListener(b,customStorageEventName,F)),B(),w;function R(I){try{if(I==null)n.removeItem(t);else{const E=_.write(I),U=n.getItem(t);U!==E&&(n.setItem(t,E),b&&b.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:t,oldValue:U,newValue:E,storageArea:n}})))}}catch(E){u(E)}}function y(I){const E=I?I.newValue:n.getItem(t);if(E==null)return c&&g!==null&&n.setItem(t,_.write(g)),g;if(!I&&f){const U=_.read(E);return isFunction(f)?f(U,g):m==="object"&&!Array.isArray(U)?__spreadValues$k(__spreadValues$k({},g),U):U}else return typeof E!="string"?E:_.read(E)}function F(I){B(I.detail)}function B(I){if(!(I&&I.storageArea!==n)){if(I&&I.key==null){w.value=g;return}if(!(I&&I.key!==t)){x();try{w.value=y(I)}catch(E){u(E)}finally{I?nextTick(P):P()}}}}}function usePreferredDark(t){return useMediaQuery("(prefers-color-scheme: dark)",t)}var __defProp$j=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(t,e,n)=>e in t?__defProp$j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$j=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$l.call(e,n)&&__defNormalProp$j(t,n,e[n]);if(__getOwnPropSymbols$l)for(var n of __getOwnPropSymbols$l(e))__propIsEnum$l.call(e,n)&&__defNormalProp$j(t,n,e[n]);return t};function useColorMode(t={}){const{selector:e="html",attribute:n="class",initialValue:i="auto",window:s=defaultWindow,storage:r,storageKey:a="vueuse-color-scheme",listenToStorageChanges:h=!0,storageRef:c,emitAuto:f}=t,l=__spreadValues$j({auto:"",light:"light",dark:"dark"},t.modes||{}),b=usePreferredDark({window:s}),S=computed(()=>b.value?"dark":"light"),u=c||(a==null?ref(i):useStorage(a,i,r,{window:s,listenToStorageChanges:h})),w=computed({get(){return u.value==="auto"&&!f?S.value:u.value},set(x){u.value=x}}),g=getSSRHandler("updateHTMLAttrs",(x,P,R)=>{const y=s==null?void 0:s.document.querySelector(x);if(y)if(P==="class"){const F=R.split(/\s/g);Object.values(l).flatMap(B=>(B||"").split(/\s/g)).filter(Boolean).forEach(B=>{F.includes(B)?y.classList.add(B):y.classList.remove(B)})}else y.setAttribute(P,R)});function m(x){var P;const R=x==="auto"?S.value:x;g(e,n,(P=l[R])!=null?P:R)}function _(x){t.onChanged?t.onChanged(x,m):m(x)}return watch(w,_,{flush:"post",immediate:!0}),f&&watch(S,()=>_(w.value),{flush:"post"}),tryOnMounted(()=>_(w.value)),w}var __defProp$i=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(t,e,n)=>e in t?__defProp$i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues$i=(t,e)=>{for(var n in e||(e={}))__hasOwnProp$k.call(e,n)&&__defNormalProp$i(t,n,e[n]);if(__getOwnPropSymbols$k)for(var n of __getOwnPropSymbols$k(e))__propIsEnum$k.call(e,n)&&__defNormalProp$i(t,n,e[n]);return t},__spreadProps$7=(t,e)=>__defProps$7(t,__getOwnPropDescs$7(e));function useDark(t={}){const{valueDark:e="dark",valueLight:n="",window:i=defaultWindow}=t,s=useColorMode(__spreadProps$7(__spreadValues$i({},t),{onChanged:(h,c)=>{var f;t.onChanged?(f=t.onChanged)==null||f.call(t,h==="dark"):c(h)},modes:{dark:e,light:n}})),r=usePreferredDark({window:i});return computed({get(){return s.value==="dark"},set(h){h===r.value?s.value="auto":s.value=h?"dark":"light"}})}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues=(t,e)=>{for(var n in e||(e={}))__hasOwnProp.call(e,n)&&__defNormalProp(t,n,e[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))__propIsEnum.call(e,n)&&__defNormalProp(t,n,e[n]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(t,e,n,i={}){var s,r,a;const{clone:h=!1,passive:c=!1,eventName:f,deep:l=!1,defaultValue:b}=i,S=getCurrentInstance(),u=n||(S==null?void 0:S.emit)||((s=S==null?void 0:S.$emit)==null?void 0:s.bind(S))||((a=(r=S==null?void 0:S.proxy)==null?void 0:r.$emit)==null?void 0:a.bind(S==null?void 0:S.proxy));let w=f;e||(e="modelValue"),w=f||w||`update:${e.toString()}`;const g=_=>h?isFunction(h)?h(_):cloneFnJSON(_):_,m=()=>isDef(t[e])?g(t[e]):b;if(c){const _=m(),x=ref(_);return watch(()=>t[e],P=>x.value=g(P)),watch(x,P=>{(P!==t[e]||l)&&u(w,P)},{deep:l}),x}else return computed({get(){return m()},set(_){u(w,_)}})}const isDark=useDark(),toggleDark=useToggle(isDark),_hoisted_1$4={class:"footer-container"},_hoisted_2$3={"mt-6":"","inline-flex":"","gap-2":"","text-xl":""},_hoisted_3$3=["title"],_hoisted_4$3=["title"],_sfc_main$6=defineComponent({__name:"TheFooter",setup(t){const{t:e}=useI18n();return(n,i)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("nav",_hoisted_2$3,[createBaseVNode("button",{"icon-btn":"",onClick:i[0]||(i[0]=s=>("toggleDark"in n?n.toggleDark:unref(toggleDark))())},i[1]||(i[1]=[createBaseVNode("div",{"i-carbon-sun":"","dark:i-carbon-moon":""},null,-1)])),createBaseVNode("a",{"i-carbon-logo-github":"","icon-btn":"",rel:"noreferrer",href:"https://github.com/Efrice/watermark",target:"_blank",title:unref(e).originalProject},null,8,_hoisted_3$3),createBaseVNode("a",{"i-carbon-branch":"","icon-btn":"",rel:"noreferrer",href:"https://github.com/cottboy/watermark",target:"_blank",title:unref(e).forkWithEnhancements},null,8,_hoisted_4$3)])]))}}),_sfc_main$5=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(t,{emit:e}){const n=e;function i(){n("update:value",!t.value)}return(s,r)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["switch",`${t.value?"light":""}`]),type:"button",role:"switch"},[createBaseVNode("span",{class:normalizeClass(["check",`${t.value?"light":""}`]),onClick:i},null,2)],2))}}),TheSwitch_vue_vue_type_style_index_0_scoped_98965b6f_lang="",__unplugin_components_0=_export_sfc(_sfc_main$5,[["__scopeId","data-v-98965b6f"]]),__MACROS_useVModel=(...t)=>{const e=getCurrentInstance().proxy.$props,n=Object.create(null);for(const i of t)if(typeof i=="string")n[i]=useVModel(e,i,void 0,{eventName:`update:${i}`,passive:!0});else{const[s,r=s,a=`update:${s}`,h={}]=i;n[s]=useVModel(e,r,void 0,{eventName:a,passive:!0,...h})}return n},_hoisted_1$3={class:"color-picker","w-58":""},_hoisted_2$2={flex:"","items-center":"","gap-3":""},_hoisted_3$2={"flex-1":""},_hoisted_4$2={"text-sm":"","text-gray-600":"","mb-0.5":"",block:""},_sfc_main$4=defineComponent({__name:"ColorPicker",props:{value:null},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),{t:n}=useI18n(),i=l=>{const b=l.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return b?{r:parseInt(b[1]),g:parseInt(b[2]),b:parseInt(b[3]),a:b[4]?parseFloat(b[4]):1}:{r:0,g:0,b:0,a:.2}},s=(l,b,S)=>"#"+((1<<24)+(l<<16)+(b<<8)+S).toString(16).slice(1),r=l=>{const b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:{r:0,g:0,b:0}},a=computed(()=>i(e.value)),h=computed({get:()=>s(a.value.r,a.value.g,a.value.b),set:l=>{const b=r(l);f(b.r,b.g,b.b,a.value.a)}}),c=computed({get:()=>a.value.a,set:l=>{f(a.value.r,a.value.g,a.value.b,l)}}),f=(l,b,S,u)=>{e.value=`rgba(${l}, ${b}, ${S}, ${u})`};return(l,b)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":b[0]||(b[0]=S=>h.value=S),type:"color",class:"color-input","w-10":"","h-10":"",border:"1 solid gray-300",rounded:"","cursor-pointer":""},null,512),[[vModelText,h.value]])]),createBaseVNode("div",_hoisted_3$2,[createBaseVNode("label",_hoisted_4$2,toDisplayString(unref(n).opacity)+": "+toDisplayString(Math.round(c.value*100))+"%",1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":b[1]||(b[1]=S=>c.value=S),type:"range",min:"0",max:"1",step:"0.01",class:"opacity-slider",style:normalizeStyle({"--current-color":h.value}),"w-full":""},null,4),[[vModelText,c.value,void 0,{number:!0}]])])])]))}}),ColorPicker_vue_vue_type_style_index_0_scoped_e170c65e_lang="",ColorPicker=_export_sfc(_sfc_main$4,[["__scopeId","data-v-e170c65e"]]),WATERMWRK_KEY="watermark-config",defaultConfig={words:"仅用于工作认证",fontFamily:"Arial",width:0,height:0,fontSize:16,color:"rgba(0, 0, 0, 0.2)",rotate:-15,row:7,col:7,startX:-100,startY:0,offsetX:48,offsetY:48,compression:1,saveConfig:!1},fontOptions=[{value:"Arial",label:"Arial"},{value:"SimSun",label:"宋体"},{value:"SimHei",label:"黑体"},{value:"Microsoft YaHei",label:"微软雅黑"},{value:"KaiTi",label:"楷体"},{value:"FangSong",label:"仿宋"},{value:"Microsoft JhengHei",label:"微软正黑体"},{value:"PingFang SC",label:"苹方"},{value:"Hiragino Sans GB",label:"冬青黑体"},{value:"Source Han Sans CN",label:"思源黑体"},{value:"Source Han Serif CN",label:"思源宋体"},{value:"Noto Sans CJK SC",label:"Noto Sans 中文"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Verdana",label:"Verdana"},{value:"Courier New",label:"Courier New"}],_hoisted_1$2={"pb-1":"",flex:"","justify-between":"","flex-items-center":""},_hoisted_2$1=["for"],_hoisted_3$1=["title"],_hoisted_4$1={key:0},_hoisted_5={key:1},_hoisted_6={key:2},_hoisted_7=["value"],_hoisted_8={key:3},_hoisted_9=["id"],_hoisted_10={key:4,pt3:""},_hoisted_11=["title"],_hoisted_12={"py-2":""},_hoisted_13={key:5},_hoisted_14=["id"],_hoisted_15={key:6},_hoisted_16=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{property:null,value:{type:[String,Boolean]}},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),{t:n}=useI18n();return(i,s)=>{const r=__unplugin_components_0;return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("label",{for:t.property},[createTextVNode(toDisplayString(unref(n)[t.property])+" ",1),createBaseVNode("span",{"i-carbon-help":"","inline-block":"","text-sm":"","float-right":"",mt1:"",ml1:"",title:unref(n).tooltips[t.property]},null,8,_hoisted_3$1)],8,_hoisted_2$1),t.property==="saveConfig"?(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(r,{value:unref(e),"onUpdate:value":s[0]||(s[0]=a=>i.$emit("update:value",a))},null,8,["value"])])):t.property==="color"&&typeof unref(e)=="string"?(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(ColorPicker,{value:unref(e),"onUpdate:value":s[1]||(s[1]=a=>isRef(e)?e.value=a:null)},null,8,["value"])])):t.property==="fontFamily"&&typeof unref(e)=="string"?(openBlock(),createElementBlock("div",_hoisted_6,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>isRef(e)?e.value=a:null),p:"x-2 y-1","w-58":"",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none","cursor-pointer":""},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(fontOptions),a=>(openBlock(),createElementBlock("option",{key:a.value,value:a.value},toDisplayString(a.label),9,_hoisted_7))),128))],512),[[vModelSelect,unref(e)]])])):t.property==="words"&&typeof unref(e)=="string"?(openBlock(),createElementBlock("div",_hoisted_8,[withDirectives(createBaseVNode("textarea",{id:t.property,"onUpdate:modelValue":s[3]||(s[3]=a=>isRef(e)?e.value=a:null),"px-1.5":"",cols:"25",rows:"2",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},"      ",8,_hoisted_9),[[vModelText,unref(e)]])])):t.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_10,[withDirectives(createBaseVNode("input",{"w-58":"",class:"range",title:unref(n).compressionTitle,type:"range",min:"0",max:"1","onUpdate:modelValue":s[4]||(s[4]=a=>isRef(e)?e.value=a:null),step:"0.1"},null,8,_hoisted_11),[[vModelText,unref(e)]]),createBaseVNode("p",_hoisted_12,toDisplayString(unref(e)),1)])):typeof unref(e)=="number"?(openBlock(),createElementBlock("div",_hoisted_13,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":s[5]||(s[5]=a=>isRef(e)?e.value=a:null),type:"number",p:"x-0 y-1","w-58":"",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,_hoisted_14),[[vModelText,unref(e)]])])):(openBlock(),createElementBlock("div",_hoisted_15,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":s[6]||(s[6]=a=>isRef(e)?e.value=a:null),type:"text",p:"x-0 y-1","w-58":"",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,_hoisted_16),[[vModelText,unref(e)]])]))])}}}),_hoisted_1$1={"float-left":"","w-100":"",mt:"0","pt-2":"","border-1":"","border-rd":""},_hoisted_2={"text-sm":"",op75:""},_hoisted_3={"px-5":""},_hoisted_4={"text-sm":"",op75:""},_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(t){const{t:e}=useI18n();return(n,i)=>{const s=_sfc_main$3,r=_sfc_main$6;return openBlock(),createElementBlock("div",_hoisted_1$1,[i[0]||(i[0]=createBaseVNode("div",{"i-material-symbols-add-photo-alternate-rounded":"","inline-block":"","text-3xl":""},null,-1)),i[1]||(i[1]=createBaseVNode("div",{"i-carbon-add":"","inline-block":"","text-3xl":""},null,-1)),i[2]||(i[2]=createBaseVNode("div",{"i-material-symbols:picture-as-pdf":"","inline-block":"","text-3xl":""},null,-1)),createBaseVNode("p",null,toDisplayString(unref(e).title),1),createBaseVNode("p",null,[createBaseVNode("em",_hoisted_2,toDisplayString(unref(e).description),1)]),i[3]||(i[3]=createBaseVNode("div",{"py-2":""},null,-1)),createBaseVNode("div",_hoisted_3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.config,(a,h)=>(openBlock(),createBlock(s,{property:h,value:a,"onUpdate:value":c=>n.$emit("update",h,c)},null,8,["property","value","onUpdate:value"]))),256))]),i[4]||(i[4]=createBaseVNode("div",{"py-4":""},null,-1)),createBaseVNode("p",null,[createBaseVNode("em",_hoisted_4,toDisplayString(unref(e).noServerSafe),1)]),createVNode(r)])}}}),_sfc_main$1=defineComponent({__name:"index",setup(t){const e=localStorage.getItem(WATERMWRK_KEY),n=e&&JSON.parse(e),i=reactive(s(n)||defaultConfig);function s(h){if(!h)return;const{rotate:c,startX:f,startY:l}=h;return{...h,rotate:Number(c),startX:Number(f),startY:Number(l)}}const r=["words","fontFamily","color","rotate","startX","startY"];function a(h,c){h==="saveConfig"?i[h]=!!c:r.includes(h)?i[h]=c:i[h]=+c,h==="saveConfig"&&c===!1?localStorage.setItem(WATERMWRK_KEY,""):i.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(i))}return(h,c)=>{const f=_sfc_main$2,l=__unplugin_components_1;return openBlock(),createElementBlock("div",null,[createVNode(f,{config:unref(i),onUpdate:a},null,8,["config"]),createVNode(l,{config:unref(i)},null,8,["config"])])}}}),_hoisted_1={"font-sans":"",p:"x-4 y-4",text:"center gray-700 dark:gray-200"},_sfc_main=defineComponent({__name:"App",setup(t){return(e,n)=>(openBlock(),createElementBlock("main",_hoisted_1,[createVNode(_sfc_main$1)]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");export{getDefaultExportFromCjs as g};
